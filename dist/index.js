// @bun
var Hm=Object.create;var{defineProperty:Xq,getPrototypeOf:qm,getOwnPropertyNames:Km}=Object;var zm=Object.prototype.hasOwnProperty;var dF=(F,A,B)=>{B=F!=null?Hm(qm(F)):{};const D=A||!F||!F.__esModule?Xq(B,"default",{value:F,enumerable:!0}):B;for(let J of Km(F))if(!zm.call(D,J))Xq(D,J,{get:()=>F[J],enumerable:!0});return D};var z=(F,A)=>()=>(A||F((A={exports:{}}).exports,A),A.exports);var B6=z((Zd)=>{var QZ=function(F){return["[object ArrayBuffer]","[object SharedArrayBuffer]"].includes(Object.prototype.toString.call(F))},k9=function(F){return Object.prototype.toString.call(F)==="[object Uint8Array]"},x9=function(F){return Object.prototype.toString.call(F)==="[object RegExp]"},LZ=function(F){return Object.prototype.toString.call(F)==="[object Map]"},f9=function(F){return Object.prototype.toString.call(F)==="[object Date]"},b2=function(F,A){return JSON.stringify(F,(B,D)=>{if(typeof D==="bigint")return{$numberLong:`${D}`};else if(LZ(D))return Object.fromEntries(D);return D})},Um=function(F){if(F!=null&&typeof F==="object"&&"stylize"in F&&typeof F.stylize==="function")return F.stylize},hq=function(F,A,B,D){if(D){Yq??=new TextDecoder("utf8",{fatal:!0});try{return Yq.decode(F.subarray(A,B))}catch(J){throw new g("Invalid UTF-8 string in BSON document",{cause:J})}}return $q??=new TextDecoder("utf8",{fatal:!1}),$q.decode(F.subarray(A,B))},mq=function(F,A,B){if(F.length===0)return"";const D=B-A;if(D===0)return"";if(D>20)return null;if(D===1&&F[A]<128)return String.fromCharCode(F[A]);if(D===2&&F[A]<128&&F[A+1]<128)return String.fromCharCode(F[A])+String.fromCharCode(F[A+1]);if(D===3&&F[A]<128&&F[A+1]<128&&F[A+2]<128)return String.fromCharCode(F[A])+String.fromCharCode(F[A+1])+String.fromCharCode(F[A+2]);const J=[];for(let Z=A;Z<B;Z++){const X=F[Z];if(X>127)return null;J.push(X)}return String.fromCharCode(...J)},wm=function(F,A,B){if(A.length===0)return 0;if(A.length>25)return null;if(F.length-B<A.length)return null;for(let D=0,J=B;D<A.length;D++,J++){const Z=A.charCodeAt(D);if(Z>127)return null;F[J]=Z}return A.length},Rm=function(F){return n3.fromNumberArray(Array.from({length:F},()=>Math.floor(Math.random()*256)))},Nm=function(){const{navigator:F}=globalThis;return typeof F==="object"&&F.product==="ReactNative"},Pm=function(F){if(F<0)throw new RangeError(`The argument 'byteLength' is invalid. Received ${F}`);return M8.fromNumberArray(Array.from({length:F},()=>Math.floor(Math.random()*256)))},dq=function(F){return F!=null&&typeof F==="object"&&"$id"in F&&F.$id!=null&&"$ref"in F&&typeof F.$ref==="string"&&(!("$db"in F)||("$db"in F)&&typeof F.$db==="string")},cq=function(F){if(F==="")return F;let A=0;const B=F[A]==="-",D=F[A]==="+";if(D||B)A+=1;let J=!1;for(;A<F.length&&F[A]==="0";++A)J=!0;if(!J)return D?F.slice(1):F;return`${B?"-":""}${F.length===A?"0":F.slice(A)}`},Om=function(F,A){A=A??10;const B="0123456789abcdefghijklmnopqrstuvwxyz".slice(0,A);return new RegExp(`[^-+${B}]`,"i").test(F)?!1:F},Lq=function(F){return!isNaN(parseInt(F,10))},mm=function(F){const A=I.fromNumber(1e9);let B=I.fromNumber(0);if(!F.parts[0]&&!F.parts[1]&&!F.parts[2]&&!F.parts[3])return{quotient:F,rem:B};for(let D=0;D<=3;D++)B=B.shiftLeft(32),B=B.add(new I(F.parts[D],0)),F.parts[D]=B.div(A).low,B=B.modulo(A);return{quotient:F,rem:B}},dm=function(F,A){if(!F&&!A)return{high:I.fromNumber(0),low:I.fromNumber(0)};const B=F.shiftRightUnsigned(32),D=new I(F.getLowBits(),0),J=A.shiftRightUnsigned(32),Z=new I(A.getLowBits(),0);let X=B.multiply(J),Y=B.multiply(Z);const $=D.multiply(J);let G=D.multiply(Z);return X=X.add(Y.shiftRightUnsigned(32)),Y=new I(Y.getLowBits(),0).add($).add(G.shiftRightUnsigned(32)),X=X.add(Y.shiftRightUnsigned(32)),G=Y.shiftLeft(32).add(new I(G.getLowBits(),0)),{high:X,low:G}},cm=function(F,A){const B=F.high>>>0,D=A.high>>>0;if(B<D)return!0;else if(B===D){const J=F.low>>>0,Z=A.low>>>0;if(J<Z)return!0}return!1},L6=function(F,A){throw new g(`"${F}" is not a valid Decimal128 string - ${A}`)},cF=function(F,A,B){let D=5;if(Array.isArray(F))for(let J=0;J<F.length;J++)D+=wq(J.toString(),F[J],A,!0,B);else{if(typeof F?.toBSON==="function")F=F.toBSON();for(let J of Object.keys(F))D+=wq(J,F[J],A,!1,B)}return D},wq=function(F,A,B=!1,D=!1,J=!1){if(typeof A?.toBSON==="function")A=A.toBSON();switch(typeof A){case"string":return 1+k.utf8ByteLength(F)+1+4+k.utf8ByteLength(A)+1;case"number":if(Math.floor(A)===A&&A>=Tq&&A<=Mq)if(A>=j8&&A<=T8)return(F!=null?k.utf8ByteLength(F)+1:0)+5;else return(F!=null?k.utf8ByteLength(F)+1:0)+9;else return(F!=null?k.utf8ByteLength(F)+1:0)+9;case"undefined":if(D||!J)return(F!=null?k.utf8ByteLength(F)+1:0)+1;return 0;case"boolean":return(F!=null?k.utf8ByteLength(F)+1:0)+2;case"object":if(A!=null&&typeof A._bsontype==="string"&&A[Symbol.for("@@mdb.bson.version")]!==f4)throw new a3;else if(A==null||A._bsontype==="MinKey"||A._bsontype==="MaxKey")return(F!=null?k.utf8ByteLength(F)+1:0)+1;else if(A._bsontype==="ObjectId")return(F!=null?k.utf8ByteLength(F)+1:0)+13;else if(A instanceof Date||f9(A))return(F!=null?k.utf8ByteLength(F)+1:0)+9;else if(ArrayBuffer.isView(A)||A instanceof ArrayBuffer||QZ(A))return(F!=null?k.utf8ByteLength(F)+1:0)+6+A.byteLength;else if(A._bsontype==="Long"||A._bsontype==="Double"||A._bsontype==="Timestamp")return(F!=null?k.utf8ByteLength(F)+1:0)+9;else if(A._bsontype==="Decimal128")return(F!=null?k.utf8ByteLength(F)+1:0)+17;else if(A._bsontype==="Code")if(A.scope!=null&&Object.keys(A.scope).length>0)return(F!=null?k.utf8ByteLength(F)+1:0)+1+4+4+k.utf8ByteLength(A.code.toString())+1+cF(A.scope,B,J);else return(F!=null?k.utf8ByteLength(F)+1:0)+1+4+k.utf8ByteLength(A.code.toString())+1;else if(A._bsontype==="Binary"){const Z=A;if(Z.sub_type===z1.SUBTYPE_BYTE_ARRAY)return(F!=null?k.utf8ByteLength(F)+1:0)+(Z.position+1+4+1+4);else return(F!=null?k.utf8ByteLength(F)+1:0)+(Z.position+1+4+1)}else if(A._bsontype==="Symbol")return(F!=null?k.utf8ByteLength(F)+1:0)+k.utf8ByteLength(A.value)+4+1+1;else if(A._bsontype==="DBRef"){const Z=Object.assign({$ref:A.collection,$id:A.oid},A.fields);if(A.db!=null)Z.$db=A.db;return(F!=null?k.utf8ByteLength(F)+1:0)+1+cF(Z,B,J)}else if(A instanceof RegExp||x9(A))return(F!=null?k.utf8ByteLength(F)+1:0)+1+k.utf8ByteLength(A.source)+1+(A.global?1:0)+(A.ignoreCase?1:0)+(A.multiline?1:0)+1;else if(A._bsontype==="BSONRegExp")return(F!=null?k.utf8ByteLength(F)+1:0)+1+k.utf8ByteLength(A.pattern)+1+k.utf8ByteLength(A.options)+1;else return(F!=null?k.utf8ByteLength(F)+1:0)+cF(A,B,J)+1;case"function":if(B)return(F!=null?k.utf8ByteLength(F)+1:0)+1+4+k.utf8ByteLength(A.toString())+1}return 0},pm=function(F){return F.split("").sort().join("")},pq=function(F,A,B){A=A==null?{}:A;const D=A&&A.index?A.index:0,J=F1.getInt32LE(F,D);if(J<5)throw new g(`bson size must be >= 5, is ${J}`);if(A.allowObjectSmallerThanBufferSize&&F.length<J)throw new g(`buffer length ${F.length} must be >= bson size ${J}`);if(!A.allowObjectSmallerThanBufferSize&&F.length!==J)throw new g(`buffer length ${F.length} must === bson size ${J}`);if(J+D>F.byteLength)throw new g(`(bson size ${J} + options.index ${D} must be <= buffer length ${F.byteLength})`);if(F[D+J-1]!==0)throw new g("One object, sized correctly, with a spot for an EOO, but the EOO isn't 0x00");return lF(F,D,A,B)},lF=function(F,A,B,D=!1){const J=B.fieldsAsRaw==null?null:B.fieldsAsRaw,Z=B.raw==null?!1:B.raw,X=typeof B.bsonRegExp==="boolean"?B.bsonRegExp:!1,Y=B.promoteBuffers??!1,$=B.promoteLongs??!0,G=B.promoteValues??!0,E=B.useBigInt64??!1;if(E&&!G)throw new g("Must either request bigint or Long for int64 deserialization");if(E&&!$)throw new g("Must either request bigint or Long for int64 deserialization");const W=B.validation==null?{utf8:!0}:B.validation;let C=!0,H,q;const K=W.utf8;if(typeof K==="boolean")H=K;else{C=!1;const T=Object.keys(K).map(function(P){return K[P]});if(T.length===0)throw new g("UTF-8 validation setting cannot be empty");if(typeof T[0]!=="boolean")throw new g("Invalid UTF-8 validation option, must specify boolean values");if(H=T[0],!T.every((P)=>P===H))throw new g("Invalid UTF-8 validation option - keys must be all true or all false")}if(!C){q=new Set;for(let T of Object.keys(K))q.add(T)}const U=A;if(F.length<5)throw new g("corrupt bson message < 5 bytes long");const Q=F1.getInt32LE(F,A);if(A+=4,Q<5||Q>F.length)throw new g("corrupt bson message");const V=D?[]:{};let L=0;const N=!1;let h=D?!1:null;while(!N){const T=F[A++];if(T===0)break;let P=A;while(F[P]!==0&&P<F.length)P++;if(P>=F.byteLength)throw new g("Bad BSON Document: illegal CString");const x=D?L++:k.toUTF8(F,A,P,!1);let c=!0;if(C||q?.has(x))c=H;else c=!H;if(h!==!1&&x[0]==="$")h=am.test(x);let u;if(A=P+1,T===jq){const O=F1.getInt32LE(F,A);if(A+=4,O<=0||O>F.length-A||F[A+O-1]!==0)throw new g("bad string length in bson");u=k.toUTF8(F,A,A+O-1,c),A=A+O}else if(T===Oq){const O=k.allocateUnsafe(12);for(let j=0;j<12;j++)O[j]=F[A+j];u=new D0(O),A=A+12}else if(T===N8&&G===!1)u=new C3(F1.getInt32LE(F,A)),A+=4;else if(T===N8)u=F1.getInt32LE(F,A),A+=4;else if(T===VZ){if(u=F1.getFloat64LE(F,A),A+=8,G===!1)u=new e2(u)}else if(T===kq){const O=F1.getInt32LE(F,A),j=F1.getInt32LE(F,A+4);A+=8,u=new Date(new I(O,j).toNumber())}else if(T===Sq){if(F[A]!==0&&F[A]!==1)throw new g("illegal boolean type value");u=F[A++]===1}else if(T===wZ){const O=A,j=F1.getInt32LE(F,A);if(j<=0||j>F.length-A)throw new g("bad embedded document length in bson");if(Z)u=F.slice(A,A+j);else{let _=B;if(!C)_={...B,validation:{utf8:c}};u=lF(F,O,_,!1)}A=A+j}else if(T===uq){const O=A,j=F1.getInt32LE(F,A);let _=B;const s=A+j;if(J&&J[x])_={...B,raw:!0};if(!C)_={..._,validation:{utf8:c}};if(u=lF(F,O,_,!0),A=A+j,F[A-1]!==0)throw new g("invalid array terminator byte");if(A!==s)throw new g("corrupted array bson")}else if(T===Qm)u=void 0;else if(T===IZ)u=null;else if(T===PZ)if(E)u=F1.getBigInt64LE(F,A),A+=8;else{const O=F1.getInt32LE(F,A),j=F1.getInt32LE(F,A+4);A+=8;const _=new I(O,j);if($&&G===!0)u=_.lessThanOrEqual(nm)&&_.greaterThanOrEqual(sm)?_.toNumber():_;else u=_}else if(T===gq){const O=k.allocateUnsafe(16);for(let j=0;j<16;j++)O[j]=F[A+j];A=A+16,u=new s0(O)}else if(T===RZ){let O=F1.getInt32LE(F,A);A+=4;const j=O,_=F[A++];if(O<0)throw new g("Negative binary type element size found");if(O>F.byteLength)throw new g("Binary type size larger than document size");if(F.slice!=null){if(_===z1.SUBTYPE_BYTE_ARRAY){if(O=F1.getInt32LE(F,A),A+=4,O<0)throw new g("Negative binary type element size found for subtype 0x02");if(O>j-4)throw new g("Binary type with subtype 0x02 contains too long binary size");if(O<j-4)throw new g("Binary type with subtype 0x02 contains too short binary size")}if(Y&&G)u=k.toLocalBufferType(F.slice(A,A+O));else if(u=new z1(F.slice(A,A+O),_),_===iF&&M0.isValid(u))u=u.toUUID()}else{if(_===z1.SUBTYPE_BYTE_ARRAY){if(O=F1.getInt32LE(F,A),A+=4,O<0)throw new g("Negative binary type element size found for subtype 0x02");if(O>j-4)throw new g("Binary type with subtype 0x02 contains too long binary size");if(O<j-4)throw new g("Binary type with subtype 0x02 contains too short binary size")}if(Y&&G){u=k.allocateUnsafe(O);for(P=0;P<O;P++)u[P]=F[A+P]}else if(u=new z1(F.slice(A,A+O),_),_===iF&&M0.isValid(u))u=u.toUUID()}A=A+O}else if(T===pF&&X===!1){P=A;while(F[P]!==0&&P<F.length)P++;if(P>=F.length)throw new g("Bad BSON Document: illegal CString");const O=k.toUTF8(F,A,P,!1);A=P+1,P=A;while(F[P]!==0&&P<F.length)P++;if(P>=F.length)throw new g("Bad BSON Document: illegal CString");const j=k.toUTF8(F,A,P,!1);A=P+1;const _=new Array(j.length);for(P=0;P<j.length;P++)switch(j[P]){case"m":_[P]="m";break;case"s":_[P]="g";break;case"i":_[P]="i";break}u=new RegExp(O,_.join(""))}else if(T===pF&&X===!0){P=A;while(F[P]!==0&&P<F.length)P++;if(P>=F.length)throw new g("Bad BSON Document: illegal CString");const O=k.toUTF8(F,A,P,!1);A=P+1,P=A;while(F[P]!==0&&P<F.length)P++;if(P>=F.length)throw new g("Bad BSON Document: illegal CString");const j=k.toUTF8(F,A,P,!1);A=P+1,u=new A6(O,j)}else if(T===xq){const O=F1.getInt32LE(F,A);if(A+=4,O<=0||O>F.length-A||F[A+O-1]!==0)throw new g("bad string length in bson");const j=k.toUTF8(F,A,A+O-1,c);u=G?j:new b4(j),A=A+O}else if(T===_q)u=new F6({i:F1.getUint32LE(F,A),t:F1.getUint32LE(F,A+4)}),A+=8;else if(T===bq)u=new g4;else if(T===yq)u=new _4;else if(T===NZ){const O=F1.getInt32LE(F,A);if(A+=4,O<=0||O>F.length-A||F[A+O-1]!==0)throw new g("bad string length in bson");const j=k.toUTF8(F,A,A+O-1,c);u=new W3(j),A=A+O}else if(T===fq){const O=F1.getInt32LE(F,A);if(A+=4,O<13)throw new g("code_w_scope total size shorter minimum expected length");const j=F1.getInt32LE(F,A);if(A+=4,j<=0||j>F.length-A||F[A+j-1]!==0)throw new g("bad string length in bson");const _=k.toUTF8(F,A,A+j-1,c);A=A+j;const s=A,_1=F1.getInt32LE(F,A),p0=lF(F,s,B,!1);if(A=A+_1,O<8+_1+j)throw new g("code_w_scope total size is too short, truncating scope");if(O>8+_1+j)throw new g("code_w_scope total size is too long, clips outer document");u=new W3(_,p0)}else if(T===Lm){const O=F1.getInt32LE(F,A);if(A+=4,O<=0||O>F.length-A||F[A+O-1]!==0)throw new g("bad string length in bson");const j=k.toUTF8(F,A,A+O-1,c);A=A+O;const _=k.allocateUnsafe(12);for(let _1=0;_1<12;_1++)_[_1]=F[A+_1];const s=new D0(_);A=A+12,u=new i6(j,s)}else throw new g(`Detected unknown BSON type ${T.toString(16)} for fieldname "${x}"`);if(x==="__proto__")Object.defineProperty(V,x,{value:u,writable:!0,enumerable:!0,configurable:!0});else V[x]=u}if(Q!==A-U){if(D)throw new g("corrupt array bson");throw new g("corrupt object bson")}if(!h)return V;if(dq(V)){const T=Object.assign({},V);return delete T.$ref,delete T.$id,delete T.$db,new i6(V.$ref,V.$id,V.$db,T)}return V},rJ=function(F,A,B,D){F[D++]=jq;const J=k.encodeUTF8Into(F,A,D);D=D+J+1,F[D-1]=0;const Z=k.encodeUTF8Into(F,B,D+4);return F1.setInt32LE(F,D,Z+1),D=D+4+Z,F[D++]=0,D},tJ=function(F,A,B,D){const Z=!Object.is(B,-0)&&Number.isSafeInteger(B)&&B<=T8&&B>=j8?N8:VZ;F[D++]=Z;const X=k.encodeUTF8Into(F,A,D);if(D=D+X,F[D++]=0,Z===N8)D+=F1.setInt32LE(F,D,B);else D+=F1.setFloat64LE(F,D,B);return D},oJ=function(F,A,B,D){F[D++]=PZ;const J=k.encodeUTF8Into(F,A,D);return D+=J,F[D++]=0,D+=F1.setBigInt64LE(F,D,B),D},I8=function(F,A,B,D){F[D++]=IZ;const J=k.encodeUTF8Into(F,A,D);return D=D+J,F[D++]=0,D},eJ=function(F,A,B,D){F[D++]=Sq;const J=k.encodeUTF8Into(F,A,D);return D=D+J,F[D++]=0,F[D++]=B?1:0,D},FZ=function(F,A,B,D){F[D++]=kq;const J=k.encodeUTF8Into(F,A,D);D=D+J,F[D++]=0;const Z=I.fromNumber(B.getTime()),X=Z.getLowBits(),Y=Z.getHighBits();return D+=F1.setInt32LE(F,D,X),D+=F1.setInt32LE(F,D,Y),D},AZ=function(F,A,B,D){F[D++]=pF;const J=k.encodeUTF8Into(F,A,D);if(D=D+J,F[D++]=0,B.source&&B.source.match(nF)!=null)throw new g("value "+B.source+" must not contain null bytes");if(D=D+k.encodeUTF8Into(F,B.source,D),F[D++]=0,B.ignoreCase)F[D++]=105;if(B.global)F[D++]=115;if(B.multiline)F[D++]=109;return F[D++]=0,D},BZ=function(F,A,B,D){F[D++]=pF;const J=k.encodeUTF8Into(F,A,D);if(D=D+J,F[D++]=0,B.pattern.match(nF)!=null)throw new g("pattern "+B.pattern+" must not contain null bytes");D=D+k.encodeUTF8Into(F,B.pattern,D),F[D++]=0;const Z=B.options.split("").sort().join("");return D=D+k.encodeUTF8Into(F,Z,D),F[D++]=0,D},DZ=function(F,A,B,D){if(B===null)F[D++]=IZ;else if(B._bsontype==="MinKey")F[D++]=bq;else F[D++]=yq;const J=k.encodeUTF8Into(F,A,D);return D=D+J,F[D++]=0,D},JZ=function(F,A,B,D){F[D++]=Oq;const J=k.encodeUTF8Into(F,A,D);return D=D+J,F[D++]=0,D+=B.serializeInto(F,D),D},ZZ=function(F,A,B,D){F[D++]=RZ;const J=k.encodeUTF8Into(F,A,D);D=D+J,F[D++]=0;const Z=B.length;if(D+=F1.setInt32LE(F,D,Z),F[D++]=Vm,Z<=16)for(let X=0;X<Z;X++)F[D+X]=B[X];else F.set(B,D);return D=D+Z,D},XZ=function(F,A,B,D,J,Z,X,Y,$){if($.has(B))throw new g("Cannot convert circular structure to BSON");$.add(B),F[D++]=Array.isArray(B)?uq:wZ;const G=k.encodeUTF8Into(F,A,D);D=D+G,F[D++]=0;const E=u8(F,B,J,D,Z+1,X,Y,$);return $.delete(B),E},YZ=function(F,A,B,D){F[D++]=gq;const J=k.encodeUTF8Into(F,A,D);D=D+J,F[D++]=0;for(let Z=0;Z<16;Z++)F[D+Z]=B.bytes[Z];return D+16},$Z=function(F,A,B,D){F[D++]=B._bsontype==="Long"?PZ:_q;const J=k.encodeUTF8Into(F,A,D);D=D+J,F[D++]=0;const Z=B.getLowBits(),X=B.getHighBits();return D+=F1.setInt32LE(F,D,Z),D+=F1.setInt32LE(F,D,X),D},GZ=function(F,A,B,D){B=B.valueOf(),F[D++]=N8;const J=k.encodeUTF8Into(F,A,D);return D=D+J,F[D++]=0,D+=F1.setInt32LE(F,D,B),D},EZ=function(F,A,B,D){F[D++]=VZ;const J=k.encodeUTF8Into(F,A,D);return D=D+J,F[D++]=0,D+=F1.setFloat64LE(F,D,B.value),D},WZ=function(F,A,B,D){F[D++]=NZ;const J=k.encodeUTF8Into(F,A,D);D=D+J,F[D++]=0;const Z=B.toString(),X=k.encodeUTF8Into(F,Z,D+4)+1;return F1.setInt32LE(F,D,X),D=D+4+X-1,F[D++]=0,D},CZ=function(F,A,B,D,J=!1,Z=0,X=!1,Y=!0,$){if(B.scope&&typeof B.scope==="object"){F[D++]=fq;const G=k.encodeUTF8Into(F,A,D);D=D+G,F[D++]=0;let E=D;const W=B.code;D=D+4;const C=k.encodeUTF8Into(F,W,D+4)+1;F1.setInt32LE(F,D,C),F[D+4+C-1]=0,D=D+C+4;const H=u8(F,B.scope,J,D,Z+1,X,Y,$);D=H-1;const q=H-E;E+=F1.setInt32LE(F,E,q),F[D++]=0}else{F[D++]=NZ;const G=k.encodeUTF8Into(F,A,D);D=D+G,F[D++]=0;const E=B.code.toString(),W=k.encodeUTF8Into(F,E,D+4)+1;F1.setInt32LE(F,D,W),D=D+4+W-1,F[D++]=0}return D},HZ=function(F,A,B,D){F[D++]=RZ;const J=k.encodeUTF8Into(F,A,D);D=D+J,F[D++]=0;const Z=B.buffer;let X=B.position;if(B.sub_type===z1.SUBTYPE_BYTE_ARRAY)X=X+4;if(D+=F1.setInt32LE(F,D,X),F[D++]=B.sub_type,B.sub_type===z1.SUBTYPE_BYTE_ARRAY)X=X-4,D+=F1.setInt32LE(F,D,X);if(X<=16)for(let Y=0;Y<X;Y++)F[D+Y]=Z[Y];else F.set(Z,D);return D=D+B.position,D},qZ=function(F,A,B,D){F[D++]=xq;const J=k.encodeUTF8Into(F,A,D);D=D+J,F[D++]=0;const Z=k.encodeUTF8Into(F,B.value,D+4)+1;return F1.setInt32LE(F,D,Z),D=D+4+Z-1,F[D++]=0,D},KZ=function(F,A,B,D,J,Z,X){F[D++]=wZ;const Y=k.encodeUTF8Into(F,A,D);D=D+Y,F[D++]=0;let $=D,G={$ref:B.collection||B.namespace,$id:B.oid};if(B.db!=null)G.$db=B.db;G=Object.assign(G,B.fields);const E=u8(F,G,!1,D,J+1,Z,!0,X),W=E-$;return $+=F1.setInt32LE(F,D,W),E},u8=function(F,A,B,D,J,Z,X,Y){if(Y==null){if(A==null)return F[0]=5,F[1]=0,F[2]=0,F[3]=0,F[4]=0,5;if(Array.isArray(A))throw new g("serialize does not support an array as the root input");if(typeof A!=="object")throw new g("serialize does not support non-object as the root input");else if("_bsontype"in A&&typeof A._bsontype==="string")throw new g("BSON types cannot be serialized as a document");else if(f9(A)||x9(A)||k9(A)||QZ(A))throw new g("date, regexp, typedarray, and arraybuffer cannot be BSON documents");Y=new Set}Y.add(A);let $=D+4;if(Array.isArray(A))for(let E=0;E<A.length;E++){const W=`${E}`;let C=A[E];if(typeof C?.toBSON==="function")C=C.toBSON();if(typeof C==="string")$=rJ(F,W,C,$);else if(typeof C==="number")$=tJ(F,W,C,$);else if(typeof C==="bigint")$=oJ(F,W,C,$);else if(typeof C==="boolean")$=eJ(F,W,C,$);else if(C instanceof Date||f9(C))$=FZ(F,W,C,$);else if(C===void 0)$=I8(F,W,C,$);else if(C===null)$=I8(F,W,C,$);else if(k9(C))$=ZZ(F,W,C,$);else if(C instanceof RegExp||x9(C))$=AZ(F,W,C,$);else if(typeof C==="object"&&C._bsontype==null)$=XZ(F,W,C,$,B,J,Z,X,Y);else if(typeof C==="object"&&C[Symbol.for("@@mdb.bson.version")]!==f4)throw new a3;else if(C._bsontype==="ObjectId")$=JZ(F,W,C,$);else if(C._bsontype==="Decimal128")$=YZ(F,W,C,$);else if(C._bsontype==="Long"||C._bsontype==="Timestamp")$=$Z(F,W,C,$);else if(C._bsontype==="Double")$=EZ(F,W,C,$);else if(typeof C==="function"&&Z)$=WZ(F,W,C,$);else if(C._bsontype==="Code")$=CZ(F,W,C,$,B,J,Z,X,Y);else if(C._bsontype==="Binary")$=HZ(F,W,C,$);else if(C._bsontype==="BSONSymbol")$=qZ(F,W,C,$);else if(C._bsontype==="DBRef")$=KZ(F,W,C,$,J,Z,Y);else if(C._bsontype==="BSONRegExp")$=BZ(F,W,C,$);else if(C._bsontype==="Int32")$=GZ(F,W,C,$);else if(C._bsontype==="MinKey"||C._bsontype==="MaxKey")$=DZ(F,W,C,$);else if(typeof C._bsontype!=="undefined")throw new g(`Unrecognized or invalid _bsontype: ${String(C._bsontype)}`)}else if(A instanceof Map||LZ(A)){const E=A.entries();let W=!1;while(!W){const C=E.next();if(W=!!C.done,W)continue;const H=C.value[0];let q=C.value[1];if(typeof q?.toBSON==="function")q=q.toBSON();const K=typeof q;if(typeof H==="string"&&!Rq.has(H)){if(H.match(nF)!=null)throw new g("key "+H+" must not contain null bytes");if(B){if(H[0]==="$")throw new g("key "+H+" must not start with '$'");else if(H.includes("."))throw new g("key "+H+" must not contain '.'")}}if(K==="string")$=rJ(F,H,q,$);else if(K==="number")$=tJ(F,H,q,$);else if(K==="bigint")$=oJ(F,H,q,$);else if(K==="boolean")$=eJ(F,H,q,$);else if(q instanceof Date||f9(q))$=FZ(F,H,q,$);else if(q===null||q===void 0&&X===!1)$=I8(F,H,q,$);else if(k9(q))$=ZZ(F,H,q,$);else if(q instanceof RegExp||x9(q))$=AZ(F,H,q,$);else if(K==="object"&&q._bsontype==null)$=XZ(F,H,q,$,B,J,Z,X,Y);else if(typeof q==="object"&&q[Symbol.for("@@mdb.bson.version")]!==f4)throw new a3;else if(q._bsontype==="ObjectId")$=JZ(F,H,q,$);else if(K==="object"&&q._bsontype==="Decimal128")$=YZ(F,H,q,$);else if(q._bsontype==="Long"||q._bsontype==="Timestamp")$=$Z(F,H,q,$);else if(q._bsontype==="Double")$=EZ(F,H,q,$);else if(q._bsontype==="Code")$=CZ(F,H,q,$,B,J,Z,X,Y);else if(typeof q==="function"&&Z)$=WZ(F,H,q,$);else if(q._bsontype==="Binary")$=HZ(F,H,q,$);else if(q._bsontype==="BSONSymbol")$=qZ(F,H,q,$);else if(q._bsontype==="DBRef")$=KZ(F,H,q,$,J,Z,Y);else if(q._bsontype==="BSONRegExp")$=BZ(F,H,q,$);else if(q._bsontype==="Int32")$=GZ(F,H,q,$);else if(q._bsontype==="MinKey"||q._bsontype==="MaxKey")$=DZ(F,H,q,$);else if(typeof q._bsontype!=="undefined")throw new g(`Unrecognized or invalid _bsontype: ${String(q._bsontype)}`)}}else{if(typeof A?.toBSON==="function"){if(A=A.toBSON(),A!=null&&typeof A!=="object")throw new g("toBSON function did not return an object")}for(let E of Object.keys(A)){let W=A[E];if(typeof W?.toBSON==="function")W=W.toBSON();const C=typeof W;if(typeof E==="string"&&!Rq.has(E)){if(E.match(nF)!=null)throw new g("key "+E+" must not contain null bytes");if(B){if(E[0]==="$")throw new g("key "+E+" must not start with '$'");else if(E.includes("."))throw new g("key "+E+" must not contain '.'")}}if(C==="string")$=rJ(F,E,W,$);else if(C==="number")$=tJ(F,E,W,$);else if(C==="bigint")$=oJ(F,E,W,$);else if(C==="boolean")$=eJ(F,E,W,$);else if(W instanceof Date||f9(W))$=FZ(F,E,W,$);else if(W===void 0){if(X===!1)$=I8(F,E,W,$)}else if(W===null)$=I8(F,E,W,$);else if(k9(W))$=ZZ(F,E,W,$);else if(W instanceof RegExp||x9(W))$=AZ(F,E,W,$);else if(C==="object"&&W._bsontype==null)$=XZ(F,E,W,$,B,J,Z,X,Y);else if(typeof W==="object"&&W[Symbol.for("@@mdb.bson.version")]!==f4)throw new a3;else if(W._bsontype==="ObjectId")$=JZ(F,E,W,$);else if(C==="object"&&W._bsontype==="Decimal128")$=YZ(F,E,W,$);else if(W._bsontype==="Long"||W._bsontype==="Timestamp")$=$Z(F,E,W,$);else if(W._bsontype==="Double")$=EZ(F,E,W,$);else if(W._bsontype==="Code")$=CZ(F,E,W,$,B,J,Z,X,Y);else if(typeof W==="function"&&Z)$=WZ(F,E,W,$);else if(W._bsontype==="Binary")$=HZ(F,E,W,$);else if(W._bsontype==="BSONSymbol")$=qZ(F,E,W,$);else if(W._bsontype==="DBRef")$=KZ(F,E,W,$,J,Z,Y);else if(W._bsontype==="BSONRegExp")$=BZ(F,E,W,$);else if(W._bsontype==="Int32")$=GZ(F,E,W,$);else if(W._bsontype==="MinKey"||W._bsontype==="MaxKey")$=DZ(F,E,W,$);else if(typeof W._bsontype!=="undefined")throw new g(`Unrecognized or invalid _bsontype: ${String(W._bsontype)}`)}}Y.delete(A),F[$++]=0;const G=$-D;return D+=F1.setInt32LE(F,D,G),$},rm=function(F){return F!=null&&typeof F==="object"&&"_bsontype"in F&&typeof F._bsontype==="string"},iq=function(F,A={}){if(typeof F==="number"){const D=F<=T8&&F>=j8,J=F<=Nq&&F>=Pq;if(A.relaxed||A.legacy)return F;if(Number.isInteger(F)&&!Object.is(F,-0)){if(D)return new C3(F);if(J){if(A.useBigInt64)return BigInt(F);return I.fromNumber(F)}}return new e2(F)}if(F==null||typeof F!=="object")return F;if(F.$undefined)return null;const B=Object.keys(F).filter((D)=>D.startsWith("$")&&F[D]!=null);for(let D=0;D<B.length;D++){const J=tm[B[D]];if(J)return J.fromExtendedJSON(F,A)}if(F.$date!=null){const D=F.$date,J=new Date;if(A.legacy)if(typeof D==="number")J.setTime(D);else if(typeof D==="string")J.setTime(Date.parse(D));else if(typeof D==="bigint")J.setTime(Number(D));else throw new P8(`Unrecognized type for EJSON date: ${typeof D}`);else if(typeof D==="string")J.setTime(Date.parse(D));else if(I.isLong(D))J.setTime(D.toNumber());else if(typeof D==="number"&&A.relaxed)J.setTime(D);else if(typeof D==="bigint")J.setTime(Number(D));else throw new P8(`Unrecognized type for EJSON date: ${typeof D}`);return J}if(F.$code!=null){const D=Object.assign({},F);if(F.$scope)D.$scope=iq(F.$scope);return W3.fromExtendedJSON(F)}if(dq(F)||F.$dbPointer){const D=F.$ref?F:F.$dbPointer;if(D instanceof i6)return D;const J=Object.keys(D).filter((X)=>X.startsWith("$"));let Z=!0;if(J.forEach((X)=>{if(["$ref","$id","$db"].indexOf(X)===-1)Z=!1}),Z)return i6.fromExtendedJSON(D)}return F},om=function(F,A){return F.map((B,D)=>{A.seenObjects.push({propertyName:`index ${D}`,obj:null});try{return E3(B,A)}finally{A.seenObjects.pop()}})},Iq=function(F){const A=F.toISOString();return F.getUTCMilliseconds()!==0?A:A.slice(0,-5)+"Z"},E3=function(F,A){if(F instanceof Map||LZ(F)){const B=Object.create(null);for(let[D,J]of F){if(typeof D!=="string")throw new g("Can only serialize maps with string keys");B[D]=J}return E3(B,A)}if((typeof F==="object"||typeof F==="function")&&F!==null){const B=A.seenObjects.findIndex((D)=>D.obj===F);if(B!==-1){const D=A.seenObjects.map((E)=>E.propertyName),J=D.slice(0,B).map((E)=>`${E} -> `).join(""),Z=D[B],X=" -> "+D.slice(B+1,D.length-1).map((E)=>`${E} -> `).join(""),Y=D[D.length-1],$=" ".repeat(J.length+Z.length/2),G="-".repeat(X.length+(Z.length+Y.length)/2-1);throw new g(`Converting circular structure to EJSON:\n    ${J}${Z}${X}${Y}\n    ${$}\\${G}/`)}A.seenObjects[A.seenObjects.length-1].obj=F}if(Array.isArray(F))return om(F,A);if(F===void 0)return null;if(F instanceof Date||f9(F)){const B=F.getTime(),D=B>-1&&B<253402318800000;if(A.legacy)return A.relaxed&&D?{$date:F.getTime()}:{$date:Iq(F)};return A.relaxed&&D?{$date:Iq(F)}:{$date:{$numberLong:F.getTime().toString()}}}if(typeof F==="number"&&(!A.relaxed||!isFinite(F))){if(Number.isInteger(F)&&!Object.is(F,-0)){if(F>=j8&&F<=T8)return{$numberInt:F.toString()};if(F>=Pq&&F<=Nq)return{$numberLong:F.toString()}}return{$numberDouble:Object.is(F,-0)?"-0.0":F.toString()}}if(typeof F==="bigint"){if(!A.relaxed)return{$numberLong:BigInt.asIntN(64,F).toString()};return Number(BigInt.asIntN(64,F))}if(F instanceof RegExp||x9(F)){let B=F.flags;if(B===void 0){const J=F.toString().match(/[gimuy]*$/);if(J)B=J[0]}return new A6(F.source,B).toExtendedJSON(A)}if(F!=null&&typeof F==="object")return Fd(F,A);return F},Fd=function(F,A){if(F==null||typeof F!=="object")throw new g("not an object instance");const B=F._bsontype;if(typeof B==="undefined"){const D={};for(let J of Object.keys(F)){A.seenObjects.push({propertyName:J,obj:null});try{const Z=E3(F[J],A);if(J==="__proto__")Object.defineProperty(D,J,{value:Z,writable:!0,enumerable:!0,configurable:!0});else D[J]=Z}finally{A.seenObjects.pop()}}return D}else if(F!=null&&typeof F==="object"&&typeof F._bsontype==="string"&&F[Symbol.for("@@mdb.bson.version")]!==f4)throw new a3;else if(rm(F)){let D=F;if(typeof D.toExtendedJSON!=="function"){const J=em[F._bsontype];if(!J)throw new g("Unrecognized or invalid _bsontype: "+F._bsontype);D=J(D)}if(B==="Code"&&D.scope)D=new W3(D.code,E3(D.scope,A));else if(B==="DBRef"&&D.oid)D=new i6(E3(D.collection,A),E3(D.oid,A),E3(D.db,A),E3(D.fields,A));return D.toExtendedJSON(A)}else throw new g("_bsontype must be a string, but was: "+typeof B)},nq=function(F,A){const B={useBigInt64:A?.useBigInt64??!1,relaxed:A?.relaxed??!0,legacy:A?.legacy??!1};return JSON.parse(F,(D,J)=>{if(D.indexOf("\0")!==-1)throw new g(`BSON Document field names cannot contain null bytes, found: ${JSON.stringify(D)}`);return iq(J,B)})},sq=function(F,A,B,D){if(B!=null&&typeof B==="object")D=B,B=0;if(A!=null&&typeof A==="object"&&!Array.isArray(A))D=A,A=void 0,B=0;const J=Object.assign({relaxed:!0,legacy:!1},D,{seenObjects:[{propertyName:"(root)",obj:null}]}),Z=E3(F,J);return JSON.stringify(Z,A,B)},Ad=function(F,A){return A=A||{},JSON.parse(sq(F,A))},Bd=function(F,A){return A=A||{},nq(JSON.stringify(F),A)},zZ=function(F,A){try{return F1.getNonnegativeInt32LE(F,A)}catch(B){throw new V6("BSON size cannot be negative",A,{cause:B})}},UZ=function(F,A){let B=A;for(;F[B]!==0;B++);if(B===F.length-1)throw new V6("Null terminator not found",A);return B},Dd=function(F,A=0){if(A??=0,F.length<5)throw new V6(`Input must be at least 5 bytes, got ${F.length} bytes`,A);const B=zZ(F,A);if(B>F.length-A)throw new V6(`Parsed documentSize (${B} bytes) does not match input length (${F.length} bytes)`,A);if(F[A+B-1]!==0)throw new V6("BSON documents must end in 0x00",A+B);const D=[];let J=A+4;while(J<=B+A){const Z=F[J];if(J+=1,Z===0){if(J-A!==B)throw new V6("Invalid 0x00 type byte",J);break}const X=J,Y=UZ(F,J)-X;J+=Y+1;let $;if(Z===1||Z===18||Z===9||Z===17)$=8;else if(Z===16)$=4;else if(Z===7)$=12;else if(Z===19)$=16;else if(Z===8)$=1;else if(Z===10||Z===6||Z===127||Z===255)$=0;else if(Z===11)$=UZ(F,UZ(F,J)+1)+1-J;else if(Z===3||Z===4||Z===15)$=zZ(F,J);else if(Z===2||Z===5||Z===12||Z===13||Z===14){if($=zZ(F,J)+4,Z===5)$+=1;if(Z===12)$+=12}else throw new V6(`Invalid 0x${Z.toString(16).padStart(2,"0")} type byte`,J);if($>B)throw new V6("value reports length larger than document",J);D.push([Z,X,Y,J,$]),J+=$}return D},rq=function(F){if(s3.length<F)s3=k.allocate(F)},tq=function(F,A={}){const B=typeof A.checkKeys==="boolean"?A.checkKeys:!1,D=typeof A.serializeFunctions==="boolean"?A.serializeFunctions:!1,J=typeof A.ignoreUndefined==="boolean"?A.ignoreUndefined:!0,Z=typeof A.minInternalBufferSize==="number"?A.minInternalBufferSize:aq;if(s3.length<Z)s3=k.allocate(Z);const X=u8(s3,F,B,0,0,D,J,null),Y=k.allocateUnsafe(X);return Y.set(s3.subarray(0,X),0),Y},oq=function(F,A,B={}){const D=typeof B.checkKeys==="boolean"?B.checkKeys:!1,J=typeof B.serializeFunctions==="boolean"?B.serializeFunctions:!1,Z=typeof B.ignoreUndefined==="boolean"?B.ignoreUndefined:!0,X=typeof B.index==="number"?B.index:0,Y=u8(s3,F,D,0,0,J,Z,null);return A.set(s3.subarray(0,Y),X),X+Y-1},eq=function(F,A={}){return pq(k.toLocalBufferType(F),A)},FK=function(F,A={}){A=A||{};const B=typeof A.serializeFunctions==="boolean"?A.serializeFunctions:!1,D=typeof A.ignoreUndefined==="boolean"?A.ignoreUndefined:!0;return cF(F,B,D)},AK=function(F,A,B,D,J,Z){const X=Object.assign({allowObjectSmallerThanBufferSize:!0,index:0},Z),Y=k.toLocalBufferType(F);let $=A;for(let G=0;G<B;G++){const E=F1.getInt32LE(Y,$);X.index=$,D[J+G]=pq(Y,X),$=$+E}return $},f4=6,T8=2147483647,j8=-2147483648,Nq=Math.pow(2,63)-1,Pq=-Math.pow(2,63),Mq=Math.pow(2,53),Tq=-Math.pow(2,53),VZ=1,jq=2,wZ=3,uq=4,RZ=5,Qm=6,Oq=7,Sq=8,kq=9,IZ=10,pF=11,Lm=12,NZ=13,xq=14,fq=15,N8=16,_q=17,PZ=18,gq=19,bq=255,yq=127,Vm=0,iF=4,vq=Object.freeze({double:1,string:2,object:3,array:4,binData:5,undefined:6,objectId:7,bool:8,date:9,null:10,regex:11,dbPointer:12,javascript:13,symbol:14,javascriptWithScope:15,int:16,timestamp:17,long:18,decimal:19,minKey:-1,maxKey:127});class g extends Error{get bsonError(){return!0}get name(){return"BSONError"}constructor(F,A){super(F,A)}static isBSONError(F){return F!=null&&typeof F==="object"&&"bsonError"in F&&F.bsonError===!0&&"name"in F&&"message"in F&&"stack"in F}}class a3 extends g{get name(){return"BSONVersionError"}constructor(){super(`Unsupported BSON version, bson types must be from bson ${f4}.x.x`)}}class P8 extends g{get name(){return"BSONRuntimeError"}constructor(F){super(F)}}class V6 extends g{get name(){return"BSONOffsetError"}constructor(F,A,B){super(`${F}. offset: ${A}`,B);this.offset=A}}var Yq,$q,Im=(()=>{try{return import.meta.require("crypto").randomBytes}catch{return Rm}})(),n3={toLocalBufferType(F){if(Buffer.isBuffer(F))return F;if(ArrayBuffer.isView(F))return Buffer.from(F.buffer,F.byteOffset,F.byteLength);const A=F?.[Symbol.toStringTag]??Object.prototype.toString.call(F);if(A==="ArrayBuffer"||A==="SharedArrayBuffer"||A==="[object ArrayBuffer]"||A==="[object SharedArrayBuffer]")return Buffer.from(F);throw new g(`Cannot create Buffer from ${String(F)}`)},allocate(F){return Buffer.alloc(F)},allocateUnsafe(F){return Buffer.allocUnsafe(F)},equals(F,A){return n3.toLocalBufferType(F).equals(A)},fromNumberArray(F){return Buffer.from(F)},fromBase64(F){return Buffer.from(F,"base64")},toBase64(F){return n3.toLocalBufferType(F).toString("base64")},fromISO88591(F){return Buffer.from(F,"binary")},toISO88591(F){return n3.toLocalBufferType(F).toString("binary")},fromHex(F){return Buffer.from(F,"hex")},toHex(F){return n3.toLocalBufferType(F).toString("hex")},toUTF8(F,A,B,D){const J=B-A<=20?mq(F,A,B):null;if(J!=null)return J;const Z=n3.toLocalBufferType(F).toString("utf8",A,B);if(D){for(let X=0;X<Z.length;X++)if(Z.charCodeAt(X)===65533){hq(F,A,B,!0);break}}return Z},utf8ByteLength(F){return Buffer.byteLength(F,"utf8")},encodeUTF8Into(F,A,B){const D=wm(F,A,B);if(D!=null)return D;return n3.toLocalBufferType(F).write(A,B,void 0,"utf8")},randomBytes:Im},Mm=(()=>{const{crypto:F}=globalThis;if(F!=null&&typeof F.getRandomValues==="function")return(A)=>{return F.getRandomValues(M8.allocate(A))};else{if(Nm()){const{console:A}=globalThis;A?.warn?.("BSON: For React Native please polyfill crypto.getRandomValues, e.g. using: https://www.npmjs.com/package/react-native-get-random-values.")}return Pm}})(),Gq=/(\d|[a-f])/i,M8={toLocalBufferType(F){const A=F?.[Symbol.toStringTag]??Object.prototype.toString.call(F);if(A==="Uint8Array")return F;if(ArrayBuffer.isView(F))return new Uint8Array(F.buffer.slice(F.byteOffset,F.byteOffset+F.byteLength));if(A==="ArrayBuffer"||A==="SharedArrayBuffer"||A==="[object ArrayBuffer]"||A==="[object SharedArrayBuffer]")return new Uint8Array(F);throw new g(`Cannot make a Uint8Array from ${String(F)}`)},allocate(F){if(typeof F!=="number")throw new TypeError(`The "size" argument must be of type number. Received ${String(F)}`);return new Uint8Array(F)},allocateUnsafe(F){return M8.allocate(F)},equals(F,A){if(F.byteLength!==A.byteLength)return!1;for(let B=0;B<F.byteLength;B++)if(F[B]!==A[B])return!1;return!0},fromNumberArray(F){return Uint8Array.from(F)},fromBase64(F){return Uint8Array.from(atob(F),(A)=>A.charCodeAt(0))},toBase64(F){return btoa(M8.toISO88591(F))},fromISO88591(F){return Uint8Array.from(F,(A)=>A.charCodeAt(0)&255)},toISO88591(F){return Array.from(Uint16Array.from(F),(A)=>String.fromCharCode(A)).join("")},fromHex(F){const A=F.length%2===0?F:F.slice(0,F.length-1),B=[];for(let D=0;D<A.length;D+=2){const J=A[D],Z=A[D+1];if(!Gq.test(J))break;if(!Gq.test(Z))break;const X=Number.parseInt(`${J}${Z}`,16);B.push(X)}return Uint8Array.from(B)},toHex(F){return Array.from(F,(A)=>A.toString(16).padStart(2,"0")).join("")},toUTF8(F,A,B,D){const J=B-A<=20?mq(F,A,B):null;if(J!=null)return J;return hq(F,A,B,D)},utf8ByteLength(F){return(new TextEncoder()).encode(F).byteLength},encodeUTF8Into(F,A,B){const D=(new TextEncoder()).encode(A);return F.set(D,B),D.byteLength},randomBytes:Mm},Tm=typeof Buffer==="function"&&Buffer.prototype?._isBuffer!==!0,k=Tm?n3:M8;class B2{get[Symbol.for("@@mdb.bson.version")](){return f4}[Symbol.for("nodejs.util.inspect.custom")](F,A,B){return this.inspect(F,A,B)}}class z1 extends B2{get _bsontype(){return"Binary"}constructor(F,A){super();if(F!=null&&typeof F==="string"&&!ArrayBuffer.isView(F)&&!QZ(F)&&!Array.isArray(F))throw new g("Binary can only be constructed from Uint8Array or number[]");if(this.sub_type=A??z1.BSON_BINARY_SUBTYPE_DEFAULT,F==null)this.buffer=k.allocate(z1.BUFFER_SIZE),this.position=0;else this.buffer=Array.isArray(F)?k.fromNumberArray(F):k.toLocalBufferType(F),this.position=this.buffer.byteLength}put(F){if(typeof F==="string"&&F.length!==1)throw new g("only accepts single character String");else if(typeof F!=="number"&&F.length!==1)throw new g("only accepts single character Uint8Array or Array");let A;if(typeof F==="string")A=F.charCodeAt(0);else if(typeof F==="number")A=F;else A=F[0];if(A<0||A>255)throw new g("only accepts number in a valid unsigned byte range 0-255");if(this.buffer.byteLength>this.position)this.buffer[this.position++]=A;else{const B=k.allocate(z1.BUFFER_SIZE+this.buffer.length);B.set(this.buffer,0),this.buffer=B,this.buffer[this.position++]=A}}write(F,A){if(A=typeof A==="number"?A:this.position,this.buffer.byteLength<A+F.length){const B=k.allocate(this.buffer.byteLength+F.length);B.set(this.buffer,0),this.buffer=B}if(ArrayBuffer.isView(F))this.buffer.set(k.toLocalBufferType(F),A),this.position=A+F.byteLength>this.position?A+F.length:this.position;else if(typeof F==="string")throw new g("input cannot be string")}read(F,A){return A=A&&A>0?A:this.position,this.buffer.slice(F,F+A)}value(){return this.buffer.length===this.position?this.buffer:this.buffer.subarray(0,this.position)}length(){return this.position}toJSON(){return k.toBase64(this.buffer.subarray(0,this.position))}toString(F){if(F==="hex")return k.toHex(this.buffer.subarray(0,this.position));if(F==="base64")return k.toBase64(this.buffer.subarray(0,this.position));if(F==="utf8"||F==="utf-8")return k.toUTF8(this.buffer,0,this.position,!1);return k.toUTF8(this.buffer,0,this.position,!1)}toExtendedJSON(F){F=F||{};const A=k.toBase64(this.buffer),B=Number(this.sub_type).toString(16);if(F.legacy)return{$binary:A,$type:B.length===1?"0"+B:B};return{$binary:{base64:A,subType:B.length===1?"0"+B:B}}}toUUID(){if(this.sub_type===z1.SUBTYPE_UUID)return new M0(this.buffer.slice(0,this.position));throw new g(`Binary sub_type "${this.sub_type}" is not supported for converting to UUID. Only "${z1.SUBTYPE_UUID}" is currently supported.`)}static createFromHexString(F,A){return new z1(k.fromHex(F),A)}static createFromBase64(F,A){return new z1(k.fromBase64(F),A)}static fromExtendedJSON(F,A){A=A||{};let B,D;if("$binary"in F){if(A.legacy&&typeof F.$binary==="string"&&"$type"in F)D=F.$type?parseInt(F.$type,16):0,B=k.fromBase64(F.$binary);else if(typeof F.$binary!=="string")D=F.$binary.subType?parseInt(F.$binary.subType,16):0,B=k.fromBase64(F.$binary.base64)}else if("$uuid"in F)D=4,B=M0.bytesFromString(F.$uuid);if(!B)throw new g(`Unexpected Binary Extended JSON format ${JSON.stringify(F)}`);return D===iF?new M0(B):new z1(B,D)}inspect(F,A,B){B??=b2;const D=k.toBase64(this.buffer.subarray(0,this.position)),J=B(D,A),Z=B(this.sub_type,A);return`Binary.createFromBase64(${J}, ${Z})`}}z1.BSON_BINARY_SUBTYPE_DEFAULT=0;z1.BUFFER_SIZE=256;z1.SUBTYPE_DEFAULT=0;z1.SUBTYPE_FUNCTION=1;z1.SUBTYPE_BYTE_ARRAY=2;z1.SUBTYPE_UUID_OLD=3;z1.SUBTYPE_UUID=4;z1.SUBTYPE_MD5=5;z1.SUBTYPE_ENCRYPTED=6;z1.SUBTYPE_COLUMN=7;z1.SUBTYPE_SENSITIVE=8;z1.SUBTYPE_USER_DEFINED=128;var sJ=16,jm=/^[0-9A-F]{32}$/i,um=/^[0-9A-F]{8}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{12}$/i;class M0 extends z1{constructor(F){let A;if(F==null)A=M0.generate();else if(F instanceof M0)A=k.toLocalBufferType(new Uint8Array(F.buffer));else if(ArrayBuffer.isView(F)&&F.byteLength===sJ)A=k.toLocalBufferType(F);else if(typeof F==="string")A=M0.bytesFromString(F);else throw new g("Argument passed in UUID constructor must be a UUID, a 16 byte Buffer or a 32/36 character hex string (dashes excluded/included, format: xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx).");super(A,iF)}get id(){return this.buffer}set id(F){this.buffer=F}toHexString(F=!0){if(F)return[k.toHex(this.buffer.subarray(0,4)),k.toHex(this.buffer.subarray(4,6)),k.toHex(this.buffer.subarray(6,8)),k.toHex(this.buffer.subarray(8,10)),k.toHex(this.buffer.subarray(10,16))].join("-");return k.toHex(this.buffer)}toString(F){if(F==="hex")return k.toHex(this.id);if(F==="base64")return k.toBase64(this.id);return this.toHexString()}toJSON(){return this.toHexString()}equals(F){if(!F)return!1;if(F instanceof M0)return k.equals(F.id,this.id);try{return k.equals(new M0(F).id,this.id)}catch{return!1}}toBinary(){return new z1(this.id,z1.SUBTYPE_UUID)}static generate(){const F=k.randomBytes(sJ);return F[6]=F[6]&15|64,F[8]=F[8]&63|128,F}static isValid(F){if(!F)return!1;if(typeof F==="string")return M0.isValidUUIDString(F);if(k9(F))return F.byteLength===sJ;return F._bsontype==="Binary"&&F.sub_type===this.SUBTYPE_UUID&&F.buffer.byteLength===16}static createFromHexString(F){const A=M0.bytesFromString(F);return new M0(A)}static createFromBase64(F){return new M0(k.fromBase64(F))}static bytesFromString(F){if(!M0.isValidUUIDString(F))throw new g("UUID string representation must be 32 hex digits or canonical hyphenated representation");return k.fromHex(F.replace(/-/g,""))}static isValidUUIDString(F){return jm.test(F)||um.test(F)}inspect(F,A,B){return B??=b2,`new UUID(${B(this.toHexString(),A)})`}}class W3 extends B2{get _bsontype(){return"Code"}constructor(F,A){super();this.code=F.toString(),this.scope=A??null}toJSON(){if(this.scope!=null)return{code:this.code,scope:this.scope};return{code:this.code}}toExtendedJSON(){if(this.scope)return{$code:this.code,$scope:this.scope};return{$code:this.code}}static fromExtendedJSON(F){return new W3(F.$code,F.$scope)}inspect(F,A,B){B??=b2;let D=B(this.code,A);const J=D.includes("\n");if(this.scope!=null)D+=`,${J?"\n":" "}${B(this.scope,A)}`;const Z=J&&this.scope===null;return`new Code(${J?"\n":""}${D}${Z?"\n":""})`}}class i6 extends B2{get _bsontype(){return"DBRef"}constructor(F,A,B,D){super();const J=F.split(".");if(J.length===2)B=J.shift(),F=J.shift();this.collection=F,this.oid=A,this.db=B,this.fields=D||{}}get namespace(){return this.collection}set namespace(F){this.collection=F}toJSON(){const F=Object.assign({$ref:this.collection,$id:this.oid},this.fields);if(this.db!=null)F.$db=this.db;return F}toExtendedJSON(F){F=F||{};let A={$ref:this.collection,$id:this.oid};if(F.legacy)return A;if(this.db)A.$db=this.db;return A=Object.assign(A,this.fields),A}static fromExtendedJSON(F){const A=Object.assign({},F);return delete A.$ref,delete A.$id,delete A.$db,new i6(F.$ref,F.$id,F.$db,A)}inspect(F,A,B){B??=b2;const D=[B(this.namespace,A),B(this.oid,A),...this.db?[B(this.db,A)]:[],...Object.keys(this.fields).length>0?[B(this.fields,A)]:[]];return D[1]=B===b2?`new ObjectId(${D[1]})`:D[1],`new DBRef(${D.join(", ")})`}}var o2=void 0;try{o2=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}var Eq=65536,Sm=16777216,_9=Eq*Eq,lq=_9*_9,Wq=lq/2,Cq={},Hq={},km=20,xm=/^(\+?0|(\+|-)?[1-9][0-9]*)$/;class I extends B2{get _bsontype(){return"Long"}get __isLong__(){return!0}constructor(F=0,A,B){super();const D=typeof A==="boolean"?A:Boolean(B),J=typeof A==="number"?A:0,Z=typeof F==="string"?I.fromString(F,D):typeof F==="bigint"?I.fromBigInt(F,D):{low:F|0,high:J|0,unsigned:D};this.low=Z.low,this.high=Z.high,this.unsigned=Z.unsigned}static fromBits(F,A,B){return new I(F,A,B)}static fromInt(F,A){let B,D,J;if(A){if(F>>>=0,J=0<=F&&F<256){if(D=Hq[F],D)return D}if(B=I.fromBits(F,(F|0)<0?-1:0,!0),J)Hq[F]=B;return B}else{if(F|=0,J=-128<=F&&F<128){if(D=Cq[F],D)return D}if(B=I.fromBits(F,F<0?-1:0,!1),J)Cq[F]=B;return B}}static fromNumber(F,A){if(isNaN(F))return A?I.UZERO:I.ZERO;if(A){if(F<0)return I.UZERO;if(F>=lq)return I.MAX_UNSIGNED_VALUE}else{if(F<=-Wq)return I.MIN_VALUE;if(F+1>=Wq)return I.MAX_VALUE}if(F<0)return I.fromNumber(-F,A).neg();return I.fromBits(F%_9|0,F/_9|0,A)}static fromBigInt(F,A){const B=BigInt(4294967295),D=BigInt(32);return new I(Number(F&B),Number(F>>D&B),A)}static _fromString(F,A,B){if(F.length===0)throw new g("empty string");if(B<2||36<B)throw new g("radix");let D;if((D=F.indexOf("-"))>0)throw new g("interior hyphen");else if(D===0)return I._fromString(F.substring(1),A,B).neg();const J=I.fromNumber(Math.pow(B,8));let Z=I.ZERO;for(let X=0;X<F.length;X+=8){const Y=Math.min(8,F.length-X),$=parseInt(F.substring(X,X+Y),B);if(Y<8){const G=I.fromNumber(Math.pow(B,Y));Z=Z.mul(G).add(I.fromNumber($))}else Z=Z.mul(J),Z=Z.add(I.fromNumber($))}return Z.unsigned=A,Z}static fromStringStrict(F,A,B){let D=!1;if(typeof A==="number")B=A,A=!1;else D=!!A;if(B??=10,F.trim()!==F)throw new g(`Input: '${F}' contains leading and/or trailing whitespace`);if(!Om(F,B))throw new g(`Input: '${F}' contains invalid characters for radix: ${B}`);const J=cq(F),Z=I._fromString(J,D,B);if(Z.toString(B).toLowerCase()!==J.toLowerCase())throw new g(`Input: ${F} is not representable as ${Z.unsigned?"an unsigned":"a signed"} 64-bit Long ${B!=null?`with radix: ${B}`:""}`);return Z}static fromString(F,A,B){let D=!1;if(typeof A==="number")B=A,A=!1;else D=!!A;if(B??=10,F==="NaN"&&B<24)return I.ZERO;else if((F==="Infinity"||F==="+Infinity"||F==="-Infinity")&&B<35)return I.ZERO;return I._fromString(F,D,B)}static fromBytes(F,A,B){return B?I.fromBytesLE(F,A):I.fromBytesBE(F,A)}static fromBytesLE(F,A){return new I(F[0]|F[1]<<8|F[2]<<16|F[3]<<24,F[4]|F[5]<<8|F[6]<<16|F[7]<<24,A)}static fromBytesBE(F,A){return new I(F[4]<<24|F[5]<<16|F[6]<<8|F[7],F[0]<<24|F[1]<<16|F[2]<<8|F[3],A)}static isLong(F){return F!=null&&typeof F==="object"&&"__isLong__"in F&&F.__isLong__===!0}static fromValue(F,A){if(typeof F==="number")return I.fromNumber(F,A);if(typeof F==="string")return I.fromString(F,A);return I.fromBits(F.low,F.high,typeof A==="boolean"?A:F.unsigned)}add(F){if(!I.isLong(F))F=I.fromValue(F);const A=this.high>>>16,B=this.high&65535,D=this.low>>>16,J=this.low&65535,Z=F.high>>>16,X=F.high&65535,Y=F.low>>>16,$=F.low&65535;let G=0,E=0,W=0,C=0;return C+=J+$,W+=C>>>16,C&=65535,W+=D+Y,E+=W>>>16,W&=65535,E+=B+X,G+=E>>>16,E&=65535,G+=A+Z,G&=65535,I.fromBits(W<<16|C,G<<16|E,this.unsigned)}and(F){if(!I.isLong(F))F=I.fromValue(F);return I.fromBits(this.low&F.low,this.high&F.high,this.unsigned)}compare(F){if(!I.isLong(F))F=I.fromValue(F);if(this.eq(F))return 0;const A=this.isNegative(),B=F.isNegative();if(A&&!B)return-1;if(!A&&B)return 1;if(!this.unsigned)return this.sub(F).isNegative()?-1:1;return F.high>>>0>this.high>>>0||F.high===this.high&&F.low>>>0>this.low>>>0?-1:1}comp(F){return this.compare(F)}divide(F){if(!I.isLong(F))F=I.fromValue(F);if(F.isZero())throw new g("division by zero");if(o2){if(!this.unsigned&&this.high===-2147483648&&F.low===-1&&F.high===-1)return this;const J=(this.unsigned?o2.div_u:o2.div_s)(this.low,this.high,F.low,F.high);return I.fromBits(J,o2.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?I.UZERO:I.ZERO;let A,B,D;if(!this.unsigned){if(this.eq(I.MIN_VALUE))if(F.eq(I.ONE)||F.eq(I.NEG_ONE))return I.MIN_VALUE;else if(F.eq(I.MIN_VALUE))return I.ONE;else if(A=this.shr(1).div(F).shl(1),A.eq(I.ZERO))return F.isNegative()?I.ONE:I.NEG_ONE;else return B=this.sub(F.mul(A)),D=A.add(B.div(F)),D;else if(F.eq(I.MIN_VALUE))return this.unsigned?I.UZERO:I.ZERO;if(this.isNegative()){if(F.isNegative())return this.neg().div(F.neg());return this.neg().div(F).neg()}else if(F.isNegative())return this.div(F.neg()).neg();D=I.ZERO}else{if(!F.unsigned)F=F.toUnsigned();if(F.gt(this))return I.UZERO;if(F.gt(this.shru(1)))return I.UONE;D=I.UZERO}B=this;while(B.gte(F)){A=Math.max(1,Math.floor(B.toNumber()/F.toNumber()));const J=Math.ceil(Math.log(A)/Math.LN2),Z=J<=48?1:Math.pow(2,J-48);let X=I.fromNumber(A),Y=X.mul(F);while(Y.isNegative()||Y.gt(B))A-=Z,X=I.fromNumber(A,this.unsigned),Y=X.mul(F);if(X.isZero())X=I.ONE;D=D.add(X),B=B.sub(Y)}return D}div(F){return this.divide(F)}equals(F){if(!I.isLong(F))F=I.fromValue(F);if(this.unsigned!==F.unsigned&&this.high>>>31===1&&F.high>>>31===1)return!1;return this.high===F.high&&this.low===F.low}eq(F){return this.equals(F)}getHighBits(){return this.high}getHighBitsUnsigned(){return this.high>>>0}getLowBits(){return this.low}getLowBitsUnsigned(){return this.low>>>0}getNumBitsAbs(){if(this.isNegative())return this.eq(I.MIN_VALUE)?64:this.neg().getNumBitsAbs();const F=this.high!==0?this.high:this.low;let A;for(A=31;A>0;A--)if((F&1<<A)!==0)break;return this.high!==0?A+33:A+1}greaterThan(F){return this.comp(F)>0}gt(F){return this.greaterThan(F)}greaterThanOrEqual(F){return this.comp(F)>=0}gte(F){return this.greaterThanOrEqual(F)}ge(F){return this.greaterThanOrEqual(F)}isEven(){return(this.low&1)===0}isNegative(){return!this.unsigned&&this.high<0}isOdd(){return(this.low&1)===1}isPositive(){return this.unsigned||this.high>=0}isZero(){return this.high===0&&this.low===0}lessThan(F){return this.comp(F)<0}lt(F){return this.lessThan(F)}lessThanOrEqual(F){return this.comp(F)<=0}lte(F){return this.lessThanOrEqual(F)}modulo(F){if(!I.isLong(F))F=I.fromValue(F);if(o2){const A=(this.unsigned?o2.rem_u:o2.rem_s)(this.low,this.high,F.low,F.high);return I.fromBits(A,o2.get_high(),this.unsigned)}return this.sub(this.div(F).mul(F))}mod(F){return this.modulo(F)}rem(F){return this.modulo(F)}multiply(F){if(this.isZero())return I.ZERO;if(!I.isLong(F))F=I.fromValue(F);if(o2){const H=o2.mul(this.low,this.high,F.low,F.high);return I.fromBits(H,o2.get_high(),this.unsigned)}if(F.isZero())return I.ZERO;if(this.eq(I.MIN_VALUE))return F.isOdd()?I.MIN_VALUE:I.ZERO;if(F.eq(I.MIN_VALUE))return this.isOdd()?I.MIN_VALUE:I.ZERO;if(this.isNegative())if(F.isNegative())return this.neg().mul(F.neg());else return this.neg().mul(F).neg();else if(F.isNegative())return this.mul(F.neg()).neg();if(this.lt(I.TWO_PWR_24)&&F.lt(I.TWO_PWR_24))return I.fromNumber(this.toNumber()*F.toNumber(),this.unsigned);const A=this.high>>>16,B=this.high&65535,D=this.low>>>16,J=this.low&65535,Z=F.high>>>16,X=F.high&65535,Y=F.low>>>16,$=F.low&65535;let G=0,E=0,W=0,C=0;return C+=J*$,W+=C>>>16,C&=65535,W+=D*$,E+=W>>>16,W&=65535,W+=J*Y,E+=W>>>16,W&=65535,E+=B*$,G+=E>>>16,E&=65535,E+=D*Y,G+=E>>>16,E&=65535,E+=J*X,G+=E>>>16,E&=65535,G+=A*$+B*Y+D*X+J*Z,G&=65535,I.fromBits(W<<16|C,G<<16|E,this.unsigned)}mul(F){return this.multiply(F)}negate(){if(!this.unsigned&&this.eq(I.MIN_VALUE))return I.MIN_VALUE;return this.not().add(I.ONE)}neg(){return this.negate()}not(){return I.fromBits(~this.low,~this.high,this.unsigned)}notEquals(F){return!this.equals(F)}neq(F){return this.notEquals(F)}ne(F){return this.notEquals(F)}or(F){if(!I.isLong(F))F=I.fromValue(F);return I.fromBits(this.low|F.low,this.high|F.high,this.unsigned)}shiftLeft(F){if(I.isLong(F))F=F.toInt();if((F&=63)===0)return this;else if(F<32)return I.fromBits(this.low<<F,this.high<<F|this.low>>>32-F,this.unsigned);else return I.fromBits(0,this.low<<F-32,this.unsigned)}shl(F){return this.shiftLeft(F)}shiftRight(F){if(I.isLong(F))F=F.toInt();if((F&=63)===0)return this;else if(F<32)return I.fromBits(this.low>>>F|this.high<<32-F,this.high>>F,this.unsigned);else return I.fromBits(this.high>>F-32,this.high>=0?0:-1,this.unsigned)}shr(F){return this.shiftRight(F)}shiftRightUnsigned(F){if(I.isLong(F))F=F.toInt();if(F&=63,F===0)return this;else{const A=this.high;if(F<32){const B=this.low;return I.fromBits(B>>>F|A<<32-F,A>>>F,this.unsigned)}else if(F===32)return I.fromBits(A,0,this.unsigned);else return I.fromBits(A>>>F-32,0,this.unsigned)}}shr_u(F){return this.shiftRightUnsigned(F)}shru(F){return this.shiftRightUnsigned(F)}subtract(F){if(!I.isLong(F))F=I.fromValue(F);return this.add(F.neg())}sub(F){return this.subtract(F)}toInt(){return this.unsigned?this.low>>>0:this.low}toNumber(){if(this.unsigned)return(this.high>>>0)*_9+(this.low>>>0);return this.high*_9+(this.low>>>0)}toBigInt(){return BigInt(this.toString())}toBytes(F){return F?this.toBytesLE():this.toBytesBE()}toBytesLE(){const F=this.high,A=this.low;return[A&255,A>>>8&255,A>>>16&255,A>>>24,F&255,F>>>8&255,F>>>16&255,F>>>24]}toBytesBE(){const F=this.high,A=this.low;return[F>>>24,F>>>16&255,F>>>8&255,F&255,A>>>24,A>>>16&255,A>>>8&255,A&255]}toSigned(){if(!this.unsigned)return this;return I.fromBits(this.low,this.high,!1)}toString(F){if(F=F||10,F<2||36<F)throw new g("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(I.MIN_VALUE)){const J=I.fromNumber(F),Z=this.div(J),X=Z.mul(J).sub(this);return Z.toString(F)+X.toInt().toString(F)}else return"-"+this.neg().toString(F);const A=I.fromNumber(Math.pow(F,6),this.unsigned);let B=this,D="";while(!0){const J=B.div(A);let X=(B.sub(J.mul(A)).toInt()>>>0).toString(F);if(B=J,B.isZero())return X+D;else{while(X.length<6)X="0"+X;D=""+X+D}}}toUnsigned(){if(this.unsigned)return this;return I.fromBits(this.low,this.high,!0)}xor(F){if(!I.isLong(F))F=I.fromValue(F);return I.fromBits(this.low^F.low,this.high^F.high,this.unsigned)}eqz(){return this.isZero()}le(F){return this.lessThanOrEqual(F)}toExtendedJSON(F){if(F&&F.relaxed)return this.toNumber();return{$numberLong:this.toString()}}static fromExtendedJSON(F,A){const{useBigInt64:B=!1,relaxed:D=!0}={...A};if(F.$numberLong.length>km)throw new g("$numberLong string is too long");if(!xm.test(F.$numberLong))throw new g(`\$numberLong string "${F.$numberLong}" is in an invalid format`);if(B){const Z=BigInt(F.$numberLong);return BigInt.asIntN(64,Z)}const J=I.fromString(F.$numberLong);if(D)return J.toNumber();return J}inspect(F,A,B){B??=b2;const D=B(this.toString(),A),J=this.unsigned?`, ${B(this.unsigned,A)}`:"";return`new Long(${D}${J})`}}I.TWO_PWR_24=I.fromInt(Sm);I.MAX_UNSIGNED_VALUE=I.fromBits(-1,-1,!0);I.ZERO=I.fromInt(0);I.UZERO=I.fromInt(0,!0);I.ONE=I.fromInt(1);I.UONE=I.fromInt(1,!0);I.NEG_ONE=I.fromInt(-1);I.MAX_VALUE=I.fromBits(-1,2147483647,!1);I.MIN_VALUE=I.fromBits(0,-2147483648,!1);var fm=/^(\+|-)?(\d+|(\d*\.\d*))?(E|e)?([-+])?(\d+)?$/,_m=/^(\+|-)?(Infinity|inf)$/i,gm=/^(\+|-)?NaN$/i,S9=6111,R8=-6176,qq=6176,Kq=34,aJ=k.fromNumberArray([124,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].reverse()),zq=k.fromNumberArray([248,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].reverse()),Uq=k.fromNumberArray([120,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].reverse()),bm=/^([-+])?(\d+)?$/,ym=31,Qq=16383,vm=30,hm=31;class s0 extends B2{get _bsontype(){return"Decimal128"}constructor(F){super();if(typeof F==="string")this.bytes=s0.fromString(F).bytes;else if(k9(F)){if(F.byteLength!==16)throw new g("Decimal128 must take a Buffer of 16 bytes");this.bytes=F}else throw new g("Decimal128 must take a Buffer or string")}static fromString(F){return s0._fromString(F,{allowRounding:!1})}static fromStringWithRounding(F){return s0._fromString(F,{allowRounding:!0})}static _fromString(F,A){let B=!1,D=!1,J=!1,Z=!1,X=0,Y=0,$=0,G=0,E=0;const W=[0];let C=0,H=0,q=0,K=0,U=new I(0,0),Q=new I(0,0),V=0,L=0;if(F.length>=7000)throw new g(""+F+" not a valid Decimal128 string");const N=F.match(fm),h=F.match(_m),T=F.match(gm);if(!N&&!h&&!T||F.length===0)throw new g(""+F+" not a valid Decimal128 string");if(N){const u=N[2],O=N[4],j=N[5],_=N[6];if(O&&_===void 0)L6(F,"missing exponent power");if(O&&u===void 0)L6(F,"missing exponent base");if(O===void 0&&(j||_))L6(F,"missing e before exponent")}if(F[L]==="+"||F[L]==="-")D=!0,B=F[L++]==="-";if(!Lq(F[L])&&F[L]!=="."){if(F[L]==="i"||F[L]==="I")return new s0(B?zq:Uq);else if(F[L]==="N")return new s0(aJ)}while(Lq(F[L])||F[L]==="."){if(F[L]==="."){if(J)L6(F,"contains multiple periods");J=!0,L=L+1;continue}if(C<Kq){if(F[L]!=="0"||Z){if(!Z)E=Y;Z=!0,W[H++]=parseInt(F[L],10),C=C+1}}if(Z)$=$+1;if(J)G=G+1;Y=Y+1,L=L+1}if(J&&!Y)throw new g(""+F+" not a valid Decimal128 string");if(F[L]==="e"||F[L]==="E"){const u=F.substr(++L).match(bm);if(!u||!u[2])return new s0(aJ);K=parseInt(u[0],10),L=L+u[0].length}if(F[L])return new s0(aJ);if(!C)W[0]=0,$=1,C=1,X=0;else if(q=C-1,X=$,X!==1)while(F[E+X-1+Number(D)+Number(J)]==="0")X=X-1;if(K<=G&&G>K+16384)K=R8;else K=K-G;while(K>S9){if(q=q+1,q>=Kq){if(X===0){K=S9;break}L6(F,"overflow")}K=K-1}if(A.allowRounding){while(K<R8||C<$){if(q===0&&X<C){K=R8,X=0;break}if(C<$)$=$-1;else q=q-1;if(K<S9)K=K+1;else{if(W.join("").match(/^0+$/)){K=S9;break}L6(F,"overflow")}}if(q+1<X){let u=Y;if(J)E=E+1,u=u+1;if(D)E=E+1,u=u+1;const O=parseInt(F[E+q+1],10);let j=0;if(O>=5){if(j=1,O===5){j=W[q]%2===1?1:0;for(let _=E+q+2;_<u;_++)if(parseInt(F[_],10)){j=1;break}}}if(j){let _=q;for(;_>=0;_--)if(++W[_]>9){if(W[_]=0,_===0)if(K<S9)K=K+1,W[_]=1;else return new s0(B?zq:Uq)}else break}}}else{while(K<R8||C<$){if(q===0){if(X===0){K=R8;break}L6(F,"exponent underflow")}if(C<$){if(F[$-1+Number(D)+Number(J)]!=="0"&&X!==0)L6(F,"inexact rounding");$=$-1}else{if(W[q]!==0)L6(F,"inexact rounding");q=q-1}if(K<S9)K=K+1;else L6(F,"overflow")}if(q+1<X){if(J)E=E+1;if(D)E=E+1;if(parseInt(F[E+q+1],10)!==0)L6(F,"inexact rounding")}}if(U=I.fromNumber(0),Q=I.fromNumber(0),X===0)U=I.fromNumber(0),Q=I.fromNumber(0);else if(q<17){let u=0;Q=I.fromNumber(W[u++]),U=new I(0,0);for(;u<=q;u++)Q=Q.multiply(I.fromNumber(10)),Q=Q.add(I.fromNumber(W[u]))}else{let u=0;U=I.fromNumber(W[u++]);for(;u<=q-17;u++)U=U.multiply(I.fromNumber(10)),U=U.add(I.fromNumber(W[u]));Q=I.fromNumber(W[u++]);for(;u<=q;u++)Q=Q.multiply(I.fromNumber(10)),Q=Q.add(I.fromNumber(W[u]))}const P=dm(U,I.fromString("100000000000000000"));if(P.low=P.low.add(Q),cm(P.low,Q))P.high=P.high.add(I.fromNumber(1));V=K+qq;const x={low:I.fromNumber(0),high:I.fromNumber(0)};if(P.high.shiftRightUnsigned(49).and(I.fromNumber(1)).equals(I.fromNumber(1)))x.high=x.high.or(I.fromNumber(3).shiftLeft(61)),x.high=x.high.or(I.fromNumber(V).and(I.fromNumber(16383).shiftLeft(47))),x.high=x.high.or(P.high.and(I.fromNumber(140737488355327)));else x.high=x.high.or(I.fromNumber(V&16383).shiftLeft(49)),x.high=x.high.or(P.high.and(I.fromNumber(562949953421311)));if(x.low=P.low,B)x.high=x.high.or(I.fromString("9223372036854775808"));const c=k.allocateUnsafe(16);return L=0,c[L++]=x.low.low&255,c[L++]=x.low.low>>8&255,c[L++]=x.low.low>>16&255,c[L++]=x.low.low>>24&255,c[L++]=x.low.high&255,c[L++]=x.low.high>>8&255,c[L++]=x.low.high>>16&255,c[L++]=x.low.high>>24&255,c[L++]=x.high.low&255,c[L++]=x.high.low>>8&255,c[L++]=x.high.low>>16&255,c[L++]=x.high.low>>24&255,c[L++]=x.high.high&255,c[L++]=x.high.high>>8&255,c[L++]=x.high.high>>16&255,c[L++]=x.high.high>>24&255,new s0(c)}toString(){let F,A=0;const B=new Array(36);for(let L=0;L<B.length;L++)B[L]=0;let D=0,J=!1,Z,X={parts:[0,0,0,0]},Y,$;const G=[];D=0;const E=this.bytes,W=E[D++]|E[D++]<<8|E[D++]<<16|E[D++]<<24,C=E[D++]|E[D++]<<8|E[D++]<<16|E[D++]<<24,H=E[D++]|E[D++]<<8|E[D++]<<16|E[D++]<<24,q=E[D++]|E[D++]<<8|E[D++]<<16|E[D++]<<24;if(D=0,{low:new I(W,C),high:new I(H,q)}.high.lessThan(I.ZERO))G.push("-");const U=q>>26&ym;if(U>>3===3)if(U===vm)return G.join("")+"Infinity";else if(U===hm)return"NaN";else F=q>>15&Qq,Z=8+(q>>14&1);else Z=q>>14&7,F=q>>17&Qq;const Q=F-qq;if(X.parts[0]=(q&16383)+((Z&15)<<14),X.parts[1]=H,X.parts[2]=C,X.parts[3]=W,X.parts[0]===0&&X.parts[1]===0&&X.parts[2]===0&&X.parts[3]===0)J=!0;else for($=3;$>=0;$--){let L=0;const N=mm(X);if(X=N.quotient,L=N.rem.low,!L)continue;for(Y=8;Y>=0;Y--)B[$*9+Y]=L%10,L=Math.floor(L/10)}if(J)A=1,B[D]=0;else{A=36;while(!B[D])A=A-1,D=D+1}const V=A-1+Q;if(V>=34||V<=-7||Q>0){if(A>34){if(G.push("0"),Q>0)G.push(`E+${Q}`);else if(Q<0)G.push(`E${Q}`);return G.join("")}if(G.push(`${B[D++]}`),A=A-1,A)G.push(".");for(let L=0;L<A;L++)G.push(`${B[D++]}`);if(G.push("E"),V>0)G.push(`+${V}`);else G.push(`${V}`)}else if(Q>=0)for(let L=0;L<A;L++)G.push(`${B[D++]}`);else{let L=A+Q;if(L>0)for(let N=0;N<L;N++)G.push(`${B[D++]}`);else G.push("0");G.push(".");while(L++<0)G.push("0");for(let N=0;N<A-Math.max(L-1,0);N++)G.push(`${B[D++]}`)}return G.join("")}toJSON(){return{$numberDecimal:this.toString()}}toExtendedJSON(){return{$numberDecimal:this.toString()}}static fromExtendedJSON(F){return s0.fromString(F.$numberDecimal)}inspect(F,A,B){return B??=b2,`new Decimal128(${B(this.toString(),A)})`}}class e2 extends B2{get _bsontype(){return"Double"}constructor(F){super();if(F instanceof Number)F=F.valueOf();this.value=+F}static fromString(F){const A=Number(F);if(F==="NaN")return new e2(NaN);if(F==="Infinity")return new e2(1/0);if(F==="-Infinity")return new e2(-1/0);if(!Number.isFinite(A))throw new g(`Input: ${F} is not representable as a Double`);if(F.trim()!==F)throw new g(`Input: '${F}' contains whitespace`);if(F==="")throw new g("Input is an empty string");if(/[^-0-9.+eE]/.test(F))throw new g(`Input: '${F}' is not in decimal or exponential notation`);return new e2(A)}valueOf(){return this.value}toJSON(){return this.value}toString(F){return this.value.toString(F)}toExtendedJSON(F){if(F&&(F.legacy||F.relaxed&&isFinite(this.value)))return this.value;if(Object.is(Math.sign(this.value),-0))return{$numberDouble:"-0.0"};return{$numberDouble:Number.isInteger(this.value)?this.value.toFixed(1):this.value.toString()}}static fromExtendedJSON(F,A){const B=parseFloat(F.$numberDouble);return A&&A.relaxed?B:new e2(B)}inspect(F,A,B){return B??=b2,`new Double(${B(this.value,A)})`}}class C3 extends B2{get _bsontype(){return"Int32"}constructor(F){super();if(F instanceof Number)F=F.valueOf();this.value=+F|0}static fromString(F){const A=cq(F),B=Number(F);if(T8<B)throw new g(`Input: '${F}' is larger than the maximum value for Int32`);else if(j8>B)throw new g(`Input: '${F}' is smaller than the minimum value for Int32`);else if(!Number.isSafeInteger(B))throw new g(`Input: '${F}' is not a safe integer`);else if(B.toString()!==A)throw new g(`Input: '${F}' is not a valid Int32 string`);return new C3(B)}valueOf(){return this.value}toString(F){return this.value.toString(F)}toJSON(){return this.value}toExtendedJSON(F){if(F&&(F.relaxed||F.legacy))return this.value;return{$numberInt:this.value.toString()}}static fromExtendedJSON(F,A){return A&&A.relaxed?parseInt(F.$numberInt,10):new C3(F.$numberInt)}inspect(F,A,B){return B??=b2,`new Int32(${B(this.value,A)})`}}class _4 extends B2{get _bsontype(){return"MaxKey"}toExtendedJSON(){return{$maxKey:1}}static fromExtendedJSON(){return new _4}inspect(){return"new MaxKey()"}}class g4 extends B2{get _bsontype(){return"MinKey"}toExtendedJSON(){return{$minKey:1}}static fromExtendedJSON(){return new g4}inspect(){return"new MinKey()"}}var g9=new Float64Array(1),R1=new Uint8Array(g9.buffer,0,8);g9[0]=-1;var Vq=R1[7]===0,F1={getNonnegativeInt32LE(F,A){if(F[A+3]>127)throw new RangeError(`Size cannot be negative at offset: ${A}`);return F[A]|F[A+1]<<8|F[A+2]<<16|F[A+3]<<24},getInt32LE(F,A){return F[A]|F[A+1]<<8|F[A+2]<<16|F[A+3]<<24},getUint32LE(F,A){return F[A]+F[A+1]*256+F[A+2]*65536+F[A+3]*16777216},getUint32BE(F,A){return F[A+3]+F[A+2]*256+F[A+1]*65536+F[A]*16777216},getBigInt64LE(F,A){const B=F1.getUint32LE(F,A),D=F1.getUint32LE(F,A+4);return(BigInt(D)<<BigInt(32))+BigInt(B)},getFloat64LE:Vq?(F,A)=>{return R1[7]=F[A],R1[6]=F[A+1],R1[5]=F[A+2],R1[4]=F[A+3],R1[3]=F[A+4],R1[2]=F[A+5],R1[1]=F[A+6],R1[0]=F[A+7],g9[0]}:(F,A)=>{return R1[0]=F[A],R1[1]=F[A+1],R1[2]=F[A+2],R1[3]=F[A+3],R1[4]=F[A+4],R1[5]=F[A+5],R1[6]=F[A+6],R1[7]=F[A+7],g9[0]},setInt32BE(F,A,B){return F[A+3]=B,B>>>=8,F[A+2]=B,B>>>=8,F[A+1]=B,B>>>=8,F[A]=B,4},setInt32LE(F,A,B){return F[A]=B,B>>>=8,F[A+1]=B,B>>>=8,F[A+2]=B,B>>>=8,F[A+3]=B,4},setBigInt64LE(F,A,B){const D=BigInt(4294967295);let J=Number(B&D);F[A]=J,J>>=8,F[A+1]=J,J>>=8,F[A+2]=J,J>>=8,F[A+3]=J;let Z=Number(B>>BigInt(32)&D);return F[A+4]=Z,Z>>=8,F[A+5]=Z,Z>>=8,F[A+6]=Z,Z>>=8,F[A+7]=Z,8},setFloat64LE:Vq?(F,A,B)=>{return g9[0]=B,F[A]=R1[7],F[A+1]=R1[6],F[A+2]=R1[5],F[A+3]=R1[4],F[A+4]=R1[3],F[A+5]=R1[2],F[A+6]=R1[1],F[A+7]=R1[0],8}:(F,A,B)=>{return g9[0]=B,F[A]=R1[0],F[A+1]=R1[1],F[A+2]=R1[2],F[A+3]=R1[3],F[A+4]=R1[4],F[A+5]=R1[5],F[A+6]=R1[6],F[A+7]=R1[7],8}},lm=new RegExp("^[0-9a-fA-F]{24}$"),x4=null;class D0 extends B2{get _bsontype(){return"ObjectId"}constructor(F){super();let A;if(typeof F==="object"&&F&&"id"in F){if(typeof F.id!=="string"&&!ArrayBuffer.isView(F.id))throw new g("Argument passed in must have an id that is of type string or Buffer");if("toHexString"in F&&typeof F.toHexString==="function")A=k.fromHex(F.toHexString());else A=F.id}else A=F;if(A==null||typeof A==="number")this.buffer=D0.generate(typeof A==="number"?A:void 0);else if(ArrayBuffer.isView(A)&&A.byteLength===12)this.buffer=k.toLocalBufferType(A);else if(typeof A==="string")if(A.length===24&&lm.test(A))this.buffer=k.fromHex(A);else throw new g("input must be a 24 character hex string, 12 byte Uint8Array, or an integer");else throw new g("Argument passed in does not match the accepted types");if(D0.cacheHexString)this.__id=k.toHex(this.id)}get id(){return this.buffer}set id(F){if(this.buffer=F,D0.cacheHexString)this.__id=k.toHex(F)}toHexString(){if(D0.cacheHexString&&this.__id)return this.__id;const F=k.toHex(this.id);if(D0.cacheHexString&&!this.__id)this.__id=F;return F}static getInc(){return D0.index=(D0.index+1)%16777215}static generate(F){if(typeof F!=="number")F=Math.floor(Date.now()/1000);const A=D0.getInc(),B=k.allocateUnsafe(12);if(F1.setInt32BE(B,0,F),x4===null)x4=k.randomBytes(5);return B[4]=x4[0],B[5]=x4[1],B[6]=x4[2],B[7]=x4[3],B[8]=x4[4],B[11]=A&255,B[10]=A>>8&255,B[9]=A>>16&255,B}toString(F){if(F==="base64")return k.toBase64(this.id);if(F==="hex")return this.toHexString();return this.toHexString()}toJSON(){return this.toHexString()}static is(F){return F!=null&&typeof F==="object"&&"_bsontype"in F&&F._bsontype==="ObjectId"}equals(F){if(F===void 0||F===null)return!1;if(D0.is(F))return this.buffer[11]===F.buffer[11]&&k.equals(this.buffer,F.buffer);if(typeof F==="string")return F.toLowerCase()===this.toHexString();if(typeof F==="object"&&typeof F.toHexString==="function"){const A=F.toHexString(),B=this.toHexString();return typeof A==="string"&&A.toLowerCase()===B}return!1}getTimestamp(){const F=new Date,A=F1.getUint32BE(this.buffer,0);return F.setTime(Math.floor(A)*1000),F}static createPk(){return new D0}serializeInto(F,A){return F[A]=this.buffer[0],F[A+1]=this.buffer[1],F[A+2]=this.buffer[2],F[A+3]=this.buffer[3],F[A+4]=this.buffer[4],F[A+5]=this.buffer[5],F[A+6]=this.buffer[6],F[A+7]=this.buffer[7],F[A+8]=this.buffer[8],F[A+9]=this.buffer[9],F[A+10]=this.buffer[10],F[A+11]=this.buffer[11],12}static createFromTime(F){const A=k.allocate(12);for(let B=11;B>=4;B--)A[B]=0;return F1.setInt32BE(A,0,F),new D0(A)}static createFromHexString(F){if(F?.length!==24)throw new g("hex string must be 24 characters");return new D0(k.fromHex(F))}static createFromBase64(F){if(F?.length!==16)throw new g("base64 string must be 16 characters");return new D0(k.fromBase64(F))}static isValid(F){if(F==null)return!1;try{return new D0(F),!0}catch{return!1}}toExtendedJSON(){if(this.toHexString)return{$oid:this.toHexString()};return{$oid:this.toString("hex")}}static fromExtendedJSON(F){return new D0(F.$oid)}inspect(F,A,B){return B??=b2,`new ObjectId(${B(this.toHexString(),A)})`}}D0.index=Math.floor(Math.random()*16777215);class A6 extends B2{get _bsontype(){return"BSONRegExp"}constructor(F,A){super();if(this.pattern=F,this.options=pm(A??""),this.pattern.indexOf("\0")!==-1)throw new g(`BSON Regex patterns cannot contain null bytes, found: ${JSON.stringify(this.pattern)}`);if(this.options.indexOf("\0")!==-1)throw new g(`BSON Regex options cannot contain null bytes, found: ${JSON.stringify(this.options)}`);for(let B=0;B<this.options.length;B++)if(!(this.options[B]==="i"||this.options[B]==="m"||this.options[B]==="x"||this.options[B]==="l"||this.options[B]==="s"||this.options[B]==="u"))throw new g(`The regular expression option [${this.options[B]}] is not supported`)}static parseOptions(F){return F?F.split("").sort().join(""):""}toExtendedJSON(F){if(F=F||{},F.legacy)return{$regex:this.pattern,$options:this.options};return{$regularExpression:{pattern:this.pattern,options:this.options}}}static fromExtendedJSON(F){if("$regex"in F)if(typeof F.$regex!=="string"){if(F.$regex._bsontype==="BSONRegExp")return F}else return new A6(F.$regex,A6.parseOptions(F.$options));if("$regularExpression"in F)return new A6(F.$regularExpression.pattern,A6.parseOptions(F.$regularExpression.options));throw new g(`Unexpected BSONRegExp EJSON object form: ${JSON.stringify(F)}`)}inspect(F,A,B){const D=Um(A)??((X)=>X);B??=b2;const J=D(B(this.pattern),"regexp"),Z=D(B(this.options),"regexp");return`new BSONRegExp(${J}, ${Z})`}}class b4 extends B2{get _bsontype(){return"BSONSymbol"}constructor(F){super();this.value=F}valueOf(){return this.value}toString(){return this.value}toJSON(){return this.value}toExtendedJSON(){return{$symbol:this.value}}static fromExtendedJSON(F){return new b4(F.$symbol)}inspect(F,A,B){return B??=b2,`new BSONSymbol(${B(this.value,A)})`}}var im=I;class F6 extends im{get _bsontype(){return"Timestamp"}constructor(F){if(F==null)super(0,0,!0);else if(typeof F==="bigint")super(F,!0);else if(I.isLong(F))super(F.low,F.high,!0);else if(typeof F==="object"&&"t"in F&&"i"in F){if(typeof F.t!=="number"&&(typeof F.t!=="object"||F.t._bsontype!=="Int32"))throw new g("Timestamp constructed from { t, i } must provide t as a number");if(typeof F.i!=="number"&&(typeof F.i!=="object"||F.i._bsontype!=="Int32"))throw new g("Timestamp constructed from { t, i } must provide i as a number");const A=Number(F.t),B=Number(F.i);if(A<0||Number.isNaN(A))throw new g("Timestamp constructed from { t, i } must provide a positive t");if(B<0||Number.isNaN(B))throw new g("Timestamp constructed from { t, i } must provide a positive i");if(A>4294967295)throw new g("Timestamp constructed from { t, i } must provide t equal or less than uint32 max");if(B>4294967295)throw new g("Timestamp constructed from { t, i } must provide i equal or less than uint32 max");super(B,A,!0)}else throw new g("A Timestamp can only be constructed with: bigint, Long, or { t: number; i: number }")}toJSON(){return{$timestamp:this.toString()}}static fromInt(F){return new F6(I.fromInt(F,!0))}static fromNumber(F){return new F6(I.fromNumber(F,!0))}static fromBits(F,A){return new F6({i:F,t:A})}static fromString(F,A){return new F6(I.fromString(F,!0,A))}toExtendedJSON(){return{$timestamp:{t:this.high>>>0,i:this.low>>>0}}}static fromExtendedJSON(F){const A=I.isLong(F.$timestamp.i)?F.$timestamp.i.getLowBitsUnsigned():F.$timestamp.i,B=I.isLong(F.$timestamp.t)?F.$timestamp.t.getLowBitsUnsigned():F.$timestamp.t;return new F6({t:B,i:A})}inspect(F,A,B){B??=b2;const D=B(this.high>>>0,A),J=B(this.low>>>0,A);return`new Timestamp({ t: ${D}, i: ${J} })`}}F6.MAX_VALUE=I.MAX_UNSIGNED_VALUE;var nm=I.fromNumber(Mq),sm=I.fromNumber(Tq),am=/^\$ref$|^\$id$|^\$db$/,nF=/\x00/,Rq=new Set(["$db","$ref","$id","$clusterTime"]),tm={$oid:D0,$binary:z1,$uuid:z1,$symbol:b4,$numberInt:C3,$numberDecimal:s0,$numberDouble:e2,$numberLong:I,$minKey:g4,$maxKey:_4,$regex:A6,$regularExpression:A6,$timestamp:F6},em={Binary:(F)=>new z1(F.value(),F.sub_type),Code:(F)=>new W3(F.code,F.scope),DBRef:(F)=>new i6(F.collection||F.namespace,F.oid,F.db,F.fields),Decimal128:(F)=>new s0(F.bytes),Double:(F)=>new e2(F.value),Int32:(F)=>new C3(F.value),Long:(F)=>I.fromBits(F.low!=null?F.low:F.low_,F.low!=null?F.high:F.high_,F.low!=null?F.unsigned:F.unsigned_),MaxKey:()=>new _4,MinKey:()=>new g4,ObjectId:(F)=>new D0(F),BSONRegExp:(F)=>new A6(F.pattern,F.options),BSONSymbol:(F)=>new b4(F.value),Timestamp:(F)=>F6.fromBits(F.low,F.high)},y4=Object.create(null);y4.parse=nq;y4.stringify=sq;y4.serialize=Ad;y4.deserialize=Bd;Object.freeze(y4);var b9=Object.create(null);b9.parseToElements=Dd;b9.ByteUtils=k;b9.NumberUtils=F1;Object.freeze(b9);var aq=17825792,s3=k.allocate(aq),Jd=Object.freeze({__proto__:null,BSONError:g,BSONOffsetError:V6,BSONRegExp:A6,BSONRuntimeError:P8,BSONSymbol:b4,BSONType:vq,BSONValue:B2,BSONVersionError:a3,Binary:z1,Code:W3,DBRef:i6,Decimal128:s0,Double:e2,EJSON:y4,Int32:C3,Long:I,MaxKey:_4,MinKey:g4,ObjectId:D0,Timestamp:F6,UUID:M0,calculateObjectSize:FK,deserialize:eq,deserializeStream:AK,onDemand:b9,serialize:tq,serializeWithBufferAndIndex:oq,setInternalBufferSize:rq});Zd.BSON=Jd;Zd.BSONError=g;Zd.BSONOffsetError=V6;Zd.BSONRegExp=A6;Zd.BSONRuntimeError=P8;Zd.BSONSymbol=b4;Zd.BSONType=vq;Zd.BSONValue=B2;Zd.BSONVersionError=a3;Zd.Binary=z1;Zd.Code=W3;Zd.DBRef=i6;Zd.Decimal128=s0;Zd.Double=e2;Zd.EJSON=y4;Zd.Int32=C3;Zd.Long=I;Zd.MaxKey=_4;Zd.MinKey=g4;Zd.ObjectId=D0;Zd.Timestamp=F6;Zd.UUID=M0;Zd.calculateObjectSize=FK;Zd.deserialize=eq;Zd.deserializeStream=AK;Zd.onDemand=b9;Zd.serialize=tq;Zd.serializeWithBufferAndIndex=oq;Zd.setInternalBufferSize=rq});var sF=z((vC1,BK)=>{BK.exports=B6().Decimal128});var t=z((_d)=>{_d.arrayAtomicsBackupSymbol=Symbol("mongoose#Array#atomicsBackup");_d.arrayAtomicsSymbol=Symbol("mongoose#Array#_atomics");_d.arrayParentSymbol=Symbol("mongoose#Array#_parent");_d.arrayPathSymbol=Symbol("mongoose#Array#_path");_d.arraySchemaSymbol=Symbol("mongoose#Array#_schema");_d.documentArrayParent=Symbol("mongoose#documentArrayParent");_d.documentIsSelected=Symbol("mongoose#Document#isSelected");_d.documentIsModified=Symbol("mongoose#Document#isModified");_d.documentModifiedPaths=Symbol("mongoose#Document#modifiedPaths");_d.documentSchemaSymbol=Symbol("mongoose#Document#schema");_d.getSymbol=Symbol("mongoose#Document#get");_d.modelSymbol=Symbol("mongoose#Model");_d.objectIdSymbol=Symbol("mongoose#ObjectId");_d.populateModelSymbol=Symbol("mongoose#PopulateOptions#Model");_d.schemaTypeSymbol=Symbol("mongoose#schemaType");_d.sessionNewDocuments=Symbol("mongoose#ClientSession#newDocuments");_d.scopeSymbol=Symbol("mongoose#Document#scope");_d.validatorErrorSymbol=Symbol("mongoose#validatorError")});var H3=z((mC1,DK)=>{var O8=B6().ObjectId,Fc=t().objectIdSymbol;Object.defineProperty(O8.prototype,"_id",{enumerable:!1,configurable:!0,get:function(){return this}});/*!
 * Convenience `valueOf()` to allow comparing ObjectIds using double equals re: gh-7299
 */if(!O8.prototype.hasOwnProperty("valueOf"))O8.prototype.valueOf=function F(){return this.toString()};O8.prototype[Fc]=!0;DK.exports=O8});var v4=z((dC1,JK)=>{JK.exports=new Set(["__proto__","constructor","prototype"])});var aF=z((Ac)=>{Ac.isMongooseArray=function(F){return Array.isArray(F)&&F.isMongooseArray}});var S8=z((lC1,ZK)=>{var Dc=aF().isMongooseArray;ZK.exports=function(F){return F!=null&&(Dc(F)||F.$__!=null||F.isMongooseBuffer||F.$isMongooseMap)}});var MZ=z((pC1,XK)=>{var Jc=/^function\s*([^\s(]+)/;XK.exports=function(F){return F.name||(F.toString().trim().match(Jc)||[])[1]}});var L2=z((iC1,YK)=>{var Zc=function(F,A){return typeof F==="object"&&F!==null&&F._bsontype===A};YK.exports=Zc});var r3=z((nC1,$K)=>{$K.exports=function(F){return Buffer.isBuffer(F)||Object.prototype.toString.call(F)==="[object Object]"}});var rF=z((sC1,GK)=>{GK.exports=function F(A){if(A==null||typeof A!=="object")return!1;const B=Object.getPrototypeOf(A);return!B||B.constructor.name==="Object"}});var y9=z((Xc)=>{var EK=Symbol("mongoose#trustedSymbol");Xc.trustedSymbol=EK;Xc.trusted=function F(A){if(A==null||typeof A!=="object")return A;return A[EK]=!0,A}});var J0=z((rC1,CK)=>{var uZ=function(F,A,B){if(F==null)return F;if(Array.isArray(F))return Qc(qc(F)?F.__array:F,A);if(Cc(F)){if(A){if(A._skipSingleNestedGetters&&F.$isSingleNested)A._calledWithOptions=Object.assign({},A._calledWithOptions||{},{getters:!1});if(A.retainDocuments&&F.$__!=null){const X=F.$clone();if(F.__index!=null)X.__index=F.__index;if(F.__parentArray!=null)X.__parentArray=F.__parentArray;return X.$__parent=F.$__parent,X}}const J=F.$isSingleNested;if(zc(F)&&F.$__!=null&&F._doc!=null)return F._doc;let Z;if(A&&A.json&&typeof F.toJSON==="function")Z=F.toJSON(A);else Z=F.toObject(A);if(A&&A.minimize&&!F.constructor.$__required&&J&&Object.keys(Z).length===0)return;return Z}const D=F.constructor;if(D)switch(Hc(D)){case"Object":return jZ(F,A,B);case"Date":return new D(+F);case"RegExp":return Lc(F);default:break}if(WK(F,"ObjectId")){if(A&&A.flattenObjectIds)return F.toJSON();return new Ec(F.id)}if(WK(F,"Decimal128")){if(A&&A.flattenDecimals)return F.toJSON();return Gc.fromString(F.toString())}if(!D&&Kc(F))return jZ(F,A,B);if(typeof F==="object"&&F[Uc.schemaTypeSymbol])return F.clone();if(A&&A.bson&&typeof F.toBSON==="function")return F;if(typeof F.valueOf==="function")return F.valueOf();return jZ(F,A,B)},jZ=function(F,A,B){const D=A&&A.minimize,J=A&&A.omitUndefined,Z=A&&A._seen,X={};let Y;if(Z&&Z.has(F))return Z.get(F);else if(Z)Z.set(F,X);if(TZ in F)X[TZ]=F[TZ];let $=0,G="";const E=Object.keys(F),W=E.length;for($=0;$<W;++$){if(Wc.has(G=E[$]))continue;const C=uZ(F[G],A,!1);if((D===!1||J)&&typeof C==="undefined")delete X[G];else if(D!==!0||typeof C!=="undefined")Y||(Y=!0),X[G]=C}return D&&!B?Y&&X:X},Qc=function(F,A){let B=0;const D=F.length,J=new Array(D);for(B=0;B<D;++B)J[B]=uZ(F[B],A,!0);return J},Lc=function(F){const A=new RegExp(F.source,F.flags);if(A.lastIndex!==F.lastIndex)A.lastIndex=F.lastIndex;return A},Gc=sF(),Ec=H3(),Wc=v4(),Cc=S8(),Hc=MZ(),WK=L2(),qc=aF().isMongooseArray,Kc=r3(),zc=rF(),Uc=t(),TZ=y9().trustedSymbol;CK.exports=uZ;/*!
 * ignore
 */});var v9=z((HK,qK)=>{/*!
 * Connection states
 */var D2=qK.exports=HK=Object.create(null);D2[0]="disconnected";D2[1]="connected";D2[2]="connecting";D2[3]="disconnecting";D2[99]="uninitialized";D2.disconnected=0;D2.connected=1;D2.connecting=2;D2.disconnecting=3;D2.uninitialized=99});var y2=z((tC1,KK)=>{/*!
 * Centralize this so we can more easily work around issues with people
 * stubbing out `process.nextTick()` in tests using sinon:
 * https://github.com/sinonjs/lolex#automatically-incrementing-mocked-time
 * See gh-6074
 */var Vc=typeof process!=="undefined"&&typeof process.nextTick==="function"?process.nextTick.bind(process):(F)=>setTimeout(F,0);KK.exports=function F(A){return Vc(A)}});var QK=z((oC1,UK)=>{var g1=function(F,A,B){if(B===void 0)B={};if(this.opts=B,this.name=F,this.collectionName=F,this.conn=A,this.queue=[],this.buffer=!0,this.emitter=new wc,Rc.connected===this.conn.readyState)this.onOpen()};/*!
 * Module dependencies.
 */var wc=import.meta.require("events").EventEmitter,Rc=v9(),zK=y2();g1.prototype.name;g1.prototype.collectionName;g1.prototype.conn;g1.prototype.onOpen=function(){this.buffer=!1,zK(()=>this.doQueue())};g1.prototype.onClose=function(){};g1.prototype.addQueue=function(F,A){return this.queue.push([F,A]),this};g1.prototype.removeQueue=function(F,A){const B=this.queue.findIndex((D)=>D[0]===F&&D[1]===A);if(B===-1)return!1;return this.queue.splice(B,1),!0};g1.prototype.doQueue=function(){for(let A of this.queue)if(typeof A[0]==="function")A[0].apply(this,A[1]);else this[A[0]].apply(this,A[1]);this.queue=[];const F=this;return zK(function(){F.emitter.emit("queue")}),this};g1.prototype.ensureIndex=function(){throw new Error("Collection#ensureIndex unimplemented by driver")};g1.prototype.createIndex=function(){throw new Error("Collection#createIndex unimplemented by driver")};g1.prototype.findAndModify=function(){throw new Error("Collection#findAndModify unimplemented by driver")};g1.prototype.findOneAndUpdate=function(){throw new Error("Collection#findOneAndUpdate unimplemented by driver")};g1.prototype.findOneAndDelete=function(){throw new Error("Collection#findOneAndDelete unimplemented by driver")};g1.prototype.findOneAndReplace=function(){throw new Error("Collection#findOneAndReplace unimplemented by driver")};g1.prototype.findOne=function(){throw new Error("Collection#findOne unimplemented by driver")};g1.prototype.find=function(){throw new Error("Collection#find unimplemented by driver")};g1.prototype.insert=function(){throw new Error("Collection#insert unimplemented by driver")};g1.prototype.insertOne=function(){throw new Error("Collection#insertOne unimplemented by driver")};g1.prototype.insertMany=function(){throw new Error("Collection#insertMany unimplemented by driver")};g1.prototype.save=function(){throw new Error("Collection#save unimplemented by driver")};g1.prototype.updateOne=function(){throw new Error("Collection#updateOne unimplemented by driver")};g1.prototype.updateMany=function(){throw new Error("Collection#updateMany unimplemented by driver")};g1.prototype.deleteOne=function(){throw new Error("Collection#deleteOne unimplemented by driver")};g1.prototype.deleteMany=function(){throw new Error("Collection#deleteMany unimplemented by driver")};g1.prototype.getIndexes=function(){throw new Error("Collection#getIndexes unimplemented by driver")};g1.prototype.watch=function(){throw new Error("Collection#watch unimplemented by driver")};/*!
 * ignore
 */g1.prototype._shouldBufferCommands=function F(){const A=this.opts;if(A.bufferCommands!=null)return A.bufferCommands;if(A&&A.schemaUserProvidedOptions!=null&&A.schemaUserProvidedOptions.bufferCommands!=null)return A.schemaUserProvidedOptions.bufferCommands;return this.conn._shouldBufferCommands()};/*!
 * ignore
 */g1.prototype._getBufferTimeoutMS=function F(){const A=this.conn,B=this.opts;if(B.bufferTimeoutMS!=null)return B.bufferTimeoutMS;if(B&&B.schemaUserProvidedOptions!=null&&B.schemaUserProvidedOptions.bufferTimeoutMS!=null)return B.schemaUserProvidedOptions.bufferTimeoutMS;if(A.config.bufferTimeoutMS!=null)return A.config.bufferTimeoutMS;if(A.base!=null&&A.base.get("bufferTimeoutMS")!=null)return A.base.get("bufferTimeoutMS");return 1e4};/*!
 * Module exports.
 */UK.exports=g1});var H1=z((eC1,LK)=>{/*!
 * ignore
 */class OZ extends Error{}Object.defineProperty(OZ.prototype,"name",{value:"MongooseError"});LK.exports=OZ});var S1=z((Z0)=>{var Ic=function(F,A){const B=k8.BSON.onDemand.parseToElements(F,A);return Array.isArray(B)?B:[...B]},Nc=function(F){const{fieldsAsRaw:A,useBigInt64:B,promoteValues:D,promoteBuffers:J,promoteLongs:Z,serializeFunctions:X,ignoreUndefined:Y,bsonRegExp:$,raw:G,enableUtf8Validation:E}=F;return{fieldsAsRaw:A,useBigInt64:B,promoteValues:D,promoteBuffers:J,promoteLongs:Z,serializeFunctions:X,ignoreUndefined:Y,bsonRegExp:$,raw:G,enableUtf8Validation:E}},Pc=function(F,A){const B=A?.bsonOptions;return{raw:F?.raw??B?.raw??!1,useBigInt64:F?.useBigInt64??B?.useBigInt64??!1,promoteLongs:F?.promoteLongs??B?.promoteLongs??!0,promoteValues:F?.promoteValues??B?.promoteValues??!0,promoteBuffers:F?.promoteBuffers??B?.promoteBuffers??!1,ignoreUndefined:F?.ignoreUndefined??B?.ignoreUndefined??!1,bsonRegExp:F?.bsonRegExp??B?.bsonRegExp??!1,serializeFunctions:F?.serializeFunctions??B?.serializeFunctions??!1,fieldsAsRaw:F?.fieldsAsRaw??B?.fieldsAsRaw??{},enableUtf8Validation:F?.enableUtf8Validation??B?.enableUtf8Validation??!0}};Object.defineProperty(Z0,"__esModule",{value:!0});Z0.resolveBSONOptions=Z0.pluckBSONSerializeOptions=Z0.toUTF8=Z0.getBigInt64LE=Z0.getFloat64LE=Z0.getInt32LE=Z0.parseToElementsToArray=Z0.UUID=Z0.Timestamp=Z0.serialize=Z0.ObjectId=Z0.MinKey=Z0.MaxKey=Z0.Long=Z0.Int32=Z0.EJSON=Z0.Double=Z0.deserialize=Z0.Decimal128=Z0.DBRef=Z0.Code=Z0.calculateObjectSize=Z0.BSONType=Z0.BSONSymbol=Z0.BSONRegExp=Z0.BSONError=Z0.BSON=Z0.Binary=void 0;var k8=B6(),C0=B6();Object.defineProperty(Z0,"Binary",{enumerable:!0,get:function(){return C0.Binary}});Object.defineProperty(Z0,"BSON",{enumerable:!0,get:function(){return C0.BSON}});Object.defineProperty(Z0,"BSONError",{enumerable:!0,get:function(){return C0.BSONError}});Object.defineProperty(Z0,"BSONRegExp",{enumerable:!0,get:function(){return C0.BSONRegExp}});Object.defineProperty(Z0,"BSONSymbol",{enumerable:!0,get:function(){return C0.BSONSymbol}});Object.defineProperty(Z0,"BSONType",{enumerable:!0,get:function(){return C0.BSONType}});Object.defineProperty(Z0,"calculateObjectSize",{enumerable:!0,get:function(){return C0.calculateObjectSize}});Object.defineProperty(Z0,"Code",{enumerable:!0,get:function(){return C0.Code}});Object.defineProperty(Z0,"DBRef",{enumerable:!0,get:function(){return C0.DBRef}});Object.defineProperty(Z0,"Decimal128",{enumerable:!0,get:function(){return C0.Decimal128}});Object.defineProperty(Z0,"deserialize",{enumerable:!0,get:function(){return C0.deserialize}});Object.defineProperty(Z0,"Double",{enumerable:!0,get:function(){return C0.Double}});Object.defineProperty(Z0,"EJSON",{enumerable:!0,get:function(){return C0.EJSON}});Object.defineProperty(Z0,"Int32",{enumerable:!0,get:function(){return C0.Int32}});Object.defineProperty(Z0,"Long",{enumerable:!0,get:function(){return C0.Long}});Object.defineProperty(Z0,"MaxKey",{enumerable:!0,get:function(){return C0.MaxKey}});Object.defineProperty(Z0,"MinKey",{enumerable:!0,get:function(){return C0.MinKey}});Object.defineProperty(Z0,"ObjectId",{enumerable:!0,get:function(){return C0.ObjectId}});Object.defineProperty(Z0,"serialize",{enumerable:!0,get:function(){return C0.serialize}});Object.defineProperty(Z0,"Timestamp",{enumerable:!0,get:function(){return C0.Timestamp}});Object.defineProperty(Z0,"UUID",{enumerable:!0,get:function(){return C0.UUID}});Z0.parseToElementsToArray=Ic;Z0.getInt32LE=k8.BSON.onDemand.NumberUtils.getInt32LE;Z0.getFloat64LE=k8.BSON.onDemand.NumberUtils.getFloat64LE;Z0.getBigInt64LE=k8.BSON.onDemand.NumberUtils.getBigInt64LE;Z0.toUTF8=k8.BSON.onDemand.ByteUtils.toUTF8;Z0.pluckBSONSerializeOptions=Nc;Z0.resolveBSONOptions=Pc});var p=z((aK)=>{var kc=function(F){return F!=null&&typeof F==="object"&&"errors"in F&&Array.isArray(F.errors)},xc=function(F){return F[vK]===!0},fc=function(F){const A=Object.assign({},F);if(A.ok===0)A.ok=1,delete A.errmsg,delete A.code,delete A.codeName;return A},_c=function(F,A){if(F instanceof h4)return!0;if(F instanceof n6){if((A>=9||nK(F))&&!F.hasErrorLabel(aK.MongoErrorLabel.HandshakeError))return!1}if(F instanceof fZ)return wK.has(F.result?.code??F.code??0);if(F instanceof n6&&typeof F.code==="number")return wK.has(F.code);if(aK.LEGACY_NOT_WRITABLE_PRIMARY_ERROR_MESSAGE.test(F.message))return!0;if(aK.NODE_IS_RECOVERING_ERROR_MESSAGE.test(F.message))return!0;return!1},nK=function(F){return F.hasErrorLabel(aK.MongoErrorLabel.RetryableWriteError)||F.hasErrorLabel(aK.MongoErrorLabel.PoolRequstedRetry)},gc=function(F){if(typeof F.code==="number"?iK.has(F.code):!1)return!0;if(F instanceof h4)return!0;if(aK.LEGACY_NOT_WRITABLE_PRIMARY_ERROR_MESSAGE.test(F.message))return!0;if(aK.NODE_IS_RECOVERING_ERROR_MESSAGE.test(F.message))return!0;return!1},sK=function(F){if(typeof F.code==="number")return bc.has(F.code);return aK.LEGACY_NOT_PRIMARY_OR_SECONDARY_ERROR_MESSAGE.test(F.message)||aK.NODE_IS_RECOVERING_ERROR_MESSAGE.test(F.message)},hc=function(F){if(typeof F.code==="number")return yc.has(F.code);if(sK(F))return!1;return aK.LEGACY_NOT_WRITABLE_PRIMARY_ERROR_MESSAGE.test(F.message)},mc=function(F){return!!(typeof F.code==="number"&&vc.has(F.code))},dc=function(F){if(F instanceof kZ||F==null)return!0;return sK(F)||hc(F)},cc=function(F){return!!(F instanceof h4&&F.message.match(/timed out/))},lc=function(F,A){if(F==null||!(F instanceof n6))return!1;if(F instanceof h4)return!0;if(A!=null&&A>=9){if(F.code===aK.MONGODB_ERROR_CODES.CursorNotFound)return!0;return F.hasErrorLabel(aK.MongoErrorLabel.ResumableChangeStreamError)}if(typeof F.code==="number")return aK.GET_MORE_RESUMABLE_CODES.has(F.code);return!1};Object.defineProperty(aK,"__esModule",{value:!0});aK.isResumableError=aK.isNetworkTimeoutError=aK.isSDAMUnrecoverableError=aK.isNodeShuttingDownError=aK.isRetryableReadError=aK.isRetryableWriteError=aK.needsRetryableWriteLabel=aK.MongoWriteConcernError=aK.MongoServerSelectionError=aK.MongoSystemError=aK.MongoMissingDependencyError=aK.MongoMissingCredentialsError=aK.MongoCompatibilityError=aK.MongoInvalidArgumentError=aK.MongoParseError=aK.MongoNetworkTimeoutError=aK.MongoNetworkError=aK.isNetworkErrorBeforeHandshake=aK.MongoTopologyClosedError=aK.MongoCursorExhaustedError=aK.MongoServerClosedError=aK.MongoCursorInUseError=aK.MongoUnexpectedServerResponseError=aK.MongoGridFSChunkError=aK.MongoGridFSStreamError=aK.MongoTailableCursorError=aK.MongoChangeStreamError=aK.MongoAzureError=aK.MongoAWSError=aK.MongoKerberosError=aK.MongoExpiredSessionError=aK.MongoTransactionError=aK.MongoNotConnectedError=aK.MongoDecompressionError=aK.MongoBatchReExecutionError=aK.MongoRuntimeError=aK.MongoAPIError=aK.MongoDriverError=aK.MongoServerError=aK.MongoError=aK.MongoErrorLabel=aK.GET_MORE_RESUMABLE_CODES=aK.MONGODB_ERROR_CODES=aK.NODE_IS_RECOVERING_ERROR_MESSAGE=aK.LEGACY_NOT_PRIMARY_OR_SECONDARY_ERROR_MESSAGE=aK.LEGACY_NOT_WRITABLE_PRIMARY_ERROR_MESSAGE=void 0;var x8=Symbol("errorLabels");aK.LEGACY_NOT_WRITABLE_PRIMARY_ERROR_MESSAGE=new RegExp("not master","i");aK.LEGACY_NOT_PRIMARY_OR_SECONDARY_ERROR_MESSAGE=new RegExp("not master or secondary","i");aK.NODE_IS_RECOVERING_ERROR_MESSAGE=new RegExp("node is recovering","i");aK.MONGODB_ERROR_CODES=Object.freeze({HostUnreachable:6,HostNotFound:7,NetworkTimeout:89,ShutdownInProgress:91,PrimarySteppedDown:189,ExceededTimeLimit:262,SocketException:9001,NotWritablePrimary:10107,InterruptedAtShutdown:11600,InterruptedDueToReplStateChange:11602,NotPrimaryNoSecondaryOk:13435,NotPrimaryOrSecondary:13436,StaleShardVersion:63,StaleEpoch:150,StaleConfig:13388,RetryChangeStream:234,FailedToSatisfyReadPreference:133,CursorNotFound:43,LegacyNotPrimary:10058,WriteConcernFailed:64,NamespaceNotFound:26,IllegalOperation:20,MaxTimeMSExpired:50,UnknownReplWriteConcern:79,UnsatisfiableWriteConcern:100,Reauthenticate:391});aK.GET_MORE_RESUMABLE_CODES=new Set([aK.MONGODB_ERROR_CODES.HostUnreachable,aK.MONGODB_ERROR_CODES.HostNotFound,aK.MONGODB_ERROR_CODES.NetworkTimeout,aK.MONGODB_ERROR_CODES.ShutdownInProgress,aK.MONGODB_ERROR_CODES.PrimarySteppedDown,aK.MONGODB_ERROR_CODES.ExceededTimeLimit,aK.MONGODB_ERROR_CODES.SocketException,aK.MONGODB_ERROR_CODES.NotWritablePrimary,aK.MONGODB_ERROR_CODES.InterruptedAtShutdown,aK.MONGODB_ERROR_CODES.InterruptedDueToReplStateChange,aK.MONGODB_ERROR_CODES.NotPrimaryNoSecondaryOk,aK.MONGODB_ERROR_CODES.NotPrimaryOrSecondary,aK.MONGODB_ERROR_CODES.StaleShardVersion,aK.MONGODB_ERROR_CODES.StaleEpoch,aK.MONGODB_ERROR_CODES.StaleConfig,aK.MONGODB_ERROR_CODES.RetryChangeStream,aK.MONGODB_ERROR_CODES.FailedToSatisfyReadPreference,aK.MONGODB_ERROR_CODES.CursorNotFound]);aK.MongoErrorLabel=Object.freeze({RetryableWriteError:"RetryableWriteError",TransientTransactionError:"TransientTransactionError",UnknownTransactionCommitResult:"UnknownTransactionCommitResult",ResumableChangeStreamError:"ResumableChangeStreamError",HandshakeError:"HandshakeError",ResetPool:"ResetPool",PoolRequstedRetry:"PoolRequstedRetry",InterruptInUseConnections:"InterruptInUseConnections",NoWritesPerformed:"NoWritesPerformed"});class n6 extends Error{constructor(F,A){super(F,A);this[x8]=new Set}static buildErrorMessage(F){if(typeof F==="string")return F;if(kc(F)&&F.message.length===0)return F.errors.length===0?"AggregateError has an empty errors array. Please check the `cause` property for more information.":F.errors.map(({message:A})=>A).join(", ");return F!=null&&typeof F==="object"&&"message"in F&&typeof F.message==="string"?F.message:"empty error message"}get name(){return"MongoError"}get errmsg(){return this.message}hasErrorLabel(F){return this[x8].has(F)}addErrorLabel(F){this[x8].add(F)}get errorLabels(){return Array.from(this[x8])}}aK.MongoError=n6;class SZ extends n6{constructor(F){super(F.message||F.errmsg||F.$err||"n/a");if(F.errorLabels)this[x8]=new Set(F.errorLabels);this.errorResponse=F;for(let A in F)if(A!=="errorLabels"&&A!=="errmsg"&&A!=="message"&&A!=="errorResponse")this[A]=F[A]}get name(){return"MongoServerError"}}aK.MongoServerError=SZ;class _8 extends n6{constructor(F,A){super(F,A)}get name(){return"MongoDriverError"}}aK.MongoDriverError=_8;class J2 extends _8{constructor(F,A){super(F,A)}get name(){return"MongoAPIError"}}aK.MongoAPIError=J2;class s6 extends _8{constructor(F,A){super(F,A)}get name(){return"MongoRuntimeError"}}aK.MongoRuntimeError=s6;class RK extends J2{constructor(F="This batch has already been executed, create new batch to execute"){super(F)}get name(){return"MongoBatchReExecutionError"}}aK.MongoBatchReExecutionError=RK;class IK extends s6{constructor(F){super(F)}get name(){return"MongoDecompressionError"}}aK.MongoDecompressionError=IK;class NK extends J2{constructor(F){super(F)}get name(){return"MongoNotConnectedError"}}aK.MongoNotConnectedError=NK;class PK extends J2{constructor(F){super(F)}get name(){return"MongoTransactionError"}}aK.MongoTransactionError=PK;class MK extends J2{constructor(F="Cannot use a session that has ended"){super(F)}get name(){return"MongoExpiredSessionError"}}aK.MongoExpiredSessionError=MK;class TK extends s6{constructor(F){super(F)}get name(){return"MongoKerberosError"}}aK.MongoKerberosError=TK;class jK extends s6{constructor(F,A){super(F,A)}get name(){return"MongoAWSError"}}aK.MongoAWSError=jK;class uK extends s6{constructor(F){super(F)}get name(){return"MongoAzureError"}}aK.MongoAzureError=uK;class OK extends s6{constructor(F){super(F)}get name(){return"MongoChangeStreamError"}}aK.MongoChangeStreamError=OK;class SK extends J2{constructor(F="Tailable cursor does not support this operation"){super(F)}get name(){return"MongoTailableCursorError"}}aK.MongoTailableCursorError=SK;class kK extends s6{constructor(F){super(F)}get name(){return"MongoGridFSStreamError"}}aK.MongoGridFSStreamError=kK;class xK extends s6{constructor(F){super(F)}get name(){return"MongoGridFSChunkError"}}aK.MongoGridFSChunkError=xK;class fK extends s6{constructor(F){super(F)}get name(){return"MongoUnexpectedServerResponseError"}}aK.MongoUnexpectedServerResponseError=fK;class _K extends J2{constructor(F="Cursor is already initialized"){super(F)}get name(){return"MongoCursorInUseError"}}aK.MongoCursorInUseError=_K;class gK extends J2{constructor(F="Server is closed"){super(F)}get name(){return"MongoServerClosedError"}}aK.MongoServerClosedError=gK;class bK extends J2{constructor(F){super(F||"Cursor is exhausted")}get name(){return"MongoCursorExhaustedError"}}aK.MongoCursorExhaustedError=bK;class yK extends J2{constructor(F="Topology is closed"){super(F)}get name(){return"MongoTopologyClosedError"}}aK.MongoTopologyClosedError=yK;var vK=Symbol("beforeHandshake");aK.isNetworkErrorBeforeHandshake=xc;class h4 extends n6{constructor(F,A){super(F,{cause:A?.cause});if(A&&typeof A.beforeHandshake==="boolean")this[vK]=A.beforeHandshake}get name(){return"MongoNetworkError"}}aK.MongoNetworkError=h4;class hK extends h4{constructor(F,A){super(F,A)}get name(){return"MongoNetworkTimeoutError"}}aK.MongoNetworkTimeoutError=hK;class kZ extends _8{constructor(F){super(F)}get name(){return"MongoParseError"}}aK.MongoParseError=kZ;class mK extends J2{constructor(F){super(F)}get name(){return"MongoInvalidArgumentError"}}aK.MongoInvalidArgumentError=mK;class dK extends J2{constructor(F){super(F)}get name(){return"MongoCompatibilityError"}}aK.MongoCompatibilityError=dK;class cK extends J2{constructor(F){super(F)}get name(){return"MongoMissingCredentialsError"}}aK.MongoMissingCredentialsError=cK;class lK extends J2{constructor(F,A){super(F,A);this.dependencyName=A.dependencyName}get name(){return"MongoMissingDependencyError"}}aK.MongoMissingDependencyError=lK;class xZ extends n6{constructor(F,A){if(A&&A.error)super(n6.buildErrorMessage(A.error.message||A.error),{cause:A.error});else super(F);if(A)this.reason=A;this.code=A.error?.code}get name(){return"MongoSystemError"}}aK.MongoSystemError=xZ;class pK extends xZ{constructor(F,A){super(F,A)}get name(){return"MongoServerSelectionError"}}aK.MongoServerSelectionError=pK;class fZ extends SZ{constructor(F,A){if(A&&Array.isArray(A.errorLabels))F.errorLabels=A.errorLabels;super(F);if(this.errInfo=F.errInfo,A!=null)this.result=fc(A)}get name(){return"MongoWriteConcernError"}}aK.MongoWriteConcernError=fZ;var iK=new Set([aK.MONGODB_ERROR_CODES.HostUnreachable,aK.MONGODB_ERROR_CODES.HostNotFound,aK.MONGODB_ERROR_CODES.NetworkTimeout,aK.MONGODB_ERROR_CODES.ShutdownInProgress,aK.MONGODB_ERROR_CODES.PrimarySteppedDown,aK.MONGODB_ERROR_CODES.SocketException,aK.MONGODB_ERROR_CODES.NotWritablePrimary,aK.MONGODB_ERROR_CODES.InterruptedAtShutdown,aK.MONGODB_ERROR_CODES.InterruptedDueToReplStateChange,aK.MONGODB_ERROR_CODES.NotPrimaryNoSecondaryOk,aK.MONGODB_ERROR_CODES.NotPrimaryOrSecondary,aK.MONGODB_ERROR_CODES.ExceededTimeLimit]),wK=iK;aK.needsRetryableWriteLabel=_c;aK.isRetryableWriteError=nK;aK.isRetryableReadError=gc;var bc=new Set([aK.MONGODB_ERROR_CODES.ShutdownInProgress,aK.MONGODB_ERROR_CODES.PrimarySteppedDown,aK.MONGODB_ERROR_CODES.InterruptedAtShutdown,aK.MONGODB_ERROR_CODES.InterruptedDueToReplStateChange,aK.MONGODB_ERROR_CODES.NotPrimaryOrSecondary]),yc=new Set([aK.MONGODB_ERROR_CODES.NotWritablePrimary,aK.MONGODB_ERROR_CODES.NotPrimaryNoSecondaryOk,aK.MONGODB_ERROR_CODES.LegacyNotPrimary]),vc=new Set([aK.MONGODB_ERROR_CODES.InterruptedAtShutdown,aK.MONGODB_ERROR_CODES.ShutdownInProgress]);aK.isNodeShuttingDownError=mc;aK.isSDAMUnrecoverableError=dc;aK.isNetworkTimeoutError=cc;aK.isResumableError=lc});var T0=z((eK)=>{Object.defineProperty(eK,"__esModule",{value:!0});eK.ReadPreference=eK.ReadPreferenceMode=void 0;var m4=p();eK.ReadPreferenceMode=Object.freeze({primary:"primary",primaryPreferred:"primaryPreferred",secondary:"secondary",secondaryPreferred:"secondaryPreferred",nearest:"nearest"});class q1{constructor(F,A,B){if(!q1.isValid(F))throw new m4.MongoInvalidArgumentError(`Invalid read preference mode ${JSON.stringify(F)}`);if(B==null&&typeof A==="object"&&!Array.isArray(A))B=A,A=void 0;else if(A&&!Array.isArray(A))throw new m4.MongoInvalidArgumentError("ReadPreference tags must be an array");if(this.mode=F,this.tags=A,this.hedge=B?.hedge,this.maxStalenessSeconds=void 0,this.minWireVersion=void 0,B=B??{},B.maxStalenessSeconds!=null){if(B.maxStalenessSeconds<=0)throw new m4.MongoInvalidArgumentError("maxStalenessSeconds must be a positive integer");this.maxStalenessSeconds=B.maxStalenessSeconds,this.minWireVersion=5}if(this.mode===q1.PRIMARY){if(this.tags&&Array.isArray(this.tags)&&this.tags.length>0)throw new m4.MongoInvalidArgumentError("Primary read preference cannot be combined with tags");if(this.maxStalenessSeconds)throw new m4.MongoInvalidArgumentError("Primary read preference cannot be combined with maxStalenessSeconds");if(this.hedge)throw new m4.MongoInvalidArgumentError("Primary read preference cannot be combined with hedge")}}get preference(){return this.mode}static fromString(F){return new q1(F)}static fromOptions(F){if(!F)return;const A=F.readPreference??F.session?.transaction.options.readPreference,B=F.readPreferenceTags;if(A==null)return;if(typeof A==="string")return new q1(A,B,{maxStalenessSeconds:F.maxStalenessSeconds,hedge:F.hedge});else if(!(A instanceof q1)&&typeof A==="object"){const D=A.mode||A.preference;if(D&&typeof D==="string")return new q1(D,A.tags??B,{maxStalenessSeconds:A.maxStalenessSeconds,hedge:F.hedge})}if(B)A.tags=B;return A}static translate(F){if(F.readPreference==null)return F;const A=F.readPreference;if(typeof A==="string")F.readPreference=new q1(A);else if(A&&!(A instanceof q1)&&typeof A==="object"){const B=A.mode||A.preference;if(B&&typeof B==="string")F.readPreference=new q1(B,A.tags,{maxStalenessSeconds:A.maxStalenessSeconds})}else if(!(A instanceof q1))throw new m4.MongoInvalidArgumentError(`Invalid read preference: ${A}`);return F}static isValid(F){return(new Set([q1.PRIMARY,q1.PRIMARY_PREFERRED,q1.SECONDARY,q1.SECONDARY_PREFERRED,q1.NEAREST,null])).has(F)}isValid(F){return q1.isValid(typeof F==="string"?F:this.mode)}secondaryOk(){return(new Set([q1.PRIMARY_PREFERRED,q1.SECONDARY,q1.SECONDARY_PREFERRED,q1.NEAREST])).has(this.mode)}equals(F){return F.mode===this.mode}toJSON(){const F={mode:this.mode};if(Array.isArray(this.tags))F.tags=this.tags;if(this.maxStalenessSeconds)F.maxStalenessSeconds=this.maxStalenessSeconds;if(this.hedge)F.hedge=this.hedge;return F}}q1.PRIMARY=eK.ReadPreferenceMode.primary;q1.PRIMARY_PREFERRED=eK.ReadPreferenceMode.primaryPreferred;q1.SECONDARY=eK.ReadPreferenceMode.secondary;q1.SECONDARY_PREFERRED=eK.ReadPreferenceMode.secondaryPreferred;q1.NEAREST=eK.ReadPreferenceMode.nearest;q1.primary=new q1(eK.ReadPreferenceMode.primary);q1.primaryPreferred=new q1(eK.ReadPreferenceMode.primaryPreferred);q1.secondary=new q1(eK.ReadPreferenceMode.secondary);q1.secondaryPreferred=new q1(eK.ReadPreferenceMode.secondaryPreferred);q1.nearest=new q1(eK.ReadPreferenceMode.nearest);eK.ReadPreference=q1});var v2=z((Az)=>{var Sl=function(F){F.forEach(Ol.clearTimeout),F.clear()},kl=function(F,A){if(F.clusterTime==null)F.clusterTime=A;else if(A.clusterTime.greaterThan(F.clusterTime.clusterTime))F.clusterTime=A};Object.defineProperty(Az,"__esModule",{value:!0});Az._advanceClusterTime=Az.drainTimerQueue=Az.ServerType=Az.TopologyType=Az.STATE_CONNECTED=Az.STATE_CONNECTING=Az.STATE_CLOSED=Az.STATE_CLOSING=void 0;var Ol=import.meta.require("timers");Az.STATE_CLOSING="closing";Az.STATE_CLOSED="closed";Az.STATE_CONNECTING="connecting";Az.STATE_CONNECTED="connected";Az.TopologyType=Object.freeze({Single:"Single",ReplicaSetNoPrimary:"ReplicaSetNoPrimary",ReplicaSetWithPrimary:"ReplicaSetWithPrimary",Sharded:"Sharded",Unknown:"Unknown",LoadBalanced:"LoadBalanced"});Az.ServerType=Object.freeze({Standalone:"Standalone",Mongos:"Mongos",PossiblePrimary:"PossiblePrimary",RSPrimary:"RSPrimary",RSSecondary:"RSSecondary",RSArbiter:"RSArbiter",RSOther:"RSOther",RSGhost:"RSGhost",Unknown:"Unknown",LoadBalancer:"LoadBalancer"});Az.drainTimerQueue=Sl;Az._advanceClusterTime=kl});var b8=z((Zz)=>{var ml=function(){return function F(A,B){return eF(A,B.filter((D)=>D.isWritable))}},dl=function(F){return function A(B,D){if(!F)return[];return D.filter((J)=>{return J.address===F.address&&J.type!==h2.ServerType.Unknown})}},cl=function(F,A){if(!A||!F||F&&F<Zz.MIN_SECONDARY_WRITE_WIRE_VERSION)return _Z(g8.ReadPreference.primary);return _Z(A)},ll=function(F,A,B){if(F.maxStalenessSeconds==null||F.maxStalenessSeconds<0)return B;const D=F.maxStalenessSeconds,J=(A.heartbeatFrequencyMS+hl)/1000;if(D<J)throw new AA.MongoInvalidArgumentError(`Option "maxStalenessSeconds" must be at least ${J} seconds`);if(D<Dz)throw new AA.MongoInvalidArgumentError(`Option "maxStalenessSeconds" must be at least ${Dz} seconds`);if(A.type===h2.TopologyType.ReplicaSetWithPrimary){const Z=Array.from(A.servers.values()).filter(FA)[0];return B.reduce((X,Y)=>{const G=(Y.lastUpdateTime-Y.lastWriteDate-(Z.lastUpdateTime-Z.lastWriteDate)+A.heartbeatFrequencyMS)/1000,E=F.maxStalenessSeconds??0;if(G<=E)X.push(Y);return X},[])}if(A.type===h2.TopologyType.ReplicaSetNoPrimary){if(B.length===0)return B;const Z=B.reduce((X,Y)=>Y.lastWriteDate>X.lastWriteDate?Y:X);return B.reduce((X,Y)=>{const G=(Z.lastWriteDate-Y.lastWriteDate+A.heartbeatFrequencyMS)/1000,E=F.maxStalenessSeconds??0;if(G<=E)X.push(Y);return X},[])}return B},pl=function(F,A){const B=Object.keys(F),D=Object.keys(A);for(let J=0;J<B.length;++J){const Z=B[J];if(D.indexOf(Z)===-1||A[Z]!==F[Z])return!1}return!0},il=function(F,A){if(F.tags==null||Array.isArray(F.tags)&&F.tags.length===0)return A;for(let B=0;B<F.tags.length;++B){const D=F.tags[B],J=A.reduce((Z,X)=>{if(pl(D,X.tags))Z.push(X);return Z},[]);if(J.length)return J}return[]},eF=function(F,A){const B=A.reduce((J,Z)=>Math.min(Z.roundTripTime,J),1/0),D=B+F.localThresholdMS;return A.reduce((J,Z)=>{if(Z.roundTripTime<=D&&Z.roundTripTime>=B)J.push(Z);return J},[])},FA=function(F){return F.type===h2.ServerType.RSPrimary},nl=function(F){return F.type===h2.ServerType.RSSecondary},sl=function(F){return F.type===h2.ServerType.RSSecondary||F.type===h2.ServerType.RSPrimary},Jz=function(F){return F.type!==h2.ServerType.Unknown},al=function(F){return F.type===h2.ServerType.LoadBalancer},_Z=function(F){if(!F.isValid())throw new AA.MongoInvalidArgumentError("Invalid read preference specified");return function A(B,D,J=[]){const Z=B.commonWireVersion;if(Z&&F.minWireVersion&&F.minWireVersion>Z)throw new AA.MongoCompatibilityError(`Minimum wire version '${F.minWireVersion}' required, but found '${Z}'`);if(B.type===h2.TopologyType.LoadBalanced)return D.filter(al);if(B.type===h2.TopologyType.Unknown)return[];if(B.type===h2.TopologyType.Single)return eF(B,D.filter(Jz));if(B.type===h2.TopologyType.Sharded){const G=D.filter((W)=>{return!J.includes(W)}),E=G.length>0?G:J;return eF(B,E.filter(Jz))}const X=F.mode;if(X===g8.ReadPreference.PRIMARY)return D.filter(FA);if(X===g8.ReadPreference.PRIMARY_PREFERRED){const G=D.filter(FA);if(G.length)return G}const Y=X===g8.ReadPreference.NEAREST?sl:nl,$=eF(B,il(F,ll(F,B,D.filter(Y))));if(X===g8.ReadPreference.SECONDARY_PREFERRED&&$.length===0)return D.filter(FA);return $}};Object.defineProperty(Zz,"__esModule",{value:!0});Zz.readPreferenceServerSelector=Zz.secondaryWritableServerSelector=Zz.sameServerSelector=Zz.writableServerSelector=Zz.MIN_SECONDARY_WRITE_WIRE_VERSION=void 0;var AA=p(),g8=T0(),h2=v2(),hl=1e4,Dz=90;Zz.MIN_SECONDARY_WRITE_WIRE_VERSION=13;Zz.writableServerSelector=ml;Zz.sameServerSelector=dl;Zz.secondaryWritableServerSelector=cl;Zz.readPreferenceServerSelector=_Z});var d4=z(($z)=>{Object.defineProperty($z,"__esModule",{value:!0});$z.OP_MSG=$z.OP_COMPRESSED=$z.OP_DELETE=$z.OP_QUERY=$z.OP_INSERT=$z.OP_UPDATE=$z.OP_REPLY=$z.MIN_SUPPORTED_QE_SERVER_VERSION=$z.MIN_SUPPORTED_QE_WIRE_VERSION=$z.MAX_SUPPORTED_WIRE_VERSION=$z.MIN_SUPPORTED_WIRE_VERSION=$z.MAX_SUPPORTED_SERVER_VERSION=$z.MIN_SUPPORTED_SERVER_VERSION=void 0;$z.MIN_SUPPORTED_SERVER_VERSION="3.6";$z.MAX_SUPPORTED_SERVER_VERSION="7.0";$z.MIN_SUPPORTED_WIRE_VERSION=6;$z.MAX_SUPPORTED_WIRE_VERSION=21;$z.MIN_SUPPORTED_QE_WIRE_VERSION=21;$z.MIN_SUPPORTED_QE_SERVER_VERSION="7.0";$z.OP_REPLY=1;$z.OP_UPDATE=2001;$z.OP_INSERT=2002;$z.OP_QUERY=2004;$z.OP_DELETE=2006;$z.OP_COMPRESSED=2012;$z.OP_MSG=2013});var L0=z((Ez)=>{Object.defineProperty(Ez,"__esModule",{value:!0});Ez.END=Ez.CHANGE=Ez.INIT=Ez.MORE=Ez.RESPONSE=Ez.SERVER_HEARTBEAT_FAILED=Ez.SERVER_HEARTBEAT_SUCCEEDED=Ez.SERVER_HEARTBEAT_STARTED=Ez.COMMAND_FAILED=Ez.COMMAND_SUCCEEDED=Ez.COMMAND_STARTED=Ez.CLUSTER_TIME_RECEIVED=Ez.CONNECTION_CHECKED_IN=Ez.CONNECTION_CHECKED_OUT=Ez.CONNECTION_CHECK_OUT_FAILED=Ez.CONNECTION_CHECK_OUT_STARTED=Ez.CONNECTION_CLOSED=Ez.CONNECTION_READY=Ez.CONNECTION_CREATED=Ez.CONNECTION_POOL_READY=Ez.CONNECTION_POOL_CLEARED=Ez.CONNECTION_POOL_CLOSED=Ez.CONNECTION_POOL_CREATED=Ez.WAITING_FOR_SUITABLE_SERVER=Ez.SERVER_SELECTION_SUCCEEDED=Ez.SERVER_SELECTION_FAILED=Ez.SERVER_SELECTION_STARTED=Ez.TOPOLOGY_DESCRIPTION_CHANGED=Ez.TOPOLOGY_CLOSED=Ez.TOPOLOGY_OPENING=Ez.SERVER_DESCRIPTION_CHANGED=Ez.SERVER_CLOSED=Ez.SERVER_OPENING=Ez.DESCRIPTION_RECEIVED=Ez.UNPINNED=Ez.PINNED=Ez.MESSAGE=Ez.ENDED=Ez.CLOSED=Ez.CONNECT=Ez.OPEN=Ez.CLOSE=Ez.TIMEOUT=Ez.ERROR=Ez.SYSTEM_JS_COLLECTION=Ez.SYSTEM_COMMAND_COLLECTION=Ez.SYSTEM_USER_COLLECTION=Ez.SYSTEM_PROFILE_COLLECTION=Ez.SYSTEM_INDEX_COLLECTION=Ez.SYSTEM_NAMESPACE_COLLECTION=void 0;Ez.LEGACY_HELLO_COMMAND_CAMEL_CASE=Ez.LEGACY_HELLO_COMMAND=Ez.MONGO_CLIENT_EVENTS=Ez.LOCAL_SERVER_EVENTS=Ez.SERVER_RELAY_EVENTS=Ez.APM_EVENTS=Ez.TOPOLOGY_EVENTS=Ez.CMAP_EVENTS=Ez.HEARTBEAT_EVENTS=Ez.RESUME_TOKEN_CHANGED=void 0;Ez.SYSTEM_NAMESPACE_COLLECTION="system.namespaces";Ez.SYSTEM_INDEX_COLLECTION="system.indexes";Ez.SYSTEM_PROFILE_COLLECTION="system.profile";Ez.SYSTEM_USER_COLLECTION="system.users";Ez.SYSTEM_COMMAND_COLLECTION="$cmd";Ez.SYSTEM_JS_COLLECTION="system.js";Ez.ERROR="error";Ez.TIMEOUT="timeout";Ez.CLOSE="close";Ez.OPEN="open";Ez.CONNECT="connect";Ez.CLOSED="closed";Ez.ENDED="ended";Ez.MESSAGE="message";Ez.PINNED="pinned";Ez.UNPINNED="unpinned";Ez.DESCRIPTION_RECEIVED="descriptionReceived";Ez.SERVER_OPENING="serverOpening";Ez.SERVER_CLOSED="serverClosed";Ez.SERVER_DESCRIPTION_CHANGED="serverDescriptionChanged";Ez.TOPOLOGY_OPENING="topologyOpening";Ez.TOPOLOGY_CLOSED="topologyClosed";Ez.TOPOLOGY_DESCRIPTION_CHANGED="topologyDescriptionChanged";Ez.SERVER_SELECTION_STARTED="serverSelectionStarted";Ez.SERVER_SELECTION_FAILED="serverSelectionFailed";Ez.SERVER_SELECTION_SUCCEEDED="serverSelectionSucceeded";Ez.WAITING_FOR_SUITABLE_SERVER="waitingForSuitableServer";Ez.CONNECTION_POOL_CREATED="connectionPoolCreated";Ez.CONNECTION_POOL_CLOSED="connectionPoolClosed";Ez.CONNECTION_POOL_CLEARED="connectionPoolCleared";Ez.CONNECTION_POOL_READY="connectionPoolReady";Ez.CONNECTION_CREATED="connectionCreated";Ez.CONNECTION_READY="connectionReady";Ez.CONNECTION_CLOSED="connectionClosed";Ez.CONNECTION_CHECK_OUT_STARTED="connectionCheckOutStarted";Ez.CONNECTION_CHECK_OUT_FAILED="connectionCheckOutFailed";Ez.CONNECTION_CHECKED_OUT="connectionCheckedOut";Ez.CONNECTION_CHECKED_IN="connectionCheckedIn";Ez.CLUSTER_TIME_RECEIVED="clusterTimeReceived";Ez.COMMAND_STARTED="commandStarted";Ez.COMMAND_SUCCEEDED="commandSucceeded";Ez.COMMAND_FAILED="commandFailed";Ez.SERVER_HEARTBEAT_STARTED="serverHeartbeatStarted";Ez.SERVER_HEARTBEAT_SUCCEEDED="serverHeartbeatSucceeded";Ez.SERVER_HEARTBEAT_FAILED="serverHeartbeatFailed";Ez.RESPONSE="response";Ez.MORE="more";Ez.INIT="init";Ez.CHANGE="change";Ez.END="end";Ez.RESUME_TOKEN_CHANGED="resumeTokenChanged";Ez.HEARTBEAT_EVENTS=Object.freeze([Ez.SERVER_HEARTBEAT_STARTED,Ez.SERVER_HEARTBEAT_SUCCEEDED,Ez.SERVER_HEARTBEAT_FAILED]);Ez.CMAP_EVENTS=Object.freeze([Ez.CONNECTION_POOL_CREATED,Ez.CONNECTION_POOL_READY,Ez.CONNECTION_POOL_CLEARED,Ez.CONNECTION_POOL_CLOSED,Ez.CONNECTION_CREATED,Ez.CONNECTION_READY,Ez.CONNECTION_CLOSED,Ez.CONNECTION_CHECK_OUT_STARTED,Ez.CONNECTION_CHECK_OUT_FAILED,Ez.CONNECTION_CHECKED_OUT,Ez.CONNECTION_CHECKED_IN]);Ez.TOPOLOGY_EVENTS=Object.freeze([Ez.SERVER_OPENING,Ez.SERVER_CLOSED,Ez.SERVER_DESCRIPTION_CHANGED,Ez.TOPOLOGY_OPENING,Ez.TOPOLOGY_CLOSED,Ez.TOPOLOGY_DESCRIPTION_CHANGED,Ez.ERROR,Ez.TIMEOUT,Ez.CLOSE]);Ez.APM_EVENTS=Object.freeze([Ez.COMMAND_STARTED,Ez.COMMAND_SUCCEEDED,Ez.COMMAND_FAILED]);Ez.SERVER_RELAY_EVENTS=Object.freeze([Ez.SERVER_HEARTBEAT_STARTED,Ez.SERVER_HEARTBEAT_SUCCEEDED,Ez.SERVER_HEARTBEAT_FAILED,Ez.COMMAND_STARTED,Ez.COMMAND_SUCCEEDED,Ez.COMMAND_FAILED,...Ez.CMAP_EVENTS]);Ez.LOCAL_SERVER_EVENTS=Object.freeze([Ez.CONNECT,Ez.DESCRIPTION_RECEIVED,Ez.CLOSED,Ez.ENDED]);Ez.MONGO_CLIENT_EVENTS=Object.freeze([...Ez.CMAP_EVENTS,...Ez.APM_EVENTS,...Ez.TOPOLOGY_EVENTS,...Ez.HEARTBEAT_EVENTS]);Ez.LEGACY_HELLO_COMMAND="ismaster";Ez.LEGACY_HELLO_COMMAND_CAMEL_CASE="isMaster"});var D6=z((hz)=>{Object.defineProperty(hz,"__esModule",{value:!0});hz.ReadConcern=hz.ReadConcernLevel=void 0;hz.ReadConcernLevel=Object.freeze({local:"local",majority:"majority",linearizable:"linearizable",available:"available",snapshot:"snapshot"});class m9{constructor(F){this.level=hz.ReadConcernLevel[F]??F}static fromOptions(F){if(F==null)return;if(F.readConcern){const{readConcern:A}=F;if(A instanceof m9)return A;else if(typeof A==="string")return new m9(A);else if("level"in A&&A.level)return new m9(A.level)}if(F.level)return new m9(F.level);return}static get MAJORITY(){return hz.ReadConcernLevel.majority}static get AVAILABLE(){return hz.ReadConcernLevel.available}static get LINEARIZABLE(){return hz.ReadConcernLevel.linearizable}static get SNAPSHOT(){return hz.ReadConcernLevel.snapshot}toJSON(){return{level:this.level}}}hz.ReadConcern=m9});var V2=z((dz)=>{Object.defineProperty(dz,"__esModule",{value:!0});dz.WriteConcern=dz.WRITE_CONCERN_KEYS=void 0;dz.WRITE_CONCERN_KEYS=["w","wtimeout","j","journal","fsync"];class y8{constructor(F,A,B,D){if(F!=null)if(!Number.isNaN(Number(F)))this.w=Number(F);else this.w=F;if(A!=null)this.wtimeoutMS=this.wtimeout=A;if(B!=null)this.journal=this.j=B;if(D!=null)this.journal=this.j=D?!0:!1}static apply(F,A){const B={};if(A.w!=null)B.w=A.w;if(A.wtimeoutMS!=null)B.wtimeout=A.wtimeoutMS;if(A.journal!=null)B.j=A.j;return F.writeConcern=B,F}static fromOptions(F,A){if(F==null)return;A=A??{};let B;if(typeof F==="string"||typeof F==="number")B={w:F};else if(F instanceof y8)B=F;else B=F.writeConcern;const D=A instanceof y8?A:A.writeConcern,{w:J=void 0,wtimeout:Z=void 0,j:X=void 0,fsync:Y=void 0,journal:$=void 0,wtimeoutMS:G=void 0}={...D,...B};if(J!=null||Z!=null||G!=null||X!=null||$!=null||Y!=null)return new y8(J,Z??G,X??$,Y);return}}dz.WriteConcern=y8});var r=z((BU)=>{var np=function(F){return F!=null&&typeof F==="object"&&Symbol.toStringTag in F&&F[Symbol.toStringTag]==="Uint8Array"},sp=function(F,A){for(let B of A)if(F===B||B.startsWith("*.")&&F?.endsWith(B.substring(2,B.length))||B.startsWith("*/")&&F?.endsWith(B.substring(2,B.length)))return!0;return!1},ap=function(F){let A=void 0;if(typeof F==="string")A=F;else if(Array.isArray(F))A={},F.forEach((B)=>{A[B]=1});else if(F!=null&&typeof F==="object"){A={};for(let B in F)A[B]=F[B]}return A},cZ=function(F){return rp(F)==="[object Object]"},tp=function(F,A){return{...F,...A}},op=function(F,A){const B={};for(let D in F)if(A.includes(D))B[D]=F[D];return B},ep=function(F,A){if(A&&A.s.options?.retryWrites)F.retryWrites=!0;return F},Fi=function(F){return F!=null&&typeof F==="object"&&"then"in F&&typeof F.then==="function"},Ai=function(F,A,B){const D=nz(A).capabilities;if(B.collation&&typeof B.collation==="object")if(D&&D.commandsTakeCollation)F.collation=B.collation;else throw new a6.MongoCompatibilityError("Current topology does not support collation")},Bi=function(F,A,B){if(B&&B.session&&B.session.inTransaction())return;const D=Object.assign({},F.readConcern||{});if(A.s.readConcern)Object.assign(D,A.s.readConcern);if(Object.keys(D).length>0)Object.assign(F,{readConcern:D})},Di=function(F,A){if(F.explain)return F;return{explain:F,verbosity:A.verbosity}},nz=function(F){if("topology"in F&&F.topology)return F.topology;else if("client"in F&&F.client.topology)return F.client.topology;throw new a6.MongoNotConnectedError("MongoClient must be connected to perform this operation")},Ji=function(F){return m8.fromString(F)};function*Zi(F=0){let A=F;while(!0){const B=A;A+=1,yield B}}var Xi=function(){const F=pz.randomBytes(16);return F[6]=F[6]&15|64,F[8]=F[8]&63|128,F},Yi=function(F){if(F){if(F.loadBalanced||F.serverApi?.version)return mp.MAX_SUPPORTED_WIRE_VERSION;if(F.hello)return F.hello.maxWireVersion;if("lastHello"in F&&typeof F.lastHello==="function"){const A=F.lastHello();if(A)return A.maxWireVersion}if(F.description&&"maxWireVersion"in F.description&&F.description.maxWireVersion!=null)return F.description.maxWireVersion}return 0},$i=function(F,A){if(!Array.isArray(F)||!Array.isArray(A))return!1;return F.length===A.length&&F.every((B,D)=>B===A[D])},Gi=function(F,A){if(F===A)return!0;if(!F||!A)return F===A;if(F==null&&A!=null||F!=null&&A==null)return!1;if(F.constructor.name!==A.constructor.name)return!1;if(F.message!==A.message)return!1;return!0},Ei=function(F){return function A(B,D){const J=F[B.s.state];if(J&&J.indexOf(D)<0)throw new a6.MongoRuntimeError(`illegal state transition from [${B.s.state}] => [${D}], allowed: [${J}]`);B.emit("stateChanged",B.s.state,D),B.s.state=D}},sz=function(){const F=process.hrtime();return Math.floor(F[0]*1000+F[1]/1e6)},Wi=function(F){if(typeof F!=="number")return-1;const A=sz()-F;return A<0?0:A},az=function(F){if(Array.isArray(F)){for(let B of F)if(az(B))return!0;return!1}const A=Object.keys(F);return A.length>0&&A[0][0]==="$"},Ci=function(F,A){const B=Object.assign({},A,iz.resolveBSONOptions(A,F));if(!A?.session?.inTransaction()){const Z=cp.ReadConcern.fromOptions(A)??F?.readConcern;if(Z)B.readConcern=Z;const X=ip.WriteConcern.fromOptions(A)??F?.writeConcern;if(X)B.writeConcern=X}const J=lp.ReadPreference.fromOptions(A)??F?.readPreference;if(J)B.readPreference=J;return B},rz=function(F,A){F=Array.isArray(F)?new Set(F):F,A=Array.isArray(A)?new Set(A):A;for(let B of A)if(!F.has(B))return!1;return!0},Hi=function(F){return F[dp.LEGACY_HELLO_COMMAND]||F.hello?!0:!1},qi=function(F,A){const B=new Set(F);for(let D of A)B.delete(D);return B},tz=function(F,A=void 0){if(!cZ(F))return!1;const B=F.constructor;if(B&&B.prototype){if(!cZ(B.prototype))return!1;if(!Ki(B.prototype,"isPrototypeOf"))return!1}if(A){const D=Object.keys(F);return rz(D,A)}return!0},lZ=function(F){if(F==null)return F;else if(Array.isArray(F))return F.map((B)=>lZ(B));else if(tz(F)){const B={};for(let D in F)B[D]=lZ(F[D]);return B}const A=F.constructor;if(A)switch(A.name.toLowerCase()){case"date":return new A(Number(F));case"map":return new Map(F);case"set":return new Set(F);case"buffer":return Buffer.from(F)}return F},ez=function(F){return process.emitWarning(F,{code:BU.MONGODB_WARNING_CODE})},zi=function(F){if(!lz.has(F))return lz.add(F),ez(F)},Ui=function(F){return Object.values(F).join(", ")},Qi=function(F){if(!F)return!1;if(F.loadBalanced)return!0;if(F.description.logicalSessionTimeoutMinutes!=null){if(F.description.type!==pp.ServerType.Standalone)return!0}return!1},Li=function(F,A=0){const B=Array.from(F);if(A>B.length)throw new a6.MongoRuntimeError("Limit must be less than the number of items");let D=B.length;const J=A%B.length===0?1:B.length-A;while(D>J){const Z=Math.floor(Math.random()*D);D-=1;const X=B[D];B[D]=B[Z],B[Z]=X}return A%B.length===0?B:B.slice(J)},Vi=function(F){if(F.aggregate||F.count||F.distinct||F.find||F.geoNear)return!0;return!1},wi=function(F,A){if(F==null&&A==null)return 0;if(F==null)return-1;if(A==null)return 1;return BU.ByteUtils.compare(F.id,A.id)},FU=function(F){if(typeof F==="number")return Math.trunc(F);const A=Number.parseInt(String(F),10);return Number.isNaN(A)?null:A},Ri=function(F){const A=FU(F);return A!=null&&A>=0?A:null},Ii=function(F,A){const B=F.endsWith(".")?F.slice(0,F.length-1):F,D=A.endsWith(".")?A.slice(0,A.length-1):A,J=/^.*?\./,Z=`.${B.replace(J,"")}`,X=`.${D.replace(J,"")}`;return Z.endsWith(X)};async function Ni(F,A={}){return await new Promise((B,D)=>{const J={method:"GET",timeout:1e4,json:!0,...yp.parse(F),...A},Z=bp.request(J,(X)=>{X.setEncoding("utf8");let Y="";X.on("data",($)=>{Y+=$}),X.once("end",()=>{if(A.json===!1){B(Y);return}try{const $=JSON.parse(Y);B($)}catch{D(new a6.MongoRuntimeError(`Invalid JSON response: "${Y}"`))}})});Z.once("timeout",()=>Z.destroy(new a6.MongoNetworkTimeoutError(`Network request to ${F} timed out after ${A.timeout} ms`))),Z.once("error",(X)=>D(X)),Z.end()})}var Pi=function(F,A){return A&&F.test(A.toLowerCase())?!0:!1},AU=function(){let F,A;return{promise:new Promise(function D(J,Z){F=J,A=Z}),resolve:F,reject:A}},Mi=function(F){return};async function Ti(F,A){const{promise:B,resolve:D,reject:J}=AU(),Z=(Y)=>D(Y),X=(Y)=>J(Y);F.once(A,Z).once("error",X);try{const Y=await B;return F.off("error",X),Y}catch(Y){throw F.off(A,Z),Y}}var ji=function(F,A,B){if((typeof B.forceServerObjectId==="boolean"?B.forceServerObjectId:F.s.db.options?.forceServerObjectId)===!0)return A;const J=(Z)=>{if(Z._id==null)Z._id=F.s.pkFactory.createPk();return Z};return Array.isArray(A)?A.map(J):J(A)};async function ui(F,A){try{return await gp.promises.access(F,A),!0}catch{return!1}}var Oi=function(){return};Object.defineProperty(BU,"__esModule",{value:!0});BU.DOCUMENT_DB_MSG=BU.COSMOS_DB_CHECK=BU.DOCUMENT_DB_CHECK=BU.request=BU.matchesParentDomain=BU.parseUnsignedInteger=BU.parseInteger=BU.compareObjectId=BU.commandSupportsReadConcern=BU.shuffle=BU.supportsRetryableWrites=BU.enumToString=BU.emitWarningOnce=BU.emitWarning=BU.MONGODB_WARNING_CODE=BU.DEFAULT_PK_FACTORY=BU.HostAddress=BU.BufferPool=BU.List=BU.deepCopy=BU.isRecord=BU.setDifference=BU.isHello=BU.isSuperset=BU.resolveOptions=BU.hasAtomicOperators=BU.calculateDurationInMs=BU.now=BU.makeStateMachine=BU.errorStrictEqual=BU.arrayStrictEqual=BU.maxWireVersion=BU.uuidV4=BU.makeCounter=BU.MongoDBCollectionNamespace=BU.MongoDBNamespace=BU.ns=BU.getTopology=BU.decorateWithExplain=BU.decorateWithReadConcern=BU.decorateWithCollation=BU.isPromiseLike=BU.applyRetryableWrites=BU.filterOptions=BU.mergeOptions=BU.isObject=BU.normalizeHintField=BU.hostMatchesWildcards=BU.isUint8Array=BU.ByteUtils=void 0;BU.noop=BU.fileIsAccessible=BU.maybeAddIdToDocuments=BU.once=BU.randomBytes=BU.squashError=BU.promiseWithResolvers=BU.isHostMatch=BU.COSMOS_DB_MSG=void 0;var pz=import.meta.require("crypto"),gp=import.meta.require("fs"),bp=import.meta.require("http"),yp=import.meta.require("url"),vp=import.meta.require("url"),hp=import.meta.require("util"),iz=S1(),mp=d4(),dp=L0(),a6=p(),cp=D6(),lp=T0(),pp=v2(),ip=V2();BU.ByteUtils={toLocalBufferType(F){return Buffer.isBuffer(F)?F:Buffer.from(F.buffer,F.byteOffset,F.byteLength)},equals(F,A){return BU.ByteUtils.toLocalBufferType(F).equals(A)},compare(F,A){return BU.ByteUtils.toLocalBufferType(F).compare(A)},toBase64(F){return BU.ByteUtils.toLocalBufferType(F).toString("base64")}};BU.isUint8Array=np;BU.hostMatchesWildcards=sp;BU.normalizeHintField=ap;var rp=(F)=>Object.prototype.toString.call(F);BU.isObject=cZ;BU.mergeOptions=tp;BU.filterOptions=op;BU.applyRetryableWrites=ep;BU.isPromiseLike=Fi;BU.decorateWithCollation=Ai;BU.decorateWithReadConcern=Bi;BU.decorateWithExplain=Di;BU.getTopology=nz;BU.ns=Ji;class m8{constructor(F,A){this.db=F,this.collection=A,this.collection=A===""?void 0:A}toString(){return this.collection?`${this.db}.${this.collection}`:this.db}withCollection(F){return new pZ(this.db,F)}static fromString(F){if(typeof F!=="string"||F==="")throw new a6.MongoRuntimeError(`Cannot parse namespace from "${F}"`);const[A,...B]=F.split("."),D=B.join(".");return new m8(A,D===""?void 0:D)}}BU.MongoDBNamespace=m8;class pZ extends m8{constructor(F,A){super(F,A);this.collection=A}static fromString(F){return super.fromString(F)}}BU.MongoDBCollectionNamespace=pZ;BU.makeCounter=Zi;BU.uuidV4=Xi;BU.maxWireVersion=Yi;BU.arrayStrictEqual=$i;BU.errorStrictEqual=Gi;BU.makeStateMachine=Ei;BU.now=sz;BU.calculateDurationInMs=Wi;BU.hasAtomicOperators=az;BU.resolveOptions=Ci;BU.isSuperset=rz;BU.isHello=Hi;BU.setDifference=qi;var Ki=(F,A)=>Object.prototype.hasOwnProperty.call(F,A);BU.isRecord=tz;BU.deepCopy=lZ;class iZ{get length(){return this.count}get[Symbol.toStringTag](){return"List"}constructor(){this.count=0,this.head={next:null,prev:null,value:null},this.head.next=this.head,this.head.prev=this.head}toArray(){return Array.from(this)}toString(){return`head <=> ${this.toArray().join(" <=> ")} <=> head`}*[Symbol.iterator](){for(let F of this.nodes())yield F.value}*nodes(){let F=this.head.next;while(F!==this.head){const{next:A}=F;yield F,F=A}}push(F){this.count+=1;const A={next:this.head,prev:this.head.prev,value:F};this.head.prev.next=A,this.head.prev=A}pushMany(F){for(let A of F)this.push(A)}unshift(F){this.count+=1;const A={next:this.head.next,prev:this.head,value:F};this.head.next.prev=A,this.head.next=A}remove(F){if(F===this.head||this.length===0)return null;this.count-=1;const{prev:A,next:B}=F;return A.next=B,B.prev=A,F.value}shift(){return this.remove(this.head.next)}pop(){return this.remove(this.head.prev)}prune(F){for(let A of this.nodes())if(F(A.value))this.remove(A)}clear(){this.count=0,this.head.next=this.head,this.head.prev=this.head}first(){return this.head.next.value}last(){return this.head.prev.value}}BU.List=iZ;class oz{constructor(){this.buffers=new iZ,this.totalByteLength=0}get length(){return this.totalByteLength}append(F){this.buffers.push(F),this.totalByteLength+=F.length}getInt32(){if(this.totalByteLength<4)return null;const F=this.buffers.first();if(F!=null&&F.byteLength>=4)return F.readInt32LE(0);const A=this.read(4),B=A.readInt32LE(0);return this.totalByteLength+=4,this.buffers.unshift(A),B}read(F){if(typeof F!=="number"||F<0)throw new a6.MongoInvalidArgumentError('Argument "size" must be a non-negative number');if(F>this.totalByteLength)return Buffer.alloc(0);const A=Buffer.allocUnsafe(F);for(let B=0;B<F;){const D=this.buffers.shift();if(D==null)break;const J=F-B,Z=Math.min(J,D.byteLength),X=D.subarray(0,Z);if(A.set(X,B),B+=Z,this.totalByteLength-=Z,Z<D.byteLength)this.buffers.unshift(D.subarray(Z))}return A}}BU.BufferPool=oz;class h8{constructor(F){this.host=void 0,this.port=void 0,this.socketPath=void 0,this.isIPv6=!1;const A=F.split(" ").join("%20");if(A.endsWith(".sock")){this.socketPath=decodeURIComponent(A);return}const B=`iLoveJS://${A}`;let D;try{D=new vp.URL(B)}catch(Y){const $=new a6.MongoRuntimeError(`Unable to parse ${A} with URL`);throw $.cause=Y,$}const{hostname:J,port:Z}=D;let X=decodeURIComponent(J).toLowerCase();if(X.startsWith("[")&&X.endsWith("]"))this.isIPv6=!0,X=X.substring(1,J.length-1);if(this.host=X.toLowerCase(),typeof Z==="number")this.port=Z;else if(typeof Z==="string"&&Z!=="")this.port=Number.parseInt(Z,10);else this.port=27017;if(this.port===0)throw new a6.MongoParseError("Invalid port (zero) with hostname");Object.freeze(this)}[Symbol.for("nodejs.util.inspect.custom")](){return this.inspect()}inspect(){return`new HostAddress('${this.toString()}')`}toString(){if(typeof this.host==="string"){if(this.isIPv6)return`[${this.host}]:${this.port}`;return`${this.host}:${this.port}`}return`${this.socketPath}`}static fromString(F){return new h8(F)}static fromHostPort(F,A){if(F.includes(":"))F=`[${F}]`;return h8.fromString(`${F}:${A}`)}static fromSrvRecord({name:F,port:A}){return h8.fromHostPort(F,A)}toHostPort(){if(this.socketPath)return{host:this.socketPath,port:0};const F=this.host??"",A=this.port??0;return{host:F,port:A}}}BU.HostAddress=h8;BU.DEFAULT_PK_FACTORY={createPk(){return new iz.ObjectId}};BU.MONGODB_WARNING_CODE="MONGODB DRIVER";BU.emitWarning=ez;var lz=new Set;BU.emitWarningOnce=zi;BU.enumToString=Ui;BU.supportsRetryableWrites=Qi;BU.shuffle=Li;BU.commandSupportsReadConcern=Vi;BU.compareObjectId=wi;BU.parseInteger=FU;BU.parseUnsignedInteger=Ri;BU.matchesParentDomain=Ii;BU.request=Ni;BU.DOCUMENT_DB_CHECK=/(\.docdb\.amazonaws\.com$)|(\.docdb-elastic\.amazonaws\.com$)/;BU.COSMOS_DB_CHECK=/\.cosmos\.azure\.com$/;BU.DOCUMENT_DB_MSG="You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb";BU.COSMOS_DB_MSG="You appear to be connected to a CosmosDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/cosmosdb";BU.isHostMatch=Pi;BU.promiseWithResolvers=AU;BU.squashError=Mi;BU.randomBytes=hp.promisify(pz.randomBytes);BU.once=Ti;BU.maybeAddIdToDocuments=ji;BU.fileIsAccessible=ui;BU.noop=Oi});var u1=z((YU)=>{var xn=function(F,A){if(!Array.isArray(A)&&!(A instanceof Set))A=[A];return A=new Set(A),Object.defineProperty(F,"aspects",{value:A,writable:!1}),A};Object.defineProperty(YU,"__esModule",{value:!0});YU.defineAspects=YU.AbstractOperation=YU.Aspect=void 0;var kn=S1(),nZ=T0();YU.Aspect={READ_OPERATION:Symbol("READ_OPERATION"),WRITE_OPERATION:Symbol("WRITE_OPERATION"),RETRYABLE:Symbol("RETRYABLE"),EXPLAINABLE:Symbol("EXPLAINABLE"),SKIP_COLLATION:Symbol("SKIP_COLLATION"),CURSOR_CREATING:Symbol("CURSOR_CREATING"),MUST_SELECT_SAME_SERVER:Symbol("MUST_SELECT_SAME_SERVER")};var sZ=Symbol("session");class XU{constructor(F={}){this.readPreference=this.hasAspect(YU.Aspect.WRITE_OPERATION)?nZ.ReadPreference.primary:nZ.ReadPreference.fromOptions(F)??nZ.ReadPreference.primary,this.bsonOptions=kn.resolveBSONOptions(F),this[sZ]=F.session!=null?F.session:void 0,this.options=F,this.bypassPinningCheck=!!F.bypassPinningCheck,this.trySecondaryWrite=!1}hasAspect(F){const A=this.constructor;if(A.aspects==null)return!1;return A.aspects.has(F)}get session(){return this[sZ]}clearSession(){this[sZ]=void 0}get canRetryRead(){return!0}get canRetryWrite(){return!0}}YU.AbstractOperation=XU;YU.defineAspects=xn});var w2=z((HU)=>{async function gn(F,A){if(!(A instanceof t3.AbstractOperation))throw new k0.MongoRuntimeError("This method requires a valid operation instance");if(F.topology==null){if(F.s.hasBeenClosed)throw new k0.MongoNotConnectedError("Client must be connected before running operations");F.s.options[Symbol.for("@@mdb.skipPingOnConnect")]=!0;try{await F.connect()}finally{delete F.s.options[Symbol.for("@@mdb.skipPingOnConnect")]}}const{topology:B}=F;if(B==null)throw new k0.MongoRuntimeError("client.connect did not create a topology but also did not throw");let D=A.session,J;if(D==null)J=Symbol(),D=F.startSession({owner:J,explicit:!1});else if(D.hasEnded)throw new k0.MongoExpiredSessionError("Use of expired sessions is not permitted");else if(D.snapshotEnabled&&!B.capabilities.supportsSnapshotReads)throw new k0.MongoCompatibilityError("Snapshot reads require MongoDB 5.0 or later");else if(D.client!==F)throw new k0.MongoInvalidArgumentError("ClientSession must be from the same MongoClient");if(D.explicit&&D?.timeoutMS!=null&&A.options.timeoutMS!=null)throw new k0.MongoInvalidArgumentError("Do not specify timeoutMS on operation if already specified on an explicit session");const Z=A.readPreference??EU.ReadPreference.primary,X=!!D?.inTransaction(),Y=A.hasAspect(t3.Aspect.READ_OPERATION),$=A.hasAspect(t3.Aspect.WRITE_OPERATION);if(X&&!Z.equals(EU.ReadPreference.primary)&&(Y||A.commandName==="runCommand"))throw new k0.MongoTransactionError(`Read preference in a transaction must be primary, not: ${Z.mode}`);if(D?.isPinned&&D.transaction.isCommitted&&!A.bypassPinningCheck)D.unpin();let G;if(A.hasAspect(t3.Aspect.MUST_SELECT_SAME_SERVER))G=WU.sameServerSelector(A.server?.description);else if(A.trySecondaryWrite)G=WU.secondaryWritableServerSelector(B.commonWireVersion,Z);else G=Z;const E=await B.selectServer(G,{session:D,operationName:A.commandName});if(D==null)return await A.execute(E,void 0);if(!A.hasAspect(t3.Aspect.RETRYABLE))try{return await A.execute(E,D)}finally{if(D?.owner!=null&&D.owner===J)try{await D.endSession()}catch(q){BA.squashError(q)}}const W=B.s.options.retryReads&&!X&&A.canRetryRead,C=B.s.options.retryWrites&&!X&&BA.supportsRetryableWrites(E)&&A.canRetryWrite,H=Y&&W||$&&C;if($&&C)A.options.willRetryWrite=!0,D.incrementTransactionNumber();try{return await A.execute(E,D)}catch(q){if(H&&q instanceof k0.MongoError)return await bn(A,q,{session:D,topology:B,selector:G,previousServer:E.description});throw q}finally{if(D?.owner!=null&&D.owner===J)try{await D.endSession()}catch(q){BA.squashError(q)}}}async function bn(F,A,{session:B,topology:D,selector:J,previousServer:Z}){const X=F.hasAspect(t3.Aspect.WRITE_OPERATION),Y=F.hasAspect(t3.Aspect.READ_OPERATION);if(X&&A.code===_n)throw new k0.MongoServerError({message:CU,errmsg:CU,originalError:A});if(X&&!k0.isRetryableWriteError(A))throw A;if(Y&&!k0.isRetryableReadError(A))throw A;if(A instanceof k0.MongoNetworkError&&B.isPinned&&!B.inTransaction()&&F.hasAspect(t3.Aspect.CURSOR_CREATING))B.unpin({force:!0,forceClear:!0});const $=await D.selectServer(J,{session:B,operationName:F.commandName,previousServer:Z});if(X&&!BA.supportsRetryableWrites($))throw new k0.MongoUnexpectedServerResponseError("Selected server does not support retryable writes");try{return await F.execute($,B)}catch(G){if(G instanceof k0.MongoError&&G.hasErrorLabel(k0.MongoErrorLabel.NoWritesPerformed))throw A;throw G}}Object.defineProperty(HU,"__esModule",{value:!0});HU.executeOperation=void 0;var k0=p(),EU=T0(),WU=b8(),BA=r(),t3=u1(),_n=k0.MONGODB_ERROR_CODES.IllegalOperation,CU="This MongoDB deployment does not support retryable writes. Please add retryWrites=false to your connection string.";HU.executeOperation=gn});var tZ=z((KU)=>{Object.defineProperty(KU,"__esModule",{value:!0});KU.Explain=KU.ExplainVerbosity=void 0;var yn=p();KU.ExplainVerbosity=Object.freeze({queryPlanner:"queryPlanner",queryPlannerExtended:"queryPlannerExtended",executionStats:"executionStats",allPlansExecution:"allPlansExecution"});class rZ{constructor(F){if(typeof F==="boolean")this.verbosity=F?KU.ExplainVerbosity.allPlansExecution:KU.ExplainVerbosity.queryPlanner;else this.verbosity=F}static fromOptions(F){if(F?.explain==null)return;const A=F.explain;if(typeof A==="boolean"||typeof A==="string")return new rZ(A);throw new yn.MongoInvalidArgumentError('Field "explain" must be a string or a boolean')}}KU.Explain=rZ});var H0=z((LU)=>{Object.defineProperty(LU,"__esModule",{value:!0});LU.CommandOperation=void 0;var vn=p(),hn=tZ(),mn=D6(),dn=b8(),d8=r(),UU=V2(),d9=u1();class QU extends d9.AbstractOperation{constructor(F,A){super(A);this.options=A??{};const B=A?.dbName||A?.authdb;if(B)this.ns=new d8.MongoDBNamespace(B,"$cmd");else this.ns=F?F.s.namespace.withCollection("$cmd"):new d8.MongoDBNamespace("admin","$cmd");if(this.readConcern=mn.ReadConcern.fromOptions(A),this.writeConcern=UU.WriteConcern.fromOptions(A),this.hasAspect(d9.Aspect.EXPLAINABLE))this.explain=hn.Explain.fromOptions(A);else if(A?.explain!=null)throw new vn.MongoInvalidArgumentError('Option "explain" is not supported on this command')}get canRetryWrite(){if(this.hasAspect(d9.Aspect.EXPLAINABLE))return this.explain==null;return!0}async executeCommand(F,A,B){this.server=F;const D={...this.options,...this.bsonOptions,readPreference:this.readPreference,session:A},J=d8.maxWireVersion(F),Z=this.session&&this.session.inTransaction();if(this.readConcern&&d8.commandSupportsReadConcern(B)&&!Z)Object.assign(B,{readConcern:this.readConcern});if(this.trySecondaryWrite&&J<dn.MIN_SECONDARY_WRITE_WIRE_VERSION)D.omitReadPreference=!0;if(this.writeConcern&&this.hasAspect(d9.Aspect.WRITE_OPERATION)&&!Z)UU.WriteConcern.apply(B,this.writeConcern);if(D.collation&&typeof D.collation==="object"&&!this.hasAspect(d9.Aspect.SKIP_COLLATION))Object.assign(B,{collation:D.collation});if(typeof D.maxTimeMS==="number")B.maxTimeMS=D.maxTimeMS;if(this.hasAspect(d9.Aspect.EXPLAINABLE)&&this.explain)B=d8.decorateWithExplain(B,this.explain);return await F.command(this.ns,B,D)}}LU.CommandOperation=QU});var NU=z((RU)=>{Object.defineProperty(RU,"__esModule",{value:!0});RU.ListDatabasesOperation=void 0;var wU=r(),cn=H0(),oZ=u1();class eZ extends cn.CommandOperation{constructor(F,A){super(F,A);this.options=A??{},this.ns=new wU.MongoDBNamespace("admin","$cmd")}get commandName(){return"listDatabases"}async execute(F,A){const B={listDatabases:1};if(typeof this.options.nameOnly==="boolean")B.nameOnly=this.options.nameOnly;if(this.options.filter)B.filter=this.options.filter;if(typeof this.options.authorizedDatabases==="boolean")B.authorizedDatabases=this.options.authorizedDatabases;if(wU.maxWireVersion(F)>=9&&this.options.comment!==void 0)B.comment=this.options.comment;return await super.executeCommand(F,A,B)}}RU.ListDatabasesOperation=eZ;oZ.defineAspects(eZ,[oZ.Aspect.READ_OPERATION,oZ.Aspect.RETRYABLE])});var AX=z((MU)=>{Object.defineProperty(MU,"__esModule",{value:!0});MU.RemoveUserOperation=void 0;var ln=H0(),PU=u1();class FX extends ln.CommandOperation{constructor(F,A,B){super(F,B);this.options=B,this.username=A}get commandName(){return"dropUser"}async execute(F,A){return await super.executeCommand(F,A,{dropUser:this.username}),!0}}MU.RemoveUserOperation=FX;PU.defineAspects(FX,[PU.Aspect.WRITE_OPERATION])});var c9=z((SU)=>{Object.defineProperty(SU,"__esModule",{value:!0});SU.RunAdminCommandOperation=SU.RunCommandOperation=void 0;var pn=r(),jU=u1();class uU extends jU.AbstractOperation{constructor(F,A,B){super(B);this.command=A,this.options=B,this.ns=F.s.namespace.withCollection("$cmd")}get commandName(){return"runCommand"}async execute(F,A){return this.server=F,await F.command(this.ns,this.command,{...this.options,readPreference:this.readPreference,session:A})}}SU.RunCommandOperation=uU;class OU extends jU.AbstractOperation{constructor(F,A){super(A);this.command=F,this.options=A,this.ns=new pn.MongoDBNamespace("admin","$cmd")}get commandName(){return"runCommand"}async execute(F,A){return this.server=F,await F.command(this.ns,this.command,{...this.options,readPreference:this.readPreference,session:A})}}SU.RunAdminCommandOperation=OU});var gU=z((fU)=>{Object.defineProperty(fU,"__esModule",{value:!0});fU.ValidateCollectionOperation=void 0;var BX=p(),sn=H0();class xU extends sn.CommandOperation{constructor(F,A,B){const D={validate:A},J=Object.keys(B);for(let Z=0;Z<J.length;Z++)if(Object.prototype.hasOwnProperty.call(B,J[Z])&&J[Z]!=="session")D[J[Z]]=B[J[Z]];super(F.s.db,B);this.options=B,this.command=D,this.collectionName=A}get commandName(){return"validate"}async execute(F,A){const B=this.collectionName,D=await super.executeCommand(F,A,this.command);if(D.result!=null&&typeof D.result!=="string")throw new BX.MongoUnexpectedServerResponseError("Error with validation data");if(D.result!=null&&D.result.match(/exception|corrupt/)!=null)throw new BX.MongoUnexpectedServerResponseError(`Invalid collection ${B}`);if(D.valid!=null&&!D.valid)throw new BX.MongoUnexpectedServerResponseError(`Invalid collection ${B}`);return D}}fU.ValidateCollectionOperation=xU});var DX=z((yU)=>{Object.defineProperty(yU,"__esModule",{value:!0});yU.Admin=void 0;var an=S1(),DA=w2(),rn=NU(),tn=AX(),on=c9(),en=gU();class bU{constructor(F){this.s={db:F}}async command(F,A){return await DA.executeOperation(this.s.db.client,new on.RunAdminCommandOperation(F,{...an.resolveBSONOptions(A),session:A?.session,readPreference:A?.readPreference}))}async buildInfo(F){return await this.command({buildinfo:1},F)}async serverInfo(F){return await this.command({buildinfo:1},F)}async serverStatus(F){return await this.command({serverStatus:1},F)}async ping(F){return await this.command({ping:1},F)}async removeUser(F,A){return await DA.executeOperation(this.s.db.client,new tn.RemoveUserOperation(this.s.db,F,{dbName:"admin",...A}))}async validateCollection(F,A={}){return await DA.executeOperation(this.s.db.client,new en.ValidateCollectionOperation(this,F,A))}async listDatabases(F){return await DA.executeOperation(this.s.db.client,new rn.ListDatabasesOperation(this.s.db,F))}async replSetGetStatus(F){return await this.command({replSetGetStatus:1},F)}}yU.Admin=bU});var YX=z((hU)=>{var XX=function(F,A){const B={q:F,limit:typeof A.limit==="number"?A.limit:0};if(A.collation)B.collation=A.collation;if(A.hint)B.hint=A.hint;return B};Object.defineProperty(hU,"__esModule",{value:!0});hU.makeDeleteStatement=hU.DeleteManyOperation=hU.DeleteOneOperation=hU.DeleteOperation=void 0;var c8=p(),Fs=H0(),J6=u1();class l8 extends Fs.CommandOperation{constructor(F,A,B){super(void 0,B);this.options=B,this.ns=F,this.statements=A}get commandName(){return"delete"}get canRetryWrite(){if(super.canRetryWrite===!1)return!1;return this.statements.every((F)=>F.limit!=null?F.limit>0:!0)}async execute(F,A){const B=this.options??{},D=typeof B.ordered==="boolean"?B.ordered:!0,J={delete:this.ns.collection,deletes:this.statements,ordered:D};if(B.let)J.let=B.let;if(B.comment!==void 0)J.comment=B.comment;if(this.writeConcern&&this.writeConcern.w===0){if(this.statements.find((Y)=>Y.hint))throw new c8.MongoCompatibilityError("hint is not supported with unacknowledged writes")}return await super.executeCommand(F,A,J)}}hU.DeleteOperation=l8;class JX extends l8{constructor(F,A,B){super(F.s.namespace,[XX(A,{...B,limit:1})],B)}async execute(F,A){const B=await super.execute(F,A);if(this.explain)return B;if(B.code)throw new c8.MongoServerError(B);if(B.writeErrors)throw new c8.MongoServerError(B.writeErrors[0]);return{acknowledged:this.writeConcern?.w!==0,deletedCount:B.n}}}hU.DeleteOneOperation=JX;class ZX extends l8{constructor(F,A,B){super(F.s.namespace,[XX(A,B)],B)}async execute(F,A){const B=await super.execute(F,A);if(this.explain)return B;if(B.code)throw new c8.MongoServerError(B);if(B.writeErrors)throw new c8.MongoServerError(B.writeErrors[0]);return{acknowledged:this.writeConcern?.w!==0,deletedCount:B.n}}}hU.DeleteManyOperation=ZX;hU.makeDeleteStatement=XX;J6.defineAspects(l8,[J6.Aspect.RETRYABLE,J6.Aspect.WRITE_OPERATION]);J6.defineAspects(JX,[J6.Aspect.RETRYABLE,J6.Aspect.WRITE_OPERATION,J6.Aspect.EXPLAINABLE,J6.Aspect.SKIP_COLLATION]);J6.defineAspects(ZX,[J6.Aspect.WRITE_OPERATION,J6.Aspect.EXPLAINABLE,J6.Aspect.SKIP_COLLATION])});var EX=z((dU)=>{Object.defineProperty(dU,"__esModule",{value:!0});dU.BulkWriteOperation=void 0;var $X=u1();class GX extends $X.AbstractOperation{constructor(F,A,B){super(B);this.options=B,this.collection=F,this.operations=A}get commandName(){return"bulkWrite"}async execute(F,A){const B=this.collection,D=this.operations,J={...this.options,...this.bsonOptions,readPreference:this.readPreference},Z=J.ordered===!1?B.initializeUnorderedBulkOp(J):B.initializeOrderedBulkOp(J);for(let Y=0;Y<D.length;Y++)Z.raw(D[Y]);return await Z.execute({...J,session:A})}}dU.BulkWriteOperation=GX;$X.defineAspects(GX,[$X.Aspect.WRITE_OPERATION])});var HX=z((lU)=>{Object.defineProperty(lU,"__esModule",{value:!0});lU.InsertManyOperation=lU.InsertOneOperation=lU.InsertOperation=void 0;var JA=p(),Js=r(),Zs=V2(),Xs=EX(),Ys=H0(),q3=u1();class ZA extends Ys.CommandOperation{constructor(F,A,B){super(void 0,B);this.options={...B,checkKeys:B.checkKeys??!1},this.ns=F,this.documents=A}get commandName(){return"insert"}async execute(F,A){const B=this.options??{},D=typeof B.ordered==="boolean"?B.ordered:!0,J={insert:this.ns.collection,documents:this.documents,ordered:D};if(typeof B.bypassDocumentValidation==="boolean")J.bypassDocumentValidation=B.bypassDocumentValidation;if(B.comment!==void 0)J.comment=B.comment;return await super.executeCommand(F,A,J)}}lU.InsertOperation=ZA;class WX extends ZA{constructor(F,A,B){super(F.s.namespace,Js.maybeAddIdToDocuments(F,[A],B),B)}async execute(F,A){const B=await super.execute(F,A);if(B.code)throw new JA.MongoServerError(B);if(B.writeErrors)throw new JA.MongoServerError(B.writeErrors[0]);return{acknowledged:this.writeConcern?.w!==0,insertedId:this.documents[0]._id}}}lU.InsertOneOperation=WX;class CX extends q3.AbstractOperation{constructor(F,A,B){super(B);if(!Array.isArray(A))throw new JA.MongoInvalidArgumentError('Argument "docs" must be an array of documents');this.options=B,this.collection=F,this.docs=A}get commandName(){return"insert"}async execute(F,A){const B=this.collection,D={...this.options,...this.bsonOptions,readPreference:this.readPreference},J=Zs.WriteConcern.fromOptions(D),Z=new Xs.BulkWriteOperation(B,this.docs.map((X)=>({insertOne:{document:X}})),D);try{const X=await Z.execute(F,A);return{acknowledged:J?.w!==0,insertedCount:X.insertedCount,insertedIds:X.insertedIds}}catch(X){if(X&&X.message==="Operation must be an object with an operation key")throw new JA.MongoInvalidArgumentError("Collection.insertMany() cannot be called with an array that has null/undefined values");throw X}}}lU.InsertManyOperation=CX;q3.defineAspects(ZA,[q3.Aspect.RETRYABLE,q3.Aspect.WRITE_OPERATION]);q3.defineAspects(WX,[q3.Aspect.RETRYABLE,q3.Aspect.WRITE_OPERATION]);q3.defineAspects(CX,[q3.Aspect.WRITE_OPERATION])});var QX=z((iU)=>{var XA=function(F,A,B){if(F==null||typeof F!=="object")throw new Z6.MongoInvalidArgumentError("Selector must be a valid JavaScript object");if(A==null||typeof A!=="object")throw new Z6.MongoInvalidArgumentError("Document must be a valid JavaScript object");const D={q:F,u:A};if(typeof B.upsert==="boolean")D.upsert=B.upsert;if(B.multi)D.multi=B.multi;if(B.hint)D.hint=B.hint;if(B.arrayFilters)D.arrayFilters=B.arrayFilters;if(B.collation)D.collation=B.collation;return D};Object.defineProperty(iU,"__esModule",{value:!0});iU.makeUpdateStatement=iU.ReplaceOneOperation=iU.UpdateManyOperation=iU.UpdateOneOperation=iU.UpdateOperation=void 0;var Z6=p(),qX=r(),Es=H0(),x0=u1();class l9 extends Es.CommandOperation{constructor(F,A,B){super(void 0,B);this.options=B,this.ns=F,this.statements=A}get commandName(){return"update"}get canRetryWrite(){if(super.canRetryWrite===!1)return!1;return this.statements.every((F)=>F.multi==null||F.multi===!1)}async execute(F,A){const B=this.options??{},D=typeof B.ordered==="boolean"?B.ordered:!0,J={update:this.ns.collection,updates:this.statements,ordered:D};if(typeof B.bypassDocumentValidation==="boolean")J.bypassDocumentValidation=B.bypassDocumentValidation;if(B.let)J.let=B.let;if(B.comment!==void 0)J.comment=B.comment;if(this.writeConcern&&this.writeConcern.w===0){if(this.statements.find((X)=>X.hint))throw new Z6.MongoCompatibilityError("hint is not supported with unacknowledged writes")}return await super.executeCommand(F,A,J)}}iU.UpdateOperation=l9;class KX extends l9{constructor(F,A,B,D){super(F.s.namespace,[XA(A,B,{...D,multi:!1})],D);if(!qX.hasAtomicOperators(B))throw new Z6.MongoInvalidArgumentError("Update document requires atomic operators")}async execute(F,A){const B=await super.execute(F,A);if(this.explain!=null)return B;if(B.code)throw new Z6.MongoServerError(B);if(B.writeErrors)throw new Z6.MongoServerError(B.writeErrors[0]);return{acknowledged:this.writeConcern?.w!==0,modifiedCount:B.nModified??B.n,upsertedId:Array.isArray(B.upserted)&&B.upserted.length>0?B.upserted[0]._id:null,upsertedCount:Array.isArray(B.upserted)&&B.upserted.length?B.upserted.length:0,matchedCount:Array.isArray(B.upserted)&&B.upserted.length>0?0:B.n}}}iU.UpdateOneOperation=KX;class zX extends l9{constructor(F,A,B,D){super(F.s.namespace,[XA(A,B,{...D,multi:!0})],D);if(!qX.hasAtomicOperators(B))throw new Z6.MongoInvalidArgumentError("Update document requires atomic operators")}async execute(F,A){const B=await super.execute(F,A);if(this.explain!=null)return B;if(B.code)throw new Z6.MongoServerError(B);if(B.writeErrors)throw new Z6.MongoServerError(B.writeErrors[0]);return{acknowledged:this.writeConcern?.w!==0,modifiedCount:B.nModified??B.n,upsertedId:Array.isArray(B.upserted)&&B.upserted.length>0?B.upserted[0]._id:null,upsertedCount:Array.isArray(B.upserted)&&B.upserted.length?B.upserted.length:0,matchedCount:Array.isArray(B.upserted)&&B.upserted.length>0?0:B.n}}}iU.UpdateManyOperation=zX;class UX extends l9{constructor(F,A,B,D){super(F.s.namespace,[XA(A,B,{...D,multi:!1})],D);if(qX.hasAtomicOperators(B))throw new Z6.MongoInvalidArgumentError("Replacement document must not contain atomic operators")}async execute(F,A){const B=await super.execute(F,A);if(this.explain!=null)return B;if(B.code)throw new Z6.MongoServerError(B);if(B.writeErrors)throw new Z6.MongoServerError(B.writeErrors[0]);return{acknowledged:this.writeConcern?.w!==0,modifiedCount:B.nModified??B.n,upsertedId:Array.isArray(B.upserted)&&B.upserted.length>0?B.upserted[0]._id:null,upsertedCount:Array.isArray(B.upserted)&&B.upserted.length?B.upserted.length:0,matchedCount:Array.isArray(B.upserted)&&B.upserted.length>0?0:B.n}}}iU.ReplaceOneOperation=UX;iU.makeUpdateStatement=XA;x0.defineAspects(l9,[x0.Aspect.RETRYABLE,x0.Aspect.WRITE_OPERATION,x0.Aspect.SKIP_COLLATION]);x0.defineAspects(KX,[x0.Aspect.RETRYABLE,x0.Aspect.WRITE_OPERATION,x0.Aspect.EXPLAINABLE,x0.Aspect.SKIP_COLLATION]);x0.defineAspects(zX,[x0.Aspect.WRITE_OPERATION,x0.Aspect.EXPLAINABLE,x0.Aspect.SKIP_COLLATION]);x0.defineAspects(UX,[x0.Aspect.RETRYABLE,x0.Aspect.WRITE_OPERATION,x0.Aspect.SKIP_COLLATION])});var a8=z((FQ)=>{var $A=function(F,A,B,D){if(B)D=B;else if(D&&D.result)D=D.result;if(D==null)return;if(D.ok===0&&A.ok===1){A.ok=0;const Z={index:0,code:D.code||0,errmsg:D.message,errInfo:D.errInfo,op:F.operations[0]};A.writeErrors.push(new YA(Z));return}else if(D.ok===0&&A.ok===0)return;if(eU(F)&&D.n)A.nInserted=A.nInserted+D.n;if(VX(F)&&D.n)A.nRemoved=A.nRemoved+D.n;let J=0;if(Array.isArray(D.upserted)){J=D.upserted.length;for(let Z=0;Z<D.upserted.length;Z++)A.upserted.push({index:D.upserted[Z].index+F.originalZeroIndex,_id:D.upserted[Z]._id})}else if(D.upserted)J=1,A.upserted.push({index:F.originalZeroIndex,_id:D.upserted});if(LX(F)&&D.n){const Z=D.nModified;if(A.nUpserted=A.nUpserted+J,A.nMatched=A.nMatched+(D.n-J),typeof Z==="number")A.nModified=A.nModified+Z;else A.nModified=0}if(Array.isArray(D.writeErrors))for(let Z=0;Z<D.writeErrors.length;Z++){const X={index:F.originalIndexes[D.writeErrors[Z].index],code:D.writeErrors[Z].code,errmsg:D.writeErrors[Z].errmsg,errInfo:D.writeErrors[Z].errInfo,op:F.operations[D.writeErrors[Z].index]};A.writeErrors.push(new YA(X))}if(D.writeConcernError)A.writeConcernErrors.push(new s8(D.writeConcernError))},oU=function(F,A,B){if(F.s.batches.length===0)return B(void 0,new e3(F.s.bulkResult,F.isOrdered));const D=F.s.batches.shift();function J(X,Y){if(X&&"message"in X&&!(X instanceof R0.MongoWriteConcernError))return B(new p9(X,new e3(F.s.bulkResult,F.isOrdered)));if(X instanceof R0.MongoWriteConcernError)return Ls(D,F.s.bulkResult,F.isOrdered,X,B);$A(D,F.s.bulkResult,X,Y);const $=new e3(F.s.bulkResult,F.isOrdered);if(F.handleWriteError(B,$))return;oU(F,A,B)}const Z=o3.resolveOptions(F,{...A,ordered:F.isOrdered});if(Z.bypassDocumentValidation!==!0)delete Z.bypassDocumentValidation;if(F.operationId)J.operationId=F.operationId;if(F.s.bypassDocumentValidation===!0)Z.bypassDocumentValidation=!0;if(F.s.checkKeys===!1)Z.checkKeys=!1;if(Z.retryWrites){if(LX(D))Z.retryWrites=Z.retryWrites&&!D.operations.some((X)=>X.multi);if(VX(D))Z.retryWrites=Z.retryWrites&&!D.operations.some((X)=>X.limit===0)}try{const X=eU(D)?new Us.InsertOperation(F.s.namespace,D.operations,Z):LX(D)?new c4.UpdateOperation(F.s.namespace,D.operations,Z):VX(D)?new n8.DeleteOperation(F.s.namespace,D.operations,Z):null;if(X!=null)rU.executeOperation(F.s.collection.client,X).then((Y)=>J(void 0,Y),(Y)=>J(Y))}catch(X){X.ok=0,$A(D,F.s.bulkResult,X,void 0),B()}},Ls=function(F,A,B,D,J){$A(F,A,void 0,D.result),J(new p9({message:D.result?.writeConcernError.errmsg,code:D.result?.writeConcernError.result},new e3(A,B)))},eU=function(F){return F.batchType===FQ.BatchType.INSERT},LX=function(F){return F.batchType===FQ.BatchType.UPDATE},VX=function(F){return F.batchType===FQ.BatchType.DELETE},i8=function(F){let{currentOp:A}=F.s;if(F.s.currentOp=void 0,!A)A={};return A};Object.defineProperty(FQ,"__esModule",{value:!0});FQ.BulkOperationBase=FQ.BulkWriteShimOperation=FQ.FindOperators=FQ.MongoBulkWriteError=FQ.mergeBatchResults=FQ.WriteError=FQ.WriteConcernError=FQ.BulkWriteResult=FQ.Batch=FQ.BatchType=void 0;var Ks=import.meta.require("util"),zs=S1(),R0=p(),n8=YX(),rU=w2(),Us=HX(),Qs=u1(),c4=QX(),sU=r(),o3=r(),aU=V2(),p8=Symbol("serverError");FQ.BatchType=Object.freeze({INSERT:1,UPDATE:2,DELETE:3});class tU{constructor(F,A){this.originalZeroIndex=A,this.currentIndex=0,this.originalIndexes=[],this.batchType=F,this.operations=[],this.size=0,this.sizeBytes=0}}FQ.Batch=tU;class e3{static generateIdMap(F){const A={};for(let B of F)A[B.index]=B._id;return A}constructor(F,A){this.result=F,this.insertedCount=this.result.nInserted??0,this.matchedCount=this.result.nMatched??0,this.modifiedCount=this.result.nModified??0,this.deletedCount=this.result.nRemoved??0,this.upsertedCount=this.result.upserted.length??0,this.upsertedIds=e3.generateIdMap(this.result.upserted),this.insertedIds=e3.generateIdMap(this.getSuccessfullyInsertedIds(F,A)),Object.defineProperty(this,"result",{value:this.result,enumerable:!1})}get ok(){return this.result.ok}getSuccessfullyInsertedIds(F,A){if(F.writeErrors.length===0)return F.insertedIds;if(A)return F.insertedIds.slice(0,F.writeErrors[0].index);return F.insertedIds.filter(({index:B})=>!F.writeErrors.some((D)=>B===D.index))}getUpsertedIdAt(F){return this.result.upserted[F]}getRawResponse(){return this.result}hasWriteErrors(){return this.result.writeErrors.length>0}getWriteErrorCount(){return this.result.writeErrors.length}getWriteErrorAt(F){return F<this.result.writeErrors.length?this.result.writeErrors[F]:void 0}getWriteErrors(){return this.result.writeErrors}getWriteConcernError(){if(this.result.writeConcernErrors.length===0)return;else if(this.result.writeConcernErrors.length===1)return this.result.writeConcernErrors[0];else{let F="";for(let A=0;A<this.result.writeConcernErrors.length;A++){const B=this.result.writeConcernErrors[A];if(F=F+B.errmsg,A===0)F=F+" and "}return new s8({errmsg:F,code:R0.MONGODB_ERROR_CODES.WriteConcernFailed})}}toString(){return`BulkWriteResult(${this.result})`}isOk(){return this.result.ok===1}}FQ.BulkWriteResult=e3;class s8{constructor(F){this[p8]=F}get code(){return this[p8].code}get errmsg(){return this[p8].errmsg}get errInfo(){return this[p8].errInfo}toJSON(){return this[p8]}toString(){return`WriteConcernError(${this.errmsg})`}}FQ.WriteConcernError=s8;class YA{constructor(F){this.err=F}get code(){return this.err.code}get index(){return this.err.index}get errmsg(){return this.err.errmsg}get errInfo(){return this.err.errInfo}getOperation(){return this.err.op}toJSON(){return{code:this.err.code,index:this.err.index,errmsg:this.err.errmsg,op:this.err.op}}toString(){return`WriteError(${JSON.stringify(this.toJSON())})`}}FQ.WriteError=YA;FQ.mergeBatchResults=$A;class p9 extends R0.MongoServerError{constructor(F,A){super(F);if(this.writeErrors=[],F instanceof s8)this.err=F;else if(!(F instanceof Error))this.message=F.message,this.code=F.code,this.writeErrors=F.writeErrors??[];this.result=A,Object.assign(this,F)}get name(){return"MongoBulkWriteError"}get insertedCount(){return this.result.insertedCount}get matchedCount(){return this.result.matchedCount}get modifiedCount(){return this.result.modifiedCount}get deletedCount(){return this.result.deletedCount}get upsertedCount(){return this.result.upsertedCount}get insertedIds(){return this.result.insertedIds}get upsertedIds(){return this.result.upsertedIds}}FQ.MongoBulkWriteError=p9;class wX{constructor(F){this.bulkOperation=F}update(F){const A=i8(this.bulkOperation);return this.bulkOperation.addToOperationsList(FQ.BatchType.UPDATE,c4.makeUpdateStatement(A.selector,F,{...A,multi:!0}))}updateOne(F){if(!o3.hasAtomicOperators(F))throw new R0.MongoInvalidArgumentError("Update document requires atomic operators");const A=i8(this.bulkOperation);return this.bulkOperation.addToOperationsList(FQ.BatchType.UPDATE,c4.makeUpdateStatement(A.selector,F,{...A,multi:!1}))}replaceOne(F){if(o3.hasAtomicOperators(F))throw new R0.MongoInvalidArgumentError("Replacement document must not use atomic operators");const A=i8(this.bulkOperation);return this.bulkOperation.addToOperationsList(FQ.BatchType.UPDATE,c4.makeUpdateStatement(A.selector,F,{...A,multi:!1}))}deleteOne(){const F=i8(this.bulkOperation);return this.bulkOperation.addToOperationsList(FQ.BatchType.DELETE,n8.makeDeleteStatement(F.selector,{...F,limit:1}))}delete(){const F=i8(this.bulkOperation);return this.bulkOperation.addToOperationsList(FQ.BatchType.DELETE,n8.makeDeleteStatement(F.selector,{...F,limit:0}))}upsert(){if(!this.bulkOperation.s.currentOp)this.bulkOperation.s.currentOp={};return this.bulkOperation.s.currentOp.upsert=!0,this}collation(F){if(!this.bulkOperation.s.currentOp)this.bulkOperation.s.currentOp={};return this.bulkOperation.s.currentOp.collation=F,this}arrayFilters(F){if(!this.bulkOperation.s.currentOp)this.bulkOperation.s.currentOp={};return this.bulkOperation.s.currentOp.arrayFilters=F,this}hint(F){if(!this.bulkOperation.s.currentOp)this.bulkOperation.s.currentOp={};return this.bulkOperation.s.currentOp.hint=F,this}}FQ.FindOperators=wX;var Vs=Ks.promisify(oU);class RX extends Qs.AbstractOperation{constructor(F,A){super(A);this.bulkOperation=F}get commandName(){return"bulkWrite"}execute(F,A){if(this.options.session==null)this.options.session=A;return Vs(this.bulkOperation,this.options)}}FQ.BulkWriteShimOperation=RX;class IX{constructor(F,A,B){this.collection=F,this.isOrdered=B;const D=o3.getTopology(F);A=A==null?{}:A;const J=F.s.namespace,Z=!1,X=void 0,Y=D.lastHello(),$=!!(D.s.options&&D.s.options.autoEncrypter),G=Y&&Y.maxBsonObjectSize?Y.maxBsonObjectSize:16777216,E=$?2097152:G,W=Y&&Y.maxWriteBatchSize?Y.maxWriteBatchSize:1000,C=(W-1).toString(10).length+2;let H=Object.assign({},A);H=o3.applyRetryableWrites(H,F.s.db);const q={ok:1,writeErrors:[],writeConcernErrors:[],insertedIds:[],nInserted:0,nUpserted:0,nMatched:0,nModified:0,nRemoved:0,upserted:[]};if(this.s={bulkResult:q,currentBatch:void 0,currentIndex:0,currentBatchSize:0,currentBatchSizeBytes:0,currentInsertBatch:void 0,currentUpdateBatch:void 0,currentRemoveBatch:void 0,batches:[],writeConcern:aU.WriteConcern.fromOptions(A),maxBsonObjectSize:G,maxBatchSizeBytes:E,maxWriteBatchSize:W,maxKeySize:C,namespace:J,topology:D,options:H,bsonOptions:zs.resolveBSONOptions(A),currentOp:X,executed:Z,collection:F,err:void 0,checkKeys:typeof A.checkKeys==="boolean"?A.checkKeys:!1},A.bypassDocumentValidation===!0)this.s.bypassDocumentValidation=!0}insert(F){return sU.maybeAddIdToDocuments(this.collection,F,{forceServerObjectId:this.shouldForceServerObjectId()}),this.addToOperationsList(FQ.BatchType.INSERT,F)}find(F){if(!F)throw new R0.MongoInvalidArgumentError("Bulk find operation must specify a selector");return this.s.currentOp={selector:F},new wX(this)}raw(F){if(F==null||typeof F!=="object")throw new R0.MongoInvalidArgumentError("Operation must be an object with an operation key");if("insertOne"in F){const A=this.shouldForceServerObjectId(),B=F.insertOne&&F.insertOne.document==null?F.insertOne:F.insertOne.document;return sU.maybeAddIdToDocuments(this.collection,B,{forceServerObjectId:A}),this.addToOperationsList(FQ.BatchType.INSERT,B)}if("replaceOne"in F||"updateOne"in F||"updateMany"in F){if("replaceOne"in F){if("q"in F.replaceOne)throw new R0.MongoInvalidArgumentError("Raw operations are not allowed");const A=c4.makeUpdateStatement(F.replaceOne.filter,F.replaceOne.replacement,{...F.replaceOne,multi:!1});if(o3.hasAtomicOperators(A.u))throw new R0.MongoInvalidArgumentError("Replacement document must not use atomic operators");return this.addToOperationsList(FQ.BatchType.UPDATE,A)}if("updateOne"in F){if("q"in F.updateOne)throw new R0.MongoInvalidArgumentError("Raw operations are not allowed");const A=c4.makeUpdateStatement(F.updateOne.filter,F.updateOne.update,{...F.updateOne,multi:!1});if(!o3.hasAtomicOperators(A.u))throw new R0.MongoInvalidArgumentError("Update document requires atomic operators");return this.addToOperationsList(FQ.BatchType.UPDATE,A)}if("updateMany"in F){if("q"in F.updateMany)throw new R0.MongoInvalidArgumentError("Raw operations are not allowed");const A=c4.makeUpdateStatement(F.updateMany.filter,F.updateMany.update,{...F.updateMany,multi:!0});if(!o3.hasAtomicOperators(A.u))throw new R0.MongoInvalidArgumentError("Update document requires atomic operators");return this.addToOperationsList(FQ.BatchType.UPDATE,A)}}if("deleteOne"in F){if("q"in F.deleteOne)throw new R0.MongoInvalidArgumentError("Raw operations are not allowed");return this.addToOperationsList(FQ.BatchType.DELETE,n8.makeDeleteStatement(F.deleteOne.filter,{...F.deleteOne,limit:1}))}if("deleteMany"in F){if("q"in F.deleteMany)throw new R0.MongoInvalidArgumentError("Raw operations are not allowed");return this.addToOperationsList(FQ.BatchType.DELETE,n8.makeDeleteStatement(F.deleteMany.filter,{...F.deleteMany,limit:0}))}throw new R0.MongoInvalidArgumentError("bulkWrite only supports insertOne, updateOne, updateMany, deleteOne, deleteMany")}get bsonOptions(){return this.s.bsonOptions}get writeConcern(){return this.s.writeConcern}get batches(){const F=[...this.s.batches];if(this.isOrdered){if(this.s.currentBatch)F.push(this.s.currentBatch)}else{if(this.s.currentInsertBatch)F.push(this.s.currentInsertBatch);if(this.s.currentUpdateBatch)F.push(this.s.currentUpdateBatch);if(this.s.currentRemoveBatch)F.push(this.s.currentRemoveBatch)}return F}async execute(F={}){if(this.s.executed)throw new R0.MongoBatchReExecutionError;const A=aU.WriteConcern.fromOptions(F);if(A)this.s.writeConcern=A;if(this.isOrdered){if(this.s.currentBatch)this.s.batches.push(this.s.currentBatch)}else{if(this.s.currentInsertBatch)this.s.batches.push(this.s.currentInsertBatch);if(this.s.currentUpdateBatch)this.s.batches.push(this.s.currentUpdateBatch);if(this.s.currentRemoveBatch)this.s.batches.push(this.s.currentRemoveBatch)}if(this.s.batches.length===0)throw new R0.MongoInvalidArgumentError("Invalid BulkOperation, Batch cannot be empty");this.s.executed=!0;const B={...this.s.options,...F},D=new RX(this,B);return await rU.executeOperation(this.s.collection.client,D)}handleWriteError(F,A){if(this.s.bulkResult.writeErrors.length>0){const D=this.s.bulkResult.writeErrors[0].errmsg?this.s.bulkResult.writeErrors[0].errmsg:"write operation failed";return F(new p9({message:D,code:this.s.bulkResult.writeErrors[0].code,writeErrors:this.s.bulkResult.writeErrors},A)),!0}const B=A.getWriteConcernError();if(B)return F(new p9(B,A)),!0;return!1}shouldForceServerObjectId(){return this.s.options.forceServerObjectId===!0||this.s.collection.s.db.options?.forceServerObjectId===!0}}FQ.BulkOperationBase=IX;Object.defineProperty(IX.prototype,"length",{enumerable:!0,get(){return this.s.currentIndex}})});var NX=z((JQ)=>{Object.defineProperty(JQ,"__esModule",{value:!0});JQ.OrderedBulkOperation=void 0;var us=S1(),BQ=p(),GA=a8();class DQ extends GA.BulkOperationBase{constructor(F,A){super(F,A,!0)}addToOperationsList(F,A){const B=us.calculateObjectSize(A,{checkKeys:!1,ignoreUndefined:!1});if(B>=this.s.maxBsonObjectSize)throw new BQ.MongoInvalidArgumentError(`Document is larger than the maximum size ${this.s.maxBsonObjectSize}`);if(this.s.currentBatch==null)this.s.currentBatch=new GA.Batch(F,this.s.currentIndex);const D=this.s.maxKeySize;if(this.s.currentBatchSize+1>=this.s.maxWriteBatchSize||this.s.currentBatchSize>0&&this.s.currentBatchSizeBytes+D+B>=this.s.maxBatchSizeBytes||this.s.currentBatch.batchType!==F)this.s.batches.push(this.s.currentBatch),this.s.currentBatch=new GA.Batch(F,this.s.currentIndex),this.s.currentBatchSize=0,this.s.currentBatchSizeBytes=0;if(F===GA.BatchType.INSERT)this.s.bulkResult.insertedIds.push({index:this.s.currentIndex,_id:A._id});if(Array.isArray(A))throw new BQ.MongoInvalidArgumentError("Operation passed in cannot be an Array");return this.s.currentBatch.originalIndexes.push(this.s.currentIndex),this.s.currentBatch.operations.push(A),this.s.currentBatchSize+=1,this.s.currentBatchSizeBytes+=D+B,this.s.currentIndex+=1,this}}JQ.OrderedBulkOperation=DQ});var PX=z(($Q)=>{Object.defineProperty($Q,"__esModule",{value:!0});$Q.UnorderedBulkOperation=void 0;var Os=S1(),XQ=p(),K3=a8();class YQ extends K3.BulkOperationBase{constructor(F,A){super(F,A,!1)}handleWriteError(F,A){if(this.s.batches.length)return!1;return super.handleWriteError(F,A)}addToOperationsList(F,A){const B=Os.calculateObjectSize(A,{checkKeys:!1,ignoreUndefined:!1});if(B>=this.s.maxBsonObjectSize)throw new XQ.MongoInvalidArgumentError(`Document is larger than the maximum size ${this.s.maxBsonObjectSize}`);if(this.s.currentBatch=void 0,F===K3.BatchType.INSERT)this.s.currentBatch=this.s.currentInsertBatch;else if(F===K3.BatchType.UPDATE)this.s.currentBatch=this.s.currentUpdateBatch;else if(F===K3.BatchType.DELETE)this.s.currentBatch=this.s.currentRemoveBatch;const D=this.s.maxKeySize;if(this.s.currentBatch==null)this.s.currentBatch=new K3.Batch(F,this.s.currentIndex);if(this.s.currentBatch.size+1>=this.s.maxWriteBatchSize||this.s.currentBatch.size>0&&this.s.currentBatch.sizeBytes+D+B>=this.s.maxBatchSizeBytes||this.s.currentBatch.batchType!==F)this.s.batches.push(this.s.currentBatch),this.s.currentBatch=new K3.Batch(F,this.s.currentIndex);if(Array.isArray(A))throw new XQ.MongoInvalidArgumentError("Operation passed in cannot be an Array");if(this.s.currentBatch.operations.push(A),this.s.currentBatch.originalIndexes.push(this.s.currentIndex),this.s.currentIndex=this.s.currentIndex+1,F===K3.BatchType.INSERT)this.s.currentInsertBatch=this.s.currentBatch,this.s.bulkResult.insertedIds.push({index:this.s.bulkResult.insertedIds.length,_id:A._id});else if(F===K3.BatchType.UPDATE)this.s.currentUpdateBatch=this.s.currentBatch;else if(F===K3.BatchType.DELETE)this.s.currentRemoveBatch=this.s.currentBatch;return this.s.currentBatch.size+=1,this.s.currentBatch.sizeBytes+=D+B,this}}$Q.UnorderedBulkOperation=YQ});var EA=z((WQ)=>{Object.defineProperty(WQ,"__esModule",{value:!0});WQ.AggregateOperation=WQ.DB_AGGREGATE_COLLECTION=void 0;var EQ=p(),Ss=r(),ks=V2(),xs=H0(),r8=u1();WQ.DB_AGGREGATE_COLLECTION=1;var fs=8;class MX extends xs.CommandOperation{constructor(F,A,B){super(void 0,{...B,dbName:F.db});if(this.options={...B},this.target=F.collection||WQ.DB_AGGREGATE_COLLECTION,this.pipeline=A,this.hasWriteStage=!1,typeof B?.out==="string")this.pipeline=this.pipeline.concat({$out:B.out}),this.hasWriteStage=!0;else if(A.length>0){const D=A[A.length-1];if(D.$out||D.$merge)this.hasWriteStage=!0}if(this.hasWriteStage)this.trySecondaryWrite=!0;else delete this.options.writeConcern;if(this.explain&&this.writeConcern)throw new EQ.MongoInvalidArgumentError('Option "explain" cannot be used on an aggregate call with writeConcern');if(B?.cursor!=null&&typeof B.cursor!=="object")throw new EQ.MongoInvalidArgumentError("Cursor options must be an object")}get commandName(){return"aggregate"}get canRetryRead(){return!this.hasWriteStage}addToPipeline(F){this.pipeline.push(F)}async execute(F,A){const B=this.options,D=Ss.maxWireVersion(F),J={aggregate:this.target,pipeline:this.pipeline};if(this.hasWriteStage&&D<fs)this.readConcern=void 0;if(this.hasWriteStage&&this.writeConcern)ks.WriteConcern.apply(J,this.writeConcern);if(B.bypassDocumentValidation===!0)J.bypassDocumentValidation=B.bypassDocumentValidation;if(typeof B.allowDiskUse==="boolean")J.allowDiskUse=B.allowDiskUse;if(B.hint)J.hint=B.hint;if(B.let)J.let=B.let;if(B.comment!==void 0)J.comment=B.comment;if(J.cursor=B.cursor||{},B.batchSize&&!this.hasWriteStage)J.cursor.batchSize=B.batchSize;return await super.executeCommand(F,A,J)}}WQ.AggregateOperation=MX;r8.defineAspects(MX,[r8.Aspect.READ_OPERATION,r8.Aspect.RETRYABLE,r8.Aspect.EXPLAINABLE,r8.Aspect.CURSOR_CREATING])});var zQ=z((qQ)=>{Object.defineProperty(qQ,"__esModule",{value:!0});qQ.OnDemandDocument=void 0;var W1=S1();class WA{constructor(F,A=0,B=!1){this.bson=F,this.offset=A,this.isArray=B,this.cache=Object.create(null),this.indexFound=Object.create(null),this.elements=W1.parseToElementsToArray(this.bson,A)}isElementName(F,A){const B=A[2],D=A[1];if(F.length!==B)return!1;for(let J=0;J<F.length;J++)if(this.bson[D+J]!==F.charCodeAt(J))return!1;return!0}getElement(F){const A=this.cache[F];if(A===!1)return null;if(A!=null)return A;if(typeof F==="number")if(this.isArray)if(F<this.elements.length){const D={element:this.elements[F],value:void 0};return this.cache[F]=D,this.indexFound[F]=!0,D}else return null;else return null;for(let B=0;B<this.elements.length;B++){const D=this.elements[B];if(!this.indexFound[B]&&this.isElementName(F,D)){const J={element:D,value:void 0};return this.cache[F]=J,this.indexFound[B]=!0,J}}return this.cache[F]=!1,null}toJSValue(F,A){const B=F[0],D=F[3],J=F[4];if(A!==B)return null;switch(A){case W1.BSONType.null:case W1.BSONType.undefined:return null;case W1.BSONType.double:return W1.getFloat64LE(this.bson,D);case W1.BSONType.int:return W1.getInt32LE(this.bson,D);case W1.BSONType.long:return W1.getBigInt64LE(this.bson,D);case W1.BSONType.bool:return Boolean(this.bson[D]);case W1.BSONType.objectId:return new W1.ObjectId(this.bson.subarray(D,D+12));case W1.BSONType.timestamp:return new W1.Timestamp(W1.getBigInt64LE(this.bson,D));case W1.BSONType.string:return W1.toUTF8(this.bson,D+4,D+J-1,!1);case W1.BSONType.binData:{const Z=W1.getInt32LE(this.bson,D),X=this.bson[D+4];if(X===2){const Y=W1.getInt32LE(this.bson,D+1+4);if(Y<0)throw new W1.BSONError("Negative binary type element size found for subtype 0x02");if(Y>Z-4)throw new W1.BSONError("Binary type with subtype 0x02 contains too long binary size");if(Y<Z-4)throw new W1.BSONError("Binary type with subtype 0x02 contains too short binary size");return new W1.Binary(this.bson.subarray(D+1+4+4,D+1+4+4+Y),2)}return new W1.Binary(this.bson.subarray(D+1+4,D+1+4+Z),X)}case W1.BSONType.date:return new Date(Number(W1.getBigInt64LE(this.bson,D)));case W1.BSONType.object:return new WA(this.bson,D);case W1.BSONType.array:return new WA(this.bson,D,!0);default:throw new W1.BSONError(`Unsupported BSON type: ${A}`)}}size(){return this.elements.length}has(F){const A=this.cache[F];if(A===!1)return!1;if(A!=null)return!0;return this.getElement(F)!=null}get(F,A,B){const D=this.getElement(F);if(D==null)if(B===!0)throw new W1.BSONError(`BSON element "${F}" is missing`);else return null;if(D.value==null){const J=this.toJSValue(D.element,A);if(J==null)if(B===!0)throw new W1.BSONError(`BSON element "${F}" is missing`);else return null;D.value=J}return D.value}getNumber(F,A){const B=this.get(F,W1.BSONType.bool),D=B==null?null:B?1:0,J=this.get(F,W1.BSONType.long),Z=J==null?null:Number(J),X=D??Z??this.get(F,W1.BSONType.int)??this.get(F,W1.BSONType.double);if(A===!0&&X==null)throw new W1.BSONError(`BSON element "${F}" is missing`);return X}toObject(F){return W1.BSON.deserialize(this.bson,{...F,index:this.offset,allowObjectSmallerThanBufferSize:!0})}toBytes(){const F=W1.getInt32LE(this.bson,this.offset);return this.bson.subarray(this.offset,this.offset+F)}}qQ.OnDemandDocument=WA});var o8=z((UQ)=>{var ys=function(F){const A=I0.parseToElementsToArray(F,0);for(let B=0;B<A.length;B++){const D=A[B];if(D[2]===2){const J=D[1];if(F[J]===111&&F[J+1]===107){const Z=D[3],X=D[4];for(let Y=Z;Y<Z+X;Y++)if(F[Y]!==0)return!1;return!0}}}return!0};Object.defineProperty(UQ,"__esModule",{value:!0});UQ.CursorResponse=UQ.MongoDBResponse=UQ.isErrorResponse=void 0;var I0=S1(),_s=p(),gs=r(),bs=zQ();UQ.isErrorResponse=ys;class i9 extends bs.OnDemandDocument{static is(F){return F instanceof i9}get isError(){let F=this.ok===0;return F||=this.has("errmsg"),F||=this.has("code"),F||=this.has("$err"),F}get recoveryToken(){return this.get("recoveryToken",I0.BSONType.object)?.toObject({promoteValues:!1,promoteLongs:!1,promoteBuffers:!1})??null}get atClusterTime(){return this.get("cursor",I0.BSONType.object)?.get("atClusterTime",I0.BSONType.timestamp)??this.get("atClusterTime",I0.BSONType.timestamp)}get operationTime(){return this.get("operationTime",I0.BSONType.timestamp)}get ok(){return this.getNumber("ok")?1:0}get $err(){return this.get("$err",I0.BSONType.string)}get errmsg(){return this.get("errmsg",I0.BSONType.string)}get code(){return this.getNumber("code")}get $clusterTime(){if(!("clusterTime"in this)){const F=this.get("$clusterTime",I0.BSONType.object);if(F==null)return this.clusterTime=null,null;const A=F.get("clusterTime",I0.BSONType.timestamp,!0),B=F.get("signature",I0.BSONType.object)?.toObject();this.clusterTime={clusterTime:A,signature:B}}return this.clusterTime??null}toObject(F){const A={useBigInt64:F?.useBigInt64,promoteLongs:F?.promoteLongs,promoteValues:F?.promoteValues,promoteBuffers:F?.promoteBuffers,bsonRegExp:F?.bsonRegExp,raw:F?.raw??!1,fieldsAsRaw:F?.fieldsAsRaw??{},validation:this.parseBsonSerializationOptions(F)};return super.toObject(A)}parseBsonSerializationOptions(F){if(F?.enableUtf8Validation===!1)return{utf8:!1};return{utf8:{writeErrors:!1}}}}i9.empty=new i9(new Uint8Array([13,0,0,0,16,111,107,0,1,0,0,0,0]));UQ.MongoDBResponse=i9;class t8 extends i9{static is(F){return F instanceof t8||F===t8.emptyGetMore}constructor(F,A,B){super(F,A,B);this.ns=null,this.batchSize=0,this.iterated=0;const D=this.get("cursor",I0.BSONType.object,!0),J=D.get("id",I0.BSONType.long,!0);this.id=new I0.Long(Number(J&0xffffffffn),Number(J>>32n&0xffffffffn));const Z=D.get("ns",I0.BSONType.string);if(Z!=null)this.ns=gs.ns(Z);if(D.has("firstBatch"))this.batch=D.get("firstBatch",I0.BSONType.array,!0);else if(D.has("nextBatch"))this.batch=D.get("nextBatch",I0.BSONType.array,!0);else throw new _s.MongoUnexpectedServerResponseError("Cursor document did not contain a batch");this.batchSize=this.batch.size()}get length(){return Math.max(this.batchSize-this.iterated,0)}shift(F){if(this.iterated>=this.batchSize)return null;const A=this.batch.get(this.iterated,I0.BSONType.object,!0)??null;if(this.iterated+=1,F?.raw)return A.toBytes();else return A.toObject(F)}clear(){this.iterated=this.batchSize}pushMany(){throw new Error("pushMany Unsupported method")}push(){throw new Error("push Unsupported method")}}t8.emptyGetMore={id:new I0.Long(0),length:0,shift:()=>null};UQ.CursorResponse=t8});var p4=z((IQ)=>{var uX=function(F){const A=Object.values(IQ.SeverityLevel),B=F?.toLowerCase();if(B!=null&&A.includes(B))return B;return null},l4=function(F){return{write:LQ.promisify((A,B)=>{const D=LQ.inspect(A,{compact:!0,breakLength:1/0});F.write(`${D}\n`,"utf-8",B);return})}},ds=function({MONGODB_LOG_PATH:F},{mongodbLogPath:A}){if(typeof A==="string"&&/^stderr$/i.test(A))return{mongodbLogPath:l4(process.stderr),mongodbLogPathIsStdErr:!0};if(typeof A==="string"&&/^stdout$/i.test(A))return{mongodbLogPath:l4(process.stdout),mongodbLogPathIsStdErr:!1};if(typeof A==="object"&&typeof A?.write==="function")return{mongodbLogPath:A,mongodbLogPathIsStdErr:!1};if(F&&/^stderr$/i.test(F))return{mongodbLogPath:l4(process.stderr),mongodbLogPathIsStdErr:!0};if(F&&/^stdout$/i.test(F))return{mongodbLogPath:l4(process.stdout),mongodbLogPathIsStdErr:!1};return{mongodbLogPath:l4(process.stderr),mongodbLogPathIsStdErr:!0}},n9=function(F,A,B){return uX(F)??uX(A)??B},cs=function(F,A){const B=IQ.SEVERITY_LEVEL_MAP.getNumericSeverityLevel(F),D=IQ.SEVERITY_LEVEL_MAP.getNumericSeverityLevel(A);return B<D?-1:B>D?1:0},A4=function(F,A,B={}){let D="";if(typeof F==="string")D=F;else if(typeof F==="function")D=F.name;else try{D=ms.EJSON.stringify(F,B)}catch(J){D=`Extended JSON serialization failed with: ${J.message}`}if(A!==0&&D.length>A&&D.charCodeAt(A-1)!==D.codePointAt(A-1)){if(A--,A===0)return""}return A!==0&&D.length>A?`${D.slice(0,A)}...`:D},ls=function(F){const A=F;return A.toLog!==void 0&&typeof A.toLog==="function"},CA=function(F,A,B=IQ.DEFAULT_MAX_DOCUMENT_LENGTH){const{selector:D,operation:J,topologyDescription:Z,message:X}=A;return F.selector=A4(D,B),F.operation=J,F.topologyDescription=A4(Z,B),F.message=X,F},TX=function(F,A){F.commandName=A.commandName,F.requestId=A.requestId,F.driverConnectionId=A.connectionId;const{host:B,port:D}=s9.HostAddress.fromString(A.address).toHostPort();if(F.serverHost=B,F.serverPort=D,A?.serviceId)F.serviceId=A.serviceId.toHexString();return F.databaseName=A.databaseName,F.serverConnectionId=A.serverConnectionId,F},m2=function(F,A){const{host:B,port:D}=s9.HostAddress.fromString(A.address).toHostPort();return F.serverHost=B,F.serverPort=D,F},F4=function(F,A){return F.topologyId=A.topologyId,F},jX=function(F,A){const{awaited:B,connectionId:D}=A;F.awaited=B,F.driverConnectionId=A.connectionId;const{host:J,port:Z}=s9.HostAddress.fromString(D).toHostPort();return F.serverHost=J,F.serverPort=Z,F},wQ=function(F,A=IQ.DEFAULT_MAX_DOCUMENT_LENGTH){let B=Object.create(null);switch(F.name){case p1.SERVER_SELECTION_STARTED:return B=CA(B,F,A),B;case p1.SERVER_SELECTION_FAILED:return B=CA(B,F,A),B.failure=F.failure?.message,B;case p1.SERVER_SELECTION_SUCCEEDED:return B=CA(B,F,A),B.serverHost=F.serverHost,B.serverPort=F.serverPort,B;case p1.WAITING_FOR_SUITABLE_SERVER:return B=CA(B,F,A),B.remainingTimeMS=F.remainingTimeMS,B;case p1.COMMAND_STARTED:return B=TX(B,F),B.message="Command started",B.command=A4(F.command,A,{relaxed:!0}),B.databaseName=F.databaseName,B;case p1.COMMAND_SUCCEEDED:return B=TX(B,F),B.message="Command succeeded",B.durationMS=F.duration,B.reply=A4(F.reply,A,{relaxed:!0}),B;case p1.COMMAND_FAILED:return B=TX(B,F),B.message="Command failed",B.durationMS=F.duration,B.failure=F.failure?.message??"(redacted)",B;case p1.CONNECTION_POOL_CREATED:if(B=m2(B,F),B.message="Connection pool created",F.options){const{maxIdleTimeMS:D,minPoolSize:J,maxPoolSize:Z,maxConnecting:X,waitQueueTimeoutMS:Y}=F.options;B={...B,maxIdleTimeMS:D,minPoolSize:J,maxPoolSize:Z,maxConnecting:X,waitQueueTimeoutMS:Y}}return B;case p1.CONNECTION_POOL_READY:return B=m2(B,F),B.message="Connection pool ready",B;case p1.CONNECTION_POOL_CLEARED:if(B=m2(B,F),B.message="Connection pool cleared",F.serviceId?._bsontype==="ObjectId")B.serviceId=F.serviceId?.toHexString();return B;case p1.CONNECTION_POOL_CLOSED:return B=m2(B,F),B.message="Connection pool closed",B;case p1.CONNECTION_CREATED:return B=m2(B,F),B.message="Connection created",B.driverConnectionId=F.connectionId,B;case p1.CONNECTION_READY:return B=m2(B,F),B.message="Connection ready",B.driverConnectionId=F.connectionId,B;case p1.CONNECTION_CLOSED:switch(B=m2(B,F),B.message="Connection closed",B.driverConnectionId=F.connectionId,F.reason){case"stale":B.reason="Connection became stale because the pool was cleared";break;case"idle":B.reason="Connection has been available but unused for longer than the configured max idle time";break;case"error":if(B.reason="An error occurred while using the connection",F.error)B.error=F.error;break;case"poolClosed":B.reason="Connection pool was closed";break;default:B.reason=`Unknown close reason: ${F.reason}`}return B;case p1.CONNECTION_CHECK_OUT_STARTED:return B=m2(B,F),B.message="Connection checkout started",B;case p1.CONNECTION_CHECK_OUT_FAILED:switch(B=m2(B,F),B.message="Connection checkout failed",F.reason){case"poolClosed":B.reason="Connection pool was closed";break;case"timeout":B.reason="Wait queue timeout elapsed without a connection becoming available";break;case"connectionError":if(B.reason="An error occurred while trying to establish a new connection",F.error)B.error=F.error;break;default:B.reason=`Unknown close reason: ${F.reason}`}return B;case p1.CONNECTION_CHECKED_OUT:return B=m2(B,F),B.message="Connection checked out",B.driverConnectionId=F.connectionId,B;case p1.CONNECTION_CHECKED_IN:return B=m2(B,F),B.message="Connection checked in",B.driverConnectionId=F.connectionId,B;case p1.SERVER_OPENING:return B=F4(B,F),B=m2(B,F),B.message="Starting server monitoring",B;case p1.SERVER_CLOSED:return B=F4(B,F),B=m2(B,F),B.message="Stopped server monitoring",B;case p1.SERVER_HEARTBEAT_STARTED:return B=F4(B,F),B=jX(B,F),B.message="Server heartbeat started",B;case p1.SERVER_HEARTBEAT_SUCCEEDED:return B=F4(B,F),B=jX(B,F),B.message="Server heartbeat succeeded",B.durationMS=F.duration,B.serverConnectionId=F.serverConnectionId,B.reply=A4(F.reply,A,{relaxed:!0}),B;case p1.SERVER_HEARTBEAT_FAILED:return B=F4(B,F),B=jX(B,F),B.message="Server heartbeat failed",B.durationMS=F.duration,B.failure=F.failure?.message,B;case p1.TOPOLOGY_OPENING:return B=F4(B,F),B.message="Starting topology monitoring",B;case p1.TOPOLOGY_CLOSED:return B=F4(B,F),B.message="Stopped topology monitoring",B;case p1.TOPOLOGY_DESCRIPTION_CHANGED:return B=F4(B,F),B.message="Topology description changed",B.previousDescription=B.reply=A4(F.previousDescription,A),B.newDescription=B.reply=A4(F.newDescription,A),B;default:for(let[D,J]of Object.entries(F))if(J!=null)B[D]=J}return B};Object.defineProperty(IQ,"__esModule",{value:!0});IQ.MongoLogger=IQ.defaultLogTransform=IQ.stringifyWithMaxLen=IQ.createStdioLogger=IQ.parseSeverityFromString=IQ.MongoLoggableComponent=IQ.SEVERITY_LEVEL_MAP=IQ.DEFAULT_MAX_DOCUMENT_LENGTH=IQ.SeverityLevel=void 0;var LQ=import.meta.require("util"),ms=S1(),p1=L0(),s9=r();IQ.SeverityLevel=Object.freeze({EMERGENCY:"emergency",ALERT:"alert",CRITICAL:"critical",ERROR:"error",WARNING:"warn",NOTICE:"notice",INFORMATIONAL:"info",DEBUG:"debug",TRACE:"trace",OFF:"off"});IQ.DEFAULT_MAX_DOCUMENT_LENGTH=1000;class VQ extends Map{constructor(F){const A=[];for(let[B,D]of F)A.push([D,B]);A.push(...F);super(A)}getNumericSeverityLevel(F){return this.get(F)}getSeverityLevelName(F){return this.get(F)}}IQ.SEVERITY_LEVEL_MAP=new VQ([[IQ.SeverityLevel.OFF,-1/0],[IQ.SeverityLevel.EMERGENCY,0],[IQ.SeverityLevel.ALERT,1],[IQ.SeverityLevel.CRITICAL,2],[IQ.SeverityLevel.ERROR,3],[IQ.SeverityLevel.WARNING,4],[IQ.SeverityLevel.NOTICE,5],[IQ.SeverityLevel.INFORMATIONAL,6],[IQ.SeverityLevel.DEBUG,7],[IQ.SeverityLevel.TRACE,8]]);IQ.MongoLoggableComponent=Object.freeze({COMMAND:"command",TOPOLOGY:"topology",SERVER_SELECTION:"serverSelection",CONNECTION:"connection",CLIENT:"client"});IQ.parseSeverityFromString=uX;IQ.createStdioLogger=l4;IQ.stringifyWithMaxLen=A4;IQ.defaultLogTransform=wQ;class RQ{constructor(F){this.pendingLog=null,this.error=this.log.bind(this,"error"),this.warn=this.log.bind(this,"warn"),this.info=this.log.bind(this,"info"),this.debug=this.log.bind(this,"debug"),this.trace=this.log.bind(this,"trace"),this.componentSeverities=F.componentSeverities,this.maxDocumentLength=F.maxDocumentLength,this.logDestination=F.logDestination,this.logDestinationIsStdErr=F.logDestinationIsStdErr,this.severities=this.createLoggingSeverities()}createLoggingSeverities(){const F=Object();for(let A of Object.values(IQ.MongoLoggableComponent)){F[A]={};for(let B of Object.values(IQ.SeverityLevel))F[A][B]=cs(B,this.componentSeverities[A])<=0}return F}turnOffSeverities(){for(let F of Object.values(IQ.MongoLoggableComponent)){this.componentSeverities[F]=IQ.SeverityLevel.OFF;for(let A of Object.values(IQ.SeverityLevel))this.severities[F][A]=!1}}logWriteFailureHandler(F){if(this.logDestinationIsStdErr){this.turnOffSeverities(),this.clearPendingLog();return}this.logDestination=l4(process.stderr),this.logDestinationIsStdErr=!0,this.clearPendingLog(),this.error(IQ.MongoLoggableComponent.CLIENT,{toLog:function(){return{message:"User input for mongodbLogPath is now invalid. Logging is halted.",error:F.message}}}),this.turnOffSeverities(),this.clearPendingLog()}clearPendingLog(){this.pendingLog=null}willLog(F,A){if(A===IQ.SeverityLevel.OFF)return!1;return this.severities[F][A]}log(F,A,B){if(!this.willLog(A,F))return;let D={t:new Date,c:A,s:F};if(typeof B==="string")D.message=B;else if(typeof B==="object")if(ls(B))D={...D,...B.toLog()};else D={...D,...wQ(B,this.maxDocumentLength)};if(s9.isPromiseLike(this.pendingLog)){this.pendingLog=this.pendingLog.then(()=>this.logDestination.write(D)).then(this.clearPendingLog.bind(this),this.logWriteFailureHandler.bind(this));return}try{const J=this.logDestination.write(D);if(s9.isPromiseLike(J))this.pendingLog=J.then(this.clearPendingLog.bind(this),this.logWriteFailureHandler.bind(this))}catch(J){this.logWriteFailureHandler(J)}}static resolveOptions(F,A){const B=ds(F,A),D={...F,...A,mongodbLogPath:B.mongodbLogPath,mongodbLogPathIsStdErr:B.mongodbLogPathIsStdErr},J=n9(D.mongodbLogComponentSeverities?.default,D.MONGODB_LOG_ALL,IQ.SeverityLevel.OFF);return{componentSeverities:{command:n9(D.mongodbLogComponentSeverities?.command,D.MONGODB_LOG_COMMAND,J),topology:n9(D.mongodbLogComponentSeverities?.topology,D.MONGODB_LOG_TOPOLOGY,J),serverSelection:n9(D.mongodbLogComponentSeverities?.serverSelection,D.MONGODB_LOG_SERVER_SELECTION,J),connection:n9(D.mongodbLogComponentSeverities?.connection,D.MONGODB_LOG_CONNECTION,J),client:n9(D.mongodbLogComponentSeverities?.client,D.MONGODB_LOG_CLIENT,J),default:J},maxDocumentLength:D.mongodbLogMaxDocumentLength??s9.parseUnsignedInteger(D.MONGODB_LOG_MAX_DOCUMENT_LENGTH)??1000,logDestination:D.mongodbLogPath,logDestinationIsStdErr:D.mongodbLogPathIsStdErr}}}IQ.MongoLogger=RQ});var d2=z((MQ)=>{Object.defineProperty(MQ,"__esModule",{value:!0});MQ.CancellationToken=MQ.TypedEventEmitter=void 0;var as=import.meta.require("events"),ts=p4();class kX extends as.EventEmitter{emitAndLog(F,...A){if(this.emit(F,...A),this.component)this.mongoLogger?.debug(this.component,A[0])}emitAndLogHeartbeat(F,A,B,...D){if(this.emit(F,...D),this.component){const J={topologyId:A,serverConnectionId:B??null,...D[0]};this.mongoLogger?.debug(this.component,J)}}emitAndLogCommand(F,A,B,D,...J){if(F)this.emit(A,...J);if(D){const Z={databaseName:B,...J[0]};this.mongoLogger?.debug(ts.MongoLoggableComponent.COMMAND,Z)}}}MQ.TypedEventEmitter=kX;class PQ extends kX{}MQ.CancellationToken=PQ});var _X=z((jQ)=>{Object.defineProperty(jQ,"__esModule",{value:!0});jQ.GetMoreOperation=void 0;var es=o8(),xX=p(),Fa=r(),qA=u1();class fX extends qA.AbstractOperation{constructor(F,A,B,D){super(D);this.options=D,this.ns=F,this.cursorId=A,this.server=B}get commandName(){return"getMore"}async execute(F,A){if(F!==this.server)throw new xX.MongoRuntimeError("Getmore must run on the same server operation began on");if(this.cursorId==null||this.cursorId.isZero())throw new xX.MongoRuntimeError("Unable to iterate cursor with no id");const B=this.ns.collection;if(B==null)throw new xX.MongoRuntimeError("A collection name must be determined before getMore");const D={getMore:this.cursorId,collection:B};if(typeof this.options.batchSize==="number")D.batchSize=Math.abs(this.options.batchSize);if(typeof this.options.maxAwaitTimeMS==="number")D.maxTimeMS=this.options.maxAwaitTimeMS;if(this.options.comment!==void 0&&Fa.maxWireVersion(F)>=9)D.comment=this.options.comment;const J={returnFieldSelector:null,documentsReturnedIn:"nextBatch",...this.options};return await F.command(this.ns,D,J,this.options.useCursorResponse?es.CursorResponse:void 0)}}jQ.GetMoreOperation=fX;qA.defineAspects(fX,[qA.Aspect.READ_OPERATION,qA.Aspect.MUST_SELECT_SAME_SERVER])});var xQ=z((SQ)=>{Object.defineProperty(SQ,"__esModule",{value:!0});SQ.KillCursorsOperation=void 0;var OQ=p(),Aa=r(),gX=u1();class bX extends gX.AbstractOperation{constructor(F,A,B,D){super(D);this.ns=A,this.cursorId=F,this.server=B}get commandName(){return"killCursors"}async execute(F,A){if(F!==this.server)throw new OQ.MongoRuntimeError("Killcursor must run on the same server operation began on");const B=this.ns.collection;if(B==null)throw new OQ.MongoRuntimeError("A collection name must be determined before killCursors");const D={killCursors:B,cursors:[this.cursorId]};try{await F.command(this.ns,D,{session:A})}catch(J){Aa.squashError(J)}}}SQ.KillCursorsOperation=bX;gX.defineAspects(bX,[gX.Aspect.MUST_SELECT_SAME_SERVER])});var yX=z((fQ)=>{Object.defineProperty(fQ,"__esModule",{value:!0});fQ.ConnectionPoolMetrics=void 0;class z3{constructor(){this.txnConnections=0,this.cursorConnections=0,this.otherConnections=0}markPinned(F){if(F===z3.TXN)this.txnConnections+=1;else if(F===z3.CURSOR)this.cursorConnections+=1;else this.otherConnections+=1}markUnpinned(F){if(F===z3.TXN)this.txnConnections-=1;else if(F===z3.CURSOR)this.cursorConnections-=1;else this.otherConnections-=1}info(F){return`Timed out while checking out a connection from connection pool: maxPoolSize: ${F}, connections in use by cursors: ${this.cursorConnections}, connections in use by transactions: ${this.txnConnections}, connections in use by other operations: ${this.otherConnections}`}reset(){this.txnConnections=0,this.cursorConnections=0,this.otherConnections=0}}z3.TXN="txn";z3.CURSOR="cursor";z3.OTHER="other";fQ.ConnectionPoolMetrics=z3});var e8=z((vQ)=>{var bQ=function(F,A){if(A?.loadBalanced)return V0.ServerType.LoadBalancer;if(!F||!F.ok)return V0.ServerType.Unknown;if(F.isreplicaset)return V0.ServerType.RSGhost;if(F.msg&&F.msg==="isdbgrid")return V0.ServerType.Mongos;if(F.setName)if(F.hidden)return V0.ServerType.RSOther;else if(F.isWritablePrimary)return V0.ServerType.RSPrimary;else if(F.secondary)return V0.ServerType.RSSecondary;else if(F.arbiterOnly)return V0.ServerType.RSArbiter;else return V0.ServerType.RSOther;return V0.ServerType.Standalone},Za=function(F,A){const B=Object.keys(F),D=Object.keys(A);return B.length===D.length&&B.every((J)=>A[J]===F[J])},yQ=function(F,A){if(F==null||A==null)return-1;if(!F.processId.equals(A.processId))return-1;const B=KA.Long.isLong(F.counter)?F.counter:KA.Long.fromNumber(F.counter),D=KA.Long.isLong(A.counter)?A.counter:KA.Long.fromNumber(A.counter);return B.compare(D)};Object.defineProperty(vQ,"__esModule",{value:!0});vQ.compareTopologyVersion=vQ.parseServerType=vQ.ServerDescription=void 0;var KA=S1(),Ba=p(),a9=r(),V0=v2(),Da=new Set([V0.ServerType.RSPrimary,V0.ServerType.Standalone,V0.ServerType.Mongos,V0.ServerType.LoadBalancer]),Ja=new Set([V0.ServerType.RSPrimary,V0.ServerType.RSSecondary,V0.ServerType.Mongos,V0.ServerType.Standalone,V0.ServerType.LoadBalancer]);class gQ{constructor(F,A,B={}){if(F==null||F==="")throw new Ba.MongoRuntimeError("ServerDescription must be provided with a non-empty address");this.address=typeof F==="string"?a9.HostAddress.fromString(F).toString():F.toString(),this.type=bQ(A,B),this.hosts=A?.hosts?.map((D)=>D.toLowerCase())??[],this.passives=A?.passives?.map((D)=>D.toLowerCase())??[],this.arbiters=A?.arbiters?.map((D)=>D.toLowerCase())??[],this.tags=A?.tags??{},this.minWireVersion=A?.minWireVersion??0,this.maxWireVersion=A?.maxWireVersion??0,this.roundTripTime=B?.roundTripTime??-1,this.minRoundTripTime=B?.minRoundTripTime??0,this.lastUpdateTime=a9.now(),this.lastWriteDate=A?.lastWrite?.lastWriteDate??0,this.error=B.error??null,this.topologyVersion=this.error?.topologyVersion??A?.topologyVersion??null,this.setName=A?.setName??null,this.setVersion=A?.setVersion??null,this.electionId=A?.electionId??null,this.logicalSessionTimeoutMinutes=A?.logicalSessionTimeoutMinutes??null,this.primary=A?.primary??null,this.me=A?.me?.toLowerCase()??null,this.$clusterTime=A?.$clusterTime??null}get hostAddress(){return a9.HostAddress.fromString(this.address)}get allHosts(){return this.hosts.concat(this.arbiters).concat(this.passives)}get isReadable(){return this.type===V0.ServerType.RSSecondary||this.isWritable}get isDataBearing(){return Ja.has(this.type)}get isWritable(){return Da.has(this.type)}get host(){const F=`:${this.port}`.length;return this.address.slice(0,-F)}get port(){const F=this.address.split(":").pop();return F?Number.parseInt(F,10):27017}equals(F){const A=this.topologyVersion===F?.topologyVersion||yQ(this.topologyVersion,F?.topologyVersion)===0,B=this.electionId!=null&&F?.electionId!=null?a9.compareObjectId(this.electionId,F.electionId)===0:this.electionId===F?.electionId;return F!=null&&a9.errorStrictEqual(this.error,F.error)&&this.type===F.type&&this.minWireVersion===F.minWireVersion&&a9.arrayStrictEqual(this.hosts,F.hosts)&&Za(this.tags,F.tags)&&this.setName===F.setName&&this.setVersion===F.setVersion&&B&&this.primary===F.primary&&this.logicalSessionTimeoutMinutes===F.logicalSessionTimeoutMinutes&&A}}vQ.ServerDescription=gQ;vQ.parseServerType=bQ;vQ.compareTopologyVersion=yQ});var hX=z((iQ)=>{var Ha=function(F){switch(F){case U1.ServerType.Standalone:return U1.TopologyType.Single;case U1.ServerType.Mongos:return U1.TopologyType.Sharded;case U1.ServerType.RSPrimary:return U1.TopologyType.ReplicaSetWithPrimary;case U1.ServerType.RSOther:case U1.ServerType.RSSecondary:return U1.TopologyType.ReplicaSetNoPrimary;default:return U1.TopologyType.Unknown}},pQ=function(F,A,B=null,D=null,J=null){if(B=B||A.setName,B!==A.setName)return F.delete(A.address),[i4(F),B,D,J];if(A.maxWireVersion>=17){const Y=vX.compareObjectId(J,A.electionId),$=Y===0,G=Y===-1,E=(D??-1)<=(A.setVersion??-1);if(G||$&&E)J=A.electionId,D=A.setVersion;else return F.set(A.address,new B4.ServerDescription(A.address)),[i4(F),B,D,J]}else{const Y=A.electionId?A.electionId:null;if(A.setVersion&&Y){if(D&&J){if(D>A.setVersion||vX.compareObjectId(J,Y)>0)return F.set(A.address,new B4.ServerDescription(A.address)),[i4(F),B,D,J]}J=A.electionId}if(A.setVersion!=null&&(D==null||A.setVersion>D))D=A.setVersion}for(let[Y,$]of F)if($.type===U1.ServerType.RSPrimary&&$.address!==A.address){F.set(Y,new B4.ServerDescription($.address));break}A.allHosts.forEach((Y)=>{if(!F.has(Y))F.set(Y,new B4.ServerDescription(Y))});const Z=Array.from(F.keys()),X=A.allHosts;return Z.filter((Y)=>X.indexOf(Y)===-1).forEach((Y)=>{F.delete(Y)}),[i4(F),B,D,J]},qa=function(F,A,B=null){if(B==null)throw new Ga.MongoRuntimeError('Argument "setName" is required if connected to a replica set');if(B!==A.setName||A.me&&A.address!==A.me)F.delete(A.address);return i4(F)},Ka=function(F,A,B=null){const D=U1.TopologyType.ReplicaSetNoPrimary;if(B=B??A.setName,B!==A.setName)return F.delete(A.address),[D,B];if(A.allHosts.forEach((J)=>{if(!F.has(J))F.set(J,new B4.ServerDescription(J))}),A.me&&A.address!==A.me)F.delete(A.address);return[D,B]},i4=function(F){for(let A of F.values())if(A.type===U1.ServerType.RSPrimary)return U1.TopologyType.ReplicaSetWithPrimary;return U1.TopologyType.ReplicaSetNoPrimary};Object.defineProperty(iQ,"__esModule",{value:!0});iQ.TopologyDescription=void 0;var $a=S1(),zA=d4(),Ga=p(),vX=r(),U1=v2(),B4=e8(),Ea=zA.MIN_SUPPORTED_SERVER_VERSION,Wa=zA.MAX_SUPPORTED_SERVER_VERSION,mQ=zA.MIN_SUPPORTED_WIRE_VERSION,dQ=zA.MAX_SUPPORTED_WIRE_VERSION,Ca=new Set([U1.ServerType.Mongos,U1.ServerType.Unknown]),cQ=new Set([U1.ServerType.Mongos,U1.ServerType.Standalone]),lQ=new Set([U1.ServerType.RSSecondary,U1.ServerType.RSArbiter,U1.ServerType.RSOther]);class F5{constructor(F,A=null,B=null,D=null,J=null,Z=null,X=null){X=X??{},this.type=F??U1.TopologyType.Unknown,this.servers=A??new Map,this.stale=!1,this.compatible=!0,this.heartbeatFrequencyMS=X.heartbeatFrequencyMS??0,this.localThresholdMS=X.localThresholdMS??15,this.setName=B??null,this.maxElectionId=J??null,this.maxSetVersion=D??null,this.commonWireVersion=Z??0;for(let Y of this.servers.values()){if(Y.type===U1.ServerType.Unknown||Y.type===U1.ServerType.LoadBalancer)continue;if(Y.minWireVersion>dQ)this.compatible=!1,this.compatibilityError=`Server at ${Y.address} requires wire version ${Y.minWireVersion}, but this version of the driver only supports up to ${dQ} (MongoDB ${Wa})`;if(Y.maxWireVersion<mQ){this.compatible=!1,this.compatibilityError=`Server at ${Y.address} reports wire version ${Y.maxWireVersion}, but this version of the driver requires at least ${mQ} (MongoDB ${Ea}).`;break}}this.logicalSessionTimeoutMinutes=null;for(let[,Y]of this.servers)if(Y.isReadable){if(Y.logicalSessionTimeoutMinutes==null){this.logicalSessionTimeoutMinutes=null;break}if(this.logicalSessionTimeoutMinutes==null){this.logicalSessionTimeoutMinutes=Y.logicalSessionTimeoutMinutes;continue}this.logicalSessionTimeoutMinutes=Math.min(this.logicalSessionTimeoutMinutes,Y.logicalSessionTimeoutMinutes)}}updateFromSrvPollingEvent(F,A=0){const B=F.hostnames(),D=new Set(this.servers.keys()),J=new Set(B),Z=new Set;for(let Y of D)if(J.delete(Y),!B.has(Y))Z.add(Y);if(J.size===0&&Z.size===0)return this;const X=new Map(this.servers);for(let Y of Z)X.delete(Y);if(J.size>0){if(A===0)for(let Y of J)X.set(Y,new B4.ServerDescription(Y));else if(X.size<A){const Y=vX.shuffle(J,A-X.size);for(let $ of Y)X.set($,new B4.ServerDescription($))}}return new F5(this.type,X,this.setName,this.maxSetVersion,this.maxElectionId,this.commonWireVersion,{heartbeatFrequencyMS:this.heartbeatFrequencyMS,localThresholdMS:this.localThresholdMS})}update(F){const A=F.address;let{type:B,setName:D,maxSetVersion:J,maxElectionId:Z,commonWireVersion:X}=this;const Y=F.type,$=new Map(this.servers);if(F.maxWireVersion!==0)if(X==null)X=F.maxWireVersion;else X=Math.min(X,F.maxWireVersion);if(typeof F.setName==="string"&&typeof D==="string"&&F.setName!==D)if(B===U1.TopologyType.Single)F=new B4.ServerDescription(A);else $.delete(A);if($.set(A,F),B===U1.TopologyType.Single)return new F5(U1.TopologyType.Single,$,D,J,Z,X,{heartbeatFrequencyMS:this.heartbeatFrequencyMS,localThresholdMS:this.localThresholdMS});if(B===U1.TopologyType.Unknown)if(Y===U1.ServerType.Standalone&&this.servers.size!==1)$.delete(A);else B=Ha(Y);if(B===U1.TopologyType.Sharded){if(!Ca.has(Y))$.delete(A)}if(B===U1.TopologyType.ReplicaSetNoPrimary){if(cQ.has(Y))$.delete(A);if(Y===U1.ServerType.RSPrimary){const G=pQ($,F,D,J,Z);B=G[0],D=G[1],J=G[2],Z=G[3]}else if(lQ.has(Y)){const G=Ka($,F,D);B=G[0],D=G[1]}}if(B===U1.TopologyType.ReplicaSetWithPrimary)if(cQ.has(Y))$.delete(A),B=i4($);else if(Y===U1.ServerType.RSPrimary){const G=pQ($,F,D,J,Z);B=G[0],D=G[1],J=G[2],Z=G[3]}else if(lQ.has(Y))B=qa($,F,D);else B=i4($);return new F5(B,$,D,J,Z,X,{heartbeatFrequencyMS:this.heartbeatFrequencyMS,localThresholdMS:this.localThresholdMS})}get error(){const F=Array.from(this.servers.values()).filter((A)=>A.error);if(F.length>0)return F[0].error;return null}get hasKnownServers(){return Array.from(this.servers.values()).some((F)=>F.type!==U1.ServerType.Unknown)}get hasDataBearingServers(){return Array.from(this.servers.values()).some((F)=>F.isDataBearing)}hasServer(F){return this.servers.has(F)}toJSON(){return $a.EJSON.serialize(this)}}iQ.TopologyDescription=F5});var dX=z((aQ)=>{var Qa=function(F){let A=F?.readPreference??mX.ReadPreference.primary;if(typeof A==="string")A=mX.ReadPreference.fromString(A);if(!(A instanceof mX.ReadPreference))throw new za.MongoInvalidArgumentError('Option "readPreference" must be a ReadPreference instance');return A},La=function(F){if(F==null)return!1;if(F.description&&F.description.type===sQ.ServerType.Mongos)return!0;if(F.description&&F.description instanceof Ua.TopologyDescription)return Array.from(F.description.servers.values()).some((B)=>B.type===sQ.ServerType.Mongos);return!1};Object.defineProperty(aQ,"__esModule",{value:!0});aQ.isSharded=aQ.getReadPreference=void 0;var za=p(),mX=T0(),sQ=v2(),Ua=hX();aQ.getReadPreference=Qa;aQ.isSharded=La});var cX=z((eQ)=>{var Ta=function(F){return!!(F.commitTransaction||F.abortTransaction)};Object.defineProperty(eQ,"__esModule",{value:!0});eQ.isTransactionCommand=eQ.Transaction=eQ.TxnState=void 0;var tQ=p(),wa=D6(),Ra=T0(),Ia=V2();eQ.TxnState=Object.freeze({NO_TRANSACTION:"NO_TRANSACTION",STARTING_TRANSACTION:"STARTING_TRANSACTION",TRANSACTION_IN_PROGRESS:"TRANSACTION_IN_PROGRESS",TRANSACTION_COMMITTED:"TRANSACTION_COMMITTED",TRANSACTION_COMMITTED_EMPTY:"TRANSACTION_COMMITTED_EMPTY",TRANSACTION_ABORTED:"TRANSACTION_ABORTED"});var Na={[eQ.TxnState.NO_TRANSACTION]:[eQ.TxnState.NO_TRANSACTION,eQ.TxnState.STARTING_TRANSACTION],[eQ.TxnState.STARTING_TRANSACTION]:[eQ.TxnState.TRANSACTION_IN_PROGRESS,eQ.TxnState.TRANSACTION_COMMITTED,eQ.TxnState.TRANSACTION_COMMITTED_EMPTY,eQ.TxnState.TRANSACTION_ABORTED],[eQ.TxnState.TRANSACTION_IN_PROGRESS]:[eQ.TxnState.TRANSACTION_IN_PROGRESS,eQ.TxnState.TRANSACTION_COMMITTED,eQ.TxnState.TRANSACTION_ABORTED],[eQ.TxnState.TRANSACTION_COMMITTED]:[eQ.TxnState.TRANSACTION_COMMITTED,eQ.TxnState.TRANSACTION_COMMITTED_EMPTY,eQ.TxnState.STARTING_TRANSACTION,eQ.TxnState.NO_TRANSACTION],[eQ.TxnState.TRANSACTION_ABORTED]:[eQ.TxnState.STARTING_TRANSACTION,eQ.TxnState.NO_TRANSACTION],[eQ.TxnState.TRANSACTION_COMMITTED_EMPTY]:[eQ.TxnState.TRANSACTION_COMMITTED_EMPTY,eQ.TxnState.NO_TRANSACTION]},Pa=new Set([eQ.TxnState.STARTING_TRANSACTION,eQ.TxnState.TRANSACTION_IN_PROGRESS]),Ma=new Set([eQ.TxnState.TRANSACTION_COMMITTED,eQ.TxnState.TRANSACTION_COMMITTED_EMPTY,eQ.TxnState.TRANSACTION_ABORTED]);class oQ{constructor(F){F=F??{},this.state=eQ.TxnState.NO_TRANSACTION,this.options={};const A=Ia.WriteConcern.fromOptions(F);if(A){if(A.w===0)throw new tQ.MongoTransactionError("Transactions do not support unacknowledged write concern");this.options.writeConcern=A}if(F.readConcern)this.options.readConcern=wa.ReadConcern.fromOptions(F);if(F.readPreference)this.options.readPreference=Ra.ReadPreference.fromOptions(F);if(F.maxCommitTimeMS)this.options.maxTimeMS=F.maxCommitTimeMS;this._pinnedServer=void 0,this._recoveryToken=void 0}get server(){return this._pinnedServer}get recoveryToken(){return this._recoveryToken}get isPinned(){return!!this.server}get isStarting(){return this.state===eQ.TxnState.STARTING_TRANSACTION}get isActive(){return Pa.has(this.state)}get isCommitted(){return Ma.has(this.state)}transition(F){const A=Na[this.state];if(A&&A.includes(F)){if(this.state=F,this.state===eQ.TxnState.NO_TRANSACTION||this.state===eQ.TxnState.STARTING_TRANSACTION||this.state===eQ.TxnState.TRANSACTION_ABORTED)this.unpinServer();return}throw new tQ.MongoRuntimeError(`Attempted illegal state transition from [${this.state}] to [${F}]`)}pinServer(F){if(this.isActive)this._pinnedServer=F}unpinServer(){this._pinnedServer=void 0}}eQ.Transaction=oQ;eQ.isTransactionCommand=Ta});var B5=z((WL)=>{var GL=function(F,A){return c2.calculateDurationInMs(F)<A},_a=function(F){const A=F instanceof X1.MongoServerError&&F.codeName&&fa.has(F.codeName);return wA(F)||!A&&F.code!==X1.MONGODB_ERROR_CODES.UnsatisfiableWriteConcern&&F.code!==X1.MONGODB_ERROR_CODES.UnknownReplWriteConcern},e9=function(F,A){const B=F[t9],D=A?.error;if(F.inTransaction()&&D&&D instanceof X1.MongoError&&D.hasErrorLabel(X1.MongoErrorLabel.TransientTransactionError))return;const J=F.client.topology;if(B&&J!=null){const X=Array.from(J.s.servers.values())[0];if(A?.error==null||A?.force){if(X.pool.checkIn(B),F[t9]=void 0,B.emit(YL.UNPINNED,F.transaction.state!==b1.TxnState.NO_TRANSACTION?QA.ConnectionPoolMetrics.TXN:QA.ConnectionPoolMetrics.CURSOR),A?.forceClear)X.pool.clear({serviceId:B.serviceId})}}},wA=function(F){if(F==null||!(F instanceof X1.MongoServerError))return!1;return F.code===X1.MONGODB_ERROR_CODES.MaxTimeMSExpired||F.writeConcernError&&F.writeConcernError.code===X1.MONGODB_ERROR_CODES.MaxTimeMSExpired};async function EL(F,A,B,D,J){try{return await F.commitTransaction(),D}catch(Z){if(Z instanceof X1.MongoError&&GL(A,$L)&&!wA(Z)){if(Z.hasErrorLabel(X1.MongoErrorLabel.UnknownTransactionCommitResult))return await EL(F,A,B,D,J);if(Z.hasErrorLabel(X1.MongoErrorLabel.TransientTransactionError))return await iX(F,A,B,J)}throw Z}}var ba=function(F){return ga.has(F.transaction.state)};async function iX(F,A,B,D={}){F.startTransaction(D);let J;try{J=B(F)}catch(Z){J=Promise.reject(Z)}if(!c2.isPromiseLike(J)){try{await F.abortTransaction()}catch(Z){c2.squashError(Z)}throw new X1.MongoInvalidArgumentError("Function provided to `withTransaction` must return a Promise")}try{const Z=await J;if(ba(F))return Z;return await EL(F,A,B,Z,D)}catch(Z){if(F.inTransaction())await F.abortTransaction();if(Z instanceof X1.MongoError&&Z.hasErrorLabel(X1.MongoErrorLabel.TransientTransactionError)&&GL(A,$L))return await iX(F,A,B,D);if(wA(Z))Z.addErrorLabel(X1.MongoErrorLabel.UnknownTransactionCommitResult);throw Z}}async function JL(F,A){const B=F.transaction.state;if(B===b1.TxnState.NO_TRANSACTION)throw new X1.MongoTransactionError("No transaction started");if(A==="commitTransaction"){if(B===b1.TxnState.STARTING_TRANSACTION||B===b1.TxnState.TRANSACTION_COMMITTED_EMPTY){F.transaction.transition(b1.TxnState.TRANSACTION_COMMITTED_EMPTY);return}if(B===b1.TxnState.TRANSACTION_ABORTED)throw new X1.MongoTransactionError("Cannot call commitTransaction after calling abortTransaction")}else{if(B===b1.TxnState.STARTING_TRANSACTION){F.transaction.transition(b1.TxnState.TRANSACTION_ABORTED);return}if(B===b1.TxnState.TRANSACTION_ABORTED)throw new X1.MongoTransactionError("Cannot call abortTransaction twice");if(B===b1.TxnState.TRANSACTION_COMMITTED||B===b1.TxnState.TRANSACTION_COMMITTED_EMPTY)throw new X1.MongoTransactionError("Cannot call abortTransaction after calling commitTransaction")}const D={[A]:1};let J;if(F.transaction.options.writeConcern)J=Object.assign({},F.transaction.options.writeConcern);else if(F.clientOptions&&F.clientOptions.writeConcern)J={w:F.clientOptions.writeConcern.w};if(B===b1.TxnState.TRANSACTION_COMMITTED)J=Object.assign({wtimeoutMS:1e4},J,{w:"majority"});if(J)ka.WriteConcern.apply(D,J);if(A==="commitTransaction"&&F.transaction.options.maxTimeMS)Object.assign(D,{maxTimeMS:F.transaction.options.maxTimeMS});if(F.transaction.recoveryToken)D.recoveryToken=F.transaction.recoveryToken;try{if(await AL.executeOperation(F.client,new BL.RunAdminCommandOperation(D,{session:F,readPreference:DL.ReadPreference.primary,bypassPinningCheck:!0})),D.abortTransaction)F.unpin();if(A!=="commitTransaction"){if(F.transaction.transition(b1.TxnState.TRANSACTION_ABORTED),F.loadBalanced)e9(F,{force:!1})}else F.transaction.transition(b1.TxnState.TRANSACTION_COMMITTED)}catch(Z){if(D.abortTransaction)F.unpin();if(Z instanceof X1.MongoError&&X1.isRetryableWriteError(Z)){if(D.commitTransaction)F.unpin({force:!0}),D.writeConcern=Object.assign({wtimeout:1e4},D.writeConcern,{w:"majority"});try{if(await AL.executeOperation(F.client,new BL.RunAdminCommandOperation(D,{session:F,readPreference:DL.ReadPreference.primary,bypassPinningCheck:!0})),A!=="commitTransaction"){if(F.transaction.transition(b1.TxnState.TRANSACTION_ABORTED),F.loadBalanced)e9(F,{force:!1})}else F.transaction.transition(b1.TxnState.TRANSACTION_COMMITTED)}catch(X){ZL(F,A,X)}}else ZL(F,A,Z)}}var ZL=function(F,A,B){if(A!=="commitTransaction"){if(F.transaction.transition(b1.TxnState.TRANSACTION_ABORTED),F.loadBalanced)e9(F,{force:!1});return}if(F.transaction.transition(b1.TxnState.TRANSACTION_COMMITTED),B instanceof X1.MongoError){if(X1.isRetryableWriteError(B)||B instanceof X1.MongoWriteConcernError||wA(B)){if(_a(B))B.addErrorLabel(X1.MongoErrorLabel.UnknownTransactionCommitResult),F.unpin({error:B})}else if(B.hasErrorLabel(X1.MongoErrorLabel.TransientTransactionError))F.unpin({error:B})}throw B},ya=function(F,A,B){if(F.hasEnded)return new X1.MongoExpiredSessionError;const D=F.serverSession;if(D==null)return new X1.MongoRuntimeError("Unable to acquire server session");if(B.writeConcern?.w===0){if(F&&F.explicit)return new X1.MongoAPIError("Cannot have explicit session with unacknowledged writes");return}D.lastUse=c2.now(),A.lsid=D.id;const J=F.inTransaction()||b1.isTransactionCommand(A);if(!!B.willRetryWrite||J)D.txnNumber+=F[VA],F[VA]=0,A.txnNumber=UA.Long.fromNumber(D.txnNumber);if(!J){if(F.transaction.state!==b1.TxnState.NO_TRANSACTION)F.transaction.transition(b1.TxnState.NO_TRANSACTION);if(F.supports.causalConsistency&&F.operationTime&&c2.commandSupportsReadConcern(A))A.readConcern=A.readConcern||{},Object.assign(A.readConcern,{afterClusterTime:F.operationTime});else if(F[o9]){if(A.readConcern=A.readConcern||{level:Sa.ReadConcernLevel.snapshot},F[LA]!=null)Object.assign(A.readConcern,{atClusterTime:F[LA]})}return}if(A.autocommit=!1,F.transaction.state===b1.TxnState.STARTING_TRANSACTION){F.transaction.transition(b1.TxnState.TRANSACTION_IN_PROGRESS),A.startTransaction=!0;const X=F.transaction.options.readConcern||F?.clientOptions?.readConcern;if(X)A.readConcern=X;if(F.supports.causalConsistency&&F.operationTime)A.readConcern=A.readConcern||{},Object.assign(A.readConcern,{afterClusterTime:F.operationTime})}return},va=function(F,A){if(A.$clusterTime)lX._advanceClusterTime(F,A.$clusterTime);if(A.operationTime&&F&&F.supports.causalConsistency)F.advanceOperationTime(A.operationTime);if(A.recoveryToken&&F&&F.inTransaction())F.transaction._recoveryToken=A.recoveryToken;if(F?.[o9]&&F[LA]==null){const B=A.atClusterTime;if(B)F[LA]=B}},XL;Object.defineProperty(WL,"__esModule",{value:!0});WL.updateSessionFromResponse=WL.applySession=WL.ServerSessionPool=WL.ServerSession=WL.maybeClearPinnedConnection=WL.ClientSession=void 0;var UA=S1(),QA=yX(),ua=dX(),YL=L0(),X1=p(),Oa=d2(),AL=w2(),BL=c9(),Sa=D6(),DL=T0(),lX=v2(),b1=cX(),c2=r(),ka=V2(),xa=8,r9=Symbol("serverSession"),LA=Symbol("snapshotTime"),o9=Symbol("snapshotEnabled"),t9=Symbol("pinnedConnection"),VA=Symbol("txnNumberIncrement");class pX extends Oa.TypedEventEmitter{constructor(F,A,B,D){super();if(this[XL]=!1,F==null)throw new X1.MongoRuntimeError("ClientSession requires a MongoClient");if(A==null||!(A instanceof nX))throw new X1.MongoRuntimeError("ClientSession requires a ServerSessionPool");if(B=B??{},B.snapshot===!0){if(this[o9]=!0,B.causalConsistency===!0)throw new X1.MongoInvalidArgumentError('Properties "causalConsistency" and "snapshot" are mutually exclusive')}this.client=F,this.sessionPool=A,this.hasEnded=!1,this.clientOptions=D,this.timeoutMS=B.defaultTimeoutMS??F.options?.timeoutMS,this.explicit=!!B.explicit,this[r9]=this.explicit?this.sessionPool.acquire():null,this[VA]=0;const J=this.explicit&&B.snapshot!==!0;this.supports={causalConsistency:B.causalConsistency??J},this.clusterTime=B.initialClusterTime,this.operationTime=void 0,this.owner=B.owner,this.defaultTransactionOptions={...B.defaultTransactionOptions},this.transaction=new b1.Transaction}get id(){return this[r9]?.id}get serverSession(){let F=this[r9];if(F==null){if(this.explicit)throw new X1.MongoRuntimeError("Unexpected null serverSession for an explicit session");if(this.hasEnded)throw new X1.MongoRuntimeError("Unexpected null serverSession for an ended implicit session");F=this.sessionPool.acquire(),this[r9]=F}return F}get snapshotEnabled(){return this[o9]}get loadBalanced(){return this.client.topology?.description.type===lX.TopologyType.LoadBalanced}get pinnedConnection(){return this[t9]}pin(F){if(this[t9])throw TypeError("Cannot pin multiple connections to the same session");this[t9]=F,F.emit(YL.PINNED,this.inTransaction()?QA.ConnectionPoolMetrics.TXN:QA.ConnectionPoolMetrics.CURSOR)}unpin(F){if(this.loadBalanced)return e9(this,F);this.transaction.unpinServer()}get isPinned(){return this.loadBalanced?!!this[t9]:this.transaction.isPinned}async endSession(F){try{if(this.inTransaction())await this.abortTransaction();if(!this.hasEnded){const A=this[r9];if(A!=null)this.sessionPool.release(A),Object.defineProperty(this,r9,{value:A5.clone(A),writable:!1});this.hasEnded=!0,this.emit("ended",this)}}catch(A){c2.squashError(A)}finally{e9(this,{force:!0,...F})}}advanceOperationTime(F){if(this.operationTime==null){this.operationTime=F;return}if(F.greaterThan(this.operationTime))this.operationTime=F}advanceClusterTime(F){if(!F||typeof F!=="object")throw new X1.MongoInvalidArgumentError("input cluster time must be an object");if(!F.clusterTime||F.clusterTime._bsontype!=="Timestamp")throw new X1.MongoInvalidArgumentError('input cluster time "clusterTime" property must be a valid BSON Timestamp');if(!F.signature||F.signature.hash?._bsontype!=="Binary"||typeof F.signature.keyId!=="bigint"&&typeof F.signature.keyId!=="number"&&F.signature.keyId?._bsontype!=="Long")throw new X1.MongoInvalidArgumentError('input cluster time must have a valid "signature" property with BSON Binary hash and BSON Long keyId');lX._advanceClusterTime(this,F)}equals(F){if(!(F instanceof pX))return!1;if(this.id==null||F.id==null)return!1;return c2.ByteUtils.equals(this.id.id.buffer,F.id.id.buffer)}incrementTransactionNumber(){this[VA]+=1}inTransaction(){return this.transaction.isActive}startTransaction(F){if(this[o9])throw new X1.MongoCompatibilityError("Transactions are not supported in snapshot sessions");if(this.inTransaction())throw new X1.MongoTransactionError("Transaction already in progress");if(this.isPinned&&this.transaction.isCommitted)this.unpin();const A=c2.maxWireVersion(this.client.topology);if(ua.isSharded(this.client.topology)&&A!=null&&A<xa)throw new X1.MongoCompatibilityError("Transactions are not supported on sharded clusters in MongoDB < 4.2.");this.incrementTransactionNumber(),this.transaction=new b1.Transaction({readConcern:F?.readConcern??this.defaultTransactionOptions.readConcern??this.clientOptions?.readConcern,writeConcern:F?.writeConcern??this.defaultTransactionOptions.writeConcern??this.clientOptions?.writeConcern,readPreference:F?.readPreference??this.defaultTransactionOptions.readPreference??this.clientOptions?.readPreference,maxCommitTimeMS:F?.maxCommitTimeMS??this.defaultTransactionOptions.maxCommitTimeMS}),this.transaction.transition(b1.TxnState.STARTING_TRANSACTION)}async commitTransaction(){return await JL(this,"commitTransaction")}async abortTransaction(){return await JL(this,"abortTransaction")}toBSON(){throw new X1.MongoRuntimeError("ClientSession cannot be serialized to BSON.")}async withTransaction(F,A){const B=c2.now();return await iX(this,B,F,A)}}WL.ClientSession=pX;XL=o9;var $L=120000,fa=new Set(["CannotSatisfyWriteConcern","UnknownReplWriteConcern","UnsatisfiableWriteConcern"]);WL.maybeClearPinnedConnection=e9;var ga=new Set([b1.TxnState.NO_TRANSACTION,b1.TxnState.TRANSACTION_COMMITTED,b1.TxnState.TRANSACTION_ABORTED]);class A5{constructor(){this.id={id:new UA.Binary(c2.uuidV4(),UA.Binary.SUBTYPE_UUID)},this.lastUse=c2.now(),this.txnNumber=0,this.isDirty=!1}hasTimedOut(F){return Math.round(c2.calculateDurationInMs(this.lastUse)%86400000%3600000/60000)>F-1}static clone(F){const A=new ArrayBuffer(16),B=Buffer.from(A);B.set(F.id.id.buffer);const D=new UA.Binary(B,F.id.id.sub_type);return Object.setPrototypeOf({id:{id:D},lastUse:F.lastUse,txnNumber:F.txnNumber,isDirty:F.isDirty},A5.prototype)}}WL.ServerSession=A5;class nX{constructor(F){if(F==null)throw new X1.MongoRuntimeError("ServerSessionPool requires a MongoClient");this.client=F,this.sessions=new c2.List}acquire(){const F=this.client.topology?.logicalSessionTimeoutMinutes??10;let A=null;while(this.sessions.length>0){const B=this.sessions.shift();if(B!=null&&(!!this.client.topology?.loadBalanced||!B.hasTimedOut(F))){A=B;break}}if(A==null)A=new A5;return A}release(F){const A=this.client.topology?.logicalSessionTimeoutMinutes??10;if(this.client.topology?.loadBalanced&&!A)this.sessions.unshift(F);if(!A)return;if(this.sessions.prune((B)=>B.hasTimedOut(A)),!F.hasTimedOut(A)){if(F.isDirty)return;this.sessions.unshift(F)}}}WL.ServerSessionPool=nX;WL.applySession=ya;WL.updateSessionFromResponse=va});var Q3=z((QL)=>{async function NA(F,{blocking:A,transform:B,shift:D}){if(F.closed){if(!D)return!1;return null}do{if(F[j0]==null)await F[UL]();if(F[_0].length!==0){if(!D)return!0;const Z=F[_0].shift(F[q0]);if(Z!=null&&B&&F[J5])try{return F[J5](Z)}catch(X){try{await D4(F,{error:X,needsToEmitClosed:!0})}catch(Y){r6.squashError(Y)}throw X}return Z}if(F.isDead){if(await D4(F,{}),!D)return!1;return null}const J=F[q0].batchSize||1000;try{const Z=await F.getMore(J);if(KL.CursorResponse.is(Z))F[j0]=Z.id,F[_0]=Z;else if(Z){const X=typeof Z.cursor.id==="number"?R6.Long.fromNumber(Z.cursor.id):typeof Z.cursor.id==="bigint"?R6.Long.fromBigInt(Z.cursor.id):Z.cursor.id;F[_0].pushMany(Z.cursor.nextBatch),F[j0]=X}}catch(Z){try{await D4(F,{error:Z,needsToEmitClosed:!0})}catch(X){r6.squashError(X)}throw Z}if(F.isDead)await D4(F,{});if(F[_0].length===0&&A===!1){if(!D)return!1;return null}}while(!F.isDead||F[_0].length!==0);if(!D)return!1;return null}async function D4(F,A){const B=F[j0],D=F[F7],J=F[IA],Z=F[U3],X=A?.error,Y=A?.needsToEmitClosed??F[_0].length===0;if(X){if(F.loadBalanced&&X instanceof l2.MongoNetworkError)return await $()}if(B==null||J==null||B.isZero()||D==null){if(Y)F[n4]=!0,F[j0]=R6.Long.ZERO,F.emit(D7.CLOSE);if(Z){if(Z.owner===F){await Z.endSession({error:X});return}if(!Z.inTransaction())sX.maybeClearPinnedConnection(Z,{error:X})}return}async function $(){if(Z){if(Z.owner===F){try{await Z.endSession({error:X})}finally{F.emit(D7.CLOSE)}return}if(!Z.inTransaction())sX.maybeClearPinnedConnection(Z,{error:X})}F.emit(D7.CLOSE);return}if(F[D5]=!0,Z.hasEnded)return await $();try{await zL.executeOperation(F[A7],new na.KillCursorsOperation(B,D,J,{session:Z}))}catch(G){r6.squashError(G)}finally{await $()}}var s4=function(F){if(F[B7])throw new l2.MongoCursorInUseError};Object.defineProperty(QL,"__esModule",{value:!0});QL.assertUninitialized=QL.AbstractCursor=QL.CURSOR_FLAGS=void 0;var qL=import.meta.require("stream"),R6=S1(),KL=o8(),l2=p(),pa=d2(),zL=w2(),ia=_X(),na=xQ(),HL=D6(),RA=T0(),sX=B5(),r6=r(),j0=Symbol("id"),_0=Symbol("documents"),IA=Symbol("server"),F7=Symbol("namespace"),A7=Symbol("client"),U3=Symbol("session"),q0=Symbol("options"),J5=Symbol("transform"),B7=Symbol("initialized"),n4=Symbol("closed"),D5=Symbol("killed"),UL=Symbol("kInit");QL.CURSOR_FLAGS=["tailable","oplogReplay","noCursorTimeout","awaitData","exhaust","partial"];class D7 extends pa.TypedEventEmitter{constructor(F,A,B={}){super();if(!F.s.isMongoClient)throw new l2.MongoRuntimeError("Cursor must be constructed with MongoClient");this[A7]=F,this[F7]=A,this[j0]=null,this[_0]=new r6.List,this[B7]=!1,this[n4]=!1,this[D5]=!1,this[q0]={readPreference:B.readPreference&&B.readPreference instanceof RA.ReadPreference?B.readPreference:RA.ReadPreference.primary,...R6.pluckBSONSerializeOptions(B)},this[q0].timeoutMS=B.timeoutMS;const D=HL.ReadConcern.fromOptions(B);if(D)this[q0].readConcern=D;if(typeof B.batchSize==="number")this[q0].batchSize=B.batchSize;if(B.comment!==void 0)this[q0].comment=B.comment;if(typeof B.maxTimeMS==="number")this[q0].maxTimeMS=B.maxTimeMS;if(typeof B.maxAwaitTimeMS==="number")this[q0].maxAwaitTimeMS=B.maxAwaitTimeMS;if(B.session instanceof sX.ClientSession)this[U3]=B.session;else this[U3]=this[A7].startSession({owner:this,explicit:!1})}get id(){return this[j0]??void 0}get isDead(){return(this[j0]?.isZero()??!1)||this[n4]||this[D5]}get client(){return this[A7]}get server(){return this[IA]}get namespace(){return this[F7]}get readPreference(){return this[q0].readPreference}get readConcern(){return this[q0].readConcern}get session(){return this[U3]}set session(F){this[U3]=F}get cursorOptions(){return this[q0]}get closed(){return this[n4]}get killed(){return this[D5]}get loadBalanced(){return!!this[A7].topology?.loadBalanced}bufferedCount(){return this[_0].length}readBufferedDocuments(F){const A=[],B=Math.min(F??this[_0].length,this[_0].length);for(let D=0;D<B;D++){const J=this[_0].shift(this[q0]);if(J!=null)A.push(J)}return A}async*[Symbol.asyncIterator](){if(this.closed)return;try{while(!0){const F=await this.next();if(F===null){if(!this.closed){try{await D4(this,{needsToEmitClosed:!0})}catch(B){r6.squashError(B)}throw new l2.MongoAPIError("Cursor returned a `null` document, but the cursor is not exhausted.  Mapping documents to `null` is not supported in the cursor transform.")}break}if(yield F,this[j0]===R6.Long.ZERO)break}}finally{if(!this.closed)try{await this.close()}catch(F){r6.squashError(F)}}}stream(F){if(F?.transform){const A=F.transform,B=new aX(this),D=B.pipe(new qL.Transform({objectMode:!0,highWaterMark:1,transform(J,Z,X){try{const Y=A(J);X(void 0,Y)}catch(Y){X(Y)}}}));return B.on("error",(J)=>D.emit("error",J)),D}return new aX(this)}async hasNext(){if(this[j0]===R6.Long.ZERO)return!1;if(this[_0].length!==0)return!0;return await NA(this,{blocking:!0,transform:!1,shift:!1})}async next(){if(this[j0]===R6.Long.ZERO)throw new l2.MongoCursorExhaustedError;return await NA(this,{blocking:!0,transform:!0,shift:!0})}async tryNext(){if(this[j0]===R6.Long.ZERO)throw new l2.MongoCursorExhaustedError;return await NA(this,{blocking:!1,transform:!0,shift:!0})}async forEach(F){if(typeof F!=="function")throw new l2.MongoInvalidArgumentError('Argument "iterator" must be a function');for await(let A of this)if(F(A)===!1)break}async close(){const F=!this[n4];this[n4]=!0,await D4(this,{needsToEmitClosed:F})}async toArray(){const F=[];for await(let A of this)F.push(A);return F}addCursorFlag(F,A){if(s4(this),!QL.CURSOR_FLAGS.includes(F))throw new l2.MongoInvalidArgumentError(`Flag ${F} is not one of ${QL.CURSOR_FLAGS}`);if(typeof A!=="boolean")throw new l2.MongoInvalidArgumentError(`Flag ${F} must be a boolean value`);return this[q0][F]=A,this}map(F){s4(this);const A=this[J5];if(A)this[J5]=(B)=>{return F(A(B))};else this[J5]=F;return this}withReadPreference(F){if(s4(this),F instanceof RA.ReadPreference)this[q0].readPreference=F;else if(typeof F==="string")this[q0].readPreference=RA.ReadPreference.fromString(F);else throw new l2.MongoInvalidArgumentError(`Invalid read preference: ${F}`);return this}withReadConcern(F){s4(this);const A=HL.ReadConcern.fromOptions({readConcern:F});if(A)this[q0].readConcern=A;return this}maxTimeMS(F){if(s4(this),typeof F!=="number")throw new l2.MongoInvalidArgumentError("Argument for maxTimeMS must be a number");return this[q0].maxTimeMS=F,this}batchSize(F){if(s4(this),this[q0].tailable)throw new l2.MongoTailableCursorError("Tailable cursor does not support batchSize");if(typeof F!=="number")throw new l2.MongoInvalidArgumentError('Operation "batchSize" requires an integer');return this[q0].batchSize=F,this}rewind(){if(!this[B7])return;this[j0]=null,this[_0].clear(),this[n4]=!1,this[D5]=!1,this[B7]=!1;const F=this[U3];if(F){if(F.explicit===!1){if(!F.hasEnded)F.endSession().then(void 0,r6.squashError);this[U3]=this.client.startSession({owner:this,explicit:!1})}}}async getMore(F,A=!1){const B=new ia.GetMoreOperation(this[F7],this[j0],this[IA],{...this[q0],session:this[U3],batchSize:F,useCursorResponse:A});return await zL.executeOperation(this[A7],B)}async[UL](){try{const F=await this._initialize(this[U3]),A=F.response;if(this[IA]=F.server,KL.CursorResponse.is(A)){if(this[j0]=A.id,A.ns)this[F7]=A.ns;this[_0]=A}else if(A.cursor){if(this[j0]=typeof A.cursor.id==="number"?R6.Long.fromNumber(A.cursor.id):typeof A.cursor.id==="bigint"?R6.Long.fromBigInt(A.cursor.id):A.cursor.id,A.cursor.ns)this[F7]=r6.ns(A.cursor.ns);this[_0].pushMany(A.cursor.firstBatch)}if(this[j0]==null)this[j0]=R6.Long.ZERO,this[_0].push(F.response);this[B7]=!0}catch(F){throw this[B7]=!0,await D4(this,{error:F}),F}if(this.isDead)await D4(this,void 0);return}}D7.CLOSE="close";QL.AbstractCursor=D7;QL.assertUninitialized=s4;class aX extends qL.Readable{constructor(F){super({objectMode:!0,autoDestroy:!1,highWaterMark:1});this._readInProgress=!1,this._cursor=F}_read(F){if(!this._readInProgress)this._readInProgress=!0,this._readNext()}_destroy(F,A){this._cursor.close().then(()=>A(F),(B)=>A(B))}_readNext(){NA(this._cursor,{blocking:!0,transform:!0,shift:!0}).then((F)=>{if(F==null)this.push(null);else if(this.destroyed)this._cursor.close().then(void 0,r6.squashError);else{if(this.push(F))return this._readNext();this._readInProgress=!1}},(F)=>{if(F.message.match(/server is closed/))return this._cursor.close().then(void 0,r6.squashError),this.push(null);if(F.message.match(/operation was interrupted/))return this.push(null);return this.destroy(F)})}}});var Z5=z((IL)=>{Object.defineProperty(IL,"__esModule",{value:!0});IL.AggregationCursor=void 0;var VL=EA(),wL=w2(),aa=r(),RL=Q3(),J7=Symbol("pipeline"),PA=Symbol("options");class tX extends RL.AbstractCursor{constructor(F,A,B=[],D={}){super(F,A,D);this[J7]=B,this[PA]=D}get pipeline(){return this[J7]}clone(){const F=aa.mergeOptions({},this[PA]);return delete F.session,new tX(this.client,this.namespace,this[J7],{...F})}map(F){return super.map(F)}async _initialize(F){const A=new VL.AggregateOperation(this.namespace,this[J7],{...this[PA],...this.cursorOptions,session:F}),B=await wL.executeOperation(this.client,A);return{server:A.server,session:F,response:B}}async explain(F){return await wL.executeOperation(this.client,new VL.AggregateOperation(this.namespace,this[J7],{...this[PA],...this.cursorOptions,explain:F??!0}))}addStage(F){return RL.assertUninitialized(this),this[J7].push(F),this}group(F){return this.addStage({$group:F})}limit(F){return this.addStage({$limit:F})}match(F){return this.addStage({$match:F})}out(F){return this.addStage({$out:F})}project(F){return this.addStage({$project:F})}lookup(F){return this.addStage({$lookup:F})}redact(F){return this.addStage({$redact:F})}skip(F){return this.addStage({$skip:F})}sort(F){return this.addStage({$sort:F})}unwind(F){return this.addStage({$unwind:F})}geoNear(F){return this.addStage({$geoNear:F})}}IL.AggregationCursor=tX});var FY=z((PL)=>{Object.defineProperty(PL,"__esModule",{value:!0});PL.CountOperation=void 0;var ra=H0(),oX=u1();class eX extends ra.CommandOperation{constructor(F,A,B){super({s:{namespace:F}},B);this.options=B,this.collectionName=F.collection,this.query=A}get commandName(){return"count"}async execute(F,A){const B=this.options,D={count:this.collectionName,query:this.query};if(typeof B.limit==="number")D.limit=B.limit;if(typeof B.skip==="number")D.skip=B.skip;if(B.hint!=null)D.hint=B.hint;if(typeof B.maxTimeMS==="number")D.maxTimeMS=B.maxTimeMS;const J=await super.executeCommand(F,A,D);return J?J.n:0}}PL.CountOperation=eX;oX.defineAspects(eX,[oX.Aspect.READ_OPERATION,oX.Aspect.RETRYABLE])});var MA=z((jL)=>{var Z7=function(F=1){const A=`${F}`.toLowerCase();if(ta(F))return F;switch(A){case"ascending":case"asc":case"1":return 1;case"descending":case"desc":case"-1":return-1;default:throw new TL.MongoInvalidArgumentError(`Invalid sort direction: ${JSON.stringify(F)}`)}},ta=function(F){return typeof F==="object"&&F!=null&&"$meta"in F&&typeof F.$meta==="string"},oa=function(F){if(Array.isArray(F)&&F.length===2)try{return Z7(F[1]),!0}catch(A){return!1}return!1},ea=function(F){return Array.isArray(F)&&Array.isArray(F[0])},Fr=function(F){return F instanceof Map&&F.size>0},Ar=function(F){return new Map([[`${F[0]}`,Z7([F[1]])]])},Br=function(F){const A=F.map(([B,D])=>[`${B}`,Z7(D)]);return new Map(A)},Dr=function(F){const A=F.map((B)=>[`${B}`,1]);return new Map(A)},Jr=function(F){const A=Object.entries(F).map(([B,D])=>[`${B}`,Z7(D)]);return new Map(A)},Zr=function(F){const A=Array.from(F).map(([B,D])=>[`${B}`,Z7(D)]);return new Map(A)},Xr=function(F,A){if(F==null)return;if(typeof F==="string")return new Map([[F,Z7(A)]]);if(typeof F!=="object")throw new TL.MongoInvalidArgumentError(`Invalid sort format: ${JSON.stringify(F)} Sort must be a valid object`);if(!Array.isArray(F))return Fr(F)?Zr(F):Object.keys(F).length?Jr(F):void 0;if(!F.length)return;if(ea(F))return Br(F);if(oa(F))return Ar(F);return Dr(F)};Object.defineProperty(jL,"__esModule",{value:!0});jL.formatSort=void 0;var TL=p();jL.formatSort=Xr});var xL=z((SL)=>{var Wr=function(F,A,B){const D={find:F.collection,filter:A};if(B.sort)D.sort=Gr.formatSort(B.sort);if(B.projection){let Z=B.projection;if(Z&&Array.isArray(Z))Z=Z.length?Z.reduce((X,Y)=>{return X[Y]=1,X},{}):{_id:1};D.projection=Z}if(B.hint)D.hint=OL.normalizeHintField(B.hint);if(typeof B.skip==="number")D.skip=B.skip;if(typeof B.limit==="number")if(B.limit<0)D.limit=-B.limit,D.singleBatch=!0;else D.limit=B.limit;if(typeof B.batchSize==="number")if(B.batchSize<0){if(B.limit&&B.limit!==0&&Math.abs(B.batchSize)<Math.abs(B.limit))D.limit=-B.batchSize;D.singleBatch=!0}else D.batchSize=B.batchSize;if(typeof B.singleBatch==="boolean")D.singleBatch=B.singleBatch;if(B.comment!==void 0)D.comment=B.comment;if(typeof B.maxTimeMS==="number")D.maxTimeMS=B.maxTimeMS;const J=$r.ReadConcern.fromOptions(B);if(J)D.readConcern=J.toJSON();if(B.max)D.max=B.max;if(B.min)D.min=B.min;if(typeof B.returnKey==="boolean")D.returnKey=B.returnKey;if(typeof B.showRecordId==="boolean")D.showRecordId=B.showRecordId;if(typeof B.tailable==="boolean")D.tailable=B.tailable;if(typeof B.oplogReplay==="boolean")D.oplogReplay=B.oplogReplay;if(typeof B.timeout==="boolean")D.noCursorTimeout=!B.timeout;else if(typeof B.noCursorTimeout==="boolean")D.noCursorTimeout=B.noCursorTimeout;if(typeof B.awaitData==="boolean")D.awaitData=B.awaitData;if(typeof B.allowPartialResults==="boolean")D.allowPartialResults=B.allowPartialResults;if(B.collation)D.collation=B.collation;if(typeof B.allowDiskUse==="boolean")D.allowDiskUse=B.allowDiskUse;if(B.let)D.let=B.let;return D};Object.defineProperty(SL,"__esModule",{value:!0});SL.FindOperation=void 0;var Yr=p(),$r=D6(),Gr=MA(),OL=r(),Er=H0(),X5=u1();class AY extends Er.CommandOperation{constructor(F,A={},B={}){super(void 0,B);if(this.options={...B},delete this.options.writeConcern,this.ns=F,typeof A!=="object"||Array.isArray(A))throw new Yr.MongoInvalidArgumentError("Query filter must be a plain object or ObjectId");this.filter=A!=null&&A._bsontype==="ObjectId"?{_id:A}:A}get commandName(){return"find"}async execute(F,A){this.server=F;const B=this.options;let D=Wr(this.ns,this.filter,B);if(this.explain)D=OL.decorateWithExplain(D,this.explain);return await F.command(this.ns,D,{...this.options,...this.bsonOptions,documentsReturnedIn:"firstBatch",session:A},void 0)}}SL.FindOperation=AY;X5.defineAspects(AY,[X5.Aspect.READ_OPERATION,X5.Aspect.RETRYABLE,X5.Aspect.EXPLAINABLE,X5.Aspect.CURSOR_CREATING])});var YY=z((gL)=>{var _L;Object.defineProperty(gL,"__esModule",{value:!0});gL.FindCursor=gL.FLAGS=void 0;var BY=o8(),I6=p(),Cr=FY(),DY=w2(),fL=xL(),JY=MA(),ZY=r(),g0=Q3(),a4=Symbol("filter"),L3=Symbol("numReturned"),L1=Symbol("builtOptions");gL.FLAGS=["tailable","oplogReplay","noCursorTimeout","awaitData","exhaust","partial"];class XY extends g0.AbstractCursor{constructor(F,A,B={},D={}){super(F,A,D);if(this[_L]=0,this[a4]=B,this[L1]=D,D.sort!=null)this[L1].sort=JY.formatSort(D.sort)}clone(){const F=ZY.mergeOptions({},this[L1]);return delete F.session,new XY(this.client,this.namespace,this[a4],{...F})}map(F){return super.map(F)}async _initialize(F){const A=new fL.FindOperation(this.namespace,this[a4],{...this[L1],...this.cursorOptions,session:F}),B=await DY.executeOperation(this.client,A);if(BY.CursorResponse.is(B))this[L3]=B.batchSize;else this[L3]=this[L3]+(B?.cursor?.firstBatch?.length??0);return{server:A.server,session:F,response:B}}async getMore(F){const A=this[L3];if(A){const D=this[L1].limit;if(F=D&&D>0&&A+F>D?D-A:F,F<=0){try{await this.close()}catch(J){ZY.squashError(J)}return BY.CursorResponse.emptyGetMore}}const B=await super.getMore(F,!1);if(BY.CursorResponse.is(B))this[L3]=this[L3]+B.batchSize;else this[L3]=this[L3]+(B?.cursor?.nextBatch?.length??0);return B}async count(F){if(ZY.emitWarningOnce("cursor.count is deprecated and will be removed in the next major version, please use `collection.estimatedDocumentCount` or `collection.countDocuments` instead "),typeof F==="boolean")throw new I6.MongoInvalidArgumentError("Invalid first parameter to count");return await DY.executeOperation(this.client,new Cr.CountOperation(this.namespace,this[a4],{...this[L1],...this.cursorOptions,...F}))}async explain(F){return await DY.executeOperation(this.client,new fL.FindOperation(this.namespace,this[a4],{...this[L1],...this.cursorOptions,explain:F??!0}))}filter(F){return g0.assertUninitialized(this),this[a4]=F,this}hint(F){return g0.assertUninitialized(this),this[L1].hint=F,this}min(F){return g0.assertUninitialized(this),this[L1].min=F,this}max(F){return g0.assertUninitialized(this),this[L1].max=F,this}returnKey(F){return g0.assertUninitialized(this),this[L1].returnKey=F,this}showRecordId(F){return g0.assertUninitialized(this),this[L1].showRecordId=F,this}addQueryModifier(F,A){if(g0.assertUninitialized(this),F[0]!=="$")throw new I6.MongoInvalidArgumentError(`${F} is not a valid query modifier`);switch(F.substr(1)){case"comment":this[L1].comment=A;break;case"explain":this[L1].explain=A;break;case"hint":this[L1].hint=A;break;case"max":this[L1].max=A;break;case"maxTimeMS":this[L1].maxTimeMS=A;break;case"min":this[L1].min=A;break;case"orderby":this[L1].sort=JY.formatSort(A);break;case"query":this[a4]=A;break;case"returnKey":this[L1].returnKey=A;break;case"showDiskLoc":this[L1].showRecordId=A;break;default:throw new I6.MongoInvalidArgumentError(`Invalid query modifier: ${F}`)}return this}comment(F){return g0.assertUninitialized(this),this[L1].comment=F,this}maxAwaitTimeMS(F){if(g0.assertUninitialized(this),typeof F!=="number")throw new I6.MongoInvalidArgumentError("Argument for maxAwaitTimeMS must be a number");return this[L1].maxAwaitTimeMS=F,this}maxTimeMS(F){if(g0.assertUninitialized(this),typeof F!=="number")throw new I6.MongoInvalidArgumentError("Argument for maxTimeMS must be a number");return this[L1].maxTimeMS=F,this}project(F){return g0.assertUninitialized(this),this[L1].projection=F,this}sort(F,A){if(g0.assertUninitialized(this),this[L1].tailable)throw new I6.MongoTailableCursorError("Tailable cursor does not support sorting");return this[L1].sort=JY.formatSort(F,A),this}allowDiskUse(F=!0){if(g0.assertUninitialized(this),!this[L1].sort)throw new I6.MongoInvalidArgumentError('Option "allowDiskUse" requires a sort specification');if(!F)return this[L1].allowDiskUse=!1,this;return this[L1].allowDiskUse=!0,this}collation(F){return g0.assertUninitialized(this),this[L1].collation=F,this}limit(F){if(g0.assertUninitialized(this),this[L1].tailable)throw new I6.MongoTailableCursorError("Tailable cursor does not support limit");if(typeof F!=="number")throw new I6.MongoInvalidArgumentError('Operation "limit" requires an integer');return this[L1].limit=F,this}skip(F){if(g0.assertUninitialized(this),this[L1].tailable)throw new I6.MongoTailableCursorError("Tailable cursor does not support skip");if(typeof F!=="number")throw new I6.MongoInvalidArgumentError('Operation "skip" requires an integer');return this[L1].skip=F,this}}gL.FindCursor=XY;_L=L3});var $5=z((yL)=>{var zr=function(F){return typeof F==="number"||F==="2d"||F==="2dsphere"||F==="text"||F==="geoHaystack"},Ur=function(F){return Array.isArray(F)&&F.length===2&&zr(F[1])},Qr=function(F){const A=new Map,B=!Array.isArray(F)||Ur(F)?[F]:F;for(let D of B)if(typeof D==="string")A.set(D,1);else if(Array.isArray(D))A.set(D[0],D[1]??1);else if(D instanceof Map)for(let[J,Z]of D)A.set(J,Z);else if($Y.isObject(D))for(let[J,Z]of Object.entries(D))A.set(J,Z);return A},Lr=function(F){const A=Object.entries(F).filter(([B])=>Kr.has(B));return Object.fromEntries(A.map(([B,D])=>B==="version"?["v",D]:[B,D]))};Object.defineProperty(yL,"__esModule",{value:!0});yL.ListIndexesOperation=yL.DropIndexOperation=yL.CreateIndexesOperation=void 0;var qr=p(),$Y=r(),GY=H0(),J4=u1(),Kr=new Set(["background","unique","name","partialFilterExpression","sparse","hidden","expireAfterSeconds","storageEngine","collation","version","weights","default_language","language_override","textIndexVersion","2dsphereIndexVersion","bits","min","max","bucketSize","wildcardProjection"]);class Y5 extends GY.CommandOperation{constructor(F,A,B,D){super(F,D);this.options=D??{},this.collectionName=A,this.indexes=B.map((J)=>{const Z=J.key instanceof Map?J.key:new Map(Object.entries(J.key)),X=J.name??Array.from(Z).flat().join("_");return{...Lr(J),name:X,key:Z}})}static fromIndexDescriptionArray(F,A,B,D){return new Y5(F,A,B,D)}static fromIndexSpecification(F,A,B,D={}){const J=Qr(B),Z={...D,key:J};return new Y5(F,A,[Z],D)}get commandName(){return"createIndexes"}async execute(F,A){const B=this.options,D=this.indexes,J=$Y.maxWireVersion(F),Z={createIndexes:this.collectionName,indexes:D};if(B.commitQuorum!=null){if(J<9)throw new qr.MongoCompatibilityError("Option `commitQuorum` for `createIndexes` not supported on servers < 4.4");Z.commitQuorum=B.commitQuorum}return this.options.collation=void 0,await super.executeCommand(F,A,Z),D.map((Y)=>Y.name||"")}}yL.CreateIndexesOperation=Y5;class EY extends GY.CommandOperation{constructor(F,A,B){super(F,B);this.options=B??{},this.collection=F,this.indexName=A}get commandName(){return"dropIndexes"}async execute(F,A){const B={dropIndexes:this.collection.collectionName,index:this.indexName};return await super.executeCommand(F,A,B)}}yL.DropIndexOperation=EY;class WY extends GY.CommandOperation{constructor(F,A){super(F,A);this.options={...A},delete this.options.writeConcern,this.collectionNamespace=F.s.namespace}get commandName(){return"listIndexes"}async execute(F,A){const B=$Y.maxWireVersion(F),D=this.options.batchSize?{batchSize:this.options.batchSize}:{},J={listIndexes:this.collectionNamespace.collection,cursor:D};if(B>=9&&this.options.comment!==void 0)J.comment=this.options.comment;return await super.executeCommand(F,A,J)}}yL.ListIndexesOperation=WY;J4.defineAspects(WY,[J4.Aspect.READ_OPERATION,J4.Aspect.RETRYABLE,J4.Aspect.CURSOR_CREATING]);J4.defineAspects(Y5,[J4.Aspect.WRITE_OPERATION]);J4.defineAspects(EY,[J4.Aspect.WRITE_OPERATION])});var HY=z((hL)=>{Object.defineProperty(hL,"__esModule",{value:!0});hL.ListIndexesCursor=void 0;var Rr=w2(),Ir=$5(),Nr=Q3();class CY extends Nr.AbstractCursor{constructor(F,A){super(F.client,F.s.namespace,A);this.parent=F,this.options=A}clone(){return new CY(this.parent,{...this.options,...this.cursorOptions})}async _initialize(F){const A=new Ir.ListIndexesOperation(this.parent,{...this.cursorOptions,...this.options,session:F}),B=await Rr.executeOperation(this.parent.client,A);return{server:A.server,session:F,response:B}}}hL.ListIndexesCursor=CY});var pL=z((cL)=>{Object.defineProperty(cL,"__esModule",{value:!0});cL.ListSearchIndexesCursor=void 0;var Pr=Z5();class dL extends Pr.AggregationCursor{constructor({fullNamespace:F,client:A},B,D={}){const J=B==null?[{$listSearchIndexes:{}}]:[{$listSearchIndexes:{name:B}}];super(A,F,J,D)}}cL.ListSearchIndexesCursor=dL});var aL=z((nL)=>{Object.defineProperty(nL,"__esModule",{value:!0});nL.CountDocumentsOperation=void 0;var Mr=EA();class iL extends Mr.AggregateOperation{constructor(F,A,B){const D=[];if(D.push({$match:A}),typeof B.skip==="number")D.push({$skip:B.skip});if(typeof B.limit==="number")D.push({$limit:B.limit});D.push({$group:{_id:1,n:{$sum:1}}});super(F.s.namespace,D,B)}async execute(F,A){const D=await super.execute(F,A);if(D.cursor==null||D.cursor.firstBatch==null)return 0;const J=D.cursor.firstBatch;return J.length?J[0].n:0}}nL.CountDocumentsOperation=iL});var eL=z((tL)=>{Object.defineProperty(tL,"__esModule",{value:!0});tL.DistinctOperation=void 0;var rL=r(),Tr=H0(),TA=u1();class qY extends Tr.CommandOperation{constructor(F,A,B,D){super(F,D);this.options=D??{},this.collection=F,this.key=A,this.query=B}get commandName(){return"distinct"}async execute(F,A){const B=this.collection,D=this.key,J=this.query,Z=this.options,X={distinct:B.collectionName,key:D,query:J};if(typeof Z.maxTimeMS==="number")X.maxTimeMS=Z.maxTimeMS;if(typeof Z.comment!=="undefined")X.comment=Z.comment;rL.decorateWithReadConcern(X,B,Z),rL.decorateWithCollation(X,B,Z);const Y=await super.executeCommand(F,A,X);return this.explain?Y:Y.values}}tL.DistinctOperation=qY;TA.defineAspects(qY,[TA.Aspect.READ_OPERATION,TA.Aspect.RETRYABLE,TA.Aspect.EXPLAINABLE])});var zY=z((BV)=>{Object.defineProperty(BV,"__esModule",{value:!0});BV.DropDatabaseOperation=BV.DropCollectionOperation=void 0;var FV=p(),AV=H0(),jA=u1();class uA extends AV.CommandOperation{constructor(F,A,B={}){super(F,B);this.db=F,this.options=B,this.name=A}get commandName(){return"drop"}async execute(F,A){const B=this.db,D=this.options,J=this.name,Z=B.client.options.autoEncryption?.encryptedFieldsMap;let X=D.encryptedFields??Z?.[`${B.databaseName}.${J}`];if(!X&&Z)X=(await B.listCollections({name:J},{nameOnly:!1}).toArray())?.[0]?.options?.encryptedFields;if(X){const Y=X.escCollection||`enxcol_.${J}.esc`,$=X.ecocCollection||`enxcol_.${J}.ecoc`;for(let G of[Y,$]){const E=new uA(B,G);try{await E.executeWithoutEncryptedFieldsCheck(F,A)}catch(W){if(!(W instanceof FV.MongoServerError)||W.code!==FV.MONGODB_ERROR_CODES.NamespaceNotFound)throw W}}}return await this.executeWithoutEncryptedFieldsCheck(F,A)}async executeWithoutEncryptedFieldsCheck(F,A){return await super.executeCommand(F,A,{drop:this.name}),!0}}BV.DropCollectionOperation=uA;class KY extends AV.CommandOperation{constructor(F,A){super(F,A);this.options=A}get commandName(){return"dropDatabase"}async execute(F,A){return await super.executeCommand(F,A,{dropDatabase:1}),!0}}BV.DropDatabaseOperation=KY;jA.defineAspects(uA,[jA.Aspect.WRITE_OPERATION]);jA.defineAspects(KY,[jA.Aspect.WRITE_OPERATION])});var XV=z((JV)=>{Object.defineProperty(JV,"__esModule",{value:!0});JV.EstimatedDocumentCountOperation=void 0;var ur=H0(),OA=u1();class UY extends ur.CommandOperation{constructor(F,A={}){super(F,A);this.options=A,this.collectionName=F.collectionName}get commandName(){return"count"}async execute(F,A){const B={count:this.collectionName};if(typeof this.options.maxTimeMS==="number")B.maxTimeMS=this.options.maxTimeMS;if(this.options.comment!==void 0)B.comment=this.options.comment;return(await super.executeCommand(F,A,B))?.n||0}}JV.EstimatedDocumentCountOperation=UY;OA.defineAspects(UY,[OA.Aspect.READ_OPERATION,OA.Aspect.RETRYABLE,OA.Aspect.CURSOR_CREATING])});var QY=z((WV)=>{var YV=function(F,A){if(F.new=A.returnDocument===WV.ReturnDocument.AFTER,F.upsert=A.upsert===!0,A.bypassDocumentValidation===!0)F.bypassDocumentValidation=A.bypassDocumentValidation;return F};Object.defineProperty(WV,"__esModule",{value:!0});WV.FindOneAndUpdateOperation=WV.FindOneAndReplaceOperation=WV.FindOneAndDeleteOperation=WV.FindAndModifyOperation=WV.ReturnDocument=void 0;var Z4=p(),Or=T0(),Sr=MA(),kA=r(),kr=H0(),SA=u1();WV.ReturnDocument=Object.freeze({BEFORE:"before",AFTER:"after"});class X7 extends kr.CommandOperation{constructor(F,A,B){super(F,B);this.options=B??{},this.cmdBase={remove:!1,new:!1,upsert:!1},B.includeResultMetadata??=!1;const D=Sr.formatSort(B.sort);if(D)this.cmdBase.sort=D;if(B.projection)this.cmdBase.fields=B.projection;if(B.maxTimeMS)this.cmdBase.maxTimeMS=B.maxTimeMS;if(B.writeConcern)this.cmdBase.writeConcern=B.writeConcern;if(B.let)this.cmdBase.let=B.let;if(B.comment!==void 0)this.cmdBase.comment=B.comment;this.readPreference=Or.ReadPreference.primary,this.collection=F,this.query=A}get commandName(){return"findAndModify"}async execute(F,A){const B=this.collection,D=this.query,J={...this.options,...this.bsonOptions},Z={findAndModify:B.collectionName,query:D,...this.cmdBase};try{kA.decorateWithCollation(Z,B,J)}catch(Y){return Y}if(J.hint){if(this.writeConcern?.w===0||kA.maxWireVersion(F)<8)throw new Z4.MongoCompatibilityError("The current topology does not support a hint on findAndModify commands");Z.hint=J.hint}const X=await super.executeCommand(F,A,Z);return J.includeResultMetadata?X:X.value??null}}WV.FindAndModifyOperation=X7;class $V extends X7{constructor(F,A,B){if(A==null||typeof A!=="object")throw new Z4.MongoInvalidArgumentError('Argument "filter" must be an object');super(F,A,B);this.cmdBase.remove=!0}}WV.FindOneAndDeleteOperation=$V;class GV extends X7{constructor(F,A,B,D){if(A==null||typeof A!=="object")throw new Z4.MongoInvalidArgumentError('Argument "filter" must be an object');if(B==null||typeof B!=="object")throw new Z4.MongoInvalidArgumentError('Argument "replacement" must be an object');if(kA.hasAtomicOperators(B))throw new Z4.MongoInvalidArgumentError("Replacement document must not contain atomic operators");super(F,A,D);this.cmdBase.update=B,YV(this.cmdBase,D)}}WV.FindOneAndReplaceOperation=GV;class EV extends X7{constructor(F,A,B,D){if(A==null||typeof A!=="object")throw new Z4.MongoInvalidArgumentError('Argument "filter" must be an object');if(B==null||typeof B!=="object")throw new Z4.MongoInvalidArgumentError('Argument "update" must be an object');if(!kA.hasAtomicOperators(B))throw new Z4.MongoInvalidArgumentError("Update document requires atomic operators");super(F,A,D);if(this.cmdBase.update=B,YV(this.cmdBase,D),D.arrayFilters)this.cmdBase.arrayFilters=D.arrayFilters}}WV.FindOneAndUpdateOperation=EV;SA.defineAspects(X7,[SA.Aspect.WRITE_OPERATION,SA.Aspect.RETRYABLE,SA.Aspect.EXPLAINABLE])});var UV=z((KV)=>{Object.defineProperty(KV,"__esModule",{value:!0});KV.IsCappedOperation=void 0;var gr=p(),br=u1();class qV extends br.AbstractOperation{constructor(F,A){super(A);this.options=A,this.collection=F}get commandName(){return"listCollections"}async execute(F,A){const B=this.collection,[D]=await B.s.db.listCollections({name:B.collectionName},{...this.options,nameOnly:!1,readPreference:this.readPreference,session:A}).toArray();if(D==null||D.options==null)throw new gr.MongoAPIError(`collection ${B.namespace} not found`);return!!D.options?.capped}}KV.IsCappedOperation=qV});var wV=z((LV)=>{Object.defineProperty(LV,"__esModule",{value:!0});LV.OptionsOperation=void 0;var yr=p(),vr=u1();class QV extends vr.AbstractOperation{constructor(F,A){super(A);this.options=A,this.collection=F}get commandName(){return"listCollections"}async execute(F,A){const B=this.collection,[D]=await B.s.db.listCollections({name:B.collectionName},{...this.options,nameOnly:!1,readPreference:this.readPreference,session:A}).toArray();if(D==null||D.options==null)throw new yr.MongoAPIError(`collection ${B.namespace} not found`);return D.options}}LV.OptionsOperation=QV});var VY=z((IV)=>{Object.defineProperty(IV,"__esModule",{value:!0});IV.RenameOperation=void 0;var hr=r4(),mr=r(),dr=H0(),RV=u1();class LY extends dr.CommandOperation{constructor(F,A,B){super(F,B);this.collection=F,this.newName=A,this.options=B,this.ns=new mr.MongoDBNamespace("admin","$cmd")}get commandName(){return"renameCollection"}async execute(F,A){const B=this.collection.namespace,D=this.collection.s.namespace.withCollection(this.newName).toString(),J=typeof this.options.dropTarget==="boolean"?this.options.dropTarget:!1,Z={renameCollection:B,to:D,dropTarget:J};return await super.executeCommand(F,A,Z),new hr.Collection(this.collection.s.db,this.newName,this.collection.s.options)}}IV.RenameOperation=LY;RV.defineAspects(LY,[RV.Aspect.WRITE_OPERATION])});var jV=z((MV)=>{Object.defineProperty(MV,"__esModule",{value:!0});MV.CreateSearchIndexesOperation=void 0;var cr=u1();class PV extends cr.AbstractOperation{constructor(F,A){super();this.collection=F,this.descriptions=A}get commandName(){return"createSearchIndexes"}async execute(F,A){const B=this.collection.fullNamespace,D={createSearchIndexes:B.collection,indexes:this.descriptions};return((await F.command(B,D,{session:A}))?.indexesCreated??[]).map(({name:X})=>X)}}MV.CreateSearchIndexesOperation=PV});var xV=z((SV)=>{Object.defineProperty(SV,"__esModule",{value:!0});SV.DropSearchIndexOperation=void 0;var uV=p(),lr=u1();class OV extends lr.AbstractOperation{constructor(F,A){super();this.collection=F,this.name=A}get commandName(){return"dropSearchIndex"}async execute(F,A){const B=this.collection.fullNamespace,D={dropSearchIndex:B.collection};if(typeof this.name==="string")D.name=this.name;try{await F.command(B,D,{session:A})}catch(J){if(!(J instanceof uV.MongoServerError&&J.code===uV.MONGODB_ERROR_CODES.NamespaceNotFound))throw J}}}SV.DropSearchIndexOperation=OV});var bV=z((_V)=>{Object.defineProperty(_V,"__esModule",{value:!0});_V.UpdateSearchIndexOperation=void 0;var pr=u1();class fV extends pr.AbstractOperation{constructor(F,A,B){super();this.collection=F,this.name=A,this.definition=B}get commandName(){return"updateSearchIndex"}async execute(F,A){const B=this.collection.fullNamespace,D={updateSearchIndex:B.collection,name:this.name,definition:this.definition};await F.command(B,D,{session:A});return}}_V.UpdateSearchIndexOperation=fV});var r4=z((dV)=>{Object.defineProperty(dV,"__esModule",{value:!0});dV.Collection=void 0;var ir=S1(),nr=NX(),sr=PX(),ar=Y7(),rr=Z5(),tr=YY(),or=HY(),er=pL(),yV=p(),Ft=EX(),At=FY(),Bt=aL(),vV=YX(),Dt=eL(),Jt=zY(),Zt=XV(),i1=w2(),wY=QY(),xA=$5(),hV=HX(),Xt=UV(),Yt=wV(),$t=VY(),Gt=jV(),Et=xV(),Wt=bV(),RY=QX(),Ct=D6(),IY=T0(),k1=r(),Ht=V2();class mV{constructor(F,A,B){this.s={db:F,options:B,namespace:new k1.MongoDBCollectionNamespace(F.databaseName,A),pkFactory:F.options?.pkFactory??k1.DEFAULT_PK_FACTORY,readPreference:IY.ReadPreference.fromOptions(B),bsonOptions:ir.resolveBSONOptions(B,F),readConcern:Ct.ReadConcern.fromOptions(B),writeConcern:Ht.WriteConcern.fromOptions(B)},this.client=F.client}get dbName(){return this.s.namespace.db}get collectionName(){return this.s.namespace.collection}get namespace(){return this.fullNamespace.toString()}get fullNamespace(){return this.s.namespace}get readConcern(){if(this.s.readConcern==null)return this.s.db.readConcern;return this.s.readConcern}get readPreference(){if(this.s.readPreference==null)return this.s.db.readPreference;return this.s.readPreference}get bsonOptions(){return this.s.bsonOptions}get writeConcern(){if(this.s.writeConcern==null)return this.s.db.writeConcern;return this.s.writeConcern}get hint(){return this.s.collectionHint}set hint(F){this.s.collectionHint=k1.normalizeHintField(F)}async insertOne(F,A){return await i1.executeOperation(this.client,new hV.InsertOneOperation(this,F,k1.resolveOptions(this,A)))}async insertMany(F,A){return await i1.executeOperation(this.client,new hV.InsertManyOperation(this,F,k1.resolveOptions(this,A??{ordered:!0})))}async bulkWrite(F,A){if(!Array.isArray(F))throw new yV.MongoInvalidArgumentError('Argument "operations" must be an array of documents');return await i1.executeOperation(this.client,new Ft.BulkWriteOperation(this,F,k1.resolveOptions(this,A??{ordered:!0})))}async updateOne(F,A,B){return await i1.executeOperation(this.client,new RY.UpdateOneOperation(this,F,A,k1.resolveOptions(this,B)))}async replaceOne(F,A,B){return await i1.executeOperation(this.client,new RY.ReplaceOneOperation(this,F,A,k1.resolveOptions(this,B)))}async updateMany(F,A,B){return await i1.executeOperation(this.client,new RY.UpdateManyOperation(this,F,A,k1.resolveOptions(this,B)))}async deleteOne(F={},A={}){return await i1.executeOperation(this.client,new vV.DeleteOneOperation(this,F,k1.resolveOptions(this,A)))}async deleteMany(F={},A={}){return await i1.executeOperation(this.client,new vV.DeleteManyOperation(this,F,k1.resolveOptions(this,A)))}async rename(F,A){return await i1.executeOperation(this.client,new $t.RenameOperation(this,F,{...A,readPreference:IY.ReadPreference.PRIMARY}))}async drop(F){return await i1.executeOperation(this.client,new Jt.DropCollectionOperation(this.s.db,this.collectionName,F))}async findOne(F={},A={}){const B=this.find(F,A).limit(-1).batchSize(1),D=await B.next();return await B.close(),D}find(F={},A={}){return new tr.FindCursor(this.client,this.s.namespace,F,k1.resolveOptions(this,A))}async options(F){return await i1.executeOperation(this.client,new Yt.OptionsOperation(this,k1.resolveOptions(this,F)))}async isCapped(F){return await i1.executeOperation(this.client,new Xt.IsCappedOperation(this,k1.resolveOptions(this,F)))}async createIndex(F,A){return(await i1.executeOperation(this.client,xA.CreateIndexesOperation.fromIndexSpecification(this,this.collectionName,F,k1.resolveOptions(this,A))))[0]}async createIndexes(F,A){return await i1.executeOperation(this.client,xA.CreateIndexesOperation.fromIndexDescriptionArray(this,this.collectionName,F,k1.resolveOptions(this,{...A,maxTimeMS:void 0})))}async dropIndex(F,A){return await i1.executeOperation(this.client,new xA.DropIndexOperation(this,F,{...k1.resolveOptions(this,A),readPreference:IY.ReadPreference.primary}))}async dropIndexes(F){try{return await i1.executeOperation(this.client,new xA.DropIndexOperation(this,"*",k1.resolveOptions(this,F))),!0}catch{return!1}}listIndexes(F){return new or.ListIndexesCursor(this,k1.resolveOptions(this,F))}async indexExists(F,A){const B=Array.isArray(F)?F:[F],D=new Set(await this.listIndexes(A).map(({name:J})=>J).toArray());return B.every((J)=>D.has(J))}async indexInformation(F){return await this.indexes({...F,full:F?.full??!1})}async estimatedDocumentCount(F){return await i1.executeOperation(this.client,new Zt.EstimatedDocumentCountOperation(this,k1.resolveOptions(this,F)))}async countDocuments(F={},A={}){return await i1.executeOperation(this.client,new Bt.CountDocumentsOperation(this,F,k1.resolveOptions(this,A)))}async distinct(F,A={},B={}){return await i1.executeOperation(this.client,new Dt.DistinctOperation(this,F,A,k1.resolveOptions(this,B)))}async indexes(F){const A=await this.listIndexes(F).toArray();if(F?.full??!0)return A;return Object.fromEntries(A.map(({name:J,key:Z})=>[J,Object.entries(Z)]))}async findOneAndDelete(F,A){return await i1.executeOperation(this.client,new wY.FindOneAndDeleteOperation(this,F,k1.resolveOptions(this,A)))}async findOneAndReplace(F,A,B){return await i1.executeOperation(this.client,new wY.FindOneAndReplaceOperation(this,F,A,k1.resolveOptions(this,B)))}async findOneAndUpdate(F,A,B){return await i1.executeOperation(this.client,new wY.FindOneAndUpdateOperation(this,F,A,k1.resolveOptions(this,B)))}aggregate(F=[],A){if(!Array.isArray(F))throw new yV.MongoInvalidArgumentError('Argument "pipeline" must be an array of aggregation stages');return new rr.AggregationCursor(this.client,this.s.namespace,F,k1.resolveOptions(this,A))}watch(F=[],A={}){if(!Array.isArray(F))A=F,F=[];return new ar.ChangeStream(this,F,k1.resolveOptions(this,A))}initializeUnorderedBulkOp(F){return new sr.UnorderedBulkOperation(this,k1.resolveOptions(this,F))}initializeOrderedBulkOp(F){return new nr.OrderedBulkOperation(this,k1.resolveOptions(this,F))}async count(F={},A={}){return await i1.executeOperation(this.client,new At.CountOperation(this.fullNamespace,F,k1.resolveOptions(this,A)))}listSearchIndexes(F,A){A=typeof F==="object"?F:A==null?{}:A;const B=F==null?null:typeof F==="object"?null:F;return new er.ListSearchIndexesCursor(this,B,A)}async createSearchIndex(F){const[A]=await this.createSearchIndexes([F]);return A}async createSearchIndexes(F){return await i1.executeOperation(this.client,new Gt.CreateSearchIndexesOperation(this,F))}async dropSearchIndex(F){return await i1.executeOperation(this.client,new Et.DropSearchIndexOperation(this,F))}async updateSearchIndex(F,A){return await i1.executeOperation(this.client,new Wt.UpdateSearchIndexOperation(this,F,A))}}dV.Collection=mV});var TY=z((pV)=>{Object.defineProperty(pV,"__esModule",{value:!0});pV.ChangeStreamCursor=void 0;var NY=Y7(),lV=L0(),qt=EA(),Kt=w2(),PY=r(),zt=Q3();class MY extends zt.AbstractCursor{constructor(F,A,B=[],D={}){super(F,A,D);if(this.pipeline=B,this.options=D,this._resumeToken=null,this.startAtOperationTime=D.startAtOperationTime,D.startAfter)this.resumeToken=D.startAfter;else if(D.resumeAfter)this.resumeToken=D.resumeAfter}set resumeToken(F){this._resumeToken=F,this.emit(NY.ChangeStream.RESUME_TOKEN_CHANGED,F)}get resumeToken(){return this._resumeToken}get resumeOptions(){const F={...this.options};for(let A of["resumeAfter","startAfter","startAtOperationTime"])delete F[A];if(this.resumeToken!=null)if(this.options.startAfter&&!this.hasReceived)F.startAfter=this.resumeToken;else F.resumeAfter=this.resumeToken;else if(this.startAtOperationTime!=null&&PY.maxWireVersion(this.server)>=7)F.startAtOperationTime=this.startAtOperationTime;return F}cacheResumeToken(F){if(this.bufferedCount()===0&&this.postBatchResumeToken)this.resumeToken=this.postBatchResumeToken;else this.resumeToken=F;this.hasReceived=!0}_processBatch(F){const A=F.cursor;if(A.postBatchResumeToken){if(this.postBatchResumeToken=F.cursor.postBatchResumeToken,("firstBatch"in F.cursor?F.cursor.firstBatch:F.cursor.nextBatch).length===0)this.resumeToken=A.postBatchResumeToken}}clone(){return new MY(this.client,this.namespace,this.pipeline,{...this.cursorOptions})}async _initialize(F){const A=new qt.AggregateOperation(this.namespace,this.pipeline,{...this.cursorOptions,...this.options,session:F}),B=await Kt.executeOperation(F.client,A),D=A.server;if(this.maxWireVersion=PY.maxWireVersion(D),this.startAtOperationTime==null&&this.resumeAfter==null&&this.startAfter==null&&this.maxWireVersion>=7)this.startAtOperationTime=B.operationTime;return this._processBatch(B),this.emit(lV.INIT,B),this.emit(lV.RESPONSE),{server:D,session:F,response:B}}async getMore(F){const A=await super.getMore(F);return this.maxWireVersion=PY.maxWireVersion(this.server),this._processBatch(A),this.emit(NY.ChangeStream.MORE,A),this.emit(NY.ChangeStream.RESPONSE),A}}pV.ChangeStreamCursor=MY});var aV=z((nV)=>{Object.defineProperty(nV,"__esModule",{value:!0});nV.ListCollectionsOperation=void 0;var Ut=r(),Qt=H0(),fA=u1();class jY extends Qt.CommandOperation{constructor(F,A,B){super(F,B);if(this.options={...B},delete this.options.writeConcern,this.db=F,this.filter=A,this.nameOnly=!!this.options.nameOnly,this.authorizedCollections=!!this.options.authorizedCollections,typeof this.options.batchSize==="number")this.batchSize=this.options.batchSize}get commandName(){return"listCollections"}async execute(F,A){return await super.executeCommand(F,A,this.generateCommand(Ut.maxWireVersion(F)))}generateCommand(F){const A={listCollections:1,filter:this.filter,cursor:this.batchSize?{batchSize:this.batchSize}:{},nameOnly:this.nameOnly,authorizedCollections:this.authorizedCollections};if(F>=9&&this.options.comment!==void 0)A.comment=this.options.comment;return A}}nV.ListCollectionsOperation=jY;fA.defineAspects(jY,[fA.Aspect.READ_OPERATION,fA.Aspect.RETRYABLE,fA.Aspect.CURSOR_CREATING])});var OY=z((rV)=>{Object.defineProperty(rV,"__esModule",{value:!0});rV.ListCollectionsCursor=void 0;var Lt=w2(),Vt=aV(),wt=Q3();class uY extends wt.AbstractCursor{constructor(F,A,B){super(F.client,F.s.namespace,B);this.parent=F,this.filter=A,this.options=B}clone(){return new uY(this.parent,this.filter,{...this.options,...this.cursorOptions})}async _initialize(F){const A=new Vt.ListCollectionsOperation(this.parent,this.filter,{...this.cursorOptions,...this.options,session:F}),B=await Lt.executeOperation(this.parent.client,A);return{server:A.server,session:F,response:B}}}rV.ListCollectionsCursor=uY});var Bw=z((Fw)=>{Object.defineProperty(Fw,"__esModule",{value:!0});Fw.RunCommandCursor=void 0;var $7=p(),oV=w2(),Rt=_X(),It=c9(),Nt=r(),Pt=Q3();class eV extends Pt.AbstractCursor{setComment(F){return this.getMoreOptions.comment=F,this}setMaxTimeMS(F){return this.getMoreOptions.maxAwaitTimeMS=F,this}setBatchSize(F){return this.getMoreOptions.batchSize=F,this}clone(){throw new $7.MongoAPIError("Clone not supported, create a new cursor with db.runCursorCommand")}withReadConcern(F){throw new $7.MongoAPIError("RunCommandCursor does not support readConcern it must be attached to the command being run")}addCursorFlag(F,A){throw new $7.MongoAPIError("RunCommandCursor does not support cursor flags, they must be attached to the command being run")}maxTimeMS(F){throw new $7.MongoAPIError("maxTimeMS must be configured on the command document directly, to configure getMore.maxTimeMS use cursor.setMaxTimeMS()")}batchSize(F){throw new $7.MongoAPIError("batchSize must be configured on the command document directly, to configure getMore.batchSize use cursor.setBatchSize()")}constructor(F,A,B={}){super(F.client,Nt.ns(F.namespace),B);this.getMoreOptions={},this.db=F,this.command=Object.freeze({...A})}async _initialize(F){const A=new It.RunCommandOperation(this.db,this.command,{...this.cursorOptions,session:F,readPreference:this.cursorOptions.readPreference}),B=await oV.executeOperation(this.client,A);if(B.cursor==null)throw new $7.MongoUnexpectedServerResponseError("Expected server to respond with cursor");return{server:A.server,session:F,response:B}}async getMore(F){const A=new Rt.GetMoreOperation(this.namespace,this.id,this.server,{...this.cursorOptions,session:this.session,...this.getMoreOptions,useCursorResponse:!1});return await oV.executeOperation(this.client,A)}}Fw.RunCommandCursor=eV});var Xw=z((Jw)=>{Object.defineProperty(Jw,"__esModule",{value:!0});Jw.CollectionsOperation=void 0;var Mt=r4(),Tt=u1();class Dw extends Tt.AbstractOperation{constructor(F,A){super(A);this.options=A,this.db=F}get commandName(){return"listCollections"}async execute(F,A){const B=await this.db.listCollections({},{...this.options,nameOnly:!0,readPreference:this.readPreference,session:A}).toArray(),D=[];for(let{name:J}of B)if(!J.includes("$"))D.push(new Mt.Collection(this.db,J,this.db.s.options));return D}}Jw.CollectionsOperation=Dw});var Ww=z((Gw)=>{Object.defineProperty(Gw,"__esModule",{value:!0});Gw.CreateCollectionOperation=void 0;var Yw=d4(),jt=r4(),ut=p(),Ot=H0(),St=$5(),$w=u1(),kt=new Set(["w","wtimeout","j","fsync","autoIndexId","pkFactory","raw","readPreference","session","readConcern","writeConcern","raw","fieldsAsRaw","useBigInt64","promoteLongs","promoteValues","promoteBuffers","bsonRegExp","serializeFunctions","ignoreUndefined","enableUtf8Validation"]),xt="Driver support of Queryable Encryption is incompatible with server. Upgrade server to use Queryable Encryption.";class _A extends Ot.CommandOperation{constructor(F,A,B={}){super(F,B);this.options=B,this.db=F,this.name=A}get commandName(){return"create"}async execute(F,A){const B=this.db,D=this.name,J=this.options,Z=J.encryptedFields??B.client.options.autoEncryption?.encryptedFieldsMap?.[`${B.databaseName}.${D}`];if(Z){if(!F.loadBalanced&&F.description.maxWireVersion<Yw.MIN_SUPPORTED_QE_WIRE_VERSION)throw new ut.MongoCompatibilityError(`${xt} The minimum server version required is ${Yw.MIN_SUPPORTED_QE_SERVER_VERSION}`);const Y=Z.escCollection??`enxcol_.${D}.esc`,$=Z.ecocCollection??`enxcol_.${D}.ecoc`;for(let G of[Y,$])await new _A(B,G,{clusteredIndex:{key:{_id:1},unique:!0}}).executeWithoutEncryptedFieldsCheck(F,A);if(!J.encryptedFields)this.options={...this.options,encryptedFields:Z}}const X=await this.executeWithoutEncryptedFieldsCheck(F,A);if(Z)await St.CreateIndexesOperation.fromIndexSpecification(B,D,{__safeContent__:1},{}).execute(F,A);return X}async executeWithoutEncryptedFieldsCheck(F,A){const B=this.db,D=this.name,J=this.options,Z={create:D};for(let X in J)if(J[X]!=null&&typeof J[X]!=="function"&&!kt.has(X))Z[X]=J[X];return await super.executeCommand(F,A,Z),new jt.Collection(B,D,J)}}Gw.CreateCollectionOperation=_A;$w.defineAspects(_A,[$w.Aspect.WRITE_OPERATION])});var zw=z((qw)=>{Object.defineProperty(qw,"__esModule",{value:!0});qw.ProfilingLevelOperation=void 0;var Cw=p(),ft=H0();class Hw extends ft.CommandOperation{constructor(F,A){super(F,A);this.options=A}get commandName(){return"profile"}async execute(F,A){const B=await super.executeCommand(F,A,{profile:-1});if(B.ok===1){const D=B.was;if(D===0)return"off";if(D===1)return"slow_only";if(D===2)return"all";throw new Cw.MongoUnexpectedServerResponseError(`Illegal profiling level value ${D}`)}else throw new Cw.MongoUnexpectedServerResponseError("Error with profile command")}}qw.ProfilingLevelOperation=Hw});var SY=z((Qw)=>{Object.defineProperty(Qw,"__esModule",{value:!0});Qw.SetProfilingLevelOperation=Qw.ProfilingLevel=void 0;var _t=p(),gt=r(),bt=H0(),yt=new Set(["off","slow_only","all"]);Qw.ProfilingLevel=Object.freeze({off:"off",slowOnly:"slow_only",all:"all"});class Uw extends bt.CommandOperation{constructor(F,A,B){super(F,B);switch(this.options=B,A){case Qw.ProfilingLevel.off:this.profile=0;break;case Qw.ProfilingLevel.slowOnly:this.profile=1;break;case Qw.ProfilingLevel.all:this.profile=2;break;default:this.profile=0;break}this.level=A}get commandName(){return"profile"}async execute(F,A){const B=this.level;if(!yt.has(B))throw new _t.MongoInvalidArgumentError(`Profiling level must be one of "${gt.enumToString(Qw.ProfilingLevel)}"`);return await super.executeCommand(F,A,{profile:this.profile}),B}}Qw.SetProfilingLevelOperation=Uw});var Iw=z((ww)=>{Object.defineProperty(ww,"__esModule",{value:!0});ww.DbStatsOperation=void 0;var vt=H0(),Vw=u1();class kY extends vt.CommandOperation{constructor(F,A){super(F,A);this.options=A}get commandName(){return"dbStats"}async execute(F,A){const B={dbStats:!0};if(this.options.scale!=null)B.scale=this.options.scale;return await super.executeCommand(F,A,B)}}ww.DbStatsOperation=kY;Vw.defineAspects(kY,[Vw.Aspect.READ_OPERATION])});var gA=z((jw)=>{Object.defineProperty(jw,"__esModule",{value:!0});jw.Db=void 0;var ht=DX(),Nw=S1(),mt=Y7(),dt=r4(),G7=L0(),ct=Z5(),lt=OY(),pt=Bw(),Pw=p(),it=Xw(),nt=Ww(),Mw=zY(),N6=w2(),st=$5(),at=zw(),rt=AX(),tt=VY(),ot=c9(),et=SY(),Fo=Iw(),Ao=D6(),Tw=T0(),r0=r(),Bo=V2(),Do=["writeConcern","readPreference","readPreferenceTags","native_parser","forceServerObjectId","pkFactory","serializeFunctions","raw","authSource","ignoreUndefined","readConcern","retryMiliSeconds","numberOfRetries","useBigInt64","promoteBuffers","promoteLongs","bsonRegExp","enableUtf8Validation","promoteValues","compression","retryWrites","timeoutMS"];class X4{constructor(F,A,B){if(B=B??{},B=r0.filterOptions(B,Do),typeof A==="string"&&A.includes("."))throw new Pw.MongoInvalidArgumentError("Database names cannot contain the character '.'");this.s={options:B,readPreference:Tw.ReadPreference.fromOptions(B),bsonOptions:Nw.resolveBSONOptions(B,F),pkFactory:B?.pkFactory??r0.DEFAULT_PK_FACTORY,readConcern:Ao.ReadConcern.fromOptions(B),writeConcern:Bo.WriteConcern.fromOptions(B),namespace:new r0.MongoDBNamespace(A)},this.client=F}get databaseName(){return this.s.namespace.db}get options(){return this.s.options}get secondaryOk(){return this.s.readPreference?.preference!=="primary"||!1}get readConcern(){return this.s.readConcern}get readPreference(){if(this.s.readPreference==null)return this.client.readPreference;return this.s.readPreference}get bsonOptions(){return this.s.bsonOptions}get writeConcern(){return this.s.writeConcern}get namespace(){return this.s.namespace.toString()}async createCollection(F,A){return await N6.executeOperation(this.client,new nt.CreateCollectionOperation(this,F,r0.resolveOptions(this,A)))}async command(F,A){return await N6.executeOperation(this.client,new ot.RunCommandOperation(this,F,{...Nw.resolveBSONOptions(A),session:A?.session,readPreference:A?.readPreference}))}aggregate(F=[],A){return new ct.AggregationCursor(this.client,this.s.namespace,F,r0.resolveOptions(this,A))}admin(){return new ht.Admin(this)}collection(F,A={}){if(typeof A==="function")throw new Pw.MongoInvalidArgumentError("The callback form of this helper has been removed.");return new dt.Collection(this,F,r0.resolveOptions(this,A))}async stats(F){return await N6.executeOperation(this.client,new Fo.DbStatsOperation(this,r0.resolveOptions(this,F)))}listCollections(F={},A={}){return new lt.ListCollectionsCursor(this,F,r0.resolveOptions(this,A))}async renameCollection(F,A,B){return await N6.executeOperation(this.client,new tt.RenameOperation(this.collection(F),A,{...B,new_collection:!0,readPreference:Tw.ReadPreference.primary}))}async dropCollection(F,A){return await N6.executeOperation(this.client,new Mw.DropCollectionOperation(this,F,r0.resolveOptions(this,A)))}async dropDatabase(F){return await N6.executeOperation(this.client,new Mw.DropDatabaseOperation(this,r0.resolveOptions(this,F)))}async collections(F){return await N6.executeOperation(this.client,new it.CollectionsOperation(this,r0.resolveOptions(this,F)))}async createIndex(F,A,B){return(await N6.executeOperation(this.client,st.CreateIndexesOperation.fromIndexSpecification(this,F,A,B)))[0]}async removeUser(F,A){return await N6.executeOperation(this.client,new rt.RemoveUserOperation(this,F,r0.resolveOptions(this,A)))}async setProfilingLevel(F,A){return await N6.executeOperation(this.client,new et.SetProfilingLevelOperation(this,F,r0.resolveOptions(this,A)))}async profilingLevel(F){return await N6.executeOperation(this.client,new at.ProfilingLevelOperation(this,r0.resolveOptions(this,F)))}async indexInformation(F,A){return await this.collection(F).indexInformation(r0.resolveOptions(this,A))}watch(F=[],A={}){if(!Array.isArray(F))A=F,F=[];return new mt.ChangeStream(this,F,r0.resolveOptions(this,A))}runCursorCommand(F,A){return new pt.RunCommandCursor(this,F,A)}}X4.SYSTEM_NAMESPACE_COLLECTION=G7.SYSTEM_NAMESPACE_COLLECTION;X4.SYSTEM_INDEX_COLLECTION=G7.SYSTEM_INDEX_COLLECTION;X4.SYSTEM_PROFILE_COLLECTION=G7.SYSTEM_PROFILE_COLLECTION;X4.SYSTEM_USER_COLLECTION=G7.SYSTEM_USER_COLLECTION;X4.SYSTEM_COMMAND_COLLECTION=G7.SYSTEM_COMMAND_COLLECTION;X4.SYSTEM_JS_COLLECTION=G7.SYSTEM_JS_COLLECTION;jw.Db=X4});var P6=z((Ow)=>{var E5=function(F){return new Proxy(F?{kModuleError:F}:{},{get:(B,D)=>{if(D==="kModuleError")return F;throw F},set:()=>{throw F}})},Jo=function(){let F;try{F=(()=>{throw new Error(`Cannot require module "kerberos"`);})()}catch(A){F=E5(new Y4.MongoMissingDependencyError("Optional module `kerberos` not found. Please install it to enable kerberos authentication",{cause:A,dependencyName:"kerberos"}))}return F},Zo=function(){let F;try{F=(()=>{throw new Error(`Cannot require module "@mongodb-js/zstd"`);})()}catch(A){F=E5(new Y4.MongoMissingDependencyError("Optional module `@mongodb-js/zstd` not found. Please install it to enable zstd compression",{cause:A,dependencyName:"zstd"}))}return F},Xo=function(){try{return (()=>{throw new Error(`Cannot require module "@aws-sdk/credential-providers"`);})()}catch(F){return E5(new Y4.MongoMissingDependencyError("Optional module `@aws-sdk/credential-providers` not found. Please install it to enable getting aws credentials via the official sdk.",{cause:F,dependencyName:"@aws-sdk/credential-providers"}))}},Yo=function(){try{return (()=>{throw new Error(`Cannot require module "gcp-metadata"`);})()}catch(F){return E5(new Y4.MongoMissingDependencyError("Optional module `gcp-metadata` not found. Please install it to enable getting gcp credentials via the official sdk.",{cause:F,dependencyName:"gcp-metadata"}))}},$o=function(){try{return (()=>{throw new Error(`Cannot require module "snappy"`);})()}catch(F){return{kModuleError:new Y4.MongoMissingDependencyError("Optional module `snappy` not found. Please install it to enable snappy compression",{cause:F,dependencyName:"snappy"})}}},Go=function(){try{return (()=>{throw new Error(`Cannot require module "socks"`);})()}catch(F){return{kModuleError:new Y4.MongoMissingDependencyError("Optional module `socks` not found. Please install it to connections over a SOCKS5 proxy",{cause:F,dependencyName:"socks"})}}},Eo=function(){let F;try{F=(()=>{throw new Error(`Cannot require module "aws4"`);})()}catch(A){F=E5(new Y4.MongoMissingDependencyError("Optional module `aws4` not found. Please install it to enable AWS authentication",{cause:A,dependencyName:"aws4"}))}return F},Wo=function(){let F=null;try{F=(()=>{throw new Error(`Cannot require module "mongodb-client-encryption"`);})()}catch(A){return{kModuleError:new Y4.MongoMissingDependencyError("Optional module `mongodb-client-encryption` not found. Please install it to use auto encryption or ClientEncryption.",{cause:A,dependencyName:"mongodb-client-encryption"})}}return F};Object.defineProperty(Ow,"__esModule",{value:!0});Ow.getMongoDBClientEncryption=Ow.aws4=Ow.getSocks=Ow.getSnappy=Ow.getGcpMetadata=Ow.getAwsCredentialProvider=Ow.getZstdLibrary=Ow.getKerberos=void 0;var Y4=p();Ow.getKerberos=Jo;Ow.getZstdLibrary=Zo;Ow.getAwsCredentialProvider=Xo;Ow.getGcpMetadata=Yo;Ow.getSnappy=$o;Ow.getSocks=Go;Ow.aws4=Eo();Ow.getMongoDBClientEncryption=Wo});var V3=z((fw)=>{Object.defineProperty(fw,"__esModule",{value:!0});fw.AuthProvider=fw.AuthContext=void 0;var Lo=p();class kw{constructor(F,A,B){this.reauthenticating=!1,this.connection=F,this.credentials=A,this.options=B}}fw.AuthContext=kw;class xw{async prepare(F,A){return F}async reauth(F){if(F.reauthenticating)throw new Lo.MongoRuntimeError("Reauthentication already in progress.");try{F.reauthenticating=!0,await this.auth(F)}finally{F.reauthenticating=!1}}}fw.AuthProvider=xw});var yA=z((hw)=>{async function xY(F,A){return await F.command(Ro.ns("$external.$cmd"),A)}async function No(F){const{hostAddress:A}=F.options,{credentials:B}=F;if(!A||typeof A.host!=="string"||!B)throw new gw.MongoInvalidArgumentError("Connection must have host and port and credentials defined.");if(jo(),"kModuleError"in W5)throw W5.kModuleError;const{initializeClient:D}=W5,{username:J,password:Z}=B,X=B.mechanismProperties,Y=X.SERVICE_NAME??"mongodb",$=await vw(A.host,X),G={};if(Z!=null)Object.assign(G,{user:J,password:Z});const E=X.SERVICE_HOST??$;let W=`${Y}${process.platform==="win32"?"/":"@"}${E}`;if("SERVICE_REALM"in X)W=`${W}@${X.SERVICE_REALM}`;return await D(W,G)}var Po=function(F){return{saslStart:1,mechanism:"GSSAPI",payload:F,autoAuthorize:1}},Mo=function(F,A){return{saslContinue:1,conversationId:A,payload:F}};async function yw(F,A,B){try{return await F.step(B)||""}catch(D){if(A===0)throw D;return await yw(F,A-1,B)}}async function To(F,A,B){const D=await F.unwrap(B);return await F.wrap(D||"",{user:A})}async function vw(F,A){const B=A.CANONICALIZE_HOST_NAME;if(!B||B===hw.GSSAPICanonicalizationValue.none)return F;if(B===hw.GSSAPICanonicalizationValue.on||B===hw.GSSAPICanonicalizationValue.forwardAndReverse){const{address:D}=await fY.promises.lookup(F);try{const J=await fY.promises.resolvePtr(D);return J.length>0?J[0]:F}catch(J){return await _Y(F)}}else return await _Y(F)}async function _Y(F){try{const A=await fY.promises.resolveCname(F);return A.length>0?A[0]:F}catch{return F}}var jo=function(){if(!W5)W5=wo.getKerberos()};Object.defineProperty(hw,"__esModule",{value:!0});hw.resolveCname=hw.performGSSAPICanonicalizeHostName=hw.GSSAPI=hw.GSSAPICanonicalizationValue=void 0;var fY=import.meta.require("dns"),wo=P6(),gw=p(),Ro=r(),Io=V3();hw.GSSAPICanonicalizationValue=Object.freeze({on:!0,off:!1,none:"none",forward:"forward",forwardAndReverse:"forwardAndReverse"});var W5;class bw extends Io.AuthProvider{async auth(F){const{connection:A,credentials:B}=F;if(B==null)throw new gw.MongoMissingCredentialsError("Credentials required for GSSAPI authentication");const{username:D}=B,J=await No(F),Z=await J.step(""),X=await xY(A,Po(Z)),Y=await yw(J,10,X.payload),$=await xY(A,Mo(Y,X.conversationId)),G=await To(J,D,$.payload);await xY(A,{saslContinue:1,conversationId:$.conversationId,payload:G})}}hw.GSSAPI=bw;hw.performGSSAPICanonicalizeHostName=vw;hw.resolveCname=_Y});var M6=z((dw)=>{Object.defineProperty(dw,"__esModule",{value:!0});dw.AUTH_MECHS_AUTH_SRC_EXTERNAL=dw.AuthMechanism=void 0;dw.AuthMechanism=Object.freeze({MONGODB_AWS:"MONGODB-AWS",MONGODB_CR:"MONGODB-CR",MONGODB_DEFAULT:"DEFAULT",MONGODB_GSSAPI:"GSSAPI",MONGODB_PLAIN:"PLAIN",MONGODB_SCRAM_SHA1:"SCRAM-SHA-1",MONGODB_SCRAM_SHA256:"SCRAM-SHA-256",MONGODB_X509:"MONGODB-X509",MONGODB_OIDC:"MONGODB-OIDC"});dw.AUTH_MECHS_AUTH_SRC_EXTERNAL=new Set([dw.AuthMechanism.MONGODB_GSSAPI,dw.AuthMechanism.MONGODB_AWS,dw.AuthMechanism.MONGODB_OIDC,dw.AuthMechanism.MONGODB_X509])});var hA=z((iw)=>{var ko=function(F){if(F){if(Array.isArray(F.saslSupportedMechs))return F.saslSupportedMechs.includes(b0.AuthMechanism.MONGODB_SCRAM_SHA256)?b0.AuthMechanism.MONGODB_SCRAM_SHA256:b0.AuthMechanism.MONGODB_SCRAM_SHA1;if(F.maxWireVersion>=3)return b0.AuthMechanism.MONGODB_SCRAM_SHA1}return b0.AuthMechanism.MONGODB_CR};Object.defineProperty(iw,"__esModule",{value:!0});iw.MongoCredentials=iw.DEFAULT_ALLOWED_HOSTS=void 0;var X6=p(),So=yA(),b0=M6(),lw=["aws","azure"],pw="Auth mechanism property ALLOWED_HOSTS must be an array of strings.";iw.DEFAULT_ALLOWED_HOSTS=["*.mongodb.net","*.mongodb-dev.net","*.mongodbgov.net","localhost","127.0.0.1","::1"];var xo="TOKEN_AUDIENCE must be set in the auth mechanism properties when PROVIDER_NAME is azure.";class vA{constructor(F){if(this.username=F.username??"",this.password=F.password,this.source=F.source,!this.source&&F.db)this.source=F.db;if(this.mechanism=F.mechanism||b0.AuthMechanism.MONGODB_DEFAULT,this.mechanismProperties=F.mechanismProperties||{},this.mechanism.match(/MONGODB-AWS/i)){if(!this.username&&process.env.AWS_ACCESS_KEY_ID)this.username=process.env.AWS_ACCESS_KEY_ID;if(!this.password&&process.env.AWS_SECRET_ACCESS_KEY)this.password=process.env.AWS_SECRET_ACCESS_KEY;if(this.mechanismProperties.AWS_SESSION_TOKEN==null&&process.env.AWS_SESSION_TOKEN!=null)this.mechanismProperties={...this.mechanismProperties,AWS_SESSION_TOKEN:process.env.AWS_SESSION_TOKEN}}if(this.mechanism===b0.AuthMechanism.MONGODB_OIDC&&!this.mechanismProperties.ALLOWED_HOSTS)this.mechanismProperties={...this.mechanismProperties,ALLOWED_HOSTS:iw.DEFAULT_ALLOWED_HOSTS};Object.freeze(this.mechanismProperties),Object.freeze(this)}equals(F){return this.mechanism===F.mechanism&&this.username===F.username&&this.password===F.password&&this.source===F.source}resolveAuthMechanism(F){if(this.mechanism.match(/DEFAULT/i))return new vA({username:this.username,password:this.password,source:this.source,mechanism:ko(F),mechanismProperties:this.mechanismProperties});return this}validate(){if((this.mechanism===b0.AuthMechanism.MONGODB_GSSAPI||this.mechanism===b0.AuthMechanism.MONGODB_CR||this.mechanism===b0.AuthMechanism.MONGODB_PLAIN||this.mechanism===b0.AuthMechanism.MONGODB_SCRAM_SHA1||this.mechanism===b0.AuthMechanism.MONGODB_SCRAM_SHA256)&&!this.username)throw new X6.MongoMissingCredentialsError(`Username required for mechanism '${this.mechanism}'`);if(this.mechanism===b0.AuthMechanism.MONGODB_OIDC){if(this.username&&this.mechanismProperties.PROVIDER_NAME)throw new X6.MongoInvalidArgumentError(`username and PROVIDER_NAME may not be used together for mechanism '${this.mechanism}'.`);if(this.mechanismProperties.PROVIDER_NAME==="azure"&&!this.mechanismProperties.TOKEN_AUDIENCE)throw new X6.MongoAzureError(xo);if(this.mechanismProperties.PROVIDER_NAME&&!lw.includes(this.mechanismProperties.PROVIDER_NAME))throw new X6.MongoInvalidArgumentError(`Currently only a PROVIDER_NAME in ${lw.join(",")} is supported for mechanism '${this.mechanism}'.`);if(this.mechanismProperties.REFRESH_TOKEN_CALLBACK&&!this.mechanismProperties.REQUEST_TOKEN_CALLBACK)throw new X6.MongoInvalidArgumentError(`A REQUEST_TOKEN_CALLBACK must be provided when using a REFRESH_TOKEN_CALLBACK for mechanism '${this.mechanism}'`);if(!this.mechanismProperties.PROVIDER_NAME&&!this.mechanismProperties.REQUEST_TOKEN_CALLBACK)throw new X6.MongoInvalidArgumentError(`Either a PROVIDER_NAME or a REQUEST_TOKEN_CALLBACK must be specified for mechanism '${this.mechanism}'.`);if(this.mechanismProperties.ALLOWED_HOSTS){const A=this.mechanismProperties.ALLOWED_HOSTS;if(!Array.isArray(A))throw new X6.MongoInvalidArgumentError(pw);for(let B of A)if(typeof B!=="string")throw new X6.MongoInvalidArgumentError(pw)}}if(b0.AUTH_MECHS_AUTH_SRC_EXTERNAL.has(this.mechanism)){if(this.source!=null&&this.source!=="$external")throw new X6.MongoAPIError(`Invalid source '${this.source}' for mechanism '${this.mechanism}' specified.`)}if(this.mechanism===b0.AuthMechanism.MONGODB_PLAIN&&this.source==null)throw new X6.MongoAPIError("PLAIN Authentication Mechanism needs an auth source");if(this.mechanism===b0.AuthMechanism.MONGODB_X509&&this.password!=null){if(this.password===""){Reflect.set(this,"password",void 0);return}throw new X6.MongoAPIError("Password not allowed for mechanism MONGODB-X509")}const F=this.mechanismProperties.CANONICALIZE_HOST_NAME??!1;if(!Object.values(So.GSSAPICanonicalizationValue).includes(F))throw new X6.MongoAPIError(`Invalid CANONICALIZE_HOST_NAME value: ${F}`)}static merge(F,A){return new vA({username:A.username??F?.username??"",password:A.password??F?.password??"",mechanism:A.mechanism??F?.mechanism??b0.AuthMechanism.MONGODB_DEFAULT,mechanismProperties:A.mechanismProperties??F?.mechanismProperties??{},source:A.source??A.db??F?.source??"admin"})}}iw.MongoCredentials=vA});var dA=z((ow)=>{var v1=function(F,A,B){if(B.globals)F=B.globals[F.name];return new F(`${B.context?B.context:"Value"} ${A}.`)},C7=function(F,A){if(typeof F==="bigint")throw v1(TypeError,"is a BigInt which cannot be converted to a number",A);if(!A.globals)return Number(F);return A.globals.Number(F)},rw=function(F){if(F>0&&F%1===0.5&&(F&1)===0||F<0&&F%1===-0.5&&(F&1)===1)return H5(Math.floor(F));return H5(Math.round(F))},mA=function(F){return H5(Math.trunc(F))},aw=function(F){return F<0?-1:1},fo=function(F,A){const B=F%A;if(aw(A)!==aw(B))return B+A;return B},H5=function(F){return F===0?0:F},H7=function(F,{unsigned:A}){let B,D;if(A)B=0,D=2**F-1;else B=-(2**(F-1)),D=2**(F-1)-1;const J=2**F,Z=2**(F-1);return(X,Y={})=>{let $=C7(X,Y);if($=H5($),Y.enforceRange){if(!Number.isFinite($))throw v1(TypeError,"is not a finite number",Y);if($=mA($),$<B||$>D)throw v1(TypeError,`is outside the accepted range of ${B} to ${D}, inclusive`,Y);return $}if(!Number.isNaN($)&&Y.clamp)return $=Math.min(Math.max($,B),D),$=rw($),$;if(!Number.isFinite($)||$===0)return 0;if($=mA($),$>=B&&$<=D)return $;if($=fo($,J),!A&&$>=Z)return $-J;return $}},tw=function(F,{unsigned:A}){const B=Number.MAX_SAFE_INTEGER,D=A?0:Number.MIN_SAFE_INTEGER,J=A?BigInt.asUintN:BigInt.asIntN;return(Z,X={})=>{let Y=C7(Z,X);if(Y=H5(Y),X.enforceRange){if(!Number.isFinite(Y))throw v1(TypeError,"is not a finite number",X);if(Y=mA(Y),Y<D||Y>B)throw v1(TypeError,`is outside the accepted range of ${D} to ${B}, inclusive`,X);return Y}if(!Number.isNaN(Y)&&X.clamp)return Y=Math.min(Math.max(Y,D),B),Y=rw(Y),Y;if(!Number.isFinite(Y)||Y===0)return 0;let $=BigInt(mA(Y));return $=J(F,$),Number($)}},gY=function(F){try{return _o.call(F),!0}catch{return!1}},E7=function(F){try{return go.call(F),!0}catch{return!1}},W7=function(F){try{return new Uint8Array(F),!1}catch{return!0}};ow.any=(F)=>{return F};ow.undefined=()=>{return};ow.boolean=(F)=>{return Boolean(F)};ow.byte=H7(8,{unsigned:!1});ow.octet=H7(8,{unsigned:!0});ow.short=H7(16,{unsigned:!1});ow["unsigned short"]=H7(16,{unsigned:!0});ow.long=H7(32,{unsigned:!1});ow["unsigned long"]=H7(32,{unsigned:!0});ow["long long"]=tw(64,{unsigned:!1});ow["unsigned long long"]=tw(64,{unsigned:!0});ow.double=(F,A={})=>{const B=C7(F,A);if(!Number.isFinite(B))throw v1(TypeError,"is not a finite floating-point value",A);return B};ow["unrestricted double"]=(F,A={})=>{return C7(F,A)};ow.float=(F,A={})=>{const B=C7(F,A);if(!Number.isFinite(B))throw v1(TypeError,"is not a finite floating-point value",A);if(Object.is(B,-0))return B;const D=Math.fround(B);if(!Number.isFinite(D))throw v1(TypeError,"is outside the range of a single-precision floating-point value",A);return D};ow["unrestricted float"]=(F,A={})=>{const B=C7(F,A);if(isNaN(B))return B;if(Object.is(B,-0))return B;return Math.fround(B)};ow.DOMString=(F,A={})=>{if(A.treatNullAsEmptyString&&F===null)return"";if(typeof F==="symbol")throw v1(TypeError,"is a symbol, which cannot be converted to a string",A);return(A.globals?A.globals.String:String)(F)};ow.ByteString=(F,A={})=>{const B=ow.DOMString(F,A);let D;for(let J=0;(D=B.codePointAt(J))!==void 0;++J)if(D>255)throw v1(TypeError,"is not a valid ByteString",A);return B};ow.USVString=(F,A={})=>{const B=ow.DOMString(F,A),D=B.length,J=[];for(let Z=0;Z<D;++Z){const X=B.charCodeAt(Z);if(X<55296||X>57343)J.push(String.fromCodePoint(X));else if(56320<=X&&X<=57343)J.push(String.fromCodePoint(65533));else if(Z===D-1)J.push(String.fromCodePoint(65533));else{const Y=B.charCodeAt(Z+1);if(56320<=Y&&Y<=57343){const $=X&1023,G=Y&1023;J.push(String.fromCodePoint(65536+1024*$+G)),++Z}else J.push(String.fromCodePoint(65533))}}return J.join("")};ow.object=(F,A={})=>{if(F===null||typeof F!=="object"&&typeof F!=="function")throw v1(TypeError,"is not an object",A);return F};var _o=Object.getOwnPropertyDescriptor(ArrayBuffer.prototype,"byteLength").get,go=typeof SharedArrayBuffer==="function"?Object.getOwnPropertyDescriptor(SharedArrayBuffer.prototype,"byteLength").get:null;ow.ArrayBuffer=(F,A={})=>{if(!gY(F)){if(A.allowShared&&!E7(F))throw v1(TypeError,"is not an ArrayBuffer or SharedArrayBuffer",A);throw v1(TypeError,"is not an ArrayBuffer",A)}if(W7(F))throw v1(TypeError,"is a detached ArrayBuffer",A);return F};var bo=Object.getOwnPropertyDescriptor(DataView.prototype,"byteLength").get;ow.DataView=(F,A={})=>{try{bo.call(F)}catch(B){throw v1(TypeError,"is not a DataView",A)}if(!A.allowShared&&E7(F.buffer))throw v1(TypeError,"is backed by a SharedArrayBuffer, which is not allowed",A);if(W7(F.buffer))throw v1(TypeError,"is backed by a detached ArrayBuffer",A);return F};var yo=Object.getOwnPropertyDescriptor(Object.getPrototypeOf(Uint8Array).prototype,Symbol.toStringTag).get;[Int8Array,Int16Array,Int32Array,Uint8Array,Uint16Array,Uint32Array,Uint8ClampedArray,Float32Array,Float64Array].forEach((F)=>{const{name:A}=F,B=/^[AEIOU]/u.test(A)?"an":"a";ow[A]=(D,J={})=>{if(!ArrayBuffer.isView(D)||yo.call(D)!==A)throw v1(TypeError,`is not ${B} ${A} object`,J);if(!J.allowShared&&E7(D.buffer))throw v1(TypeError,"is a view on a SharedArrayBuffer, which is not allowed",J);if(W7(D.buffer))throw v1(TypeError,"is a view on a detached ArrayBuffer",J);return D}});ow.ArrayBufferView=(F,A={})=>{if(!ArrayBuffer.isView(F))throw v1(TypeError,"is not a view on an ArrayBuffer or SharedArrayBuffer",A);if(!A.allowShared&&E7(F.buffer))throw v1(TypeError,"is a view on a SharedArrayBuffer, which is not allowed",A);if(W7(F.buffer))throw v1(TypeError,"is a view on a detached ArrayBuffer",A);return F};ow.BufferSource=(F,A={})=>{if(ArrayBuffer.isView(F)){if(!A.allowShared&&E7(F.buffer))throw v1(TypeError,"is a view on a SharedArrayBuffer, which is not allowed",A);if(W7(F.buffer))throw v1(TypeError,"is a view on a detached ArrayBuffer",A);return F}if(!A.allowShared&&!gY(F))throw v1(TypeError,"is not an ArrayBuffer or a view on one",A);if(A.allowShared&&!E7(F)&&!gY(F))throw v1(TypeError,"is not an ArrayBuffer, SharedArrayBuffer, or a view on one",A);if(W7(F))throw v1(TypeError,"is a detached ArrayBuffer",A);return F};ow.DOMTimeStamp=ow["unsigned long long"]});var lA=z((XR,YR)=>{var $e=function(F){return typeof F==="object"&&F!==null||typeof F==="function"},Ge=function(F,A){for(let B of Reflect.ownKeys(A)){const D=Reflect.getOwnPropertyDescriptor(A,B);if(D&&!Reflect.defineProperty(F,B,D))throw new TypeError(`Cannot redefine property: ${String(B)}`)}},Ee=function(F,A){const B=DR(F);return Object.defineProperties(Object.create(B["%Object.prototype%"]),Object.getOwnPropertyDescriptors(A))},DR=function(F){if(FR(F,cA))return F[cA];const A=Object.create(null);A["%Object.prototype%"]=F.Object.prototype,A["%IteratorPrototype%"]=Object.getPrototypeOf(Object.getPrototypeOf(new F.Array()[Symbol.iterator]()));try{A["%AsyncIteratorPrototype%"]=Object.getPrototypeOf(Object.getPrototypeOf(F.eval("(async function* () {})").prototype))}catch{A["%AsyncIteratorPrototype%"]=We}return F[cA]=A,A},Ce=function(F,A,B){if(!F[q7])F[q7]=Object.create(null);if(A in F[q7])return F[q7][A];return F[q7][A]=B(),F[q7][A]},JR=function(F){return F?F[AR]:null},ZR=function(F){return F?F[BR]:null},He=function(F){const A=JR(F);return A?A:F},qe=function(F){const A=ZR(F);return A?A:F},ze=function(F){if(typeof F!=="string")return!1;const A=F>>>0;if(A===4294967295)return!1;const B=`${A}`;if(F!==B)return!1;return!0},Qe=function(F){try{return Ue.call(F),!0}catch(A){return!1}},Le=function([F,A],B){let D;switch(B){case"key":D=F;break;case"value":D=A;break;case"key+value":D=[F,A];break}return{value:D,done:!1}},FR=Function.prototype.call.bind(Object.prototype.hasOwnProperty),AR=Symbol("wrapper"),BR=Symbol("impl"),q7=Symbol("SameObject caches"),cA=Symbol.for("[webidl2js] constructor registry"),We=Object.getPrototypeOf(Object.getPrototypeOf(async function*(){}).prototype),Ke=Symbol("internal"),Ue=Object.getOwnPropertyDescriptor(ArrayBuffer.prototype,"byteLength").get,Ve=Symbol("supports property index"),we=Symbol("supported property indices"),Re=Symbol("supports property name"),Ie=Symbol("supported property names"),Ne=Symbol("indexed property get"),Pe=Symbol("indexed property set new"),Me=Symbol("indexed property set existing"),Te=Symbol("named property get"),je=Symbol("named property set new"),ue=Symbol("named property set existing"),Oe=Symbol("named property delete"),Se=Symbol("async iterator get the next iteration result"),ke=Symbol("async iterator return steps"),xe=Symbol("async iterator initialization steps"),fe=Symbol("async iterator end of iteration");YR.exports=XR={isObject:$e,hasOwn:FR,define:Ge,newObjectInRealm:Ee,wrapperSymbol:AR,implSymbol:BR,getSameObject:Ce,ctorRegistrySymbol:cA,initCtorRegistry:DR,wrapperForImpl:JR,implForWrapper:ZR,tryWrapperForImpl:He,tryImplForWrapper:qe,iterInternalSymbol:Ke,isArrayBuffer:Qe,isArrayIndexPropName:ze,supportsPropertyIndex:Ve,supportedPropertyIndices:we,supportsPropertyName:Re,supportedPropertyNames:Ie,indexedGet:Ne,indexedSetNew:Pe,indexedSetExisting:Me,namedGet:Te,namedSetNew:je,namedSetExisting:ue,namedDelete:Oe,asyncIteratorNext:Se,asyncIteratorReturn:ke,asyncIteratorInit:xe,asyncIteratorEOI:fe,iteratorResult:Le}});var KR=z((cq1,qR)=>{var $4=function(F){throw new RangeError(ye[F])},ve=function(F,A){const B=[];let D=F.length;while(D--)B[D]=A(F[D]);return B},GR=function(F,A){const B=F.split("@");let D="";if(B.length>1)D=B[0]+"@",F=B[1];F=F.replace(be,".");const J=F.split("."),Z=ve(J,A).join(".");return D+Z},ER=function(F){const A=[];let B=0;const D=F.length;while(B<D){const J=F.charCodeAt(B++);if(J>=55296&&J<=56319&&B<D){const Z=F.charCodeAt(B++);if((Z&64512)==56320)A.push(((J&1023)<<10)+(Z&1023)+65536);else A.push(J),B--}else A.push(J)}return A},_e=/^xn--/,ge=/[^\0-\x7F]/,be=/[\x2E\u3002\uFF0E\uFF61]/g,ye={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},t6=Math.floor,yY=String.fromCharCode,he=(F)=>String.fromCodePoint(...F),me=function(F){if(F>=48&&F<58)return 26+(F-48);if(F>=65&&F<91)return F-65;if(F>=97&&F<123)return F-97;return 36},$R=function(F,A){return F+22+75*(F<26)-((A!=0)<<5)},WR=function(F,A,B){let D=0;F=B?t6(F/700):F>>1,F+=t6(F/A);for(;F>455;D+=36)F=t6(F/35);return t6(D+36*F/(F+38))},CR=function(F){const A=[],B=F.length;let D=0,J=128,Z=72,X=F.lastIndexOf("-");if(X<0)X=0;for(let Y=0;Y<X;++Y){if(F.charCodeAt(Y)>=128)$4("not-basic");A.push(F.charCodeAt(Y))}for(let Y=X>0?X+1:0;Y<B;){const $=D;for(let E=1,W=36;;W+=36){if(Y>=B)$4("invalid-input");const C=me(F.charCodeAt(Y++));if(C>=36)$4("invalid-input");if(C>t6((2147483647-D)/E))$4("overflow");D+=C*E;const H=W<=Z?1:W>=Z+26?26:W-Z;if(C<H)break;const q=36-H;if(E>t6(2147483647/q))$4("overflow");E*=q}const G=A.length+1;if(Z=WR(D-$,G,$==0),t6(D/G)>2147483647-J)$4("overflow");J+=t6(D/G),D%=G,A.splice(D++,0,J)}return String.fromCodePoint(...A)},HR=function(F){const A=[];F=ER(F);const B=F.length;let D=128,J=0,Z=72;for(let $ of F)if($<128)A.push(yY($));const X=A.length;let Y=X;if(X)A.push("-");while(Y<B){let $=2147483647;for(let E of F)if(E>=D&&E<$)$=E;const G=Y+1;if($-D>t6((2147483647-J)/G))$4("overflow");J+=($-D)*G,D=$;for(let E of F){if(E<D&&++J>2147483647)$4("overflow");if(E===D){let W=J;for(let C=36;;C+=36){const H=C<=Z?1:C>=Z+26?26:C-Z;if(W<H)break;const q=W-H,K=36-H;A.push(yY($R(H+q%K,0))),W=t6(q/K)}A.push(yY($R(W,0))),Z=WR(J,G,Y===X),J=0,++Y}}++J,++D}return A.join("")},de=function(F){return GR(F,function(A){return _e.test(A)?CR(A.slice(4).toLowerCase()):A})},ce=function(F){return GR(F,function(A){return ge.test(A)?"xn--"+HR(A):A})},le={version:"2.3.1",ucs2:{decode:ER,encode:he},decode:CR,encode:HR,toASCII:ce,toUnicode:de};qR.exports=le});var UR=z((lq1,zR)=>{var pe=/[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0898-\u089F\u08CA-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B55-\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C04\u0C3C\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0CF3\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D81-\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECE\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1715\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u180F\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ACE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA82C\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\u{101FD}\u{102E0}\u{10376}-\u{1037A}\u{10A01}-\u{10A03}\u{10A05}\u{10A06}\u{10A0C}-\u{10A0F}\u{10A38}-\u{10A3A}\u{10A3F}\u{10AE5}\u{10AE6}\u{10D24}-\u{10D27}\u{10EAB}\u{10EAC}\u{10EFD}-\u{10EFF}\u{10F46}-\u{10F50}\u{10F82}-\u{10F85}\u{11000}-\u{11002}\u{11038}-\u{11046}\u{11070}\u{11073}\u{11074}\u{1107F}-\u{11082}\u{110B0}-\u{110BA}\u{110C2}\u{11100}-\u{11102}\u{11127}-\u{11134}\u{11145}\u{11146}\u{11173}\u{11180}-\u{11182}\u{111B3}-\u{111C0}\u{111C9}-\u{111CC}\u{111CE}\u{111CF}\u{1122C}-\u{11237}\u{1123E}\u{11241}\u{112DF}-\u{112EA}\u{11300}-\u{11303}\u{1133B}\u{1133C}\u{1133E}-\u{11344}\u{11347}\u{11348}\u{1134B}-\u{1134D}\u{11357}\u{11362}\u{11363}\u{11366}-\u{1136C}\u{11370}-\u{11374}\u{11435}-\u{11446}\u{1145E}\u{114B0}-\u{114C3}\u{115AF}-\u{115B5}\u{115B8}-\u{115C0}\u{115DC}\u{115DD}\u{11630}-\u{11640}\u{116AB}-\u{116B7}\u{1171D}-\u{1172B}\u{1182C}-\u{1183A}\u{11930}-\u{11935}\u{11937}\u{11938}\u{1193B}-\u{1193E}\u{11940}\u{11942}\u{11943}\u{119D1}-\u{119D7}\u{119DA}-\u{119E0}\u{119E4}\u{11A01}-\u{11A0A}\u{11A33}-\u{11A39}\u{11A3B}-\u{11A3E}\u{11A47}\u{11A51}-\u{11A5B}\u{11A8A}-\u{11A99}\u{11C2F}-\u{11C36}\u{11C38}-\u{11C3F}\u{11C92}-\u{11CA7}\u{11CA9}-\u{11CB6}\u{11D31}-\u{11D36}\u{11D3A}\u{11D3C}\u{11D3D}\u{11D3F}-\u{11D45}\u{11D47}\u{11D8A}-\u{11D8E}\u{11D90}\u{11D91}\u{11D93}-\u{11D97}\u{11EF3}-\u{11EF6}\u{11F00}\u{11F01}\u{11F03}\u{11F34}-\u{11F3A}\u{11F3E}-\u{11F42}\u{13440}\u{13447}-\u{13455}\u{16AF0}-\u{16AF4}\u{16B30}-\u{16B36}\u{16F4F}\u{16F51}-\u{16F87}\u{16F8F}-\u{16F92}\u{16FE4}\u{16FF0}\u{16FF1}\u{1BC9D}\u{1BC9E}\u{1CF00}-\u{1CF2D}\u{1CF30}-\u{1CF46}\u{1D165}-\u{1D169}\u{1D16D}-\u{1D172}\u{1D17B}-\u{1D182}\u{1D185}-\u{1D18B}\u{1D1AA}-\u{1D1AD}\u{1D242}-\u{1D244}\u{1DA00}-\u{1DA36}\u{1DA3B}-\u{1DA6C}\u{1DA75}\u{1DA84}\u{1DA9B}-\u{1DA9F}\u{1DAA1}-\u{1DAAF}\u{1E000}-\u{1E006}\u{1E008}-\u{1E018}\u{1E01B}-\u{1E021}\u{1E023}\u{1E024}\u{1E026}-\u{1E02A}\u{1E08F}\u{1E130}-\u{1E136}\u{1E2AE}\u{1E2EC}-\u{1E2EF}\u{1E4EC}-\u{1E4EF}\u{1E8D0}-\u{1E8D6}\u{1E944}-\u{1E94A}\u{E0100}-\u{E01EF}]/u,ie=/[\u094D\u09CD\u0A4D\u0ACD\u0B4D\u0BCD\u0C4D\u0CCD\u0D3B\u0D3C\u0D4D\u0DCA\u0E3A\u0EBA\u0F84\u1039\u103A\u1714\u1734\u17D2\u1A60\u1B44\u1BAA\u1BAB\u1BF2\u1BF3\u2D7F\uA806\uA8C4\uA953\uA9C0\uAAF6\uABED\u{10A3F}\u{11046}\u{1107F}\u{110B9}\u{11133}\u{11134}\u{111C0}\u{11235}\u{112EA}\u{1134D}\u{11442}\u{114C2}\u{115BF}\u{1163F}\u{116B6}\u{1172B}\u{11839}\u{119E0}\u{11A34}\u{11A47}\u{11A99}\u{11C3F}\u{11D44}\u{11D45}\u{11D97}]/u,ne=/[\u0620\u0626\u0628\u062A-\u062E\u0633-\u063F\u0641-\u0647\u0649\u064A\u066E\u066F\u0678-\u0687\u069A-\u06BF\u06C1\u06C2\u06CC\u06CE\u06D0\u06D1\u06FA-\u06FC\u06FF\u0712-\u0714\u071A-\u071D\u071F-\u0727\u0729\u072B\u072D\u072E\u074E-\u0758\u075C-\u076A\u076D-\u0770\u0772\u0775-\u0777\u077A-\u077F\u07CA-\u07EA\u0841-\u0845\u0848\u084A-\u0853\u0855\u0860\u0862-\u0865\u0868\u08A0-\u08A9\u08AF\u08B0\u08B3\u08B4\u08B6-\u08B8\u08BA-\u08BD\u1807\u1820-\u1878\u1887-\u18A8\u18AA\uA840-\uA872\u{10AC0}-\u{10AC4}\u{10ACD}\u{10AD3}-\u{10ADC}\u{10ADE}-\u{10AE0}\u{10AEB}-\u{10AEE}\u{10B80}\u{10B82}\u{10B86}-\u{10B88}\u{10B8A}\u{10B8B}\u{10B8D}\u{10B90}\u{10BAD}\u{10BAE}\u{10D00}-\u{10D21}\u{10D23}\u{10F30}-\u{10F32}\u{10F34}-\u{10F44}\u{10F51}-\u{10F53}\u{1E900}-\u{1E943}][\xAD\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u061C\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u070F\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08D3-\u08E1\u08E3-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962\u0963\u0981\u09BC\u09C1-\u09C4\u09CD\u09E2\u09E3\u09FE\u0A01\u0A02\u0A3C\u0A41\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7\u0AC8\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01\u0B3C\u0B3F\u0B41-\u0B44\u0B4D\u0B56\u0B62\u0B63\u0B82\u0BC0\u0BCD\u0C00\u0C04\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81\u0CBC\u0CBF\u0CC6\u0CCC\u0CCD\u0CE2\u0CE3\u0D00\u0D01\u0D3B\u0D3C\u0D41-\u0D44\u0D4D\u0D62\u0D63\u0DCA\u0DD2-\u0DD4\u0DD6\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F71-\u0F7E\u0F80-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039\u103A\u103D\u103E\u1058\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085\u1086\u108D\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DD\u180B-\u180D\u1885\u1886\u18A9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193B\u1A17\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1ABE\u1B00-\u1B03\u1B34\u1B36-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80\u1B81\u1BA2-\u1BA5\u1BA8\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8\u1CF9\u1DC0-\u1DF9\u1DFB-\u1DFF\u200B\u200E\u200F\u202A-\u202E\u2060-\u2064\u206A-\u206F\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302D\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA825\uA826\uA8C4\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9BD\uA9E5\uAA29-\uAA2E\uAA31\uAA32\uAA35\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEC\uAAED\uAAF6\uABE5\uABE8\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\uFEFF\uFFF9-\uFFFB\u{101FD}\u{102E0}\u{10376}-\u{1037A}\u{10A01}-\u{10A03}\u{10A05}\u{10A06}\u{10A0C}-\u{10A0F}\u{10A38}-\u{10A3A}\u{10A3F}\u{10AE5}\u{10AE6}\u{10D24}-\u{10D27}\u{10F46}-\u{10F50}\u{11001}\u{11038}-\u{11046}\u{1107F}-\u{11081}\u{110B3}-\u{110B6}\u{110B9}\u{110BA}\u{11100}-\u{11102}\u{11127}-\u{1112B}\u{1112D}-\u{11134}\u{11173}\u{11180}\u{11181}\u{111B6}-\u{111BE}\u{111C9}-\u{111CC}\u{1122F}-\u{11231}\u{11234}\u{11236}\u{11237}\u{1123E}\u{112DF}\u{112E3}-\u{112EA}\u{11300}\u{11301}\u{1133B}\u{1133C}\u{11340}\u{11366}-\u{1136C}\u{11370}-\u{11374}\u{11438}-\u{1143F}\u{11442}-\u{11444}\u{11446}\u{1145E}\u{114B3}-\u{114B8}\u{114BA}\u{114BF}\u{114C0}\u{114C2}\u{114C3}\u{115B2}-\u{115B5}\u{115BC}\u{115BD}\u{115BF}\u{115C0}\u{115DC}\u{115DD}\u{11633}-\u{1163A}\u{1163D}\u{1163F}\u{11640}\u{116AB}\u{116AD}\u{116B0}-\u{116B5}\u{116B7}\u{1171D}-\u{1171F}\u{11722}-\u{11725}\u{11727}-\u{1172B}\u{1182F}-\u{11837}\u{11839}\u{1183A}\u{119D4}-\u{119D7}\u{119DA}\u{119DB}\u{119E0}\u{11A01}-\u{11A0A}\u{11A33}-\u{11A38}\u{11A3B}-\u{11A3E}\u{11A47}\u{11A51}-\u{11A56}\u{11A59}-\u{11A5B}\u{11A8A}-\u{11A96}\u{11A98}\u{11A99}\u{11C30}-\u{11C36}\u{11C38}-\u{11C3D}\u{11C3F}\u{11C92}-\u{11CA7}\u{11CAA}-\u{11CB0}\u{11CB2}\u{11CB3}\u{11CB5}\u{11CB6}\u{11D31}-\u{11D36}\u{11D3A}\u{11D3C}\u{11D3D}\u{11D3F}-\u{11D45}\u{11D47}\u{11D90}\u{11D91}\u{11D95}\u{11D97}\u{11EF3}\u{11EF4}\u{13430}-\u{13438}\u{16AF0}-\u{16AF4}\u{16B30}-\u{16B36}\u{16F4F}\u{16F8F}-\u{16F92}\u{1BC9D}\u{1BC9E}\u{1BCA0}-\u{1BCA3}\u{1D167}-\u{1D169}\u{1D173}-\u{1D182}\u{1D185}-\u{1D18B}\u{1D1AA}-\u{1D1AD}\u{1D242}-\u{1D244}\u{1DA00}-\u{1DA36}\u{1DA3B}-\u{1DA6C}\u{1DA75}\u{1DA84}\u{1DA9B}-\u{1DA9F}\u{1DAA1}-\u{1DAAF}\u{1E000}-\u{1E006}\u{1E008}-\u{1E018}\u{1E01B}-\u{1E021}\u{1E023}\u{1E024}\u{1E026}-\u{1E02A}\u{1E130}-\u{1E136}\u{1E2EC}-\u{1E2EF}\u{1E8D0}-\u{1E8D6}\u{1E944}-\u{1E94B}\u{E0001}\u{E0020}-\u{E007F}\u{E0100}-\u{E01EF}]*\u200C[\xAD\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u061C\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u070F\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08D3-\u08E1\u08E3-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962\u0963\u0981\u09BC\u09C1-\u09C4\u09CD\u09E2\u09E3\u09FE\u0A01\u0A02\u0A3C\u0A41\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7\u0AC8\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01\u0B3C\u0B3F\u0B41-\u0B44\u0B4D\u0B56\u0B62\u0B63\u0B82\u0BC0\u0BCD\u0C00\u0C04\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81\u0CBC\u0CBF\u0CC6\u0CCC\u0CCD\u0CE2\u0CE3\u0D00\u0D01\u0D3B\u0D3C\u0D41-\u0D44\u0D4D\u0D62\u0D63\u0DCA\u0DD2-\u0DD4\u0DD6\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F71-\u0F7E\u0F80-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039\u103A\u103D\u103E\u1058\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085\u1086\u108D\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DD\u180B-\u180D\u1885\u1886\u18A9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193B\u1A17\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1ABE\u1B00-\u1B03\u1B34\u1B36-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80\u1B81\u1BA2-\u1BA5\u1BA8\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8\u1CF9\u1DC0-\u1DF9\u1DFB-\u1DFF\u200B\u200E\u200F\u202A-\u202E\u2060-\u2064\u206A-\u206F\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302D\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA825\uA826\uA8C4\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9BD\uA9E5\uAA29-\uAA2E\uAA31\uAA32\uAA35\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEC\uAAED\uAAF6\uABE5\uABE8\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\uFEFF\uFFF9-\uFFFB\u{101FD}\u{102E0}\u{10376}-\u{1037A}\u{10A01}-\u{10A03}\u{10A05}\u{10A06}\u{10A0C}-\u{10A0F}\u{10A38}-\u{10A3A}\u{10A3F}\u{10AE5}\u{10AE6}\u{10D24}-\u{10D27}\u{10F46}-\u{10F50}\u{11001}\u{11038}-\u{11046}\u{1107F}-\u{11081}\u{110B3}-\u{110B6}\u{110B9}\u{110BA}\u{11100}-\u{11102}\u{11127}-\u{1112B}\u{1112D}-\u{11134}\u{11173}\u{11180}\u{11181}\u{111B6}-\u{111BE}\u{111C9}-\u{111CC}\u{1122F}-\u{11231}\u{11234}\u{11236}\u{11237}\u{1123E}\u{112DF}\u{112E3}-\u{112EA}\u{11300}\u{11301}\u{1133B}\u{1133C}\u{11340}\u{11366}-\u{1136C}\u{11370}-\u{11374}\u{11438}-\u{1143F}\u{11442}-\u{11444}\u{11446}\u{1145E}\u{114B3}-\u{114B8}\u{114BA}\u{114BF}\u{114C0}\u{114C2}\u{114C3}\u{115B2}-\u{115B5}\u{115BC}\u{115BD}\u{115BF}\u{115C0}\u{115DC}\u{115DD}\u{11633}-\u{1163A}\u{1163D}\u{1163F}\u{11640}\u{116AB}\u{116AD}\u{116B0}-\u{116B5}\u{116B7}\u{1171D}-\u{1171F}\u{11722}-\u{11725}\u{11727}-\u{1172B}\u{1182F}-\u{11837}\u{11839}\u{1183A}\u{119D4}-\u{119D7}\u{119DA}\u{119DB}\u{119E0}\u{11A01}-\u{11A0A}\u{11A33}-\u{11A38}\u{11A3B}-\u{11A3E}\u{11A47}\u{11A51}-\u{11A56}\u{11A59}-\u{11A5B}\u{11A8A}-\u{11A96}\u{11A98}\u{11A99}\u{11C30}-\u{11C36}\u{11C38}-\u{11C3D}\u{11C3F}\u{11C92}-\u{11CA7}\u{11CAA}-\u{11CB0}\u{11CB2}\u{11CB3}\u{11CB5}\u{11CB6}\u{11D31}-\u{11D36}\u{11D3A}\u{11D3C}\u{11D3D}\u{11D3F}-\u{11D45}\u{11D47}\u{11D90}\u{11D91}\u{11D95}\u{11D97}\u{11EF3}\u{11EF4}\u{13430}-\u{13438}\u{16AF0}-\u{16AF4}\u{16B30}-\u{16B36}\u{16F4F}\u{16F8F}-\u{16F92}\u{1BC9D}\u{1BC9E}\u{1BCA0}-\u{1BCA3}\u{1D167}-\u{1D169}\u{1D173}-\u{1D182}\u{1D185}-\u{1D18B}\u{1D1AA}-\u{1D1AD}\u{1D242}-\u{1D244}\u{1DA00}-\u{1DA36}\u{1DA3B}-\u{1DA6C}\u{1DA75}\u{1DA84}\u{1DA9B}-\u{1DA9F}\u{1DAA1}-\u{1DAAF}\u{1E000}-\u{1E006}\u{1E008}-\u{1E018}\u{1E01B}-\u{1E021}\u{1E023}\u{1E024}\u{1E026}-\u{1E02A}\u{1E130}-\u{1E136}\u{1E2EC}-\u{1E2EF}\u{1E8D0}-\u{1E8D6}\u{1E944}-\u{1E94B}\u{E0001}\u{E0020}-\u{E007F}\u{E0100}-\u{E01EF}]*[\u0620\u0622-\u063F\u0641-\u064A\u066E\u066F\u0671-\u0673\u0675-\u06D3\u06D5\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u077F\u07CA-\u07EA\u0840-\u0855\u0860\u0862-\u0865\u0867-\u086A\u08A0-\u08AC\u08AE-\u08B4\u08B6-\u08BD\u1807\u1820-\u1878\u1887-\u18A8\u18AA\uA840-\uA871\u{10AC0}-\u{10AC5}\u{10AC7}\u{10AC9}\u{10ACA}\u{10ACE}-\u{10AD6}\u{10AD8}-\u{10AE1}\u{10AE4}\u{10AEB}-\u{10AEF}\u{10B80}-\u{10B91}\u{10BA9}-\u{10BAE}\u{10D01}-\u{10D23}\u{10F30}-\u{10F44}\u{10F51}-\u{10F54}\u{1E900}-\u{1E943}]/u,se=/[\u05BE\u05C0\u05C3\u05C6\u05D0-\u05EA\u05EF-\u05F4\u0600-\u0605\u0608\u060B\u060D\u061B-\u064A\u0660-\u0669\u066B-\u066F\u0671-\u06D5\u06DD\u06E5\u06E6\u06EE\u06EF\u06FA-\u070D\u070F\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07C0-\u07EA\u07F4\u07F5\u07FA\u07FE-\u0815\u081A\u0824\u0828\u0830-\u083E\u0840-\u0858\u085E\u0860-\u086A\u0870-\u088E\u0890\u0891\u08A0-\u08C9\u08E2\u200F\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBC2\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFC\uFE70-\uFE74\uFE76-\uFEFC\u{10800}-\u{10805}\u{10808}\u{1080A}-\u{10835}\u{10837}\u{10838}\u{1083C}\u{1083F}-\u{10855}\u{10857}-\u{1089E}\u{108A7}-\u{108AF}\u{108E0}-\u{108F2}\u{108F4}\u{108F5}\u{108FB}-\u{1091B}\u{10920}-\u{10939}\u{1093F}\u{10980}-\u{109B7}\u{109BC}-\u{109CF}\u{109D2}-\u{10A00}\u{10A10}-\u{10A13}\u{10A15}-\u{10A17}\u{10A19}-\u{10A35}\u{10A40}-\u{10A48}\u{10A50}-\u{10A58}\u{10A60}-\u{10A9F}\u{10AC0}-\u{10AE4}\u{10AEB}-\u{10AF6}\u{10B00}-\u{10B35}\u{10B40}-\u{10B55}\u{10B58}-\u{10B72}\u{10B78}-\u{10B91}\u{10B99}-\u{10B9C}\u{10BA9}-\u{10BAF}\u{10C00}-\u{10C48}\u{10C80}-\u{10CB2}\u{10CC0}-\u{10CF2}\u{10CFA}-\u{10D23}\u{10D30}-\u{10D39}\u{10E60}-\u{10E7E}\u{10E80}-\u{10EA9}\u{10EAD}\u{10EB0}\u{10EB1}\u{10F00}-\u{10F27}\u{10F30}-\u{10F45}\u{10F51}-\u{10F59}\u{10F70}-\u{10F81}\u{10F86}-\u{10F89}\u{10FB0}-\u{10FCB}\u{10FE0}-\u{10FF6}\u{1E800}-\u{1E8C4}\u{1E8C7}-\u{1E8CF}\u{1E900}-\u{1E943}\u{1E94B}\u{1E950}-\u{1E959}\u{1E95E}\u{1E95F}\u{1EC71}-\u{1ECB4}\u{1ED01}-\u{1ED3D}\u{1EE00}-\u{1EE03}\u{1EE05}-\u{1EE1F}\u{1EE21}\u{1EE22}\u{1EE24}\u{1EE27}\u{1EE29}-\u{1EE32}\u{1EE34}-\u{1EE37}\u{1EE39}\u{1EE3B}\u{1EE42}\u{1EE47}\u{1EE49}\u{1EE4B}\u{1EE4D}-\u{1EE4F}\u{1EE51}\u{1EE52}\u{1EE54}\u{1EE57}\u{1EE59}\u{1EE5B}\u{1EE5D}\u{1EE5F}\u{1EE61}\u{1EE62}\u{1EE64}\u{1EE67}-\u{1EE6A}\u{1EE6C}-\u{1EE72}\u{1EE74}-\u{1EE77}\u{1EE79}-\u{1EE7C}\u{1EE7E}\u{1EE80}-\u{1EE89}\u{1EE8B}-\u{1EE9B}\u{1EEA1}-\u{1EEA3}\u{1EEA5}-\u{1EEA9}\u{1EEAB}-\u{1EEBB}]/u,ae=/[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02B8\u02BB-\u02C1\u02D0\u02D1\u02E0-\u02E4\u02EE\u0370-\u0373\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0482\u048A-\u052F\u0531-\u0556\u0559-\u0589\u0903-\u0939\u093B\u093D-\u0940\u0949-\u094C\u094E-\u0950\u0958-\u0961\u0964-\u0980\u0982\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD-\u09C0\u09C7\u09C8\u09CB\u09CC\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E1\u09E6-\u09F1\u09F4-\u09FA\u09FC\u09FD\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3E-\u0A40\u0A59-\u0A5C\u0A5E\u0A66-\u0A6F\u0A72-\u0A74\u0A76\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD-\u0AC0\u0AC9\u0ACB\u0ACC\u0AD0\u0AE0\u0AE1\u0AE6-\u0AF0\u0AF9\u0B02\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B3E\u0B40\u0B47\u0B48\u0B4B\u0B4C\u0B57\u0B5C\u0B5D\u0B5F-\u0B61\u0B66-\u0B77\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE\u0BBF\u0BC1\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCC\u0BD0\u0BD7\u0BE6-\u0BF2\u0C01-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C41-\u0C44\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C66-\u0C6F\u0C77\u0C7F\u0C80\u0C82-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD-\u0CC4\u0CC6-\u0CC8\u0CCA\u0CCB\u0CD5\u0CD6\u0CDD\u0CDE\u0CE0\u0CE1\u0CE6-\u0CEF\u0CF1-\u0CF3\u0D02-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D40\u0D46-\u0D48\u0D4A-\u0D4C\u0D4E\u0D4F\u0D54-\u0D61\u0D66-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCF-\u0DD1\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2-\u0DF4\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E4F-\u0E5B\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00-\u0F17\u0F1A-\u0F34\u0F36\u0F38\u0F3E-\u0F47\u0F49-\u0F6C\u0F7F\u0F85\u0F88-\u0F8C\u0FBE-\u0FC5\u0FC7-\u0FCC\u0FCE-\u0FDA\u1000-\u102C\u1031\u1038\u103B\u103C\u103F-\u1057\u105A-\u105D\u1061-\u1070\u1075-\u1081\u1083\u1084\u1087-\u108C\u108E-\u109C\u109E-\u10C5\u10C7\u10CD\u10D0-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1360-\u137C\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u167F\u1681-\u169A\u16A0-\u16F8\u1700-\u1711\u1715\u171F-\u1731\u1734-\u1736\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17B6\u17BE-\u17C5\u17C7\u17C8\u17D4-\u17DA\u17DC\u17E0-\u17E9\u1810-\u1819\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1923-\u1926\u1929-\u192B\u1930\u1931\u1933-\u1938\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A16\u1A19\u1A1A\u1A1E-\u1A55\u1A57\u1A61\u1A63\u1A64\u1A6D-\u1A72\u1A80-\u1A89\u1A90-\u1A99\u1AA0-\u1AAD\u1B04-\u1B33\u1B35\u1B3B\u1B3D-\u1B41\u1B43-\u1B4C\u1B50-\u1B6A\u1B74-\u1B7E\u1B82-\u1BA1\u1BA6\u1BA7\u1BAA\u1BAE-\u1BE5\u1BE7\u1BEA-\u1BEC\u1BEE\u1BF2\u1BF3\u1BFC-\u1C2B\u1C34\u1C35\u1C3B-\u1C49\u1C4D-\u1C88\u1C90-\u1CBA\u1CBD-\u1CC7\u1CD3\u1CE1\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5-\u1CF7\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200E\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u214F\u2160-\u2188\u2336-\u237A\u2395\u249C-\u24E9\u26AC\u2800-\u28FF\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D70\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u302E\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u3190-\u31BF\u31F0-\u321C\u3220-\u324F\u3260-\u327B\u327F-\u32B0\u32C0-\u32CB\u32D0-\u3376\u337B-\u33DD\u33E0-\u33FE\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA60C\uA610-\uA62B\uA640-\uA66E\uA680-\uA69D\uA6A0-\uA6EF\uA6F2-\uA6F7\uA722-\uA787\uA789-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA824\uA827\uA830-\uA837\uA840-\uA873\uA880-\uA8C3\uA8CE-\uA8D9\uA8F2-\uA8FE\uA900-\uA925\uA92E-\uA946\uA952\uA953\uA95F-\uA97C\uA983-\uA9B2\uA9B4\uA9B5\uA9BA\uA9BB\uA9BE-\uA9CD\uA9CF-\uA9D9\uA9DE-\uA9E4\uA9E6-\uA9FE\uAA00-\uAA28\uAA2F\uAA30\uAA33\uAA34\uAA40-\uAA42\uAA44-\uAA4B\uAA4D\uAA50-\uAA59\uAA5C-\uAA7B\uAA7D-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAAEB\uAAEE-\uAAF5\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB69\uAB70-\uABE4\uABE6\uABE7\uABE9-\uABEC\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uD800-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC\u{10000}-\u{1000B}\u{1000D}-\u{10026}\u{10028}-\u{1003A}\u{1003C}\u{1003D}\u{1003F}-\u{1004D}\u{10050}-\u{1005D}\u{10080}-\u{100FA}\u{10100}\u{10102}\u{10107}-\u{10133}\u{10137}-\u{1013F}\u{1018D}\u{1018E}\u{101D0}-\u{101FC}\u{10280}-\u{1029C}\u{102A0}-\u{102D0}\u{10300}-\u{10323}\u{1032D}-\u{1034A}\u{10350}-\u{10375}\u{10380}-\u{1039D}\u{1039F}-\u{103C3}\u{103C8}-\u{103D5}\u{10400}-\u{1049D}\u{104A0}-\u{104A9}\u{104B0}-\u{104D3}\u{104D8}-\u{104FB}\u{10500}-\u{10527}\u{10530}-\u{10563}\u{1056F}-\u{1057A}\u{1057C}-\u{1058A}\u{1058C}-\u{10592}\u{10594}\u{10595}\u{10597}-\u{105A1}\u{105A3}-\u{105B1}\u{105B3}-\u{105B9}\u{105BB}\u{105BC}\u{10600}-\u{10736}\u{10740}-\u{10755}\u{10760}-\u{10767}\u{10780}-\u{10785}\u{10787}-\u{107B0}\u{107B2}-\u{107BA}\u{11000}\u{11002}-\u{11037}\u{11047}-\u{1104D}\u{11066}-\u{1106F}\u{11071}\u{11072}\u{11075}\u{11082}-\u{110B2}\u{110B7}\u{110B8}\u{110BB}-\u{110C1}\u{110CD}\u{110D0}-\u{110E8}\u{110F0}-\u{110F9}\u{11103}-\u{11126}\u{1112C}\u{11136}-\u{11147}\u{11150}-\u{11172}\u{11174}-\u{11176}\u{11182}-\u{111B5}\u{111BF}-\u{111C8}\u{111CD}\u{111CE}\u{111D0}-\u{111DF}\u{111E1}-\u{111F4}\u{11200}-\u{11211}\u{11213}-\u{1122E}\u{11232}\u{11233}\u{11235}\u{11238}-\u{1123D}\u{1123F}\u{11240}\u{11280}-\u{11286}\u{11288}\u{1128A}-\u{1128D}\u{1128F}-\u{1129D}\u{1129F}-\u{112A9}\u{112B0}-\u{112DE}\u{112E0}-\u{112E2}\u{112F0}-\u{112F9}\u{11302}\u{11303}\u{11305}-\u{1130C}\u{1130F}\u{11310}\u{11313}-\u{11328}\u{1132A}-\u{11330}\u{11332}\u{11333}\u{11335}-\u{11339}\u{1133D}-\u{1133F}\u{11341}-\u{11344}\u{11347}\u{11348}\u{1134B}-\u{1134D}\u{11350}\u{11357}\u{1135D}-\u{11363}\u{11400}-\u{11437}\u{11440}\u{11441}\u{11445}\u{11447}-\u{1145B}\u{1145D}\u{1145F}-\u{11461}\u{11480}-\u{114B2}\u{114B9}\u{114BB}-\u{114BE}\u{114C1}\u{114C4}-\u{114C7}\u{114D0}-\u{114D9}\u{11580}-\u{115B1}\u{115B8}-\u{115BB}\u{115BE}\u{115C1}-\u{115DB}\u{11600}-\u{11632}\u{1163B}\u{1163C}\u{1163E}\u{11641}-\u{11644}\u{11650}-\u{11659}\u{11680}-\u{116AA}\u{116AC}\u{116AE}\u{116AF}\u{116B6}\u{116B8}\u{116B9}\u{116C0}-\u{116C9}\u{11700}-\u{1171A}\u{11720}\u{11721}\u{11726}\u{11730}-\u{11746}\u{11800}-\u{1182E}\u{11838}\u{1183B}\u{118A0}-\u{118F2}\u{118FF}-\u{11906}\u{11909}\u{1190C}-\u{11913}\u{11915}\u{11916}\u{11918}-\u{11935}\u{11937}\u{11938}\u{1193D}\u{1193F}-\u{11942}\u{11944}-\u{11946}\u{11950}-\u{11959}\u{119A0}-\u{119A7}\u{119AA}-\u{119D3}\u{119DC}-\u{119DF}\u{119E1}-\u{119E4}\u{11A00}\u{11A07}\u{11A08}\u{11A0B}-\u{11A32}\u{11A39}\u{11A3A}\u{11A3F}-\u{11A46}\u{11A50}\u{11A57}\u{11A58}\u{11A5C}-\u{11A89}\u{11A97}\u{11A9A}-\u{11AA2}\u{11AB0}-\u{11AF8}\u{11B00}-\u{11B09}\u{11C00}-\u{11C08}\u{11C0A}-\u{11C2F}\u{11C3E}-\u{11C45}\u{11C50}-\u{11C6C}\u{11C70}-\u{11C8F}\u{11CA9}\u{11CB1}\u{11CB4}\u{11D00}-\u{11D06}\u{11D08}\u{11D09}\u{11D0B}-\u{11D30}\u{11D46}\u{11D50}-\u{11D59}\u{11D60}-\u{11D65}\u{11D67}\u{11D68}\u{11D6A}-\u{11D8E}\u{11D93}\u{11D94}\u{11D96}\u{11D98}\u{11DA0}-\u{11DA9}\u{11EE0}-\u{11EF2}\u{11EF5}-\u{11EF8}\u{11F02}-\u{11F10}\u{11F12}-\u{11F35}\u{11F3E}\u{11F3F}\u{11F41}\u{11F43}-\u{11F59}\u{11FB0}\u{11FC0}-\u{11FD4}\u{11FFF}-\u{12399}\u{12400}-\u{1246E}\u{12470}-\u{12474}\u{12480}-\u{12543}\u{12F90}-\u{12FF2}\u{13000}-\u{1343F}\u{13441}-\u{13446}\u{14400}-\u{14646}\u{16800}-\u{16A38}\u{16A40}-\u{16A5E}\u{16A60}-\u{16A69}\u{16A6E}-\u{16ABE}\u{16AC0}-\u{16AC9}\u{16AD0}-\u{16AED}\u{16AF5}\u{16B00}-\u{16B2F}\u{16B37}-\u{16B45}\u{16B50}-\u{16B59}\u{16B5B}-\u{16B61}\u{16B63}-\u{16B77}\u{16B7D}-\u{16B8F}\u{16E40}-\u{16E9A}\u{16F00}-\u{16F4A}\u{16F50}-\u{16F87}\u{16F93}-\u{16F9F}\u{16FE0}\u{16FE1}\u{16FE3}\u{16FF0}\u{16FF1}\u{17000}-\u{187F7}\u{18800}-\u{18CD5}\u{18D00}-\u{18D08}\u{1AFF0}-\u{1AFF3}\u{1AFF5}-\u{1AFFB}\u{1AFFD}\u{1AFFE}\u{1B000}-\u{1B122}\u{1B132}\u{1B150}-\u{1B152}\u{1B155}\u{1B164}-\u{1B167}\u{1B170}-\u{1B2FB}\u{1BC00}-\u{1BC6A}\u{1BC70}-\u{1BC7C}\u{1BC80}-\u{1BC88}\u{1BC90}-\u{1BC99}\u{1BC9C}\u{1BC9F}\u{1CF50}-\u{1CFC3}\u{1D000}-\u{1D0F5}\u{1D100}-\u{1D126}\u{1D129}-\u{1D166}\u{1D16A}-\u{1D172}\u{1D183}\u{1D184}\u{1D18C}-\u{1D1A9}\u{1D1AE}-\u{1D1E8}\u{1D2C0}-\u{1D2D3}\u{1D2E0}-\u{1D2F3}\u{1D360}-\u{1D378}\u{1D400}-\u{1D454}\u{1D456}-\u{1D49C}\u{1D49E}\u{1D49F}\u{1D4A2}\u{1D4A5}\u{1D4A6}\u{1D4A9}-\u{1D4AC}\u{1D4AE}-\u{1D4B9}\u{1D4BB}\u{1D4BD}-\u{1D4C3}\u{1D4C5}-\u{1D505}\u{1D507}-\u{1D50A}\u{1D50D}-\u{1D514}\u{1D516}-\u{1D51C}\u{1D51E}-\u{1D539}\u{1D53B}-\u{1D53E}\u{1D540}-\u{1D544}\u{1D546}\u{1D54A}-\u{1D550}\u{1D552}-\u{1D6A5}\u{1D6A8}-\u{1D6DA}\u{1D6DC}-\u{1D714}\u{1D716}-\u{1D74E}\u{1D750}-\u{1D788}\u{1D78A}-\u{1D7C2}\u{1D7C4}-\u{1D7CB}\u{1D800}-\u{1D9FF}\u{1DA37}-\u{1DA3A}\u{1DA6D}-\u{1DA74}\u{1DA76}-\u{1DA83}\u{1DA85}-\u{1DA8B}\u{1DF00}-\u{1DF1E}\u{1DF25}-\u{1DF2A}\u{1E030}-\u{1E06D}\u{1E100}-\u{1E12C}\u{1E137}-\u{1E13D}\u{1E140}-\u{1E149}\u{1E14E}\u{1E14F}\u{1E290}-\u{1E2AD}\u{1E2C0}-\u{1E2EB}\u{1E2F0}-\u{1E2F9}\u{1E4D0}-\u{1E4EB}\u{1E4F0}-\u{1E4F9}\u{1E7E0}-\u{1E7E6}\u{1E7E8}-\u{1E7EB}\u{1E7ED}\u{1E7EE}\u{1E7F0}-\u{1E7FE}\u{1F110}-\u{1F12E}\u{1F130}-\u{1F169}\u{1F170}-\u{1F1AC}\u{1F1E6}-\u{1F202}\u{1F210}-\u{1F23B}\u{1F240}-\u{1F248}\u{1F250}\u{1F251}\u{20000}-\u{2A6DF}\u{2A700}-\u{2B739}\u{2B740}-\u{2B81D}\u{2B820}-\u{2CEA1}\u{2CEB0}-\u{2EBE0}\u{2F800}-\u{2FA1D}\u{30000}-\u{3134A}\u{31350}-\u{323AF}\u{F0000}-\u{FFFFD}\u{100000}-\u{10FFFD}]/u,re=/[\u05BE\u05C0\u05C3\u05C6\u05D0-\u05EA\u05EF-\u05F4\u0608\u060B\u060D\u061B-\u064A\u066D-\u066F\u0671-\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u070D\u070F\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07C0-\u07EA\u07F4\u07F5\u07FA\u07FE-\u0815\u081A\u0824\u0828\u0830-\u083E\u0840-\u0858\u085E\u0860-\u086A\u0870-\u088E\u08A0-\u08C9\u200F\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBC2\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFC\uFE70-\uFE74\uFE76-\uFEFC\u{10800}-\u{10805}\u{10808}\u{1080A}-\u{10835}\u{10837}\u{10838}\u{1083C}\u{1083F}-\u{10855}\u{10857}-\u{1089E}\u{108A7}-\u{108AF}\u{108E0}-\u{108F2}\u{108F4}\u{108F5}\u{108FB}-\u{1091B}\u{10920}-\u{10939}\u{1093F}\u{10980}-\u{109B7}\u{109BC}-\u{109CF}\u{109D2}-\u{10A00}\u{10A10}-\u{10A13}\u{10A15}-\u{10A17}\u{10A19}-\u{10A35}\u{10A40}-\u{10A48}\u{10A50}-\u{10A58}\u{10A60}-\u{10A9F}\u{10AC0}-\u{10AE4}\u{10AEB}-\u{10AF6}\u{10B00}-\u{10B35}\u{10B40}-\u{10B55}\u{10B58}-\u{10B72}\u{10B78}-\u{10B91}\u{10B99}-\u{10B9C}\u{10BA9}-\u{10BAF}\u{10C00}-\u{10C48}\u{10C80}-\u{10CB2}\u{10CC0}-\u{10CF2}\u{10CFA}-\u{10D23}\u{10E80}-\u{10EA9}\u{10EAD}\u{10EB0}\u{10EB1}\u{10F00}-\u{10F27}\u{10F30}-\u{10F45}\u{10F51}-\u{10F59}\u{10F70}-\u{10F81}\u{10F86}-\u{10F89}\u{10FB0}-\u{10FCB}\u{10FE0}-\u{10FF6}\u{1E800}-\u{1E8C4}\u{1E8C7}-\u{1E8CF}\u{1E900}-\u{1E943}\u{1E94B}\u{1E950}-\u{1E959}\u{1E95E}\u{1E95F}\u{1EC71}-\u{1ECB4}\u{1ED01}-\u{1ED3D}\u{1EE00}-\u{1EE03}\u{1EE05}-\u{1EE1F}\u{1EE21}\u{1EE22}\u{1EE24}\u{1EE27}\u{1EE29}-\u{1EE32}\u{1EE34}-\u{1EE37}\u{1EE39}\u{1EE3B}\u{1EE42}\u{1EE47}\u{1EE49}\u{1EE4B}\u{1EE4D}-\u{1EE4F}\u{1EE51}\u{1EE52}\u{1EE54}\u{1EE57}\u{1EE59}\u{1EE5B}\u{1EE5D}\u{1EE5F}\u{1EE61}\u{1EE62}\u{1EE64}\u{1EE67}-\u{1EE6A}\u{1EE6C}-\u{1EE72}\u{1EE74}-\u{1EE77}\u{1EE79}-\u{1EE7C}\u{1EE7E}\u{1EE80}-\u{1EE89}\u{1EE8B}-\u{1EE9B}\u{1EEA1}-\u{1EEA3}\u{1EEA5}-\u{1EEA9}\u{1EEAB}-\u{1EEBB}]/u,te=/^[\0-\x08\x0E-\x1B!-@\[-`\{-\x84\x86-\xA9\xAB-\xB4\xB6-\xB9\xBB-\xBF\xD7\xF7\u02B9\u02BA\u02C2-\u02CF\u02D2-\u02DF\u02E5-\u02ED\u02EF-\u036F\u0374\u0375\u037E\u0384\u0385\u0387\u03F6\u0483-\u0489\u058A\u058D-\u058F\u0591-\u05C7\u05D0-\u05EA\u05EF-\u05F4\u0600-\u070D\u070F-\u074A\u074D-\u07B1\u07C0-\u07FA\u07FD-\u082D\u0830-\u083E\u0840-\u085B\u085E\u0860-\u086A\u0870-\u088E\u0890\u0891\u0898-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962\u0963\u0981\u09BC\u09C1-\u09C4\u09CD\u09E2\u09E3\u09F2\u09F3\u09FB\u09FE\u0A01\u0A02\u0A3C\u0A41\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7\u0AC8\u0ACD\u0AE2\u0AE3\u0AF1\u0AFA-\u0AFF\u0B01\u0B3C\u0B3F\u0B41-\u0B44\u0B4D\u0B55\u0B56\u0B62\u0B63\u0B82\u0BC0\u0BCD\u0BF3-\u0BFA\u0C00\u0C04\u0C3C\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C78-\u0C7E\u0C81\u0CBC\u0CCC\u0CCD\u0CE2\u0CE3\u0D00\u0D01\u0D3B\u0D3C\u0D41-\u0D44\u0D4D\u0D62\u0D63\u0D81\u0DCA\u0DD2-\u0DD4\u0DD6\u0E31\u0E34-\u0E3A\u0E3F\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECE\u0F18\u0F19\u0F35\u0F37\u0F39-\u0F3D\u0F71-\u0F7E\u0F80-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039\u103A\u103D\u103E\u1058\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085\u1086\u108D\u109D\u135D-\u135F\u1390-\u1399\u1400\u169B\u169C\u1712-\u1714\u1732\u1733\u1752\u1753\u1772\u1773\u17B4\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DB\u17DD\u17F0-\u17F9\u1800-\u180F\u1885\u1886\u18A9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193B\u1940\u1944\u1945\u19DE-\u19FF\u1A17\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1ACE\u1B00-\u1B03\u1B34\u1B36-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80\u1B81\u1BA2-\u1BA5\u1BA8\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8\u1CF9\u1DC0-\u1DFF\u1FBD\u1FBF-\u1FC1\u1FCD-\u1FCF\u1FDD-\u1FDF\u1FED-\u1FEF\u1FFD\u1FFE\u200B-\u200D\u200F-\u2027\u202F-\u205E\u2060-\u2064\u206A-\u2070\u2074-\u207E\u2080-\u208E\u20A0-\u20C0\u20D0-\u20F0\u2100\u2101\u2103-\u2106\u2108\u2109\u2114\u2116-\u2118\u211E-\u2123\u2125\u2127\u2129\u212E\u213A\u213B\u2140-\u2144\u214A-\u214D\u2150-\u215F\u2189-\u218B\u2190-\u2335\u237B-\u2394\u2396-\u2426\u2440-\u244A\u2460-\u249B\u24EA-\u26AB\u26AD-\u27FF\u2900-\u2B73\u2B76-\u2B95\u2B97-\u2BFF\u2CE5-\u2CEA\u2CEF-\u2CF1\u2CF9-\u2CFF\u2D7F\u2DE0-\u2E5D\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFB\u3001-\u3004\u3008-\u3020\u302A-\u302D\u3030\u3036\u3037\u303D-\u303F\u3099-\u309C\u30A0\u30FB\u31C0-\u31E3\u321D\u321E\u3250-\u325F\u327C-\u327E\u32B1-\u32BF\u32CC-\u32CF\u3377-\u337A\u33DE\u33DF\u33FF\u4DC0-\u4DFF\uA490-\uA4C6\uA60D-\uA60F\uA66F-\uA67F\uA69E\uA69F\uA6F0\uA6F1\uA700-\uA721\uA788\uA802\uA806\uA80B\uA825\uA826\uA828-\uA82C\uA838\uA839\uA874-\uA877\uA8C4\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9BD\uA9E5\uAA29-\uAA2E\uAA31\uAA32\uAA35\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEC\uAAED\uAAF6\uAB6A\uAB6B\uABE5\uABE8\uABED\uFB1D-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBC2\uFBD3-\uFD8F\uFD92-\uFDC7\uFDCF\uFDF0-\uFE19\uFE20-\uFE52\uFE54-\uFE66\uFE68-\uFE6B\uFE70-\uFE74\uFE76-\uFEFC\uFEFF\uFF01-\uFF20\uFF3B-\uFF40\uFF5B-\uFF65\uFFE0-\uFFE6\uFFE8-\uFFEE\uFFF9-\uFFFD\u{10101}\u{10140}-\u{1018C}\u{10190}-\u{1019C}\u{101A0}\u{101FD}\u{102E0}-\u{102FB}\u{10376}-\u{1037A}\u{10800}-\u{10805}\u{10808}\u{1080A}-\u{10835}\u{10837}\u{10838}\u{1083C}\u{1083F}-\u{10855}\u{10857}-\u{1089E}\u{108A7}-\u{108AF}\u{108E0}-\u{108F2}\u{108F4}\u{108F5}\u{108FB}-\u{1091B}\u{1091F}-\u{10939}\u{1093F}\u{10980}-\u{109B7}\u{109BC}-\u{109CF}\u{109D2}-\u{10A03}\u{10A05}\u{10A06}\u{10A0C}-\u{10A13}\u{10A15}-\u{10A17}\u{10A19}-\u{10A35}\u{10A38}-\u{10A3A}\u{10A3F}-\u{10A48}\u{10A50}-\u{10A58}\u{10A60}-\u{10A9F}\u{10AC0}-\u{10AE6}\u{10AEB}-\u{10AF6}\u{10B00}-\u{10B35}\u{10B39}-\u{10B55}\u{10B58}-\u{10B72}\u{10B78}-\u{10B91}\u{10B99}-\u{10B9C}\u{10BA9}-\u{10BAF}\u{10C00}-\u{10C48}\u{10C80}-\u{10CB2}\u{10CC0}-\u{10CF2}\u{10CFA}-\u{10D27}\u{10D30}-\u{10D39}\u{10E60}-\u{10E7E}\u{10E80}-\u{10EA9}\u{10EAB}-\u{10EAD}\u{10EB0}\u{10EB1}\u{10EFD}-\u{10F27}\u{10F30}-\u{10F59}\u{10F70}-\u{10F89}\u{10FB0}-\u{10FCB}\u{10FE0}-\u{10FF6}\u{11001}\u{11038}-\u{11046}\u{11052}-\u{11065}\u{11070}\u{11073}\u{11074}\u{1107F}-\u{11081}\u{110B3}-\u{110B6}\u{110B9}\u{110BA}\u{110C2}\u{11100}-\u{11102}\u{11127}-\u{1112B}\u{1112D}-\u{11134}\u{11173}\u{11180}\u{11181}\u{111B6}-\u{111BE}\u{111C9}-\u{111CC}\u{111CF}\u{1122F}-\u{11231}\u{11234}\u{11236}\u{11237}\u{1123E}\u{11241}\u{112DF}\u{112E3}-\u{112EA}\u{11300}\u{11301}\u{1133B}\u{1133C}\u{11340}\u{11366}-\u{1136C}\u{11370}-\u{11374}\u{11438}-\u{1143F}\u{11442}-\u{11444}\u{11446}\u{1145E}\u{114B3}-\u{114B8}\u{114BA}\u{114BF}\u{114C0}\u{114C2}\u{114C3}\u{115B2}-\u{115B5}\u{115BC}\u{115BD}\u{115BF}\u{115C0}\u{115DC}\u{115DD}\u{11633}-\u{1163A}\u{1163D}\u{1163F}\u{11640}\u{11660}-\u{1166C}\u{116AB}\u{116AD}\u{116B0}-\u{116B5}\u{116B7}\u{1171D}-\u{1171F}\u{11722}-\u{11725}\u{11727}-\u{1172B}\u{1182F}-\u{11837}\u{11839}\u{1183A}\u{1193B}\u{1193C}\u{1193E}\u{11943}\u{119D4}-\u{119D7}\u{119DA}\u{119DB}\u{119E0}\u{11A01}-\u{11A06}\u{11A09}\u{11A0A}\u{11A33}-\u{11A38}\u{11A3B}-\u{11A3E}\u{11A47}\u{11A51}-\u{11A56}\u{11A59}-\u{11A5B}\u{11A8A}-\u{11A96}\u{11A98}\u{11A99}\u{11C30}-\u{11C36}\u{11C38}-\u{11C3D}\u{11C92}-\u{11CA7}\u{11CAA}-\u{11CB0}\u{11CB2}\u{11CB3}\u{11CB5}\u{11CB6}\u{11D31}-\u{11D36}\u{11D3A}\u{11D3C}\u{11D3D}\u{11D3F}-\u{11D45}\u{11D47}\u{11D90}\u{11D91}\u{11D95}\u{11D97}\u{11EF3}\u{11EF4}\u{11F00}\u{11F01}\u{11F36}-\u{11F3A}\u{11F40}\u{11F42}\u{11FD5}-\u{11FF1}\u{13440}\u{13447}-\u{13455}\u{16AF0}-\u{16AF4}\u{16B30}-\u{16B36}\u{16F4F}\u{16F8F}-\u{16F92}\u{16FE2}\u{16FE4}\u{1BC9D}\u{1BC9E}\u{1BCA0}-\u{1BCA3}\u{1CF00}-\u{1CF2D}\u{1CF30}-\u{1CF46}\u{1D167}-\u{1D169}\u{1D173}-\u{1D182}\u{1D185}-\u{1D18B}\u{1D1AA}-\u{1D1AD}\u{1D1E9}\u{1D1EA}\u{1D200}-\u{1D245}\u{1D300}-\u{1D356}\u{1D6DB}\u{1D715}\u{1D74F}\u{1D789}\u{1D7C3}\u{1D7CE}-\u{1D7FF}\u{1DA00}-\u{1DA36}\u{1DA3B}-\u{1DA6C}\u{1DA75}\u{1DA84}\u{1DA9B}-\u{1DA9F}\u{1DAA1}-\u{1DAAF}\u{1E000}-\u{1E006}\u{1E008}-\u{1E018}\u{1E01B}-\u{1E021}\u{1E023}\u{1E024}\u{1E026}-\u{1E02A}\u{1E08F}\u{1E130}-\u{1E136}\u{1E2AE}\u{1E2EC}-\u{1E2EF}\u{1E2FF}\u{1E4EC}-\u{1E4EF}\u{1E800}-\u{1E8C4}\u{1E8C7}-\u{1E8D6}\u{1E900}-\u{1E94B}\u{1E950}-\u{1E959}\u{1E95E}\u{1E95F}\u{1EC71}-\u{1ECB4}\u{1ED01}-\u{1ED3D}\u{1EE00}-\u{1EE03}\u{1EE05}-\u{1EE1F}\u{1EE21}\u{1EE22}\u{1EE24}\u{1EE27}\u{1EE29}-\u{1EE32}\u{1EE34}-\u{1EE37}\u{1EE39}\u{1EE3B}\u{1EE42}\u{1EE47}\u{1EE49}\u{1EE4B}\u{1EE4D}-\u{1EE4F}\u{1EE51}\u{1EE52}\u{1EE54}\u{1EE57}\u{1EE59}\u{1EE5B}\u{1EE5D}\u{1EE5F}\u{1EE61}\u{1EE62}\u{1EE64}\u{1EE67}-\u{1EE6A}\u{1EE6C}-\u{1EE72}\u{1EE74}-\u{1EE77}\u{1EE79}-\u{1EE7C}\u{1EE7E}\u{1EE80}-\u{1EE89}\u{1EE8B}-\u{1EE9B}\u{1EEA1}-\u{1EEA3}\u{1EEA5}-\u{1EEA9}\u{1EEAB}-\u{1EEBB}\u{1EEF0}\u{1EEF1}\u{1F000}-\u{1F02B}\u{1F030}-\u{1F093}\u{1F0A0}-\u{1F0AE}\u{1F0B1}-\u{1F0BF}\u{1F0C1}-\u{1F0CF}\u{1F0D1}-\u{1F0F5}\u{1F100}-\u{1F10F}\u{1F12F}\u{1F16A}-\u{1F16F}\u{1F1AD}\u{1F260}-\u{1F265}\u{1F300}-\u{1F6D7}\u{1F6DC}-\u{1F6EC}\u{1F6F0}-\u{1F6FC}\u{1F700}-\u{1F776}\u{1F77B}-\u{1F7D9}\u{1F7E0}-\u{1F7EB}\u{1F7F0}\u{1F800}-\u{1F80B}\u{1F810}-\u{1F847}\u{1F850}-\u{1F859}\u{1F860}-\u{1F887}\u{1F890}-\u{1F8AD}\u{1F8B0}\u{1F8B1}\u{1F900}-\u{1FA53}\u{1FA60}-\u{1FA6D}\u{1FA70}-\u{1FA7C}\u{1FA80}-\u{1FA88}\u{1FA90}-\u{1FABD}\u{1FABF}-\u{1FAC5}\u{1FACE}-\u{1FADB}\u{1FAE0}-\u{1FAE8}\u{1FAF0}-\u{1FAF8}\u{1FB00}-\u{1FB92}\u{1FB94}-\u{1FBCA}\u{1FBF0}-\u{1FBF9}\u{E0001}\u{E0020}-\u{E007F}\u{E0100}-\u{E01EF}]*$/u,oe=/[0-9\xB2\xB3\xB9\u05BE\u05C0\u05C3\u05C6\u05D0-\u05EA\u05EF-\u05F4\u0600-\u0605\u0608\u060B\u060D\u061B-\u064A\u0660-\u0669\u066B-\u066F\u0671-\u06D5\u06DD\u06E5\u06E6\u06EE-\u070D\u070F\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07C0-\u07EA\u07F4\u07F5\u07FA\u07FE-\u0815\u081A\u0824\u0828\u0830-\u083E\u0840-\u0858\u085E\u0860-\u086A\u0870-\u088E\u0890\u0891\u08A0-\u08C9\u08E2\u200F\u2070\u2074-\u2079\u2080-\u2089\u2488-\u249B\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBC2\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFC\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\u{102E1}-\u{102FB}\u{10800}-\u{10805}\u{10808}\u{1080A}-\u{10835}\u{10837}\u{10838}\u{1083C}\u{1083F}-\u{10855}\u{10857}-\u{1089E}\u{108A7}-\u{108AF}\u{108E0}-\u{108F2}\u{108F4}\u{108F5}\u{108FB}-\u{1091B}\u{10920}-\u{10939}\u{1093F}\u{10980}-\u{109B7}\u{109BC}-\u{109CF}\u{109D2}-\u{10A00}\u{10A10}-\u{10A13}\u{10A15}-\u{10A17}\u{10A19}-\u{10A35}\u{10A40}-\u{10A48}\u{10A50}-\u{10A58}\u{10A60}-\u{10A9F}\u{10AC0}-\u{10AE4}\u{10AEB}-\u{10AF6}\u{10B00}-\u{10B35}\u{10B40}-\u{10B55}\u{10B58}-\u{10B72}\u{10B78}-\u{10B91}\u{10B99}-\u{10B9C}\u{10BA9}-\u{10BAF}\u{10C00}-\u{10C48}\u{10C80}-\u{10CB2}\u{10CC0}-\u{10CF2}\u{10CFA}-\u{10D23}\u{10D30}-\u{10D39}\u{10E60}-\u{10E7E}\u{10E80}-\u{10EA9}\u{10EAD}\u{10EB0}\u{10EB1}\u{10F00}-\u{10F27}\u{10F30}-\u{10F45}\u{10F51}-\u{10F59}\u{10F70}-\u{10F81}\u{10F86}-\u{10F89}\u{10FB0}-\u{10FCB}\u{10FE0}-\u{10FF6}\u{1D7CE}-\u{1D7FF}\u{1E800}-\u{1E8C4}\u{1E8C7}-\u{1E8CF}\u{1E900}-\u{1E943}\u{1E94B}\u{1E950}-\u{1E959}\u{1E95E}\u{1E95F}\u{1EC71}-\u{1ECB4}\u{1ED01}-\u{1ED3D}\u{1EE00}-\u{1EE03}\u{1EE05}-\u{1EE1F}\u{1EE21}\u{1EE22}\u{1EE24}\u{1EE27}\u{1EE29}-\u{1EE32}\u{1EE34}-\u{1EE37}\u{1EE39}\u{1EE3B}\u{1EE42}\u{1EE47}\u{1EE49}\u{1EE4B}\u{1EE4D}-\u{1EE4F}\u{1EE51}\u{1EE52}\u{1EE54}\u{1EE57}\u{1EE59}\u{1EE5B}\u{1EE5D}\u{1EE5F}\u{1EE61}\u{1EE62}\u{1EE64}\u{1EE67}-\u{1EE6A}\u{1EE6C}-\u{1EE72}\u{1EE74}-\u{1EE77}\u{1EE79}-\u{1EE7C}\u{1EE7E}\u{1EE80}-\u{1EE89}\u{1EE8B}-\u{1EE9B}\u{1EEA1}-\u{1EEA3}\u{1EEA5}-\u{1EEA9}\u{1EEAB}-\u{1EEBB}\u{1F100}-\u{1F10A}\u{1FBF0}-\u{1FBF9}][\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0898-\u089F\u08CA-\u08E1\u08E3-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962\u0963\u0981\u09BC\u09C1-\u09C4\u09CD\u09E2\u09E3\u09FE\u0A01\u0A02\u0A3C\u0A41\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7\u0AC8\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01\u0B3C\u0B3F\u0B41-\u0B44\u0B4D\u0B55\u0B56\u0B62\u0B63\u0B82\u0BC0\u0BCD\u0C00\u0C04\u0C3C\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81\u0CBC\u0CCC\u0CCD\u0CE2\u0CE3\u0D00\u0D01\u0D3B\u0D3C\u0D41-\u0D44\u0D4D\u0D62\u0D63\u0D81\u0DCA\u0DD2-\u0DD4\u0DD6\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECE\u0F18\u0F19\u0F35\u0F37\u0F39\u0F71-\u0F7E\u0F80-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039\u103A\u103D\u103E\u1058\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085\u1086\u108D\u109D\u135D-\u135F\u1712-\u1714\u1732\u1733\u1752\u1753\u1772\u1773\u17B4\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DD\u180B-\u180D\u180F\u1885\u1886\u18A9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193B\u1A17\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1ACE\u1B00-\u1B03\u1B34\u1B36-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80\u1B81\u1BA2-\u1BA5\u1BA8\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8\u1CF9\u1DC0-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302D\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA825\uA826\uA82C\uA8C4\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9BD\uA9E5\uAA29-\uAA2E\uAA31\uAA32\uAA35\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEC\uAAED\uAAF6\uABE5\uABE8\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\u{101FD}\u{102E0}\u{10376}-\u{1037A}\u{10A01}-\u{10A03}\u{10A05}\u{10A06}\u{10A0C}-\u{10A0F}\u{10A38}-\u{10A3A}\u{10A3F}\u{10AE5}\u{10AE6}\u{10D24}-\u{10D27}\u{10EAB}\u{10EAC}\u{10EFD}-\u{10EFF}\u{10F46}-\u{10F50}\u{10F82}-\u{10F85}\u{11001}\u{11038}-\u{11046}\u{11070}\u{11073}\u{11074}\u{1107F}-\u{11081}\u{110B3}-\u{110B6}\u{110B9}\u{110BA}\u{110C2}\u{11100}-\u{11102}\u{11127}-\u{1112B}\u{1112D}-\u{11134}\u{11173}\u{11180}\u{11181}\u{111B6}-\u{111BE}\u{111C9}-\u{111CC}\u{111CF}\u{1122F}-\u{11231}\u{11234}\u{11236}\u{11237}\u{1123E}\u{11241}\u{112DF}\u{112E3}-\u{112EA}\u{11300}\u{11301}\u{1133B}\u{1133C}\u{11340}\u{11366}-\u{1136C}\u{11370}-\u{11374}\u{11438}-\u{1143F}\u{11442}-\u{11444}\u{11446}\u{1145E}\u{114B3}-\u{114B8}\u{114BA}\u{114BF}\u{114C0}\u{114C2}\u{114C3}\u{115B2}-\u{115B5}\u{115BC}\u{115BD}\u{115BF}\u{115C0}\u{115DC}\u{115DD}\u{11633}-\u{1163A}\u{1163D}\u{1163F}\u{11640}\u{116AB}\u{116AD}\u{116B0}-\u{116B5}\u{116B7}\u{1171D}-\u{1171F}\u{11722}-\u{11725}\u{11727}-\u{1172B}\u{1182F}-\u{11837}\u{11839}\u{1183A}\u{1193B}\u{1193C}\u{1193E}\u{11943}\u{119D4}-\u{119D7}\u{119DA}\u{119DB}\u{119E0}\u{11A01}-\u{11A06}\u{11A09}\u{11A0A}\u{11A33}-\u{11A38}\u{11A3B}-\u{11A3E}\u{11A47}\u{11A51}-\u{11A56}\u{11A59}-\u{11A5B}\u{11A8A}-\u{11A96}\u{11A98}\u{11A99}\u{11C30}-\u{11C36}\u{11C38}-\u{11C3D}\u{11C92}-\u{11CA7}\u{11CAA}-\u{11CB0}\u{11CB2}\u{11CB3}\u{11CB5}\u{11CB6}\u{11D31}-\u{11D36}\u{11D3A}\u{11D3C}\u{11D3D}\u{11D3F}-\u{11D45}\u{11D47}\u{11D90}\u{11D91}\u{11D95}\u{11D97}\u{11EF3}\u{11EF4}\u{11F00}\u{11F01}\u{11F36}-\u{11F3A}\u{11F40}\u{11F42}\u{13440}\u{13447}-\u{13455}\u{16AF0}-\u{16AF4}\u{16B30}-\u{16B36}\u{16F4F}\u{16F8F}-\u{16F92}\u{16FE4}\u{1BC9D}\u{1BC9E}\u{1CF00}-\u{1CF2D}\u{1CF30}-\u{1CF46}\u{1D167}-\u{1D169}\u{1D17B}-\u{1D182}\u{1D185}-\u{1D18B}\u{1D1AA}-\u{1D1AD}\u{1D242}-\u{1D244}\u{1DA00}-\u{1DA36}\u{1DA3B}-\u{1DA6C}\u{1DA75}\u{1DA84}\u{1DA9B}-\u{1DA9F}\u{1DAA1}-\u{1DAAF}\u{1E000}-\u{1E006}\u{1E008}-\u{1E018}\u{1E01B}-\u{1E021}\u{1E023}\u{1E024}\u{1E026}-\u{1E02A}\u{1E08F}\u{1E130}-\u{1E136}\u{1E2AE}\u{1E2EC}-\u{1E2EF}\u{1E4EC}-\u{1E4EF}\u{1E8D0}-\u{1E8D6}\u{1E944}-\u{1E94A}\u{E0100}-\u{E01EF}]*$/u,ee=/[0-9\xB2\xB3\xB9\u06F0-\u06F9\u2070\u2074-\u2079\u2080-\u2089\u2488-\u249B\uFF10-\uFF19\u{102E1}-\u{102FB}\u{1D7CE}-\u{1D7FF}\u{1F100}-\u{1F10A}\u{1FBF0}-\u{1FBF9}]/u,F11=/[\u0600-\u0605\u0660-\u0669\u066B\u066C\u06DD\u0890\u0891\u08E2\u{10D30}-\u{10D39}\u{10E60}-\u{10E7E}]/u,A11=/^[\0-\x08\x0E-\x1B!-\x84\x86-\u0377\u037A-\u037F\u0384-\u038A\u038C\u038E-\u03A1\u03A3-\u052F\u0531-\u0556\u0559-\u058A\u058D-\u058F\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0606\u0607\u0609\u060A\u060C\u060E-\u061A\u064B-\u065F\u066A\u0670\u06D6-\u06DC\u06DE-\u06E4\u06E7-\u06ED\u06F0-\u06F9\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07F6-\u07F9\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0898-\u089F\u08CA-\u08E1\u08E3-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09FE\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A76\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AF1\u0AF9-\u0AFF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B55-\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B77\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BFA\u0C00-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3C-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C5D\u0C60-\u0C63\u0C66-\u0C6F\u0C77-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDD\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1-\u0CF3\u0D00-\u0D0C\u0D0E-\u0D10\u0D12-\u0D44\u0D46-\u0D48\u0D4A-\u0D4F\u0D54-\u0D63\u0D66-\u0D7F\u0D81-\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2-\u0DF4\u0E01-\u0E3A\u0E3F-\u0E5B\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECE\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00-\u0F47\u0F49-\u0F6C\u0F71-\u0F97\u0F99-\u0FBC\u0FBE-\u0FCC\u0FCE-\u0FDA\u1000-\u10C5\u10C7\u10CD\u10D0-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u137C\u1380-\u1399\u13A0-\u13F5\u13F8-\u13FD\u1400-\u167F\u1681-\u169C\u16A0-\u16F8\u1700-\u1715\u171F-\u1736\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17DD\u17E0-\u17E9\u17F0-\u17F9\u1800-\u1819\u1820-\u1878\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1940\u1944-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u19DE-\u1A1B\u1A1E-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA0-\u1AAD\u1AB0-\u1ACE\u1B00-\u1B4C\u1B50-\u1B7E\u1B80-\u1BF3\u1BFC-\u1C37\u1C3B-\u1C49\u1C4D-\u1C88\u1C90-\u1CBA\u1CBD-\u1CC7\u1CD0-\u1CFA\u1D00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FC4\u1FC6-\u1FD3\u1FD6-\u1FDB\u1FDD-\u1FEF\u1FF2-\u1FF4\u1FF6-\u1FFE\u200B-\u200E\u2010-\u2027\u202F-\u205E\u2060-\u2064\u206A-\u2071\u2074-\u208E\u2090-\u209C\u20A0-\u20C0\u20D0-\u20F0\u2100-\u218B\u2190-\u2426\u2440-\u244A\u2460-\u2B73\u2B76-\u2B95\u2B97-\u2CF3\u2CF9-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D70\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2E5D\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFB\u3001-\u303F\u3041-\u3096\u3099-\u30FF\u3105-\u312F\u3131-\u318E\u3190-\u31E3\u31F0-\u321E\u3220-\uA48C\uA490-\uA4C6\uA4D0-\uA62B\uA640-\uA6F7\uA700-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA82C\uA830-\uA839\uA840-\uA877\uA880-\uA8C5\uA8CE-\uA8D9\uA8E0-\uA953\uA95F-\uA97C\uA980-\uA9CD\uA9CF-\uA9D9\uA9DE-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA5C-\uAAC2\uAADB-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB6B\uAB70-\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uD800-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1E\uFB29\uFD3E-\uFD4F\uFDCF\uFDFD-\uFE19\uFE20-\uFE52\uFE54-\uFE66\uFE68-\uFE6B\uFEFF\uFF01-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC\uFFE0-\uFFE6\uFFE8-\uFFEE\uFFF9-\uFFFD\u{10000}-\u{1000B}\u{1000D}-\u{10026}\u{10028}-\u{1003A}\u{1003C}\u{1003D}\u{1003F}-\u{1004D}\u{10050}-\u{1005D}\u{10080}-\u{100FA}\u{10100}-\u{10102}\u{10107}-\u{10133}\u{10137}-\u{1018E}\u{10190}-\u{1019C}\u{101A0}\u{101D0}-\u{101FD}\u{10280}-\u{1029C}\u{102A0}-\u{102D0}\u{102E0}-\u{102FB}\u{10300}-\u{10323}\u{1032D}-\u{1034A}\u{10350}-\u{1037A}\u{10380}-\u{1039D}\u{1039F}-\u{103C3}\u{103C8}-\u{103D5}\u{10400}-\u{1049D}\u{104A0}-\u{104A9}\u{104B0}-\u{104D3}\u{104D8}-\u{104FB}\u{10500}-\u{10527}\u{10530}-\u{10563}\u{1056F}-\u{1057A}\u{1057C}-\u{1058A}\u{1058C}-\u{10592}\u{10594}\u{10595}\u{10597}-\u{105A1}\u{105A3}-\u{105B1}\u{105B3}-\u{105B9}\u{105BB}\u{105BC}\u{10600}-\u{10736}\u{10740}-\u{10755}\u{10760}-\u{10767}\u{10780}-\u{10785}\u{10787}-\u{107B0}\u{107B2}-\u{107BA}\u{1091F}\u{10A01}-\u{10A03}\u{10A05}\u{10A06}\u{10A0C}-\u{10A0F}\u{10A38}-\u{10A3A}\u{10A3F}\u{10AE5}\u{10AE6}\u{10B39}-\u{10B3F}\u{10D24}-\u{10D27}\u{10EAB}\u{10EAC}\u{10EFD}-\u{10EFF}\u{10F46}-\u{10F50}\u{10F82}-\u{10F85}\u{11000}-\u{1104D}\u{11052}-\u{11075}\u{1107F}-\u{110C2}\u{110CD}\u{110D0}-\u{110E8}\u{110F0}-\u{110F9}\u{11100}-\u{11134}\u{11136}-\u{11147}\u{11150}-\u{11176}\u{11180}-\u{111DF}\u{111E1}-\u{111F4}\u{11200}-\u{11211}\u{11213}-\u{11241}\u{11280}-\u{11286}\u{11288}\u{1128A}-\u{1128D}\u{1128F}-\u{1129D}\u{1129F}-\u{112A9}\u{112B0}-\u{112EA}\u{112F0}-\u{112F9}\u{11300}-\u{11303}\u{11305}-\u{1130C}\u{1130F}\u{11310}\u{11313}-\u{11328}\u{1132A}-\u{11330}\u{11332}\u{11333}\u{11335}-\u{11339}\u{1133B}-\u{11344}\u{11347}\u{11348}\u{1134B}-\u{1134D}\u{11350}\u{11357}\u{1135D}-\u{11363}\u{11366}-\u{1136C}\u{11370}-\u{11374}\u{11400}-\u{1145B}\u{1145D}-\u{11461}\u{11480}-\u{114C7}\u{114D0}-\u{114D9}\u{11580}-\u{115B5}\u{115B8}-\u{115DD}\u{11600}-\u{11644}\u{11650}-\u{11659}\u{11660}-\u{1166C}\u{11680}-\u{116B9}\u{116C0}-\u{116C9}\u{11700}-\u{1171A}\u{1171D}-\u{1172B}\u{11730}-\u{11746}\u{11800}-\u{1183B}\u{118A0}-\u{118F2}\u{118FF}-\u{11906}\u{11909}\u{1190C}-\u{11913}\u{11915}\u{11916}\u{11918}-\u{11935}\u{11937}\u{11938}\u{1193B}-\u{11946}\u{11950}-\u{11959}\u{119A0}-\u{119A7}\u{119AA}-\u{119D7}\u{119DA}-\u{119E4}\u{11A00}-\u{11A47}\u{11A50}-\u{11AA2}\u{11AB0}-\u{11AF8}\u{11B00}-\u{11B09}\u{11C00}-\u{11C08}\u{11C0A}-\u{11C36}\u{11C38}-\u{11C45}\u{11C50}-\u{11C6C}\u{11C70}-\u{11C8F}\u{11C92}-\u{11CA7}\u{11CA9}-\u{11CB6}\u{11D00}-\u{11D06}\u{11D08}\u{11D09}\u{11D0B}-\u{11D36}\u{11D3A}\u{11D3C}\u{11D3D}\u{11D3F}-\u{11D47}\u{11D50}-\u{11D59}\u{11D60}-\u{11D65}\u{11D67}\u{11D68}\u{11D6A}-\u{11D8E}\u{11D90}\u{11D91}\u{11D93}-\u{11D98}\u{11DA0}-\u{11DA9}\u{11EE0}-\u{11EF8}\u{11F00}-\u{11F10}\u{11F12}-\u{11F3A}\u{11F3E}-\u{11F59}\u{11FB0}\u{11FC0}-\u{11FF1}\u{11FFF}-\u{12399}\u{12400}-\u{1246E}\u{12470}-\u{12474}\u{12480}-\u{12543}\u{12F90}-\u{12FF2}\u{13000}-\u{13455}\u{14400}-\u{14646}\u{16800}-\u{16A38}\u{16A40}-\u{16A5E}\u{16A60}-\u{16A69}\u{16A6E}-\u{16ABE}\u{16AC0}-\u{16AC9}\u{16AD0}-\u{16AED}\u{16AF0}-\u{16AF5}\u{16B00}-\u{16B45}\u{16B50}-\u{16B59}\u{16B5B}-\u{16B61}\u{16B63}-\u{16B77}\u{16B7D}-\u{16B8F}\u{16E40}-\u{16E9A}\u{16F00}-\u{16F4A}\u{16F4F}-\u{16F87}\u{16F8F}-\u{16F9F}\u{16FE0}-\u{16FE4}\u{16FF0}\u{16FF1}\u{17000}-\u{187F7}\u{18800}-\u{18CD5}\u{18D00}-\u{18D08}\u{1AFF0}-\u{1AFF3}\u{1AFF5}-\u{1AFFB}\u{1AFFD}\u{1AFFE}\u{1B000}-\u{1B122}\u{1B132}\u{1B150}-\u{1B152}\u{1B155}\u{1B164}-\u{1B167}\u{1B170}-\u{1B2FB}\u{1BC00}-\u{1BC6A}\u{1BC70}-\u{1BC7C}\u{1BC80}-\u{1BC88}\u{1BC90}-\u{1BC99}\u{1BC9C}-\u{1BCA3}\u{1CF00}-\u{1CF2D}\u{1CF30}-\u{1CF46}\u{1CF50}-\u{1CFC3}\u{1D000}-\u{1D0F5}\u{1D100}-\u{1D126}\u{1D129}-\u{1D1EA}\u{1D200}-\u{1D245}\u{1D2C0}-\u{1D2D3}\u{1D2E0}-\u{1D2F3}\u{1D300}-\u{1D356}\u{1D360}-\u{1D378}\u{1D400}-\u{1D454}\u{1D456}-\u{1D49C}\u{1D49E}\u{1D49F}\u{1D4A2}\u{1D4A5}\u{1D4A6}\u{1D4A9}-\u{1D4AC}\u{1D4AE}-\u{1D4B9}\u{1D4BB}\u{1D4BD}-\u{1D4C3}\u{1D4C5}-\u{1D505}\u{1D507}-\u{1D50A}\u{1D50D}-\u{1D514}\u{1D516}-\u{1D51C}\u{1D51E}-\u{1D539}\u{1D53B}-\u{1D53E}\u{1D540}-\u{1D544}\u{1D546}\u{1D54A}-\u{1D550}\u{1D552}-\u{1D6A5}\u{1D6A8}-\u{1D7CB}\u{1D7CE}-\u{1DA8B}\u{1DA9B}-\u{1DA9F}\u{1DAA1}-\u{1DAAF}\u{1DF00}-\u{1DF1E}\u{1DF25}-\u{1DF2A}\u{1E000}-\u{1E006}\u{1E008}-\u{1E018}\u{1E01B}-\u{1E021}\u{1E023}\u{1E024}\u{1E026}-\u{1E02A}\u{1E030}-\u{1E06D}\u{1E08F}\u{1E100}-\u{1E12C}\u{1E130}-\u{1E13D}\u{1E140}-\u{1E149}\u{1E14E}\u{1E14F}\u{1E290}-\u{1E2AE}\u{1E2C0}-\u{1E2F9}\u{1E2FF}\u{1E4D0}-\u{1E4F9}\u{1E7E0}-\u{1E7E6}\u{1E7E8}-\u{1E7EB}\u{1E7ED}\u{1E7EE}\u{1E7F0}-\u{1E7FE}\u{1E8D0}-\u{1E8D6}\u{1E944}-\u{1E94A}\u{1EEF0}\u{1EEF1}\u{1F000}-\u{1F02B}\u{1F030}-\u{1F093}\u{1F0A0}-\u{1F0AE}\u{1F0B1}-\u{1F0BF}\u{1F0C1}-\u{1F0CF}\u{1F0D1}-\u{1F0F5}\u{1F100}-\u{1F1AD}\u{1F1E6}-\u{1F202}\u{1F210}-\u{1F23B}\u{1F240}-\u{1F248}\u{1F250}\u{1F251}\u{1F260}-\u{1F265}\u{1F300}-\u{1F6D7}\u{1F6DC}-\u{1F6EC}\u{1F6F0}-\u{1F6FC}\u{1F700}-\u{1F776}\u{1F77B}-\u{1F7D9}\u{1F7E0}-\u{1F7EB}\u{1F7F0}\u{1F800}-\u{1F80B}\u{1F810}-\u{1F847}\u{1F850}-\u{1F859}\u{1F860}-\u{1F887}\u{1F890}-\u{1F8AD}\u{1F8B0}\u{1F8B1}\u{1F900}-\u{1FA53}\u{1FA60}-\u{1FA6D}\u{1FA70}-\u{1FA7C}\u{1FA80}-\u{1FA88}\u{1FA90}-\u{1FABD}\u{1FABF}-\u{1FAC5}\u{1FACE}-\u{1FADB}\u{1FAE0}-\u{1FAE8}\u{1FAF0}-\u{1FAF8}\u{1FB00}-\u{1FB92}\u{1FB94}-\u{1FBCA}\u{1FBF0}-\u{1FBF9}\u{20000}-\u{2A6DF}\u{2A700}-\u{2B739}\u{2B740}-\u{2B81D}\u{2B820}-\u{2CEA1}\u{2CEB0}-\u{2EBE0}\u{2F800}-\u{2FA1D}\u{30000}-\u{3134A}\u{31350}-\u{323AF}\u{E0001}\u{E0020}-\u{E007F}\u{E0100}-\u{E01EF}\u{F0000}-\u{FFFFD}\u{100000}-\u{10FFFD}]*$/u,B11=/[0-9A-Za-z\xAA\xB2\xB3\xB5\xB9\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02B8\u02BB-\u02C1\u02D0\u02D1\u02E0-\u02E4\u02EE\u0370-\u0373\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0482\u048A-\u052F\u0531-\u0556\u0559-\u0589\u06F0-\u06F9\u0903-\u0939\u093B\u093D-\u0940\u0949-\u094C\u094E-\u0950\u0958-\u0961\u0964-\u0980\u0982\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD-\u09C0\u09C7\u09C8\u09CB\u09CC\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E1\u09E6-\u09F1\u09F4-\u09FA\u09FC\u09FD\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3E-\u0A40\u0A59-\u0A5C\u0A5E\u0A66-\u0A6F\u0A72-\u0A74\u0A76\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD-\u0AC0\u0AC9\u0ACB\u0ACC\u0AD0\u0AE0\u0AE1\u0AE6-\u0AF0\u0AF9\u0B02\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B3E\u0B40\u0B47\u0B48\u0B4B\u0B4C\u0B57\u0B5C\u0B5D\u0B5F-\u0B61\u0B66-\u0B77\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE\u0BBF\u0BC1\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCC\u0BD0\u0BD7\u0BE6-\u0BF2\u0C01-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C41-\u0C44\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C66-\u0C6F\u0C77\u0C7F\u0C80\u0C82-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD-\u0CC4\u0CC6-\u0CC8\u0CCA\u0CCB\u0CD5\u0CD6\u0CDD\u0CDE\u0CE0\u0CE1\u0CE6-\u0CEF\u0CF1-\u0CF3\u0D02-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D40\u0D46-\u0D48\u0D4A-\u0D4C\u0D4E\u0D4F\u0D54-\u0D61\u0D66-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCF-\u0DD1\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2-\u0DF4\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E4F-\u0E5B\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00-\u0F17\u0F1A-\u0F34\u0F36\u0F38\u0F3E-\u0F47\u0F49-\u0F6C\u0F7F\u0F85\u0F88-\u0F8C\u0FBE-\u0FC5\u0FC7-\u0FCC\u0FCE-\u0FDA\u1000-\u102C\u1031\u1038\u103B\u103C\u103F-\u1057\u105A-\u105D\u1061-\u1070\u1075-\u1081\u1083\u1084\u1087-\u108C\u108E-\u109C\u109E-\u10C5\u10C7\u10CD\u10D0-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1360-\u137C\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u167F\u1681-\u169A\u16A0-\u16F8\u1700-\u1711\u1715\u171F-\u1731\u1734-\u1736\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17B6\u17BE-\u17C5\u17C7\u17C8\u17D4-\u17DA\u17DC\u17E0-\u17E9\u1810-\u1819\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1923-\u1926\u1929-\u192B\u1930\u1931\u1933-\u1938\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A16\u1A19\u1A1A\u1A1E-\u1A55\u1A57\u1A61\u1A63\u1A64\u1A6D-\u1A72\u1A80-\u1A89\u1A90-\u1A99\u1AA0-\u1AAD\u1B04-\u1B33\u1B35\u1B3B\u1B3D-\u1B41\u1B43-\u1B4C\u1B50-\u1B6A\u1B74-\u1B7E\u1B82-\u1BA1\u1BA6\u1BA7\u1BAA\u1BAE-\u1BE5\u1BE7\u1BEA-\u1BEC\u1BEE\u1BF2\u1BF3\u1BFC-\u1C2B\u1C34\u1C35\u1C3B-\u1C49\u1C4D-\u1C88\u1C90-\u1CBA\u1CBD-\u1CC7\u1CD3\u1CE1\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5-\u1CF7\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200E\u2070\u2071\u2074-\u2079\u207F-\u2089\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u214F\u2160-\u2188\u2336-\u237A\u2395\u2488-\u24E9\u26AC\u2800-\u28FF\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D70\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u302E\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u3190-\u31BF\u31F0-\u321C\u3220-\u324F\u3260-\u327B\u327F-\u32B0\u32C0-\u32CB\u32D0-\u3376\u337B-\u33DD\u33E0-\u33FE\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA60C\uA610-\uA62B\uA640-\uA66E\uA680-\uA69D\uA6A0-\uA6EF\uA6F2-\uA6F7\uA722-\uA787\uA789-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA824\uA827\uA830-\uA837\uA840-\uA873\uA880-\uA8C3\uA8CE-\uA8D9\uA8F2-\uA8FE\uA900-\uA925\uA92E-\uA946\uA952\uA953\uA95F-\uA97C\uA983-\uA9B2\uA9B4\uA9B5\uA9BA\uA9BB\uA9BE-\uA9CD\uA9CF-\uA9D9\uA9DE-\uA9E4\uA9E6-\uA9FE\uAA00-\uAA28\uAA2F\uAA30\uAA33\uAA34\uAA40-\uAA42\uAA44-\uAA4B\uAA4D\uAA50-\uAA59\uAA5C-\uAA7B\uAA7D-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAAEB\uAAEE-\uAAF5\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB69\uAB70-\uABE4\uABE6\uABE7\uABE9-\uABEC\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uD800-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFF10-\uFF19\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC\u{10000}-\u{1000B}\u{1000D}-\u{10026}\u{10028}-\u{1003A}\u{1003C}\u{1003D}\u{1003F}-\u{1004D}\u{10050}-\u{1005D}\u{10080}-\u{100FA}\u{10100}\u{10102}\u{10107}-\u{10133}\u{10137}-\u{1013F}\u{1018D}\u{1018E}\u{101D0}-\u{101FC}\u{10280}-\u{1029C}\u{102A0}-\u{102D0}\u{102E1}-\u{102FB}\u{10300}-\u{10323}\u{1032D}-\u{1034A}\u{10350}-\u{10375}\u{10380}-\u{1039D}\u{1039F}-\u{103C3}\u{103C8}-\u{103D5}\u{10400}-\u{1049D}\u{104A0}-\u{104A9}\u{104B0}-\u{104D3}\u{104D8}-\u{104FB}\u{10500}-\u{10527}\u{10530}-\u{10563}\u{1056F}-\u{1057A}\u{1057C}-\u{1058A}\u{1058C}-\u{10592}\u{10594}\u{10595}\u{10597}-\u{105A1}\u{105A3}-\u{105B1}\u{105B3}-\u{105B9}\u{105BB}\u{105BC}\u{10600}-\u{10736}\u{10740}-\u{10755}\u{10760}-\u{10767}\u{10780}-\u{10785}\u{10787}-\u{107B0}\u{107B2}-\u{107BA}\u{11000}\u{11002}-\u{11037}\u{11047}-\u{1104D}\u{11066}-\u{1106F}\u{11071}\u{11072}\u{11075}\u{11082}-\u{110B2}\u{110B7}\u{110B8}\u{110BB}-\u{110C1}\u{110CD}\u{110D0}-\u{110E8}\u{110F0}-\u{110F9}\u{11103}-\u{11126}\u{1112C}\u{11136}-\u{11147}\u{11150}-\u{11172}\u{11174}-\u{11176}\u{11182}-\u{111B5}\u{111BF}-\u{111C8}\u{111CD}\u{111CE}\u{111D0}-\u{111DF}\u{111E1}-\u{111F4}\u{11200}-\u{11211}\u{11213}-\u{1122E}\u{11232}\u{11233}\u{11235}\u{11238}-\u{1123D}\u{1123F}\u{11240}\u{11280}-\u{11286}\u{11288}\u{1128A}-\u{1128D}\u{1128F}-\u{1129D}\u{1129F}-\u{112A9}\u{112B0}-\u{112DE}\u{112E0}-\u{112E2}\u{112F0}-\u{112F9}\u{11302}\u{11303}\u{11305}-\u{1130C}\u{1130F}\u{11310}\u{11313}-\u{11328}\u{1132A}-\u{11330}\u{11332}\u{11333}\u{11335}-\u{11339}\u{1133D}-\u{1133F}\u{11341}-\u{11344}\u{11347}\u{11348}\u{1134B}-\u{1134D}\u{11350}\u{11357}\u{1135D}-\u{11363}\u{11400}-\u{11437}\u{11440}\u{11441}\u{11445}\u{11447}-\u{1145B}\u{1145D}\u{1145F}-\u{11461}\u{11480}-\u{114B2}\u{114B9}\u{114BB}-\u{114BE}\u{114C1}\u{114C4}-\u{114C7}\u{114D0}-\u{114D9}\u{11580}-\u{115B1}\u{115B8}-\u{115BB}\u{115BE}\u{115C1}-\u{115DB}\u{11600}-\u{11632}\u{1163B}\u{1163C}\u{1163E}\u{11641}-\u{11644}\u{11650}-\u{11659}\u{11680}-\u{116AA}\u{116AC}\u{116AE}\u{116AF}\u{116B6}\u{116B8}\u{116B9}\u{116C0}-\u{116C9}\u{11700}-\u{1171A}\u{11720}\u{11721}\u{11726}\u{11730}-\u{11746}\u{11800}-\u{1182E}\u{11838}\u{1183B}\u{118A0}-\u{118F2}\u{118FF}-\u{11906}\u{11909}\u{1190C}-\u{11913}\u{11915}\u{11916}\u{11918}-\u{11935}\u{11937}\u{11938}\u{1193D}\u{1193F}-\u{11942}\u{11944}-\u{11946}\u{11950}-\u{11959}\u{119A0}-\u{119A7}\u{119AA}-\u{119D3}\u{119DC}-\u{119DF}\u{119E1}-\u{119E4}\u{11A00}\u{11A07}\u{11A08}\u{11A0B}-\u{11A32}\u{11A39}\u{11A3A}\u{11A3F}-\u{11A46}\u{11A50}\u{11A57}\u{11A58}\u{11A5C}-\u{11A89}\u{11A97}\u{11A9A}-\u{11AA2}\u{11AB0}-\u{11AF8}\u{11B00}-\u{11B09}\u{11C00}-\u{11C08}\u{11C0A}-\u{11C2F}\u{11C3E}-\u{11C45}\u{11C50}-\u{11C6C}\u{11C70}-\u{11C8F}\u{11CA9}\u{11CB1}\u{11CB4}\u{11D00}-\u{11D06}\u{11D08}\u{11D09}\u{11D0B}-\u{11D30}\u{11D46}\u{11D50}-\u{11D59}\u{11D60}-\u{11D65}\u{11D67}\u{11D68}\u{11D6A}-\u{11D8E}\u{11D93}\u{11D94}\u{11D96}\u{11D98}\u{11DA0}-\u{11DA9}\u{11EE0}-\u{11EF2}\u{11EF5}-\u{11EF8}\u{11F02}-\u{11F10}\u{11F12}-\u{11F35}\u{11F3E}\u{11F3F}\u{11F41}\u{11F43}-\u{11F59}\u{11FB0}\u{11FC0}-\u{11FD4}\u{11FFF}-\u{12399}\u{12400}-\u{1246E}\u{12470}-\u{12474}\u{12480}-\u{12543}\u{12F90}-\u{12FF2}\u{13000}-\u{1343F}\u{13441}-\u{13446}\u{14400}-\u{14646}\u{16800}-\u{16A38}\u{16A40}-\u{16A5E}\u{16A60}-\u{16A69}\u{16A6E}-\u{16ABE}\u{16AC0}-\u{16AC9}\u{16AD0}-\u{16AED}\u{16AF5}\u{16B00}-\u{16B2F}\u{16B37}-\u{16B45}\u{16B50}-\u{16B59}\u{16B5B}-\u{16B61}\u{16B63}-\u{16B77}\u{16B7D}-\u{16B8F}\u{16E40}-\u{16E9A}\u{16F00}-\u{16F4A}\u{16F50}-\u{16F87}\u{16F93}-\u{16F9F}\u{16FE0}\u{16FE1}\u{16FE3}\u{16FF0}\u{16FF1}\u{17000}-\u{187F7}\u{18800}-\u{18CD5}\u{18D00}-\u{18D08}\u{1AFF0}-\u{1AFF3}\u{1AFF5}-\u{1AFFB}\u{1AFFD}\u{1AFFE}\u{1B000}-\u{1B122}\u{1B132}\u{1B150}-\u{1B152}\u{1B155}\u{1B164}-\u{1B167}\u{1B170}-\u{1B2FB}\u{1BC00}-\u{1BC6A}\u{1BC70}-\u{1BC7C}\u{1BC80}-\u{1BC88}\u{1BC90}-\u{1BC99}\u{1BC9C}\u{1BC9F}\u{1CF50}-\u{1CFC3}\u{1D000}-\u{1D0F5}\u{1D100}-\u{1D126}\u{1D129}-\u{1D166}\u{1D16A}-\u{1D172}\u{1D183}\u{1D184}\u{1D18C}-\u{1D1A9}\u{1D1AE}-\u{1D1E8}\u{1D2C0}-\u{1D2D3}\u{1D2E0}-\u{1D2F3}\u{1D360}-\u{1D378}\u{1D400}-\u{1D454}\u{1D456}-\u{1D49C}\u{1D49E}\u{1D49F}\u{1D4A2}\u{1D4A5}\u{1D4A6}\u{1D4A9}-\u{1D4AC}\u{1D4AE}-\u{1D4B9}\u{1D4BB}\u{1D4BD}-\u{1D4C3}\u{1D4C5}-\u{1D505}\u{1D507}-\u{1D50A}\u{1D50D}-\u{1D514}\u{1D516}-\u{1D51C}\u{1D51E}-\u{1D539}\u{1D53B}-\u{1D53E}\u{1D540}-\u{1D544}\u{1D546}\u{1D54A}-\u{1D550}\u{1D552}-\u{1D6A5}\u{1D6A8}-\u{1D6DA}\u{1D6DC}-\u{1D714}\u{1D716}-\u{1D74E}\u{1D750}-\u{1D788}\u{1D78A}-\u{1D7C2}\u{1D7C4}-\u{1D7CB}\u{1D7CE}-\u{1D9FF}\u{1DA37}-\u{1DA3A}\u{1DA6D}-\u{1DA74}\u{1DA76}-\u{1DA83}\u{1DA85}-\u{1DA8B}\u{1DF00}-\u{1DF1E}\u{1DF25}-\u{1DF2A}\u{1E030}-\u{1E06D}\u{1E100}-\u{1E12C}\u{1E137}-\u{1E13D}\u{1E140}-\u{1E149}\u{1E14E}\u{1E14F}\u{1E290}-\u{1E2AD}\u{1E2C0}-\u{1E2EB}\u{1E2F0}-\u{1E2F9}\u{1E4D0}-\u{1E4EB}\u{1E4F0}-\u{1E4F9}\u{1E7E0}-\u{1E7E6}\u{1E7E8}-\u{1E7EB}\u{1E7ED}\u{1E7EE}\u{1E7F0}-\u{1E7FE}\u{1F100}-\u{1F10A}\u{1F110}-\u{1F12E}\u{1F130}-\u{1F169}\u{1F170}-\u{1F1AC}\u{1F1E6}-\u{1F202}\u{1F210}-\u{1F23B}\u{1F240}-\u{1F248}\u{1F250}\u{1F251}\u{1FBF0}-\u{1FBF9}\u{20000}-\u{2A6DF}\u{2A700}-\u{2B739}\u{2B740}-\u{2B81D}\u{2B820}-\u{2CEA1}\u{2CEB0}-\u{2EBE0}\u{2F800}-\u{2FA1D}\u{30000}-\u{3134A}\u{31350}-\u{323AF}\u{F0000}-\u{FFFFD}\u{100000}-\u{10FFFD}][\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0898-\u089F\u08CA-\u08E1\u08E3-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962\u0963\u0981\u09BC\u09C1-\u09C4\u09CD\u09E2\u09E3\u09FE\u0A01\u0A02\u0A3C\u0A41\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7\u0AC8\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01\u0B3C\u0B3F\u0B41-\u0B44\u0B4D\u0B55\u0B56\u0B62\u0B63\u0B82\u0BC0\u0BCD\u0C00\u0C04\u0C3C\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81\u0CBC\u0CCC\u0CCD\u0CE2\u0CE3\u0D00\u0D01\u0D3B\u0D3C\u0D41-\u0D44\u0D4D\u0D62\u0D63\u0D81\u0DCA\u0DD2-\u0DD4\u0DD6\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECE\u0F18\u0F19\u0F35\u0F37\u0F39\u0F71-\u0F7E\u0F80-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039\u103A\u103D\u103E\u1058\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085\u1086\u108D\u109D\u135D-\u135F\u1712-\u1714\u1732\u1733\u1752\u1753\u1772\u1773\u17B4\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DD\u180B-\u180D\u180F\u1885\u1886\u18A9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193B\u1A17\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1ACE\u1B00-\u1B03\u1B34\u1B36-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80\u1B81\u1BA2-\u1BA5\u1BA8\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8\u1CF9\u1DC0-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302D\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA825\uA826\uA82C\uA8C4\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9BD\uA9E5\uAA29-\uAA2E\uAA31\uAA32\uAA35\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEC\uAAED\uAAF6\uABE5\uABE8\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\u{101FD}\u{102E0}\u{10376}-\u{1037A}\u{10A01}-\u{10A03}\u{10A05}\u{10A06}\u{10A0C}-\u{10A0F}\u{10A38}-\u{10A3A}\u{10A3F}\u{10AE5}\u{10AE6}\u{10D24}-\u{10D27}\u{10EAB}\u{10EAC}\u{10EFD}-\u{10EFF}\u{10F46}-\u{10F50}\u{10F82}-\u{10F85}\u{11001}\u{11038}-\u{11046}\u{11070}\u{11073}\u{11074}\u{1107F}-\u{11081}\u{110B3}-\u{110B6}\u{110B9}\u{110BA}\u{110C2}\u{11100}-\u{11102}\u{11127}-\u{1112B}\u{1112D}-\u{11134}\u{11173}\u{11180}\u{11181}\u{111B6}-\u{111BE}\u{111C9}-\u{111CC}\u{111CF}\u{1122F}-\u{11231}\u{11234}\u{11236}\u{11237}\u{1123E}\u{11241}\u{112DF}\u{112E3}-\u{112EA}\u{11300}\u{11301}\u{1133B}\u{1133C}\u{11340}\u{11366}-\u{1136C}\u{11370}-\u{11374}\u{11438}-\u{1143F}\u{11442}-\u{11444}\u{11446}\u{1145E}\u{114B3}-\u{114B8}\u{114BA}\u{114BF}\u{114C0}\u{114C2}\u{114C3}\u{115B2}-\u{115B5}\u{115BC}\u{115BD}\u{115BF}\u{115C0}\u{115DC}\u{115DD}\u{11633}-\u{1163A}\u{1163D}\u{1163F}\u{11640}\u{116AB}\u{116AD}\u{116B0}-\u{116B5}\u{116B7}\u{1171D}-\u{1171F}\u{11722}-\u{11725}\u{11727}-\u{1172B}\u{1182F}-\u{11837}\u{11839}\u{1183A}\u{1193B}\u{1193C}\u{1193E}\u{11943}\u{119D4}-\u{119D7}\u{119DA}\u{119DB}\u{119E0}\u{11A01}-\u{11A06}\u{11A09}\u{11A0A}\u{11A33}-\u{11A38}\u{11A3B}-\u{11A3E}\u{11A47}\u{11A51}-\u{11A56}\u{11A59}-\u{11A5B}\u{11A8A}-\u{11A96}\u{11A98}\u{11A99}\u{11C30}-\u{11C36}\u{11C38}-\u{11C3D}\u{11C92}-\u{11CA7}\u{11CAA}-\u{11CB0}\u{11CB2}\u{11CB3}\u{11CB5}\u{11CB6}\u{11D31}-\u{11D36}\u{11D3A}\u{11D3C}\u{11D3D}\u{11D3F}-\u{11D45}\u{11D47}\u{11D90}\u{11D91}\u{11D95}\u{11D97}\u{11EF3}\u{11EF4}\u{11F00}\u{11F01}\u{11F36}-\u{11F3A}\u{11F40}\u{11F42}\u{13440}\u{13447}-\u{13455}\u{16AF0}-\u{16AF4}\u{16B30}-\u{16B36}\u{16F4F}\u{16F8F}-\u{16F92}\u{16FE4}\u{1BC9D}\u{1BC9E}\u{1CF00}-\u{1CF2D}\u{1CF30}-\u{1CF46}\u{1D167}-\u{1D169}\u{1D17B}-\u{1D182}\u{1D185}-\u{1D18B}\u{1D1AA}-\u{1D1AD}\u{1D242}-\u{1D244}\u{1DA00}-\u{1DA36}\u{1DA3B}-\u{1DA6C}\u{1DA75}\u{1DA84}\u{1DA9B}-\u{1DA9F}\u{1DAA1}-\u{1DAAF}\u{1E000}-\u{1E006}\u{1E008}-\u{1E018}\u{1E01B}-\u{1E021}\u{1E023}\u{1E024}\u{1E026}-\u{1E02A}\u{1E08F}\u{1E130}-\u{1E136}\u{1E2AE}\u{1E2EC}-\u{1E2EF}\u{1E4EC}-\u{1E4EF}\u{1E8D0}-\u{1E8D6}\u{1E944}-\u{1E94A}\u{E0100}-\u{E01EF}]*$/u;zR.exports={combiningMarks:pe,combiningClassVirama:ie,validZWNJ:ne,bidiDomain:se,bidiS1LTR:ae,bidiS1RTL:re,bidiS2:te,bidiS3:oe,bidiS4EN:ee,bidiS4AN:F11,bidiS5:A11,bidiS6:B11}});var QR=z((pq1,D11)=>{D11.exports=[[[0,44],4],[[45,46],2],[47,4],[[48,57],2],[[58,64],4],[65,1,"a"],[66,1,"b"],[67,1,"c"],[68,1,"d"],[69,1,"e"],[70,1,"f"],[71,1,"g"],[72,1,"h"],[73,1,"i"],[74,1,"j"],[75,1,"k"],[76,1,"l"],[77,1,"m"],[78,1,"n"],[79,1,"o"],[80,1,"p"],[81,1,"q"],[82,1,"r"],[83,1,"s"],[84,1,"t"],[85,1,"u"],[86,1,"v"],[87,1,"w"],[88,1,"x"],[89,1,"y"],[90,1,"z"],[[91,96],4],[[97,122],2],[[123,127],4],[[128,159],3],[160,5," "],[[161,167],2],[168,5," "],[169,2],[170,1,"a"],[[171,172],2],[173,7],[174,2],[175,5," "],[[176,177],2],[178,1,"2"],[179,1,"3"],[180,5," "],[181,1,""],[182,2],[183,2],[184,5," "],[185,1,"1"],[186,1,"o"],[187,2],[188,1,"14"],[189,1,"12"],[190,1,"34"],[191,2],[192,1,""],[193,1,""],[194,1,""],[195,1,""],[196,1,""],[197,1,""],[198,1,""],[199,1,""],[200,1,""],[201,1,""],[202,1,""],[203,1,""],[204,1,""],[205,1,""],[206,1,""],[207,1,""],[208,1,""],[209,1,""],[210,1,""],[211,1,""],[212,1,""],[213,1,""],[214,1,""],[215,2],[216,1,""],[217,1,""],[218,1,""],[219,1,""],[220,1,""],[221,1,""],[222,1,""],[223,6,"ss"],[[224,246],2],[247,2],[[248,255],2],[256,1,""],[257,2],[258,1,""],[259,2],[260,1,""],[261,2],[262,1,""],[263,2],[264,1,""],[265,2],[266,1,""],[267,2],[268,1,""],[269,2],[270,1,""],[271,2],[272,1,""],[273,2],[274,1,""],[275,2],[276,1,""],[277,2],[278,1,""],[279,2],[280,1,""],[281,2],[282,1,""],[283,2],[284,1,""],[285,2],[286,1,""],[287,2],[288,1,""],[289,2],[290,1,""],[291,2],[292,1,""],[293,2],[294,1,""],[295,2],[296,1,""],[297,2],[298,1,""],[299,2],[300,1,""],[301,2],[302,1,""],[303,2],[304,1,"i"],[305,2],[[306,307],1,"ij"],[308,1,""],[309,2],[310,1,""],[[311,312],2],[313,1,""],[314,2],[315,1,""],[316,2],[317,1,""],[318,2],[[319,320],1,"l"],[321,1,""],[322,2],[323,1,""],[324,2],[325,1,""],[326,2],[327,1,""],[328,2],[329,1,"n"],[330,1,""],[331,2],[332,1,""],[333,2],[334,1,""],[335,2],[336,1,""],[337,2],[338,1,""],[339,2],[340,1,""],[341,2],[342,1,""],[343,2],[344,1,""],[345,2],[346,1,""],[347,2],[348,1,""],[349,2],[350,1,""],[351,2],[352,1,""],[353,2],[354,1,""],[355,2],[356,1,""],[357,2],[358,1,""],[359,2],[360,1,""],[361,2],[362,1,""],[363,2],[364,1,""],[365,2],[366,1,""],[367,2],[368,1,""],[369,2],[370,1,""],[371,2],[372,1,""],[373,2],[374,1,""],[375,2],[376,1,""],[377,1,""],[378,2],[379,1,""],[380,2],[381,1,""],[382,2],[383,1,"s"],[384,2],[385,1,""],[386,1,""],[387,2],[388,1,""],[389,2],[390,1,""],[391,1,""],[392,2],[393,1,""],[394,1,""],[395,1,""],[[396,397],2],[398,1,""],[399,1,""],[400,1,""],[401,1,""],[402,2],[403,1,""],[404,1,""],[405,2],[406,1,""],[407,1,""],[408,1,""],[[409,411],2],[412,1,""],[413,1,""],[414,2],[415,1,""],[416,1,""],[417,2],[418,1,""],[419,2],[420,1,""],[421,2],[422,1,""],[423,1,""],[424,2],[425,1,""],[[426,427],2],[428,1,""],[429,2],[430,1,""],[431,1,""],[432,2],[433,1,""],[434,1,""],[435,1,""],[436,2],[437,1,""],[438,2],[439,1,""],[440,1,""],[[441,443],2],[444,1,""],[[445,451],2],[[452,454],1,"d"],[[455,457],1,"lj"],[[458,460],1,"nj"],[461,1,""],[462,2],[463,1,""],[464,2],[465,1,""],[466,2],[467,1,""],[468,2],[469,1,""],[470,2],[471,1,""],[472,2],[473,1,""],[474,2],[475,1,""],[[476,477],2],[478,1,""],[479,2],[480,1,""],[481,2],[482,1,""],[483,2],[484,1,""],[485,2],[486,1,""],[487,2],[488,1,""],[489,2],[490,1,""],[491,2],[492,1,""],[493,2],[494,1,""],[[495,496],2],[[497,499],1,"dz"],[500,1,""],[501,2],[502,1,""],[503,1,""],[504,1,""],[505,2],[506,1,""],[507,2],[508,1,""],[509,2],[510,1,""],[511,2],[512,1,""],[513,2],[514,1,""],[515,2],[516,1,""],[517,2],[518,1,""],[519,2],[520,1,""],[521,2],[522,1,""],[523,2],[524,1,""],[525,2],[526,1,""],[527,2],[528,1,""],[529,2],[530,1,""],[531,2],[532,1,""],[533,2],[534,1,""],[535,2],[536,1,""],[537,2],[538,1,""],[539,2],[540,1,""],[541,2],[542,1,""],[543,2],[544,1,""],[545,2],[546,1,""],[547,2],[548,1,""],[549,2],[550,1,""],[551,2],[552,1,""],[553,2],[554,1,""],[555,2],[556,1,""],[557,2],[558,1,""],[559,2],[560,1,""],[561,2],[562,1,""],[563,2],[[564,566],2],[[567,569],2],[570,1,""],[571,1,""],[572,2],[573,1,""],[574,1,""],[[575,576],2],[577,1,""],[578,2],[579,1,""],[580,1,""],[581,1,""],[582,1,""],[583,2],[584,1,""],[585,2],[586,1,""],[587,2],[588,1,""],[589,2],[590,1,""],[591,2],[[592,680],2],[[681,685],2],[[686,687],2],[688,1,"h"],[689,1,""],[690,1,"j"],[691,1,"r"],[692,1,""],[693,1,""],[694,1,""],[695,1,"w"],[696,1,"y"],[[697,705],2],[[706,709],2],[[710,721],2],[[722,727],2],[728,5," "],[729,5," "],[730,5," "],[731,5," "],[732,5," "],[733,5," "],[734,2],[735,2],[736,1,""],[737,1,"l"],[738,1,"s"],[739,1,"x"],[740,1,""],[[741,745],2],[[746,747],2],[748,2],[749,2],[750,2],[[751,767],2],[[768,831],2],[832,1,""],[833,1,""],[834,2],[835,1,""],[836,1,""],[837,1,""],[[838,846],2],[847,7],[[848,855],2],[[856,860],2],[[861,863],2],[[864,865],2],[866,2],[[867,879],2],[880,1,""],[881,2],[882,1,""],[883,2],[884,1,""],[885,2],[886,1,""],[887,2],[[888,889],3],[890,5," "],[[891,893],2],[894,5,";"],[895,1,""],[[896,899],3],[900,5," "],[901,5," "],[902,1,""],[903,1,""],[904,1,""],[905,1,""],[906,1,""],[907,3],[908,1,""],[909,3],[910,1,""],[911,1,""],[912,2],[913,1,""],[914,1,""],[915,1,""],[916,1,""],[917,1,""],[918,1,""],[919,1,""],[920,1,""],[921,1,""],[922,1,""],[923,1,""],[924,1,""],[925,1,""],[926,1,""],[927,1,""],[928,1,""],[929,1,""],[930,3],[931,1,""],[932,1,""],[933,1,""],[934,1,""],[935,1,""],[936,1,""],[937,1,""],[938,1,""],[939,1,""],[[940,961],2],[962,6,""],[[963,974],2],[975,1,""],[976,1,""],[977,1,""],[978,1,""],[979,1,""],[980,1,""],[981,1,""],[982,1,""],[983,2],[984,1,""],[985,2],[986,1,""],[987,2],[988,1,""],[989,2],[990,1,""],[991,2],[992,1,""],[993,2],[994,1,""],[995,2],[996,1,""],[997,2],[998,1,""],[999,2],[1000,1,""],[1001,2],[1002,1,""],[1003,2],[1004,1,""],[1005,2],[1006,1,""],[1007,2],[1008,1,""],[1009,1,""],[1010,1,""],[1011,2],[1012,1,""],[1013,1,""],[1014,2],[1015,1,""],[1016,2],[1017,1,""],[1018,1,""],[1019,2],[1020,2],[1021,1,""],[1022,1,""],[1023,1,""],[1024,1,""],[1025,1,""],[1026,1,""],[1027,1,""],[1028,1,""],[1029,1,""],[1030,1,""],[1031,1,""],[1032,1,""],[1033,1,""],[1034,1,""],[1035,1,""],[1036,1,""],[1037,1,""],[1038,1,""],[1039,1,""],[1040,1,""],[1041,1,""],[1042,1,""],[1043,1,""],[1044,1,""],[1045,1,""],[1046,1,""],[1047,1,""],[1048,1,""],[1049,1,""],[1050,1,""],[1051,1,""],[1052,1,""],[1053,1,""],[1054,1,""],[1055,1,""],[1056,1,""],[1057,1,""],[1058,1,""],[1059,1,""],[1060,1,""],[1061,1,""],[1062,1,""],[1063,1,""],[1064,1,""],[1065,1,""],[1066,1,""],[1067,1,""],[1068,1,""],[1069,1,""],[1070,1,""],[1071,1,""],[[1072,1103],2],[1104,2],[[1105,1116],2],[1117,2],[[1118,1119],2],[1120,1,""],[1121,2],[1122,1,""],[1123,2],[1124,1,""],[1125,2],[1126,1,""],[1127,2],[1128,1,""],[1129,2],[1130,1,""],[1131,2],[1132,1,""],[1133,2],[1134,1,""],[1135,2],[1136,1,""],[1137,2],[1138,1,""],[1139,2],[1140,1,""],[1141,2],[1142,1,""],[1143,2],[1144,1,""],[1145,2],[1146,1,""],[1147,2],[1148,1,""],[1149,2],[1150,1,""],[1151,2],[1152,1,""],[1153,2],[1154,2],[[1155,1158],2],[1159,2],[[1160,1161],2],[1162,1,""],[1163,2],[1164,1,""],[1165,2],[1166,1,""],[1167,2],[1168,1,""],[1169,2],[1170,1,""],[1171,2],[1172,1,""],[1173,2],[1174,1,""],[1175,2],[1176,1,""],[1177,2],[1178,1,""],[1179,2],[1180,1,""],[1181,2],[1182,1,""],[1183,2],[1184,1,""],[1185,2],[1186,1,""],[1187,2],[1188,1,""],[1189,2],[1190,1,""],[1191,2],[1192,1,""],[1193,2],[1194,1,""],[1195,2],[1196,1,""],[1197,2],[1198,1,""],[1199,2],[1200,1,""],[1201,2],[1202,1,""],[1203,2],[1204,1,""],[1205,2],[1206,1,""],[1207,2],[1208,1,""],[1209,2],[1210,1,""],[1211,2],[1212,1,""],[1213,2],[1214,1,""],[1215,2],[1216,3],[1217,1,""],[1218,2],[1219,1,""],[1220,2],[1221,1,""],[1222,2],[1223,1,""],[1224,2],[1225,1,""],[1226,2],[1227,1,""],[1228,2],[1229,1,""],[1230,2],[1231,2],[1232,1,""],[1233,2],[1234,1,""],[1235,2],[1236,1,""],[1237,2],[1238,1,""],[1239,2],[1240,1,""],[1241,2],[1242,1,""],[1243,2],[1244,1,""],[1245,2],[1246,1,""],[1247,2],[1248,1,""],[1249,2],[1250,1,""],[1251,2],[1252,1,""],[1253,2],[1254,1,""],[1255,2],[1256,1,""],[1257,2],[1258,1,""],[1259,2],[1260,1,""],[1261,2],[1262,1,""],[1263,2],[1264,1,""],[1265,2],[1266,1,""],[1267,2],[1268,1,""],[1269,2],[1270,1,""],[1271,2],[1272,1,""],[1273,2],[1274,1,""],[1275,2],[1276,1,""],[1277,2],[1278,1,""],[1279,2],[1280,1,""],[1281,2],[1282,1,""],[1283,2],[1284,1,""],[1285,2],[1286,1,""],[1287,2],[1288,1,""],[1289,2],[1290,1,""],[1291,2],[1292,1,""],[1293,2],[1294,1,""],[1295,2],[1296,1,""],[1297,2],[1298,1,""],[1299,2],[1300,1,""],[1301,2],[1302,1,""],[1303,2],[1304,1,""],[1305,2],[1306,1,""],[1307,2],[1308,1,""],[1309,2],[1310,1,""],[1311,2],[1312,1,""],[1313,2],[1314,1,""],[1315,2],[1316,1,""],[1317,2],[1318,1,""],[1319,2],[1320,1,""],[1321,2],[1322,1,""],[1323,2],[1324,1,""],[1325,2],[1326,1,""],[1327,2],[1328,3],[1329,1,""],[1330,1,""],[1331,1,""],[1332,1,""],[1333,1,""],[1334,1,""],[1335,1,""],[1336,1,""],[1337,1,""],[1338,1,""],[1339,1,""],[1340,1,""],[1341,1,""],[1342,1,""],[1343,1,""],[1344,1,""],[1345,1,""],[1346,1,""],[1347,1,""],[1348,1,""],[1349,1,""],[1350,1,""],[1351,1,""],[1352,1,""],[1353,1,""],[1354,1,""],[1355,1,""],[1356,1,""],[1357,1,""],[1358,1,""],[1359,1,""],[1360,1,""],[1361,1,""],[1362,1,""],[1363,1,""],[1364,1,""],[1365,1,""],[1366,1,""],[[1367,1368],3],[1369,2],[[1370,1375],2],[1376,2],[[1377,1414],2],[1415,1,""],[1416,2],[1417,2],[1418,2],[[1419,1420],3],[[1421,1422],2],[1423,2],[1424,3],[[1425,1441],2],[1442,2],[[1443,1455],2],[[1456,1465],2],[1466,2],[[1467,1469],2],[1470,2],[1471,2],[1472,2],[[1473,1474],2],[1475,2],[1476,2],[1477,2],[1478,2],[1479,2],[[1480,1487],3],[[1488,1514],2],[[1515,1518],3],[1519,2],[[1520,1524],2],[[1525,1535],3],[[1536,1539],3],[1540,3],[1541,3],[[1542,1546],2],[1547,2],[1548,2],[[1549,1551],2],[[1552,1557],2],[[1558,1562],2],[1563,2],[1564,3],[1565,2],[1566,2],[1567,2],[1568,2],[[1569,1594],2],[[1595,1599],2],[1600,2],[[1601,1618],2],[[1619,1621],2],[[1622,1624],2],[[1625,1630],2],[1631,2],[[1632,1641],2],[[1642,1645],2],[[1646,1647],2],[[1648,1652],2],[1653,1,""],[1654,1,""],[1655,1,""],[1656,1,""],[[1657,1719],2],[[1720,1721],2],[[1722,1726],2],[1727,2],[[1728,1742],2],[1743,2],[[1744,1747],2],[1748,2],[[1749,1756],2],[1757,3],[1758,2],[[1759,1768],2],[1769,2],[[1770,1773],2],[[1774,1775],2],[[1776,1785],2],[[1786,1790],2],[1791,2],[[1792,1805],2],[1806,3],[1807,3],[[1808,1836],2],[[1837,1839],2],[[1840,1866],2],[[1867,1868],3],[[1869,1871],2],[[1872,1901],2],[[1902,1919],2],[[1920,1968],2],[1969,2],[[1970,1983],3],[[1984,2037],2],[[2038,2042],2],[[2043,2044],3],[2045,2],[[2046,2047],2],[[2048,2093],2],[[2094,2095],3],[[2096,2110],2],[2111,3],[[2112,2139],2],[[2140,2141],3],[2142,2],[2143,3],[[2144,2154],2],[[2155,2159],3],[[2160,2183],2],[2184,2],[[2185,2190],2],[2191,3],[[2192,2193],3],[[2194,2199],3],[[2200,2207],2],[2208,2],[2209,2],[[2210,2220],2],[[2221,2226],2],[[2227,2228],2],[2229,2],[[2230,2237],2],[[2238,2247],2],[[2248,2258],2],[2259,2],[[2260,2273],2],[2274,3],[2275,2],[[2276,2302],2],[2303,2],[2304,2],[[2305,2307],2],[2308,2],[[2309,2361],2],[[2362,2363],2],[[2364,2381],2],[2382,2],[2383,2],[[2384,2388],2],[2389,2],[[2390,2391],2],[2392,1,""],[2393,1,""],[2394,1,""],[2395,1,""],[2396,1,""],[2397,1,""],[2398,1,""],[2399,1,""],[[2400,2403],2],[[2404,2405],2],[[2406,2415],2],[2416,2],[[2417,2418],2],[[2419,2423],2],[2424,2],[[2425,2426],2],[[2427,2428],2],[2429,2],[[2430,2431],2],[2432,2],[[2433,2435],2],[2436,3],[[2437,2444],2],[[2445,2446],3],[[2447,2448],2],[[2449,2450],3],[[2451,2472],2],[2473,3],[[2474,2480],2],[2481,3],[2482,2],[[2483,2485],3],[[2486,2489],2],[[2490,2491],3],[2492,2],[2493,2],[[2494,2500],2],[[2501,2502],3],[[2503,2504],2],[[2505,2506],3],[[2507,2509],2],[2510,2],[[2511,2518],3],[2519,2],[[2520,2523],3],[2524,1,""],[2525,1,""],[2526,3],[2527,1,""],[[2528,2531],2],[[2532,2533],3],[[2534,2545],2],[[2546,2554],2],[2555,2],[2556,2],[2557,2],[2558,2],[[2559,2560],3],[2561,2],[2562,2],[2563,2],[2564,3],[[2565,2570],2],[[2571,2574],3],[[2575,2576],2],[[2577,2578],3],[[2579,2600],2],[2601,3],[[2602,2608],2],[2609,3],[2610,2],[2611,1,""],[2612,3],[2613,2],[2614,1,""],[2615,3],[[2616,2617],2],[[2618,2619],3],[2620,2],[2621,3],[[2622,2626],2],[[2627,2630],3],[[2631,2632],2],[[2633,2634],3],[[2635,2637],2],[[2638,2640],3],[2641,2],[[2642,2648],3],[2649,1,""],[2650,1,""],[2651,1,""],[2652,2],[2653,3],[2654,1,""],[[2655,2661],3],[[2662,2676],2],[2677,2],[2678,2],[[2679,2688],3],[[2689,2691],2],[2692,3],[[2693,2699],2],[2700,2],[2701,2],[2702,3],[[2703,2705],2],[2706,3],[[2707,2728],2],[2729,3],[[2730,2736],2],[2737,3],[[2738,2739],2],[2740,3],[[2741,2745],2],[[2746,2747],3],[[2748,2757],2],[2758,3],[[2759,2761],2],[2762,3],[[2763,2765],2],[[2766,2767],3],[2768,2],[[2769,2783],3],[2784,2],[[2785,2787],2],[[2788,2789],3],[[2790,2799],2],[2800,2],[2801,2],[[2802,2808],3],[2809,2],[[2810,2815],2],[2816,3],[[2817,2819],2],[2820,3],[[2821,2828],2],[[2829,2830],3],[[2831,2832],2],[[2833,2834],3],[[2835,2856],2],[2857,3],[[2858,2864],2],[2865,3],[[2866,2867],2],[2868,3],[2869,2],[[2870,2873],2],[[2874,2875],3],[[2876,2883],2],[2884,2],[[2885,2886],3],[[2887,2888],2],[[2889,2890],3],[[2891,2893],2],[[2894,2900],3],[2901,2],[[2902,2903],2],[[2904,2907],3],[2908,1,""],[2909,1,""],[2910,3],[[2911,2913],2],[[2914,2915],2],[[2916,2917],3],[[2918,2927],2],[2928,2],[2929,2],[[2930,2935],2],[[2936,2945],3],[[2946,2947],2],[2948,3],[[2949,2954],2],[[2955,2957],3],[[2958,2960],2],[2961,3],[[2962,2965],2],[[2966,2968],3],[[2969,2970],2],[2971,3],[2972,2],[2973,3],[[2974,2975],2],[[2976,2978],3],[[2979,2980],2],[[2981,2983],3],[[2984,2986],2],[[2987,2989],3],[[2990,2997],2],[2998,2],[[2999,3001],2],[[3002,3005],3],[[3006,3010],2],[[3011,3013],3],[[3014,3016],2],[3017,3],[[3018,3021],2],[[3022,3023],3],[3024,2],[[3025,3030],3],[3031,2],[[3032,3045],3],[3046,2],[[3047,3055],2],[[3056,3058],2],[[3059,3066],2],[[3067,3071],3],[3072,2],[[3073,3075],2],[3076,2],[[3077,3084],2],[3085,3],[[3086,3088],2],[3089,3],[[3090,3112],2],[3113,3],[[3114,3123],2],[3124,2],[[3125,3129],2],[[3130,3131],3],[3132,2],[3133,2],[[3134,3140],2],[3141,3],[[3142,3144],2],[3145,3],[[3146,3149],2],[[3150,3156],3],[[3157,3158],2],[3159,3],[[3160,3161],2],[3162,2],[[3163,3164],3],[3165,2],[[3166,3167],3],[[3168,3169],2],[[3170,3171],2],[[3172,3173],3],[[3174,3183],2],[[3184,3190],3],[3191,2],[[3192,3199],2],[3200,2],[3201,2],[[3202,3203],2],[3204,2],[[3205,3212],2],[3213,3],[[3214,3216],2],[3217,3],[[3218,3240],2],[3241,3],[[3242,3251],2],[3252,3],[[3253,3257],2],[[3258,3259],3],[[3260,3261],2],[[3262,3268],2],[3269,3],[[3270,3272],2],[3273,3],[[3274,3277],2],[[3278,3284],3],[[3285,3286],2],[[3287,3292],3],[3293,2],[3294,2],[3295,3],[[3296,3297],2],[[3298,3299],2],[[3300,3301],3],[[3302,3311],2],[3312,3],[[3313,3314],2],[3315,2],[[3316,3327],3],[3328,2],[3329,2],[[3330,3331],2],[3332,2],[[3333,3340],2],[3341,3],[[3342,3344],2],[3345,3],[[3346,3368],2],[3369,2],[[3370,3385],2],[3386,2],[[3387,3388],2],[3389,2],[[3390,3395],2],[3396,2],[3397,3],[[3398,3400],2],[3401,3],[[3402,3405],2],[3406,2],[3407,2],[[3408,3411],3],[[3412,3414],2],[3415,2],[[3416,3422],2],[3423,2],[[3424,3425],2],[[3426,3427],2],[[3428,3429],3],[[3430,3439],2],[[3440,3445],2],[[3446,3448],2],[3449,2],[[3450,3455],2],[3456,3],[3457,2],[[3458,3459],2],[3460,3],[[3461,3478],2],[[3479,3481],3],[[3482,3505],2],[3506,3],[[3507,3515],2],[3516,3],[3517,2],[[3518,3519],3],[[3520,3526],2],[[3527,3529],3],[3530,2],[[3531,3534],3],[[3535,3540],2],[3541,3],[3542,2],[3543,3],[[3544,3551],2],[[3552,3557],3],[[3558,3567],2],[[3568,3569],3],[[3570,3571],2],[3572,2],[[3573,3584],3],[[3585,3634],2],[3635,1,""],[[3636,3642],2],[[3643,3646],3],[3647,2],[[3648,3662],2],[3663,2],[[3664,3673],2],[[3674,3675],2],[[3676,3712],3],[[3713,3714],2],[3715,3],[3716,2],[3717,3],[3718,2],[[3719,3720],2],[3721,2],[3722,2],[3723,3],[3724,2],[3725,2],[[3726,3731],2],[[3732,3735],2],[3736,2],[[3737,3743],2],[3744,2],[[3745,3747],2],[3748,3],[3749,2],[3750,3],[3751,2],[[3752,3753],2],[[3754,3755],2],[3756,2],[[3757,3762],2],[3763,1,""],[[3764,3769],2],[3770,2],[[3771,3773],2],[[3774,3775],3],[[3776,3780],2],[3781,3],[3782,2],[3783,3],[[3784,3789],2],[3790,2],[3791,3],[[3792,3801],2],[[3802,3803],3],[3804,1,""],[3805,1,""],[[3806,3807],2],[[3808,3839],3],[3840,2],[[3841,3850],2],[3851,2],[3852,1,""],[[3853,3863],2],[[3864,3865],2],[[3866,3871],2],[[3872,3881],2],[[3882,3892],2],[3893,2],[3894,2],[3895,2],[3896,2],[3897,2],[[3898,3901],2],[[3902,3906],2],[3907,1,""],[[3908,3911],2],[3912,3],[[3913,3916],2],[3917,1,""],[[3918,3921],2],[3922,1,""],[[3923,3926],2],[3927,1,""],[[3928,3931],2],[3932,1,""],[[3933,3944],2],[3945,1,""],[3946,2],[[3947,3948],2],[[3949,3952],3],[[3953,3954],2],[3955,1,""],[3956,2],[3957,1,""],[3958,1,""],[3959,1,""],[3960,1,""],[3961,1,""],[[3962,3968],2],[3969,1,""],[[3970,3972],2],[3973,2],[[3974,3979],2],[[3980,3983],2],[[3984,3986],2],[3987,1,""],[[3988,3989],2],[3990,2],[3991,2],[3992,3],[[3993,3996],2],[3997,1,""],[[3998,4001],2],[4002,1,""],[[4003,4006],2],[4007,1,""],[[4008,4011],2],[4012,1,""],[4013,2],[[4014,4016],2],[[4017,4023],2],[4024,2],[4025,1,""],[[4026,4028],2],[4029,3],[[4030,4037],2],[4038,2],[[4039,4044],2],[4045,3],[4046,2],[4047,2],[[4048,4049],2],[[4050,4052],2],[[4053,4056],2],[[4057,4058],2],[[4059,4095],3],[[4096,4129],2],[4130,2],[[4131,4135],2],[4136,2],[[4137,4138],2],[4139,2],[[4140,4146],2],[[4147,4149],2],[[4150,4153],2],[[4154,4159],2],[[4160,4169],2],[[4170,4175],2],[[4176,4185],2],[[4186,4249],2],[[4250,4253],2],[[4254,4255],2],[[4256,4293],3],[4294,3],[4295,1,""],[[4296,4300],3],[4301,1,""],[[4302,4303],3],[[4304,4342],2],[[4343,4344],2],[[4345,4346],2],[4347,2],[4348,1,""],[[4349,4351],2],[[4352,4441],2],[[4442,4446],2],[[4447,4448],3],[[4449,4514],2],[[4515,4519],2],[[4520,4601],2],[[4602,4607],2],[[4608,4614],2],[4615,2],[[4616,4678],2],[4679,2],[4680,2],[4681,3],[[4682,4685],2],[[4686,4687],3],[[4688,4694],2],[4695,3],[4696,2],[4697,3],[[4698,4701],2],[[4702,4703],3],[[4704,4742],2],[4743,2],[4744,2],[4745,3],[[4746,4749],2],[[4750,4751],3],[[4752,4782],2],[4783,2],[4784,2],[4785,3],[[4786,4789],2],[[4790,4791],3],[[4792,4798],2],[4799,3],[4800,2],[4801,3],[[4802,4805],2],[[4806,4807],3],[[4808,4814],2],[4815,2],[[4816,4822],2],[4823,3],[[4824,4846],2],[4847,2],[[4848,4878],2],[4879,2],[4880,2],[4881,3],[[4882,4885],2],[[4886,4887],3],[[4888,4894],2],[4895,2],[[4896,4934],2],[4935,2],[[4936,4954],2],[[4955,4956],3],[[4957,4958],2],[4959,2],[4960,2],[[4961,4988],2],[[4989,4991],3],[[4992,5007],2],[[5008,5017],2],[[5018,5023],3],[[5024,5108],2],[5109,2],[[5110,5111],3],[5112,1,""],[5113,1,""],[5114,1,""],[5115,1,""],[5116,1,""],[5117,1,""],[[5118,5119],3],[5120,2],[[5121,5740],2],[[5741,5742],2],[[5743,5750],2],[[5751,5759],2],[5760,3],[[5761,5786],2],[[5787,5788],2],[[5789,5791],3],[[5792,5866],2],[[5867,5872],2],[[5873,5880],2],[[5881,5887],3],[[5888,5900],2],[5901,2],[[5902,5908],2],[5909,2],[[5910,5918],3],[5919,2],[[5920,5940],2],[[5941,5942],2],[[5943,5951],3],[[5952,5971],2],[[5972,5983],3],[[5984,5996],2],[5997,3],[[5998,6000],2],[6001,3],[[6002,6003],2],[[6004,6015],3],[[6016,6067],2],[[6068,6069],3],[[6070,6099],2],[[6100,6102],2],[6103,2],[[6104,6107],2],[6108,2],[6109,2],[[6110,6111],3],[[6112,6121],2],[[6122,6127],3],[[6128,6137],2],[[6138,6143],3],[[6144,6149],2],[6150,3],[[6151,6154],2],[[6155,6157],7],[6158,3],[6159,7],[[6160,6169],2],[[6170,6175],3],[[6176,6263],2],[6264,2],[[6265,6271],3],[[6272,6313],2],[6314,2],[[6315,6319],3],[[6320,6389],2],[[6390,6399],3],[[6400,6428],2],[[6429,6430],2],[6431,3],[[6432,6443],2],[[6444,6447],3],[[6448,6459],2],[[6460,6463],3],[6464,2],[[6465,6467],3],[[6468,6469],2],[[6470,6509],2],[[6510,6511],3],[[6512,6516],2],[[6517,6527],3],[[6528,6569],2],[[6570,6571],2],[[6572,6575],3],[[6576,6601],2],[[6602,6607],3],[[6608,6617],2],[6618,2],[[6619,6621],3],[[6622,6623],2],[[6624,6655],2],[[6656,6683],2],[[6684,6685],3],[[6686,6687],2],[[6688,6750],2],[6751,3],[[6752,6780],2],[[6781,6782],3],[[6783,6793],2],[[6794,6799],3],[[6800,6809],2],[[6810,6815],3],[[6816,6822],2],[6823,2],[[6824,6829],2],[[6830,6831],3],[[6832,6845],2],[6846,2],[[6847,6848],2],[[6849,6862],2],[[6863,6911],3],[[6912,6987],2],[6988,2],[[6989,6991],3],[[6992,7001],2],[[7002,7018],2],[[7019,7027],2],[[7028,7036],2],[[7037,7038],2],[7039,3],[[7040,7082],2],[[7083,7085],2],[[7086,7097],2],[[7098,7103],2],[[7104,7155],2],[[7156,7163],3],[[7164,7167],2],[[7168,7223],2],[[7224,7226],3],[[7227,7231],2],[[7232,7241],2],[[7242,7244],3],[[7245,7293],2],[[7294,7295],2],[7296,1,""],[7297,1,""],[7298,1,""],[7299,1,""],[[7300,7301],1,""],[7302,1,""],[7303,1,""],[7304,1,""],[[7305,7311],3],[7312,1,""],[7313,1,""],[7314,1,""],[7315,1,""],[7316,1,""],[7317,1,""],[7318,1,""],[7319,1,""],[7320,1,""],[7321,1,""],[7322,1,""],[7323,1,""],[7324,1,""],[7325,1,""],[7326,1,""],[7327,1,""],[7328,1,""],[7329,1,""],[7330,1,""],[7331,1,""],[7332,1,""],[7333,1,""],[7334,1,""],[7335,1,""],[7336,1,""],[7337,1,""],[7338,1,""],[7339,1,""],[7340,1,""],[7341,1,""],[7342,1,""],[7343,1,""],[7344,1,""],[7345,1,""],[7346,1,""],[7347,1,""],[7348,1,""],[7349,1,""],[7350,1,""],[7351,1,""],[7352,1,""],[7353,1,""],[7354,1,""],[[7355,7356],3],[7357,1,""],[7358,1,""],[7359,1,""],[[7360,7367],2],[[7368,7375],3],[[7376,7378],2],[7379,2],[[7380,7410],2],[[7411,7414],2],[7415,2],[[7416,7417],2],[7418,2],[[7419,7423],3],[[7424,7467],2],[7468,1,"a"],[7469,1,""],[7470,1,"b"],[7471,2],[7472,1,"d"],[7473,1,"e"],[7474,1,""],[7475,1,"g"],[7476,1,"h"],[7477,1,"i"],[7478,1,"j"],[7479,1,"k"],[7480,1,"l"],[7481,1,"m"],[7482,1,"n"],[7483,2],[7484,1,"o"],[7485,1,""],[7486,1,"p"],[7487,1,"r"],[7488,1,"t"],[7489,1,"u"],[7490,1,"w"],[7491,1,"a"],[7492,1,""],[7493,1,""],[7494,1,""],[7495,1,"b"],[7496,1,"d"],[7497,1,"e"],[7498,1,""],[7499,1,""],[7500,1,""],[7501,1,"g"],[7502,2],[7503,1,"k"],[7504,1,"m"],[7505,1,""],[7506,1,"o"],[7507,1,""],[7508,1,""],[7509,1,""],[7510,1,"p"],[7511,1,"t"],[7512,1,"u"],[7513,1,""],[7514,1,""],[7515,1,"v"],[7516,1,""],[7517,1,""],[7518,1,""],[7519,1,""],[7520,1,""],[7521,1,""],[7522,1,"i"],[7523,1,"r"],[7524,1,"u"],[7525,1,"v"],[7526,1,""],[7527,1,""],[7528,1,""],[7529,1,""],[7530,1,""],[7531,2],[[7532,7543],2],[7544,1,""],[[7545,7578],2],[7579,1,""],[7580,1,"c"],[7581,1,""],[7582,1,""],[7583,1,""],[7584,1,"f"],[7585,1,""],[7586,1,""],[7587,1,""],[7588,1,""],[7589,1,""],[7590,1,""],[7591,1,""],[7592,1,""],[7593,1,""],[7594,1,""],[7595,1,""],[7596,1,""],[7597,1,""],[7598,1,""],[7599,1,""],[7600,1,""],[7601,1,""],[7602,1,""],[7603,1,""],[7604,1,""],[7605,1,""],[7606,1,""],[7607,1,""],[7608,1,""],[7609,1,""],[7610,1,""],[7611,1,"z"],[7612,1,""],[7613,1,""],[7614,1,""],[7615,1,""],[[7616,7619],2],[[7620,7626],2],[[7627,7654],2],[[7655,7669],2],[[7670,7673],2],[7674,2],[7675,2],[7676,2],[7677,2],[[7678,7679],2],[7680,1,""],[7681,2],[7682,1,""],[7683,2],[7684,1,""],[7685,2],[7686,1,""],[7687,2],[7688,1,""],[7689,2],[7690,1,""],[7691,2],[7692,1,""],[7693,2],[7694,1,""],[7695,2],[7696,1,""],[7697,2],[7698,1,""],[7699,2],[7700,1,""],[7701,2],[7702,1,""],[7703,2],[7704,1,""],[7705,2],[7706,1,""],[7707,2],[7708,1,""],[7709,2],[7710,1,""],[7711,2],[7712,1,""],[7713,2],[7714,1,""],[7715,2],[7716,1,""],[7717,2],[7718,1,""],[7719,2],[7720,1,""],[7721,2],[7722,1,""],[7723,2],[7724,1,""],[7725,2],[7726,1,""],[7727,2],[7728,1,""],[7729,2],[7730,1,""],[7731,2],[7732,1,""],[7733,2],[7734,1,""],[7735,2],[7736,1,""],[7737,2],[7738,1,""],[7739,2],[7740,1,""],[7741,2],[7742,1,""],[7743,2],[7744,1,""],[7745,2],[7746,1,""],[7747,2],[7748,1,""],[7749,2],[7750,1,""],[7751,2],[7752,1,""],[7753,2],[7754,1,""],[7755,2],[7756,1,""],[7757,2],[7758,1,""],[7759,2],[7760,1,""],[7761,2],[7762,1,""],[7763,2],[7764,1,""],[7765,2],[7766,1,""],[7767,2],[7768,1,""],[7769,2],[7770,1,""],[7771,2],[7772,1,""],[7773,2],[7774,1,""],[7775,2],[7776,1,""],[7777,2],[7778,1,""],[7779,2],[7780,1,""],[7781,2],[7782,1,""],[7783,2],[7784,1,""],[7785,2],[7786,1,""],[7787,2],[7788,1,""],[7789,2],[7790,1,""],[7791,2],[7792,1,""],[7793,2],[7794,1,""],[7795,2],[7796,1,""],[7797,2],[7798,1,""],[7799,2],[7800,1,""],[7801,2],[7802,1,""],[7803,2],[7804,1,""],[7805,2],[7806,1,""],[7807,2],[7808,1,""],[7809,2],[7810,1,""],[7811,2],[7812,1,""],[7813,2],[7814,1,""],[7815,2],[7816,1,""],[7817,2],[7818,1,""],[7819,2],[7820,1,""],[7821,2],[7822,1,""],[7823,2],[7824,1,""],[7825,2],[7826,1,""],[7827,2],[7828,1,""],[[7829,7833],2],[7834,1,"a"],[7835,1,""],[[7836,7837],2],[7838,1,"ss"],[7839,2],[7840,1,""],[7841,2],[7842,1,""],[7843,2],[7844,1,""],[7845,2],[7846,1,""],[7847,2],[7848,1,""],[7849,2],[7850,1,""],[7851,2],[7852,1,""],[7853,2],[7854,1,""],[7855,2],[7856,1,""],[7857,2],[7858,1,""],[7859,2],[7860,1,""],[7861,2],[7862,1,""],[7863,2],[7864,1,""],[7865,2],[7866,1,""],[7867,2],[7868,1,""],[7869,2],[7870,1,""],[7871,2],[7872,1,""],[7873,2],[7874,1,""],[7875,2],[7876,1,""],[7877,2],[7878,1,""],[7879,2],[7880,1,""],[7881,2],[7882,1,""],[7883,2],[7884,1,""],[7885,2],[7886,1,""],[7887,2],[7888,1,""],[7889,2],[7890,1,""],[7891,2],[7892,1,""],[7893,2],[7894,1,""],[7895,2],[7896,1,""],[7897,2],[7898,1,""],[7899,2],[7900,1,""],[7901,2],[7902,1,""],[7903,2],[7904,1,""],[7905,2],[7906,1,""],[7907,2],[7908,1,""],[7909,2],[7910,1,""],[7911,2],[7912,1,""],[7913,2],[7914,1,""],[7915,2],[7916,1,""],[7917,2],[7918,1,""],[7919,2],[7920,1,""],[7921,2],[7922,1,""],[7923,2],[7924,1,""],[7925,2],[7926,1,""],[7927,2],[7928,1,""],[7929,2],[7930,1,""],[7931,2],[7932,1,""],[7933,2],[7934,1,""],[7935,2],[[7936,7943],2],[7944,1,""],[7945,1,""],[7946,1,""],[7947,1,""],[7948,1,""],[7949,1,""],[7950,1,""],[7951,1,""],[[7952,7957],2],[[7958,7959],3],[7960,1,""],[7961,1,""],[7962,1,""],[7963,1,""],[7964,1,""],[7965,1,""],[[7966,7967],3],[[7968,7975],2],[7976,1,""],[7977,1,""],[7978,1,""],[7979,1,""],[7980,1,""],[7981,1,""],[7982,1,""],[7983,1,""],[[7984,7991],2],[7992,1,""],[7993,1,""],[7994,1,""],[7995,1,""],[7996,1,""],[7997,1,""],[7998,1,""],[7999,1,""],[[8000,8005],2],[[8006,8007],3],[8008,1,""],[8009,1,""],[8010,1,""],[8011,1,""],[8012,1,""],[8013,1,""],[[8014,8015],3],[[8016,8023],2],[8024,3],[8025,1,""],[8026,3],[8027,1,""],[8028,3],[8029,1,""],[8030,3],[8031,1,""],[[8032,8039],2],[8040,1,""],[8041,1,""],[8042,1,""],[8043,1,""],[8044,1,""],[8045,1,""],[8046,1,""],[8047,1,""],[8048,2],[8049,1,""],[8050,2],[8051,1,""],[8052,2],[8053,1,""],[8054,2],[8055,1,""],[8056,2],[8057,1,""],[8058,2],[8059,1,""],[8060,2],[8061,1,""],[[8062,8063],3],[8064,1,""],[8065,1,""],[8066,1,""],[8067,1,""],[8068,1,""],[8069,1,""],[8070,1,""],[8071,1,""],[8072,1,""],[8073,1,""],[8074,1,""],[8075,1,""],[8076,1,""],[8077,1,""],[8078,1,""],[8079,1,""],[8080,1,""],[8081,1,""],[8082,1,""],[8083,1,""],[8084,1,""],[8085,1,""],[8086,1,""],[8087,1,""],[8088,1,""],[8089,1,""],[8090,1,""],[8091,1,""],[8092,1,""],[8093,1,""],[8094,1,""],[8095,1,""],[8096,1,""],[8097,1,""],[8098,1,""],[8099,1,""],[8100,1,""],[8101,1,""],[8102,1,""],[8103,1,""],[8104,1,""],[8105,1,""],[8106,1,""],[8107,1,""],[8108,1,""],[8109,1,""],[8110,1,""],[8111,1,""],[[8112,8113],2],[8114,1,""],[8115,1,""],[8116,1,""],[8117,3],[8118,2],[8119,1,""],[8120,1,""],[8121,1,""],[8122,1,""],[8123,1,""],[8124,1,""],[8125,5," "],[8126,1,""],[8127,5," "],[8128,5," "],[8129,5," "],[8130,1,""],[8131,1,""],[8132,1,""],[8133,3],[8134,2],[8135,1,""],[8136,1,""],[8137,1,""],[8138,1,""],[8139,1,""],[8140,1,""],[8141,5," "],[8142,5," "],[8143,5," "],[[8144,8146],2],[8147,1,""],[[8148,8149],3],[[8150,8151],2],[8152,1,""],[8153,1,""],[8154,1,""],[8155,1,""],[8156,3],[8157,5," "],[8158,5," "],[8159,5," "],[[8160,8162],2],[8163,1,""],[[8164,8167],2],[8168,1,""],[8169,1,""],[8170,1,""],[8171,1,""],[8172,1,""],[8173,5," "],[8174,5," "],[8175,5,"`"],[[8176,8177],3],[8178,1,""],[8179,1,""],[8180,1,""],[8181,3],[8182,2],[8183,1,""],[8184,1,""],[8185,1,""],[8186,1,""],[8187,1,""],[8188,1,""],[8189,5," "],[8190,5," "],[8191,3],[[8192,8202],5," "],[8203,7],[[8204,8205],6,""],[[8206,8207],3],[8208,2],[8209,1,""],[[8210,8214],2],[8215,5," "],[[8216,8227],2],[[8228,8230],3],[8231,2],[[8232,8238],3],[8239,5," "],[[8240,8242],2],[8243,1,""],[8244,1,""],[8245,2],[8246,1,""],[8247,1,""],[[8248,8251],2],[8252,5,"!!"],[8253,2],[8254,5," "],[[8255,8262],2],[8263,5,"??"],[8264,5,"?!"],[8265,5,"!?"],[[8266,8269],2],[[8270,8274],2],[[8275,8276],2],[[8277,8278],2],[8279,1,""],[[8280,8286],2],[8287,5," "],[8288,7],[[8289,8291],3],[8292,7],[8293,3],[[8294,8297],3],[[8298,8303],3],[8304,1,"0"],[8305,1,"i"],[[8306,8307],3],[8308,1,"4"],[8309,1,"5"],[8310,1,"6"],[8311,1,"7"],[8312,1,"8"],[8313,1,"9"],[8314,5,"+"],[8315,1,""],[8316,5,"="],[8317,5,"("],[8318,5,")"],[8319,1,"n"],[8320,1,"0"],[8321,1,"1"],[8322,1,"2"],[8323,1,"3"],[8324,1,"4"],[8325,1,"5"],[8326,1,"6"],[8327,1,"7"],[8328,1,"8"],[8329,1,"9"],[8330,5,"+"],[8331,1,""],[8332,5,"="],[8333,5,"("],[8334,5,")"],[8335,3],[8336,1,"a"],[8337,1,"e"],[8338,1,"o"],[8339,1,"x"],[8340,1,""],[8341,1,"h"],[8342,1,"k"],[8343,1,"l"],[8344,1,"m"],[8345,1,"n"],[8346,1,"p"],[8347,1,"s"],[8348,1,"t"],[[8349,8351],3],[[8352,8359],2],[8360,1,"rs"],[[8361,8362],2],[8363,2],[8364,2],[[8365,8367],2],[[8368,8369],2],[[8370,8373],2],[[8374,8376],2],[8377,2],[8378,2],[[8379,8381],2],[8382,2],[8383,2],[8384,2],[[8385,8399],3],[[8400,8417],2],[[8418,8419],2],[[8420,8426],2],[8427,2],[[8428,8431],2],[8432,2],[[8433,8447],3],[8448,5,"a/c"],[8449,5,"a/s"],[8450,1,"c"],[8451,1,"c"],[8452,2],[8453,5,"c/o"],[8454,5,"c/u"],[8455,1,""],[8456,2],[8457,1,"f"],[8458,1,"g"],[[8459,8462],1,"h"],[8463,1,""],[[8464,8465],1,"i"],[[8466,8467],1,"l"],[8468,2],[8469,1,"n"],[8470,1,"no"],[[8471,8472],2],[8473,1,"p"],[8474,1,"q"],[[8475,8477],1,"r"],[[8478,8479],2],[8480,1,"sm"],[8481,1,"tel"],[8482,1,"tm"],[8483,2],[8484,1,"z"],[8485,2],[8486,1,""],[8487,2],[8488,1,"z"],[8489,2],[8490,1,"k"],[8491,1,""],[8492,1,"b"],[8493,1,"c"],[8494,2],[[8495,8496],1,"e"],[8497,1,"f"],[8498,3],[8499,1,"m"],[8500,1,"o"],[8501,1,""],[8502,1,""],[8503,1,""],[8504,1,""],[8505,1,"i"],[8506,2],[8507,1,"fax"],[8508,1,""],[[8509,8510],1,""],[8511,1,""],[8512,1,""],[[8513,8516],2],[[8517,8518],1,"d"],[8519,1,"e"],[8520,1,"i"],[8521,1,"j"],[[8522,8523],2],[8524,2],[8525,2],[8526,2],[8527,2],[8528,1,"17"],[8529,1,"19"],[8530,1,"110"],[8531,1,"13"],[8532,1,"23"],[8533,1,"15"],[8534,1,"25"],[8535,1,"35"],[8536,1,"45"],[8537,1,"16"],[8538,1,"56"],[8539,1,"18"],[8540,1,"38"],[8541,1,"58"],[8542,1,"78"],[8543,1,"1"],[8544,1,"i"],[8545,1,"ii"],[8546,1,"iii"],[8547,1,"iv"],[8548,1,"v"],[8549,1,"vi"],[8550,1,"vii"],[8551,1,"viii"],[8552,1,"ix"],[8553,1,"x"],[8554,1,"xi"],[8555,1,"xii"],[8556,1,"l"],[8557,1,"c"],[8558,1,"d"],[8559,1,"m"],[8560,1,"i"],[8561,1,"ii"],[8562,1,"iii"],[8563,1,"iv"],[8564,1,"v"],[8565,1,"vi"],[8566,1,"vii"],[8567,1,"viii"],[8568,1,"ix"],[8569,1,"x"],[8570,1,"xi"],[8571,1,"xii"],[8572,1,"l"],[8573,1,"c"],[8574,1,"d"],[8575,1,"m"],[[8576,8578],2],[8579,3],[8580,2],[[8581,8584],2],[8585,1,"03"],[[8586,8587],2],[[8588,8591],3],[[8592,8682],2],[[8683,8691],2],[[8692,8703],2],[[8704,8747],2],[8748,1,""],[8749,1,""],[8750,2],[8751,1,""],[8752,1,""],[[8753,8799],2],[8800,4],[[8801,8813],2],[[8814,8815],4],[[8816,8945],2],[[8946,8959],2],[8960,2],[8961,2],[[8962,9000],2],[9001,1,""],[9002,1,""],[[9003,9082],2],[9083,2],[9084,2],[[9085,9114],2],[[9115,9166],2],[[9167,9168],2],[[9169,9179],2],[[9180,9191],2],[9192,2],[[9193,9203],2],[[9204,9210],2],[[9211,9214],2],[9215,2],[[9216,9252],2],[[9253,9254],2],[[9255,9279],3],[[9280,9290],2],[[9291,9311],3],[9312,1,"1"],[9313,1,"2"],[9314,1,"3"],[9315,1,"4"],[9316,1,"5"],[9317,1,"6"],[9318,1,"7"],[9319,1,"8"],[9320,1,"9"],[9321,1,"10"],[9322,1,"11"],[9323,1,"12"],[9324,1,"13"],[9325,1,"14"],[9326,1,"15"],[9327,1,"16"],[9328,1,"17"],[9329,1,"18"],[9330,1,"19"],[9331,1,"20"],[9332,5,"(1)"],[9333,5,"(2)"],[9334,5,"(3)"],[9335,5,"(4)"],[9336,5,"(5)"],[9337,5,"(6)"],[9338,5,"(7)"],[9339,5,"(8)"],[9340,5,"(9)"],[9341,5,"(10)"],[9342,5,"(11)"],[9343,5,"(12)"],[9344,5,"(13)"],[9345,5,"(14)"],[9346,5,"(15)"],[9347,5,"(16)"],[9348,5,"(17)"],[9349,5,"(18)"],[9350,5,"(19)"],[9351,5,"(20)"],[[9352,9371],3],[9372,5,"(a)"],[9373,5,"(b)"],[9374,5,"(c)"],[9375,5,"(d)"],[9376,5,"(e)"],[9377,5,"(f)"],[9378,5,"(g)"],[9379,5,"(h)"],[9380,5,"(i)"],[9381,5,"(j)"],[9382,5,"(k)"],[9383,5,"(l)"],[9384,5,"(m)"],[9385,5,"(n)"],[9386,5,"(o)"],[9387,5,"(p)"],[9388,5,"(q)"],[9389,5,"(r)"],[9390,5,"(s)"],[9391,5,"(t)"],[9392,5,"(u)"],[9393,5,"(v)"],[9394,5,"(w)"],[9395,5,"(x)"],[9396,5,"(y)"],[9397,5,"(z)"],[9398,1,"a"],[9399,1,"b"],[9400,1,"c"],[9401,1,"d"],[9402,1,"e"],[9403,1,"f"],[9404,1,"g"],[9405,1,"h"],[9406,1,"i"],[9407,1,"j"],[9408,1,"k"],[9409,1,"l"],[9410,1,"m"],[9411,1,"n"],[9412,1,"o"],[9413,1,"p"],[9414,1,"q"],[9415,1,"r"],[9416,1,"s"],[9417,1,"t"],[9418,1,"u"],[9419,1,"v"],[9420,1,"w"],[9421,1,"x"],[9422,1,"y"],[9423,1,"z"],[9424,1,"a"],[9425,1,"b"],[9426,1,"c"],[9427,1,"d"],[9428,1,"e"],[9429,1,"f"],[9430,1,"g"],[9431,1,"h"],[9432,1,"i"],[9433,1,"j"],[9434,1,"k"],[9435,1,"l"],[9436,1,"m"],[9437,1,"n"],[9438,1,"o"],[9439,1,"p"],[9440,1,"q"],[9441,1,"r"],[9442,1,"s"],[9443,1,"t"],[9444,1,"u"],[9445,1,"v"],[9446,1,"w"],[9447,1,"x"],[9448,1,"y"],[9449,1,"z"],[9450,1,"0"],[[9451,9470],2],[9471,2],[[9472,9621],2],[[9622,9631],2],[[9632,9711],2],[[9712,9719],2],[[9720,9727],2],[[9728,9747],2],[[9748,9749],2],[[9750,9751],2],[9752,2],[9753,2],[[9754,9839],2],[[9840,9841],2],[[9842,9853],2],[[9854,9855],2],[[9856,9865],2],[[9866,9873],2],[[9874,9884],2],[9885,2],[[9886,9887],2],[[9888,9889],2],[[9890,9905],2],[9906,2],[[9907,9916],2],[[9917,9919],2],[[9920,9923],2],[[9924,9933],2],[9934,2],[[9935,9953],2],[9954,2],[9955,2],[[9956,9959],2],[[9960,9983],2],[9984,2],[[9985,9988],2],[9989,2],[[9990,9993],2],[[9994,9995],2],[[9996,10023],2],[10024,2],[[10025,10059],2],[10060,2],[10061,2],[10062,2],[[10063,10066],2],[[10067,10069],2],[10070,2],[10071,2],[[10072,10078],2],[[10079,10080],2],[[10081,10087],2],[[10088,10101],2],[[10102,10132],2],[[10133,10135],2],[[10136,10159],2],[10160,2],[[10161,10174],2],[10175,2],[[10176,10182],2],[[10183,10186],2],[10187,2],[10188,2],[10189,2],[[10190,10191],2],[[10192,10219],2],[[10220,10223],2],[[10224,10239],2],[[10240,10495],2],[[10496,10763],2],[10764,1,""],[[10765,10867],2],[10868,5,"::="],[10869,5,"=="],[10870,5,"==="],[[10871,10971],2],[10972,1,""],[[10973,11007],2],[[11008,11021],2],[[11022,11027],2],[[11028,11034],2],[[11035,11039],2],[[11040,11043],2],[[11044,11084],2],[[11085,11087],2],[[11088,11092],2],[[11093,11097],2],[[11098,11123],2],[[11124,11125],3],[[11126,11157],2],[11158,3],[11159,2],[[11160,11193],2],[[11194,11196],2],[[11197,11208],2],[11209,2],[[11210,11217],2],[11218,2],[[11219,11243],2],[[11244,11247],2],[[11248,11262],2],[11263,2],[11264,1,""],[11265,1,""],[11266,1,""],[11267,1,""],[11268,1,""],[11269,1,""],[11270,1,""],[11271,1,""],[11272,1,""],[11273,1,""],[11274,1,""],[11275,1,""],[11276,1,""],[11277,1,""],[11278,1,""],[11279,1,""],[11280,1,""],[11281,1,""],[11282,1,""],[11283,1,""],[11284,1,""],[11285,1,""],[11286,1,""],[11287,1,""],[11288,1,""],[11289,1,""],[11290,1,""],[11291,1,""],[11292,1,""],[11293,1,""],[11294,1,""],[11295,1,""],[11296,1,""],[11297,1,""],[11298,1,""],[11299,1,""],[11300,1,""],[11301,1,""],[11302,1,""],[11303,1,""],[11304,1,""],[11305,1,""],[11306,1,""],[11307,1,""],[11308,1,""],[11309,1,""],[11310,1,""],[11311,1,""],[[11312,11358],2],[11359,2],[11360,1,""],[11361,2],[11362,1,""],[11363,1,""],[11364,1,""],[[11365,11366],2],[11367,1,""],[11368,2],[11369,1,""],[11370,2],[11371,1,""],[11372,2],[11373,1,""],[11374,1,""],[11375,1,""],[11376,1,""],[11377,2],[11378,1,""],[11379,2],[11380,2],[11381,1,""],[[11382,11383],2],[[11384,11387],2],[11388,1,"j"],[11389,1,"v"],[11390,1,""],[11391,1,""],[11392,1,""],[11393,2],[11394,1,""],[11395,2],[11396,1,""],[11397,2],[11398,1,""],[11399,2],[11400,1,""],[11401,2],[11402,1,""],[11403,2],[11404,1,""],[11405,2],[11406,1,""],[11407,2],[11408,1,""],[11409,2],[11410,1,""],[11411,2],[11412,1,""],[11413,2],[11414,1,""],[11415,2],[11416,1,""],[11417,2],[11418,1,""],[11419,2],[11420,1,""],[11421,2],[11422,1,""],[11423,2],[11424,1,""],[11425,2],[11426,1,""],[11427,2],[11428,1,""],[11429,2],[11430,1,""],[11431,2],[11432,1,""],[11433,2],[11434,1,""],[11435,2],[11436,1,""],[11437,2],[11438,1,""],[11439,2],[11440,1,""],[11441,2],[11442,1,""],[11443,2],[11444,1,""],[11445,2],[11446,1,""],[11447,2],[11448,1,""],[11449,2],[11450,1,""],[11451,2],[11452,1,""],[11453,2],[11454,1,""],[11455,2],[11456,1,""],[11457,2],[11458,1,""],[11459,2],[11460,1,""],[11461,2],[11462,1,""],[11463,2],[11464,1,""],[11465,2],[11466,1,""],[11467,2],[11468,1,""],[11469,2],[11470,1,""],[11471,2],[11472,1,""],[11473,2],[11474,1,""],[11475,2],[11476,1,""],[11477,2],[11478,1,""],[11479,2],[11480,1,""],[11481,2],[11482,1,""],[11483,2],[11484,1,""],[11485,2],[11486,1,""],[11487,2],[11488,1,""],[11489,2],[11490,1,""],[[11491,11492],2],[[11493,11498],2],[11499,1,""],[11500,2],[11501,1,""],[[11502,11505],2],[11506,1,""],[11507,2],[[11508,11512],3],[[11513,11519],2],[[11520,11557],2],[11558,3],[11559,2],[[11560,11564],3],[11565,2],[[11566,11567],3],[[11568,11621],2],[[11622,11623],2],[[11624,11630],3],[11631,1,""],[11632,2],[[11633,11646],3],[11647,2],[[11648,11670],2],[[11671,11679],3],[[11680,11686],2],[11687,3],[[11688,11694],2],[11695,3],[[11696,11702],2],[11703,3],[[11704,11710],2],[11711,3],[[11712,11718],2],[11719,3],[[11720,11726],2],[11727,3],[[11728,11734],2],[11735,3],[[11736,11742],2],[11743,3],[[11744,11775],2],[[11776,11799],2],[[11800,11803],2],[[11804,11805],2],[[11806,11822],2],[11823,2],[11824,2],[11825,2],[[11826,11835],2],[[11836,11842],2],[[11843,11844],2],[[11845,11849],2],[[11850,11854],2],[11855,2],[[11856,11858],2],[[11859,11869],2],[[11870,11903],3],[[11904,11929],2],[11930,3],[[11931,11934],2],[11935,1,""],[[11936,12018],2],[12019,1,""],[[12020,12031],3],[12032,1,""],[12033,1,""],[12034,1,""],[12035,1,""],[12036,1,""],[12037,1,""],[12038,1,""],[12039,1,""],[12040,1,""],[12041,1,""],[12042,1,""],[12043,1,""],[12044,1,""],[12045,1,""],[12046,1,""],[12047,1,""],[12048,1,""],[12049,1,""],[12050,1,""],[12051,1,""],[12052,1,""],[12053,1,""],[12054,1,""],[12055,1,""],[12056,1,""],[12057,1,""],[12058,1,""],[12059,1,""],[12060,1,""],[12061,1,""],[12062,1,""],[12063,1,""],[12064,1,""],[12065,1,""],[12066,1,""],[12067,1,""],[12068,1,""],[12069,1,""],[12070,1,""],[12071,1,""],[12072,1,""],[12073,1,""],[12074,1,""],[12075,1,""],[12076,1,""],[12077,1,""],[12078,1,""],[12079,1,""],[12080,1,""],[12081,1,""],[12082,1,""],[12083,1,""],[12084,1,""],[12085,1,""],[12086,1,""],[12087,1,""],[12088,1,""],[12089,1,""],[12090,1,""],[12091,1,""],[12092,1,""],[12093,1,""],[12094,1,""],[12095,1,""],[12096,1,""],[12097,1,""],[12098,1,""],[12099,1,""],[12100,1,""],[12101,1,""],[12102,1,""],[12103,1,""],[12104,1,""],[12105,1,""],[12106,1,""],[12107,1,""],[12108,1,""],[12109,1,""],[12110,1,""],[12111,1,""],[12112,1,""],[12113,1,""],[12114,1,""],[12115,1,""],[12116,1,""],[12117,1,""],[12118,1,""],[12119,1,""],[12120,1,""],[12121,1,""],[12122,1,""],[12123,1,""],[12124,1,""],[12125,1,""],[12126,1,""],[12127,1,""],[12128,1,""],[12129,1,""],[12130,1,""],[12131,1,""],[12132,1,""],[12133,1,""],[12134,1,""],[12135,1,""],[12136,1,""],[12137,1,""],[12138,1,""],[12139,1,""],[12140,1,""],[12141,1,""],[12142,1,""],[12143,1,""],[12144,1,""],[12145,1,""],[12146,1,""],[12147,1,""],[12148,1,""],[12149,1,""],[12150,1,""],[12151,1,""],[12152,1,""],[12153,1,""],[12154,1,""],[12155,1,""],[12156,1,""],[12157,1,""],[12158,1,""],[12159,1,""],[12160,1,""],[12161,1,""],[12162,1,""],[12163,1,""],[12164,1,""],[12165,1,""],[12166,1,""],[12167,1,""],[12168,1,""],[12169,1,""],[12170,1,""],[12171,1,""],[12172,1,""],[12173,1,""],[12174,1,""],[12175,1,""],[12176,1,""],[12177,1,""],[12178,1,""],[12179,1,""],[12180,1,""],[12181,1,""],[12182,1,""],[12183,1,""],[12184,1,""],[12185,1,""],[12186,1,""],[12187,1,""],[12188,1,""],[12189,1,""],[12190,1,""],[12191,1,""],[12192,1,""],[12193,1,""],[12194,1,""],[12195,1,""],[12196,1,""],[12197,1,""],[12198,1,""],[12199,1,""],[12200,1,""],[12201,1,""],[12202,1,""],[12203,1,""],[12204,1,""],[12205,1,""],[12206,1,""],[12207,1,""],[12208,1,""],[12209,1,""],[12210,1,""],[12211,1,""],[12212,1,""],[12213,1,""],[12214,1,""],[12215,1,""],[12216,1,""],[12217,1,""],[12218,1,""],[12219,1,""],[12220,1,""],[12221,1,""],[12222,1,""],[12223,1,""],[12224,1,""],[12225,1,""],[12226,1,""],[12227,1,""],[12228,1,""],[12229,1,""],[12230,1,""],[12231,1,""],[12232,1,""],[12233,1,""],[12234,1,""],[12235,1,""],[12236,1,""],[12237,1,""],[12238,1,""],[12239,1,""],[12240,1,""],[12241,1,""],[12242,1,""],[12243,1,""],[12244,1,""],[12245,1,""],[[12246,12271],3],[[12272,12283],3],[[12284,12287],3],[12288,5," "],[12289,2],[12290,1,"."],[[12291,12292],2],[[12293,12295],2],[[12296,12329],2],[[12330,12333],2],[[12334,12341],2],[12342,1,""],[12343,2],[12344,1,""],[12345,1,""],[12346,1,""],[12347,2],[12348,2],[12349,2],[12350,2],[12351,2],[12352,3],[[12353,12436],2],[[12437,12438],2],[[12439,12440],3],[[12441,12442],2],[12443,5," "],[12444,5," "],[[12445,12446],2],[12447,1,""],[12448,2],[[12449,12542],2],[12543,1,""],[[12544,12548],3],[[12549,12588],2],[12589,2],[12590,2],[12591,2],[12592,3],[12593,1,""],[12594,1,""],[12595,1,""],[12596,1,""],[12597,1,""],[12598,1,""],[12599,1,""],[12600,1,""],[12601,1,""],[12602,1,""],[12603,1,""],[12604,1,""],[12605,1,""],[12606,1,""],[12607,1,""],[12608,1,""],[12609,1,""],[12610,1,""],[12611,1,""],[12612,1,""],[12613,1,""],[12614,1,""],[12615,1,""],[12616,1,""],[12617,1,""],[12618,1,""],[12619,1,""],[12620,1,""],[12621,1,""],[12622,1,""],[12623,1,""],[12624,1,""],[12625,1,""],[12626,1,""],[12627,1,""],[12628,1,""],[12629,1,""],[12630,1,""],[12631,1,""],[12632,1,""],[12633,1,""],[12634,1,""],[12635,1,""],[12636,1,""],[12637,1,""],[12638,1,""],[12639,1,""],[12640,1,""],[12641,1,""],[12642,1,""],[12643,1,""],[12644,3],[12645,1,""],[12646,1,""],[12647,1,""],[12648,1,""],[12649,1,""],[12650,1,""],[12651,1,""],[12652,1,""],[12653,1,""],[12654,1,""],[12655,1,""],[12656,1,""],[12657,1,""],[12658,1,""],[12659,1,""],[12660,1,""],[12661,1,""],[12662,1,""],[12663,1,""],[12664,1,""],[12665,1,""],[12666,1,""],[12667,1,""],[12668,1,""],[12669,1,""],[12670,1,""],[12671,1,""],[12672,1,""],[12673,1,""],[12674,1,""],[12675,1,""],[12676,1,""],[12677,1,""],[12678,1,""],[12679,1,""],[12680,1,""],[12681,1,""],[12682,1,""],[12683,1,""],[12684,1,""],[12685,1,""],[12686,1,""],[12687,3],[[12688,12689],2],[12690,1,""],[12691,1,""],[12692,1,""],[12693,1,""],[12694,1,""],[12695,1,""],[12696,1,""],[12697,1,""],[12698,1,""],[12699,1,""],[12700,1,""],[12701,1,""],[12702,1,""],[12703,1,""],[[12704,12727],2],[[12728,12730],2],[[12731,12735],2],[[12736,12751],2],[[12752,12771],2],[[12772,12783],3],[[12784,12799],2],[12800,5,"()"],[12801,5,"()"],[12802,5,"()"],[12803,5,"()"],[12804,5,"()"],[12805,5,"()"],[12806,5,"()"],[12807,5,"()"],[12808,5,"()"],[12809,5,"()"],[12810,5,"()"],[12811,5,"()"],[12812,5,"()"],[12813,5,"()"],[12814,5,"()"],[12815,5,"()"],[12816,5,"()"],[12817,5,"()"],[12818,5,"()"],[12819,5,"()"],[12820,5,"()"],[12821,5,"()"],[12822,5,"()"],[12823,5,"()"],[12824,5,"()"],[12825,5,"()"],[12826,5,"()"],[12827,5,"()"],[12828,5,"()"],[12829,5,"()"],[12830,5,"()"],[12831,3],[12832,5,"()"],[12833,5,"()"],[12834,5,"()"],[12835,5,"()"],[12836,5,"()"],[12837,5,"()"],[12838,5,"()"],[12839,5,"()"],[12840,5,"()"],[12841,5,"()"],[12842,5,"()"],[12843,5,"()"],[12844,5,"()"],[12845,5,"()"],[12846,5,"()"],[12847,5,"()"],[12848,5,"()"],[12849,5,"()"],[12850,5,"()"],[12851,5,"()"],[12852,5,"()"],[12853,5,"()"],[12854,5,"()"],[12855,5,"()"],[12856,5,"()"],[12857,5,"()"],[12858,5,"()"],[12859,5,"()"],[12860,5,"()"],[12861,5,"()"],[12862,5,"()"],[12863,5,"()"],[12864,5,"()"],[12865,5,"()"],[12866,5,"()"],[12867,5,"()"],[12868,1,""],[12869,1,""],[12870,1,""],[12871,1,""],[[12872,12879],2],[12880,1,"pte"],[12881,1,"21"],[12882,1,"22"],[12883,1,"23"],[12884,1,"24"],[12885,1,"25"],[12886,1,"26"],[12887,1,"27"],[12888,1,"28"],[12889,1,"29"],[12890,1,"30"],[12891,1,"31"],[12892,1,"32"],[12893,1,"33"],[12894,1,"34"],[12895,1,"35"],[12896,1,""],[12897,1,""],[12898,1,""],[12899,1,""],[12900,1,""],[12901,1,""],[12902,1,""],[12903,1,""],[12904,1,""],[12905,1,""],[12906,1,""],[12907,1,""],[12908,1,""],[12909,1,""],[12910,1,""],[12911,1,""],[12912,1,""],[12913,1,""],[12914,1,""],[12915,1,""],[12916,1,""],[12917,1,""],[12918,1,""],[12919,1,""],[12920,1,""],[12921,1,""],[12922,1,""],[12923,1,""],[12924,1,""],[12925,1,""],[12926,1,""],[12927,2],[12928,1,""],[12929,1,""],[12930,1,""],[12931,1,""],[12932,1,""],[12933,1,""],[12934,1,""],[12935,1,""],[12936,1,""],[12937,1,""],[12938,1,""],[12939,1,""],[12940,1,""],[12941,1,""],[12942,1,""],[12943,1,""],[12944,1,""],[12945,1,""],[12946,1,""],[12947,1,""],[12948,1,""],[12949,1,""],[12950,1,""],[12951,1,""],[12952,1,""],[12953,1,""],[12954,1,""],[12955,1,""],[12956,1,""],[12957,1,""],[12958,1,""],[12959,1,""],[12960,1,""],[12961,1,""],[12962,1,""],[12963,1,""],[12964,1,""],[12965,1,""],[12966,1,""],[12967,1,""],[12968,1,""],[12969,1,""],[12970,1,""],[12971,1,""],[12972,1,""],[12973,1,""],[12974,1,""],[12975,1,""],[12976,1,""],[12977,1,"36"],[12978,1,"37"],[12979,1,"38"],[12980,1,"39"],[12981,1,"40"],[12982,1,"41"],[12983,1,"42"],[12984,1,"43"],[12985,1,"44"],[12986,1,"45"],[12987,1,"46"],[12988,1,"47"],[12989,1,"48"],[12990,1,"49"],[12991,1,"50"],[12992,1,"1"],[12993,1,"2"],[12994,1,"3"],[12995,1,"4"],[12996,1,"5"],[12997,1,"6"],[12998,1,"7"],[12999,1,"8"],[13000,1,"9"],[13001,1,"10"],[13002,1,"11"],[13003,1,"12"],[13004,1,"hg"],[13005,1,"erg"],[13006,1,"ev"],[13007,1,"ltd"],[13008,1,""],[13009,1,""],[13010,1,""],[13011,1,""],[13012,1,""],[13013,1,""],[13014,1,""],[13015,1,""],[13016,1,""],[13017,1,""],[13018,1,""],[13019,1,""],[13020,1,""],[13021,1,""],[13022,1,""],[13023,1,""],[13024,1,""],[13025,1,""],[13026,1,""],[13027,1,""],[13028,1,""],[13029,1,""],[13030,1,""],[13031,1,""],[13032,1,""],[13033,1,""],[13034,1,""],[13035,1,""],[13036,1,""],[13037,1,""],[13038,1,""],[13039,1,""],[13040,1,""],[13041,1,""],[13042,1,""],[13043,1,""],[13044,1,""],[13045,1,""],[13046,1,""],[13047,1,""],[13048,1,""],[13049,1,""],[13050,1,""],[13051,1,""],[13052,1,""],[13053,1,""],[13054,1,""],[13055,1,""],[13056,1,""],[13057,1,""],[13058,1,""],[13059,1,""],[13060,1,""],[13061,1,""],[13062,1,""],[13063,1,""],[13064,1,""],[13065,1,""],[13066,1,""],[13067,1,""],[13068,1,""],[13069,1,""],[13070,1,""],[13071,1,""],[13072,1,""],[13073,1,""],[13074,1,""],[13075,1,""],[13076,1,""],[13077,1,""],[13078,1,""],[13079,1,""],[13080,1,""],[13081,1,""],[13082,1,""],[13083,1,""],[13084,1,""],[13085,1,""],[13086,1,""],[13087,1,""],[13088,1,""],[13089,1,""],[13090,1,""],[13091,1,""],[13092,1,""],[13093,1,""],[13094,1,""],[13095,1,""],[13096,1,""],[13097,1,""],[13098,1,""],[13099,1,""],[13100,1,""],[13101,1,""],[13102,1,""],[13103,1,""],[13104,1,""],[13105,1,""],[13106,1,""],[13107,1,""],[13108,1,""],[13109,1,""],[13110,1,""],[13111,1,""],[13112,1,""],[13113,1,""],[13114,1,""],[13115,1,""],[13116,1,""],[13117,1,""],[13118,1,""],[13119,1,""],[13120,1,""],[13121,1,""],[13122,1,""],[13123,1,""],[13124,1,""],[13125,1,""],[13126,1,""],[13127,1,""],[13128,1,""],[13129,1,""],[13130,1,""],[13131,1,""],[13132,1,""],[13133,1,""],[13134,1,""],[13135,1,""],[13136,1,""],[13137,1,""],[13138,1,""],[13139,1,""],[13140,1,""],[13141,1,""],[13142,1,""],[13143,1,""],[13144,1,"0"],[13145,1,"1"],[13146,1,"2"],[13147,1,"3"],[13148,1,"4"],[13149,1,"5"],[13150,1,"6"],[13151,1,"7"],[13152,1,"8"],[13153,1,"9"],[13154,1,"10"],[13155,1,"11"],[13156,1,"12"],[13157,1,"13"],[13158,1,"14"],[13159,1,"15"],[13160,1,"16"],[13161,1,"17"],[13162,1,"18"],[13163,1,"19"],[13164,1,"20"],[13165,1,"21"],[13166,1,"22"],[13167,1,"23"],[13168,1,"24"],[13169,1,"hpa"],[13170,1,"da"],[13171,1,"au"],[13172,1,"bar"],[13173,1,"ov"],[13174,1,"pc"],[13175,1,"dm"],[13176,1,"dm2"],[13177,1,"dm3"],[13178,1,"iu"],[13179,1,""],[13180,1,""],[13181,1,""],[13182,1,""],[13183,1,""],[13184,1,"pa"],[13185,1,"na"],[13186,1,"a"],[13187,1,"ma"],[13188,1,"ka"],[13189,1,"kb"],[13190,1,"mb"],[13191,1,"gb"],[13192,1,"cal"],[13193,1,"kcal"],[13194,1,"pf"],[13195,1,"nf"],[13196,1,"f"],[13197,1,"g"],[13198,1,"mg"],[13199,1,"kg"],[13200,1,"hz"],[13201,1,"khz"],[13202,1,"mhz"],[13203,1,"ghz"],[13204,1,"thz"],[13205,1,"l"],[13206,1,"ml"],[13207,1,"dl"],[13208,1,"kl"],[13209,1,"fm"],[13210,1,"nm"],[13211,1,"m"],[13212,1,"mm"],[13213,1,"cm"],[13214,1,"km"],[13215,1,"mm2"],[13216,1,"cm2"],[13217,1,"m2"],[13218,1,"km2"],[13219,1,"mm3"],[13220,1,"cm3"],[13221,1,"m3"],[13222,1,"km3"],[13223,1,"ms"],[13224,1,"ms2"],[13225,1,"pa"],[13226,1,"kpa"],[13227,1,"mpa"],[13228,1,"gpa"],[13229,1,"rad"],[13230,1,"rads"],[13231,1,"rads2"],[13232,1,"ps"],[13233,1,"ns"],[13234,1,"s"],[13235,1,"ms"],[13236,1,"pv"],[13237,1,"nv"],[13238,1,"v"],[13239,1,"mv"],[13240,1,"kv"],[13241,1,"mv"],[13242,1,"pw"],[13243,1,"nw"],[13244,1,"w"],[13245,1,"mw"],[13246,1,"kw"],[13247,1,"mw"],[13248,1,"k"],[13249,1,"m"],[13250,3],[13251,1,"bq"],[13252,1,"cc"],[13253,1,"cd"],[13254,1,"ckg"],[13255,3],[13256,1,"db"],[13257,1,"gy"],[13258,1,"ha"],[13259,1,"hp"],[13260,1,"in"],[13261,1,"kk"],[13262,1,"km"],[13263,1,"kt"],[13264,1,"lm"],[13265,1,"ln"],[13266,1,"log"],[13267,1,"lx"],[13268,1,"mb"],[13269,1,"mil"],[13270,1,"mol"],[13271,1,"ph"],[13272,3],[13273,1,"ppm"],[13274,1,"pr"],[13275,1,"sr"],[13276,1,"sv"],[13277,1,"wb"],[13278,1,"vm"],[13279,1,"am"],[13280,1,"1"],[13281,1,"2"],[13282,1,"3"],[13283,1,"4"],[13284,1,"5"],[13285,1,"6"],[13286,1,"7"],[13287,1,"8"],[13288,1,"9"],[13289,1,"10"],[13290,1,"11"],[13291,1,"12"],[13292,1,"13"],[13293,1,"14"],[13294,1,"15"],[13295,1,"16"],[13296,1,"17"],[13297,1,"18"],[13298,1,"19"],[13299,1,"20"],[13300,1,"21"],[13301,1,"22"],[13302,1,"23"],[13303,1,"24"],[13304,1,"25"],[13305,1,"26"],[13306,1,"27"],[13307,1,"28"],[13308,1,"29"],[13309,1,"30"],[13310,1,"31"],[13311,1,"gal"],[[13312,19893],2],[[19894,19903],2],[[19904,19967],2],[[19968,40869],2],[[40870,40891],2],[[40892,40899],2],[[40900,40907],2],[40908,2],[[40909,40917],2],[[40918,40938],2],[[40939,40943],2],[[40944,40956],2],[[40957,40959],2],[[40960,42124],2],[[42125,42127],3],[[42128,42145],2],[[42146,42147],2],[[42148,42163],2],[42164,2],[[42165,42176],2],[42177,2],[[42178,42180],2],[42181,2],[42182,2],[[42183,42191],3],[[42192,42237],2],[[42238,42239],2],[[42240,42508],2],[[42509,42511],2],[[42512,42539],2],[[42540,42559],3],[42560,1,""],[42561,2],[42562,1,""],[42563,2],[42564,1,""],[42565,2],[42566,1,""],[42567,2],[42568,1,""],[42569,2],[42570,1,""],[42571,2],[42572,1,""],[42573,2],[42574,1,""],[42575,2],[42576,1,""],[42577,2],[42578,1,""],[42579,2],[42580,1,""],[42581,2],[42582,1,""],[42583,2],[42584,1,""],[42585,2],[42586,1,""],[42587,2],[42588,1,""],[42589,2],[42590,1,""],[42591,2],[42592,1,""],[42593,2],[42594,1,""],[42595,2],[42596,1,""],[42597,2],[42598,1,""],[42599,2],[42600,1,""],[42601,2],[42602,1,""],[42603,2],[42604,1,""],[[42605,42607],2],[[42608,42611],2],[[42612,42619],2],[[42620,42621],2],[42622,2],[42623,2],[42624,1,""],[42625,2],[42626,1,""],[42627,2],[42628,1,""],[42629,2],[42630,1,""],[42631,2],[42632,1,""],[42633,2],[42634,1,""],[42635,2],[42636,1,""],[42637,2],[42638,1,""],[42639,2],[42640,1,""],[42641,2],[42642,1,""],[42643,2],[42644,1,""],[42645,2],[42646,1,""],[42647,2],[42648,1,""],[42649,2],[42650,1,""],[42651,2],[42652,1,""],[42653,1,""],[42654,2],[42655,2],[[42656,42725],2],[[42726,42735],2],[[42736,42737],2],[[42738,42743],2],[[42744,42751],3],[[42752,42774],2],[[42775,42778],2],[[42779,42783],2],[[42784,42785],2],[42786,1,""],[42787,2],[42788,1,""],[42789,2],[42790,1,""],[42791,2],[42792,1,""],[42793,2],[42794,1,""],[42795,2],[42796,1,""],[42797,2],[42798,1,""],[[42799,42801],2],[42802,1,""],[42803,2],[42804,1,""],[42805,2],[42806,1,""],[42807,2],[42808,1,""],[42809,2],[42810,1,""],[42811,2],[42812,1,""],[42813,2],[42814,1,""],[42815,2],[42816,1,""],[42817,2],[42818,1,""],[42819,2],[42820,1,""],[42821,2],[42822,1,""],[42823,2],[42824,1,""],[42825,2],[42826,1,""],[42827,2],[42828,1,""],[42829,2],[42830,1,""],[42831,2],[42832,1,""],[42833,2],[42834,1,""],[42835,2],[42836,1,""],[42837,2],[42838,1,""],[42839,2],[42840,1,""],[42841,2],[42842,1,""],[42843,2],[42844,1,""],[42845,2],[42846,1,""],[42847,2],[42848,1,""],[42849,2],[42850,1,""],[42851,2],[42852,1,""],[42853,2],[42854,1,""],[42855,2],[42856,1,""],[42857,2],[42858,1,""],[42859,2],[42860,1,""],[42861,2],[42862,1,""],[42863,2],[42864,1,""],[[42865,42872],2],[42873,1,""],[42874,2],[42875,1,""],[42876,2],[42877,1,""],[42878,1,""],[42879,2],[42880,1,""],[42881,2],[42882,1,""],[42883,2],[42884,1,""],[42885,2],[42886,1,""],[[42887,42888],2],[[42889,42890],2],[42891,1,""],[42892,2],[42893,1,""],[42894,2],[42895,2],[42896,1,""],[42897,2],[42898,1,""],[42899,2],[[42900,42901],2],[42902,1,""],[42903,2],[42904,1,""],[42905,2],[42906,1,""],[42907,2],[42908,1,""],[42909,2],[42910,1,""],[42911,2],[42912,1,""],[42913,2],[42914,1,""],[42915,2],[42916,1,""],[42917,2],[42918,1,""],[42919,2],[42920,1,""],[42921,2],[42922,1,""],[42923,1,""],[42924,1,""],[42925,1,""],[42926,1,""],[42927,2],[42928,1,""],[42929,1,""],[42930,1,""],[42931,1,""],[42932,1,""],[42933,2],[42934,1,""],[42935,2],[42936,1,""],[42937,2],[42938,1,""],[42939,2],[42940,1,""],[42941,2],[42942,1,""],[42943,2],[42944,1,""],[42945,2],[42946,1,""],[42947,2],[42948,1,""],[42949,1,""],[42950,1,""],[42951,1,""],[42952,2],[42953,1,""],[42954,2],[[42955,42959],3],[42960,1,""],[42961,2],[42962,3],[42963,2],[42964,3],[42965,2],[42966,1,""],[42967,2],[42968,1,""],[42969,2],[[42970,42993],3],[42994,1,"c"],[42995,1,"f"],[42996,1,"q"],[42997,1,""],[42998,2],[42999,2],[43000,1,""],[43001,1,""],[43002,2],[[43003,43007],2],[[43008,43047],2],[[43048,43051],2],[43052,2],[[43053,43055],3],[[43056,43065],2],[[43066,43071],3],[[43072,43123],2],[[43124,43127],2],[[43128,43135],3],[[43136,43204],2],[43205,2],[[43206,43213],3],[[43214,43215],2],[[43216,43225],2],[[43226,43231],3],[[43232,43255],2],[[43256,43258],2],[43259,2],[43260,2],[43261,2],[[43262,43263],2],[[43264,43309],2],[[43310,43311],2],[[43312,43347],2],[[43348,43358],3],[43359,2],[[43360,43388],2],[[43389,43391],3],[[43392,43456],2],[[43457,43469],2],[43470,3],[[43471,43481],2],[[43482,43485],3],[[43486,43487],2],[[43488,43518],2],[43519,3],[[43520,43574],2],[[43575,43583],3],[[43584,43597],2],[[43598,43599],3],[[43600,43609],2],[[43610,43611],3],[[43612,43615],2],[[43616,43638],2],[[43639,43641],2],[[43642,43643],2],[[43644,43647],2],[[43648,43714],2],[[43715,43738],3],[[43739,43741],2],[[43742,43743],2],[[43744,43759],2],[[43760,43761],2],[[43762,43766],2],[[43767,43776],3],[[43777,43782],2],[[43783,43784],3],[[43785,43790],2],[[43791,43792],3],[[43793,43798],2],[[43799,43807],3],[[43808,43814],2],[43815,3],[[43816,43822],2],[43823,3],[[43824,43866],2],[43867,2],[43868,1,""],[43869,1,""],[43870,1,""],[43871,1,""],[[43872,43875],2],[[43876,43877],2],[[43878,43879],2],[43880,2],[43881,1,""],[[43882,43883],2],[[43884,43887],3],[43888,1,""],[43889,1,""],[43890,1,""],[43891,1,""],[43892,1,""],[43893,1,""],[43894,1,""],[43895,1,""],[43896,1,""],[43897,1,""],[43898,1,""],[43899,1,""],[43900,1,""],[43901,1,""],[43902,1,""],[43903,1,""],[43904,1,""],[43905,1,""],[43906,1,""],[43907,1,""],[43908,1,""],[43909,1,""],[43910,1,""],[43911,1,""],[43912,1,""],[43913,1,""],[43914,1,""],[43915,1,""],[43916,1,""],[43917,1,""],[43918,1,""],[43919,1,""],[43920,1,""],[43921,1,""],[43922,1,""],[43923,1,""],[43924,1,""],[43925,1,""],[43926,1,""],[43927,1,""],[43928,1,""],[43929,1,""],[43930,1,""],[43931,1,""],[43932,1,""],[43933,1,""],[43934,1,""],[43935,1,""],[43936,1,""],[43937,1,""],[43938,1,""],[43939,1,""],[43940,1,""],[43941,1,""],[43942,1,""],[43943,1,""],[43944,1,""],[43945,1,""],[43946,1,""],[43947,1,""],[43948,1,""],[43949,1,""],[43950,1,""],[43951,1,""],[43952,1,""],[43953,1,""],[43954,1,""],[43955,1,""],[43956,1,""],[43957,1,""],[43958,1,""],[43959,1,""],[43960,1,""],[43961,1,""],[43962,1,""],[43963,1,""],[43964,1,""],[43965,1,""],[43966,1,""],[43967,1,""],[[43968,44010],2],[44011,2],[[44012,44013],2],[[44014,44015],3],[[44016,44025],2],[[44026,44031],3],[[44032,55203],2],[[55204,55215],3],[[55216,55238],2],[[55239,55242],3],[[55243,55291],2],[[55292,55295],3],[[55296,57343],3],[[57344,63743],3],[63744,1,""],[63745,1,""],[63746,1,""],[63747,1,""],[63748,1,""],[63749,1,""],[63750,1,""],[[63751,63752],1,""],[63753,1,""],[63754,1,""],[63755,1,""],[63756,1,""],[63757,1,""],[63758,1,""],[63759,1,""],[63760,1,""],[63761,1,""],[63762,1,""],[63763,1,""],[63764,1,""],[63765,1,""],[63766,1,""],[63767,1,""],[63768,1,""],[63769,1,""],[63770,1,""],[63771,1,""],[63772,1,""],[63773,1,""],[63774,1,""],[63775,1,""],[63776,1,""],[63777,1,""],[63778,1,""],[63779,1,""],[63780,1,""],[63781,1,""],[63782,1,""],[63783,1,""],[63784,1,""],[63785,1,""],[63786,1,""],[63787,1,""],[63788,1,""],[63789,1,""],[63790,1,""],[63791,1,""],[63792,1,""],[63793,1,""],[63794,1,""],[63795,1,""],[63796,1,""],[63797,1,""],[63798,1,""],[63799,1,""],[63800,1,""],[63801,1,""],[63802,1,""],[63803,1,""],[63804,1,""],[63805,1,""],[63806,1,""],[63807,1,""],[63808,1,""],[63809,1,""],[63810,1,""],[63811,1,""],[63812,1,""],[63813,1,""],[63814,1,""],[63815,1,""],[63816,1,""],[63817,1,""],[63818,1,""],[63819,1,""],[63820,1,""],[63821,1,""],[63822,1,""],[63823,1,""],[63824,1,""],[63825,1,""],[63826,1,""],[63827,1,""],[63828,1,""],[63829,1,""],[63830,1,""],[63831,1,""],[63832,1,""],[63833,1,""],[63834,1,""],[63835,1,""],[63836,1,""],[63837,1,""],[63838,1,""],[63839,1,""],[63840,1,""],[63841,1,""],[63842,1,""],[63843,1,""],[63844,1,""],[63845,1,""],[63846,1,""],[63847,1,""],[63848,1,""],[63849,1,""],[63850,1,""],[63851,1,""],[63852,1,""],[63853,1,""],[63854,1,""],[63855,1,""],[63856,1,""],[63857,1,""],[63858,1,""],[63859,1,""],[63860,1,""],[63861,1,""],[63862,1,""],[63863,1,""],[63864,1,""],[63865,1,""],[63866,1,""],[63867,1,""],[63868,1,""],[63869,1,""],[63870,1,""],[63871,1,""],[63872,1,""],[63873,1,""],[63874,1,""],[63875,1,""],[63876,1,""],[63877,1,""],[63878,1,""],[63879,1,""],[63880,1,""],[63881,1,""],[63882,1,""],[63883,1,""],[63884,1,""],[63885,1,""],[63886,1,""],[63887,1,""],[63888,1,""],[63889,1,""],[63890,1,""],[63891,1,""],[63892,1,""],[63893,1,""],[63894,1,""],[63895,1,""],[63896,1,""],[63897,1,""],[63898,1,""],[63899,1,""],[63900,1,""],[63901,1,""],[63902,1,""],[63903,1,""],[63904,1,""],[63905,1,""],[63906,1,""],[63907,1,""],[63908,1,""],[63909,1,""],[63910,1,""],[63911,1,""],[63912,1,""],[63913,1,""],[63914,1,""],[63915,1,""],[63916,1,""],[63917,1,""],[63918,1,""],[63919,1,""],[63920,1,""],[63921,1,""],[63922,1,""],[63923,1,""],[63924,1,""],[63925,1,""],[63926,1,""],[63927,1,""],[63928,1,""],[63929,1,""],[63930,1,""],[63931,1,""],[63932,1,""],[63933,1,""],[63934,1,""],[63935,1,""],[63936,1,""],[63937,1,""],[63938,1,""],[63939,1,""],[63940,1,""],[63941,1,""],[63942,1,""],[63943,1,""],[63944,1,""],[63945,1,""],[63946,1,""],[63947,1,""],[63948,1,""],[63949,1,""],[63950,1,""],[63951,1,""],[63952,1,""],[63953,1,""],[63954,1,""],[63955,1,""],[63956,1,""],[63957,1,""],[63958,1,""],[63959,1,""],[63960,1,""],[63961,1,""],[63962,1,""],[63963,1,""],[63964,1,""],[63965,1,""],[63966,1,""],[63967,1,""],[63968,1,""],[63969,1,""],[63970,1,""],[63971,1,""],[63972,1,""],[63973,1,""],[63974,1,""],[63975,1,""],[63976,1,""],[63977,1,""],[63978,1,""],[63979,1,""],[63980,1,""],[63981,1,""],[63982,1,""],[63983,1,""],[63984,1,""],[63985,1,""],[63986,1,""],[63987,1,""],[63988,1,""],[63989,1,""],[63990,1,""],[63991,1,""],[63992,1,""],[63993,1,""],[63994,1,""],[63995,1,""],[63996,1,""],[63997,1,""],[63998,1,""],[63999,1,""],[64000,1,""],[64001,1,""],[64002,1,""],[64003,1,""],[64004,1,""],[64005,1,""],[64006,1,""],[64007,1,""],[64008,1,""],[64009,1,""],[64010,1,""],[64011,1,""],[64012,1,""],[64013,1,""],[[64014,64015],2],[64016,1,""],[64017,2],[64018,1,""],[[64019,64020],2],[64021,1,""],[64022,1,""],[64023,1,""],[64024,1,""],[64025,1,""],[64026,1,""],[64027,1,""],[64028,1,""],[64029,1,""],[64030,1,""],[64031,2],[64032,1,""],[64033,2],[64034,1,""],[[64035,64036],2],[64037,1,""],[64038,1,""],[[64039,64041],2],[64042,1,""],[64043,1,""],[64044,1,""],[64045,1,""],[64046,1,""],[64047,1,""],[64048,1,""],[64049,1,""],[64050,1,""],[64051,1,""],[64052,1,""],[64053,1,""],[64054,1,""],[64055,1,""],[64056,1,""],[64057,1,""],[64058,1,""],[64059,1,""],[64060,1,""],[64061,1,""],[64062,1,""],[64063,1,""],[64064,1,""],[64065,1,""],[64066,1,""],[64067,1,""],[64068,1,""],[64069,1,""],[64070,1,""],[64071,1,""],[64072,1,""],[64073,1,""],[64074,1,""],[64075,1,""],[64076,1,""],[64077,1,""],[64078,1,""],[64079,1,""],[64080,1,""],[64081,1,""],[64082,1,""],[64083,1,""],[64084,1,""],[64085,1,""],[64086,1,""],[64087,1,""],[64088,1,""],[64089,1,""],[64090,1,""],[64091,1,""],[64092,1,""],[[64093,64094],1,""],[64095,1,""],[64096,1,""],[64097,1,""],[64098,1,""],[64099,1,""],[64100,1,""],[64101,1,""],[64102,1,""],[64103,1,""],[64104,1,""],[64105,1,""],[64106,1,""],[64107,1,""],[64108,1,""],[64109,1,""],[[64110,64111],3],[64112,1,""],[64113,1,""],[64114,1,""],[64115,1,""],[64116,1,""],[64117,1,""],[64118,1,""],[64119,1,""],[64120,1,""],[64121,1,""],[64122,1,""],[64123,1,""],[64124,1,""],[64125,1,""],[64126,1,""],[64127,1,""],[64128,1,""],[64129,1,""],[64130,1,""],[64131,1,""],[64132,1,""],[64133,1,""],[64134,1,""],[64135,1,""],[64136,1,""],[64137,1,""],[64138,1,""],[64139,1,""],[64140,1,""],[64141,1,""],[64142,1,""],[64143,1,""],[64144,1,""],[64145,1,""],[64146,1,""],[64147,1,""],[64148,1,""],[64149,1,""],[64150,1,""],[64151,1,""],[64152,1,""],[64153,1,""],[64154,1,""],[64155,1,""],[64156,1,""],[64157,1,""],[64158,1,""],[64159,1,""],[64160,1,""],[64161,1,""],[64162,1,""],[64163,1,""],[64164,1,""],[64165,1,""],[64166,1,""],[64167,1,""],[64168,1,""],[64169,1,""],[64170,1,""],[64171,1,""],[64172,1,""],[64173,1,""],[64174,1,""],[64175,1,""],[64176,1,""],[64177,1,""],[64178,1,""],[64179,1,""],[64180,1,""],[64181,1,""],[64182,1,""],[64183,1,""],[64184,1,""],[64185,1,""],[64186,1,""],[64187,1,""],[64188,1,""],[64189,1,""],[64190,1,""],[64191,1,""],[64192,1,""],[64193,1,""],[64194,1,""],[64195,1,""],[64196,1,""],[64197,1,""],[64198,1,""],[64199,1,""],[64200,1,""],[64201,1,""],[64202,1,""],[64203,1,""],[64204,1,""],[64205,1,""],[64206,1,""],[64207,1,""],[64208,1,""],[64209,1,""],[64210,1,""],[64211,1,""],[64212,1,""],[64213,1,""],[64214,1,""],[64215,1,""],[64216,1,""],[64217,1,""],[[64218,64255],3],[64256,1,"ff"],[64257,1,"fi"],[64258,1,"fl"],[64259,1,"ffi"],[64260,1,"ffl"],[[64261,64262],1,"st"],[[64263,64274],3],[64275,1,""],[64276,1,""],[64277,1,""],[64278,1,""],[64279,1,""],[[64280,64284],3],[64285,1,""],[64286,2],[64287,1,""],[64288,1,""],[64289,1,""],[64290,1,""],[64291,1,""],[64292,1,""],[64293,1,""],[64294,1,""],[64295,1,""],[64296,1,""],[64297,5,"+"],[64298,1,""],[64299,1,""],[64300,1,""],[64301,1,""],[64302,1,""],[64303,1,""],[64304,1,""],[64305,1,""],[64306,1,""],[64307,1,""],[64308,1,""],[64309,1,""],[64310,1,""],[64311,3],[64312,1,""],[64313,1,""],[64314,1,""],[64315,1,""],[64316,1,""],[64317,3],[64318,1,""],[64319,3],[64320,1,""],[64321,1,""],[64322,3],[64323,1,""],[64324,1,""],[64325,3],[64326,1,""],[64327,1,""],[64328,1,""],[64329,1,""],[64330,1,""],[64331,1,""],[64332,1,""],[64333,1,""],[64334,1,""],[64335,1,""],[[64336,64337],1,""],[[64338,64341],1,""],[[64342,64345],1,""],[[64346,64349],1,""],[[64350,64353],1,""],[[64354,64357],1,""],[[64358,64361],1,""],[[64362,64365],1,""],[[64366,64369],1,""],[[64370,64373],1,""],[[64374,64377],1,""],[[64378,64381],1,""],[[64382,64385],1,""],[[64386,64387],1,""],[[64388,64389],1,""],[[64390,64391],1,""],[[64392,64393],1,""],[[64394,64395],1,""],[[64396,64397],1,""],[[64398,64401],1,""],[[64402,64405],1,""],[[64406,64409],1,""],[[64410,64413],1,""],[[64414,64415],1,""],[[64416,64419],1,""],[[64420,64421],1,""],[[64422,64425],1,""],[[64426,64429],1,""],[[64430,64431],1,""],[[64432,64433],1,""],[[64434,64449],2],[64450,2],[[64451,64466],3],[[64467,64470],1,""],[[64471,64472],1,""],[[64473,64474],1,""],[[64475,64476],1,""],[64477,1,""],[[64478,64479],1,""],[[64480,64481],1,""],[[64482,64483],1,""],[[64484,64487],1,""],[[64488,64489],1,""],[[64490,64491],1,""],[[64492,64493],1,""],[[64494,64495],1,""],[[64496,64497],1,""],[[64498,64499],1,""],[[64500,64501],1,""],[[64502,64504],1,""],[[64505,64507],1,""],[[64508,64511],1,""],[64512,1,""],[64513,1,""],[64514,1,""],[64515,1,""],[64516,1,""],[64517,1,""],[64518,1,""],[64519,1,""],[64520,1,""],[64521,1,""],[64522,1,""],[64523,1,""],[64524,1,""],[64525,1,""],[64526,1,""],[64527,1,""],[64528,1,""],[64529,1,""],[64530,1,""],[64531,1,""],[64532,1,""],[64533,1,""],[64534,1,""],[64535,1,""],[64536,1,""],[64537,1,""],[64538,1,""],[64539,1,""],[64540,1,""],[64541,1,""],[64542,1,""],[64543,1,""],[64544,1,""],[64545,1,""],[64546,1,""],[64547,1,""],[64548,1,""],[64549,1,""],[64550,1,""],[64551,1,""],[64552,1,""],[64553,1,""],[64554,1,""],[64555,1,""],[64556,1,""],[64557,1,""],[64558,1,""],[64559,1,""],[64560,1,""],[64561,1,""],[64562,1,""],[64563,1,""],[64564,1,""],[64565,1,""],[64566,1,""],[64567,1,""],[64568,1,""],[64569,1,""],[64570,1,""],[64571,1,""],[64572,1,""],[64573,1,""],[64574,1,""],[64575,1,""],[64576,1,""],[64577,1,""],[64578,1,""],[64579,1,""],[64580,1,""],[64581,1,""],[64582,1,""],[64583,1,""],[64584,1,""],[64585,1,""],[64586,1,""],[64587,1,""],[64588,1,""],[64589,1,""],[64590,1,""],[64591,1,""],[64592,1,""],[64593,1,""],[64594,1,""],[64595,1,""],[64596,1,""],[64597,1,""],[64598,1,""],[64599,1,""],[64600,1,""],[64601,1,""],[64602,1,""],[64603,1,""],[64604,1,""],[64605,1,""],[64606,5," "],[64607,5," "],[64608,5," "],[64609,5," "],[64610,5," "],[64611,5," "],[64612,1,""],[64613,1,""],[64614,1,""],[64615,1,""],[64616,1,""],[64617,1,""],[64618,1,""],[64619,1,""],[64620,1,""],[64621,1,""],[64622,1,""],[64623,1,""],[64624,1,""],[64625,1,""],[64626,1,""],[64627,1,""],[64628,1,""],[64629,1,""],[64630,1,""],[64631,1,""],[64632,1,""],[64633,1,""],[64634,1,""],[64635,1,""],[64636,1,""],[64637,1,""],[64638,1,""],[64639,1,""],[64640,1,""],[64641,1,""],[64642,1,""],[64643,1,""],[64644,1,""],[64645,1,""],[64646,1,""],[64647,1,""],[64648,1,""],[64649,1,""],[64650,1,""],[64651,1,""],[64652,1,""],[64653,1,""],[64654,1,""],[64655,1,""],[64656,1,""],[64657,1,""],[64658,1,""],[64659,1,""],[64660,1,""],[64661,1,""],[64662,1,""],[64663,1,""],[64664,1,""],[64665,1,""],[64666,1,""],[64667,1,""],[64668,1,""],[64669,1,""],[64670,1,""],[64671,1,""],[64672,1,""],[64673,1,""],[64674,1,""],[64675,1,""],[64676,1,""],[64677,1,""],[64678,1,""],[64679,1,""],[64680,1,""],[64681,1,""],[64682,1,""],[64683,1,""],[64684,1,""],[64685,1,""],[64686,1,""],[64687,1,""],[64688,1,""],[64689,1,""],[64690,1,""],[64691,1,""],[64692,1,""],[64693,1,""],[64694,1,""],[64695,1,""],[64696,1,""],[64697,1,""],[64698,1,""],[64699,1,""],[64700,1,""],[64701,1,""],[64702,1,""],[64703,1,""],[64704,1,""],[64705,1,""],[64706,1,""],[64707,1,""],[64708,1,""],[64709,1,""],[64710,1,""],[64711,1,""],[64712,1,""],[64713,1,""],[64714,1,""],[64715,1,""],[64716,1,""],[64717,1,""],[64718,1,""],[64719,1,""],[64720,1,""],[64721,1,""],[64722,1,""],[64723,1,""],[64724,1,""],[64725,1,""],[64726,1,""],[64727,1,""],[64728,1,""],[64729,1,""],[64730,1,""],[64731,1,""],[64732,1,""],[64733,1,""],[64734,1,""],[64735,1,""],[64736,1,""],[64737,1,""],[64738,1,""],[64739,1,""],[64740,1,""],[64741,1,""],[64742,1,""],[64743,1,""],[64744,1,""],[64745,1,""],[64746,1,""],[64747,1,""],[64748,1,""],[64749,1,""],[64750,1,""],[64751,1,""],[64752,1,""],[64753,1,""],[64754,1,""],[64755,1,""],[64756,1,""],[64757,1,""],[64758,1,""],[64759,1,""],[64760,1,""],[64761,1,""],[64762,1,""],[64763,1,""],[64764,1,""],[64765,1,""],[64766,1,""],[64767,1,""],[64768,1,""],[64769,1,""],[64770,1,""],[64771,1,""],[64772,1,""],[64773,1,""],[64774,1,""],[64775,1,""],[64776,1,""],[64777,1,""],[64778,1,""],[64779,1,""],[64780,1,""],[64781,1,""],[64782,1,""],[64783,1,""],[64784,1,""],[64785,1,""],[64786,1,""],[64787,1,""],[64788,1,""],[64789,1,""],[64790,1,""],[64791,1,""],[64792,1,""],[64793,1,""],[64794,1,""],[64795,1,""],[64796,1,""],[64797,1,""],[64798,1,""],[64799,1,""],[64800,1,""],[64801,1,""],[64802,1,""],[64803,1,""],[64804,1,""],[64805,1,""],[64806,1,""],[64807,1,""],[64808,1,""],[64809,1,""],[64810,1,""],[64811,1,""],[64812,1,""],[64813,1,""],[64814,1,""],[64815,1,""],[64816,1,""],[64817,1,""],[64818,1,""],[64819,1,""],[64820,1,""],[64821,1,""],[64822,1,""],[64823,1,""],[64824,1,""],[64825,1,""],[64826,1,""],[64827,1,""],[[64828,64829],1,""],[[64830,64831],2],[[64832,64847],2],[64848,1,""],[[64849,64850],1,""],[64851,1,""],[64852,1,""],[64853,1,""],[64854,1,""],[64855,1,""],[[64856,64857],1,""],[64858,1,""],[64859,1,""],[64860,1,""],[64861,1,""],[64862,1,""],[[64863,64864],1,""],[64865,1,""],[[64866,64867],1,""],[[64868,64869],1,""],[64870,1,""],[[64871,64872],1,""],[64873,1,""],[[64874,64875],1,""],[[64876,64877],1,""],[64878,1,""],[[64879,64880],1,""],[[64881,64882],1,""],[64883,1,""],[64884,1,""],[64885,1,""],[[64886,64887],1,""],[64888,1,""],[64889,1,""],[64890,1,""],[64891,1,""],[[64892,64893],1,""],[64894,1,""],[64895,1,""],[64896,1,""],[64897,1,""],[64898,1,""],[[64899,64900],1,""],[[64901,64902],1,""],[[64903,64904],1,""],[64905,1,""],[64906,1,""],[64907,1,""],[64908,1,""],[64909,1,""],[64910,1,""],[64911,1,""],[[64912,64913],3],[64914,1,""],[64915,1,""],[64916,1,""],[64917,1,""],[64918,1,""],[[64919,64920],1,""],[64921,1,""],[64922,1,""],[64923,1,""],[[64924,64925],1,""],[64926,1,""],[64927,1,""],[64928,1,""],[64929,1,""],[64930,1,""],[64931,1,""],[64932,1,""],[64933,1,""],[64934,1,""],[64935,1,""],[64936,1,""],[64937,1,""],[64938,1,""],[64939,1,""],[64940,1,""],[64941,1,""],[64942,1,""],[64943,1,""],[64944,1,""],[64945,1,""],[64946,1,""],[64947,1,""],[64948,1,""],[64949,1,""],[64950,1,""],[64951,1,""],[64952,1,""],[64953,1,""],[64954,1,""],[64955,1,""],[64956,1,""],[64957,1,""],[64958,1,""],[64959,1,""],[64960,1,""],[64961,1,""],[64962,1,""],[64963,1,""],[64964,1,""],[64965,1,""],[64966,1,""],[64967,1,""],[[64968,64974],3],[64975,2],[[64976,65007],3],[65008,1,""],[65009,1,""],[65010,1,""],[65011,1,""],[65012,1,""],[65013,1,""],[65014,1,""],[65015,1,""],[65016,1,""],[65017,1,""],[65018,5,"   "],[65019,5," "],[65020,1,""],[65021,2],[[65022,65023],2],[[65024,65039],7],[65040,5,","],[65041,1,""],[65042,3],[65043,5,":"],[65044,5,";"],[65045,5,"!"],[65046,5,"?"],[65047,1,""],[65048,1,""],[65049,3],[[65050,65055],3],[[65056,65059],2],[[65060,65062],2],[[65063,65069],2],[[65070,65071],2],[65072,3],[65073,1,""],[65074,1,""],[[65075,65076],5,"_"],[65077,5,"("],[65078,5,")"],[65079,5,"{"],[65080,5,"}"],[65081,1,""],[65082,1,""],[65083,1,""],[65084,1,""],[65085,1,""],[65086,1,""],[65087,1,""],[65088,1,""],[65089,1,""],[65090,1,""],[65091,1,""],[65092,1,""],[[65093,65094],2],[65095,5,"["],[65096,5,"]"],[[65097,65100],5," "],[[65101,65103],5,"_"],[65104,5,","],[65105,1,""],[65106,3],[65107,3],[65108,5,";"],[65109,5,":"],[65110,5,"?"],[65111,5,"!"],[65112,1,""],[65113,5,"("],[65114,5,")"],[65115,5,"{"],[65116,5,"}"],[65117,1,""],[65118,1,""],[65119,5,"#"],[65120,5,"&"],[65121,5,"*"],[65122,5,"+"],[65123,1,"-"],[65124,5,"<"],[65125,5,">"],[65126,5,"="],[65127,3],[65128,5,"\\"],[65129,5,"$"],[65130,5,"%"],[65131,5,"@"],[[65132,65135],3],[65136,5," "],[65137,1,""],[65138,5," "],[65139,2],[65140,5," "],[65141,3],[65142,5," "],[65143,1,""],[65144,5," "],[65145,1,""],[65146,5," "],[65147,1,""],[65148,5," "],[65149,1,""],[65150,5," "],[65151,1,""],[65152,1,""],[[65153,65154],1,""],[[65155,65156],1,""],[[65157,65158],1,""],[[65159,65160],1,""],[[65161,65164],1,""],[[65165,65166],1,""],[[65167,65170],1,""],[[65171,65172],1,""],[[65173,65176],1,""],[[65177,65180],1,""],[[65181,65184],1,""],[[65185,65188],1,""],[[65189,65192],1,""],[[65193,65194],1,""],[[65195,65196],1,""],[[65197,65198],1,""],[[65199,65200],1,""],[[65201,65204],1,""],[[65205,65208],1,""],[[65209,65212],1,""],[[65213,65216],1,""],[[65217,65220],1,""],[[65221,65224],1,""],[[65225,65228],1,""],[[65229,65232],1,""],[[65233,65236],1,""],[[65237,65240],1,""],[[65241,65244],1,""],[[65245,65248],1,""],[[65249,65252],1,""],[[65253,65256],1,""],[[65257,65260],1,""],[[65261,65262],1,""],[[65263,65264],1,""],[[65265,65268],1,""],[[65269,65270],1,""],[[65271,65272],1,""],[[65273,65274],1,""],[[65275,65276],1,""],[[65277,65278],3],[65279,7],[65280,3],[65281,5,"!"],[65282,5,"\""],[65283,5,"#"],[65284,5,"$"],[65285,5,"%"],[65286,5,"&"],[65287,5,"'"],[65288,5,"("],[65289,5,")"],[65290,5,"*"],[65291,5,"+"],[65292,5,","],[65293,1,"-"],[65294,1,"."],[65295,5,"/"],[65296,1,"0"],[65297,1,"1"],[65298,1,"2"],[65299,1,"3"],[65300,1,"4"],[65301,1,"5"],[65302,1,"6"],[65303,1,"7"],[65304,1,"8"],[65305,1,"9"],[65306,5,":"],[65307,5,";"],[65308,5,"<"],[65309,5,"="],[65310,5,">"],[65311,5,"?"],[65312,5,"@"],[65313,1,"a"],[65314,1,"b"],[65315,1,"c"],[65316,1,"d"],[65317,1,"e"],[65318,1,"f"],[65319,1,"g"],[65320,1,"h"],[65321,1,"i"],[65322,1,"j"],[65323,1,"k"],[65324,1,"l"],[65325,1,"m"],[65326,1,"n"],[65327,1,"o"],[65328,1,"p"],[65329,1,"q"],[65330,1,"r"],[65331,1,"s"],[65332,1,"t"],[65333,1,"u"],[65334,1,"v"],[65335,1,"w"],[65336,1,"x"],[65337,1,"y"],[65338,1,"z"],[65339,5,"["],[65340,5,"\\"],[65341,5,"]"],[65342,5,"^"],[65343,5,"_"],[65344,5,"`"],[65345,1,"a"],[65346,1,"b"],[65347,1,"c"],[65348,1,"d"],[65349,1,"e"],[65350,1,"f"],[65351,1,"g"],[65352,1,"h"],[65353,1,"i"],[65354,1,"j"],[65355,1,"k"],[65356,1,"l"],[65357,1,"m"],[65358,1,"n"],[65359,1,"o"],[65360,1,"p"],[65361,1,"q"],[65362,1,"r"],[65363,1,"s"],[65364,1,"t"],[65365,1,"u"],[65366,1,"v"],[65367,1,"w"],[65368,1,"x"],[65369,1,"y"],[65370,1,"z"],[65371,5,"{"],[65372,5,"|"],[65373,5,"}"],[65374,5,"~"],[65375,1,""],[65376,1,""],[65377,1,"."],[65378,1,""],[65379,1,""],[65380,1,""],[65381,1,""],[65382,1,""],[65383,1,""],[65384,1,""],[65385,1,""],[65386,1,""],[65387,1,""],[65388,1,""],[65389,1,""],[65390,1,""],[65391,1,""],[65392,1,""],[65393,1,""],[65394,1,""],[65395,1,""],[65396,1,""],[65397,1,""],[65398,1,""],[65399,1,""],[65400,1,""],[65401,1,""],[65402,1,""],[65403,1,""],[65404,1,""],[65405,1,""],[65406,1,""],[65407,1,""],[65408,1,""],[65409,1,""],[65410,1,""],[65411,1,""],[65412,1,""],[65413,1,""],[65414,1,""],[65415,1,""],[65416,1,""],[65417,1,""],[65418,1,""],[65419,1,""],[65420,1,""],[65421,1,""],[65422,1,""],[65423,1,""],[65424,1,""],[65425,1,""],[65426,1,""],[65427,1,""],[65428,1,""],[65429,1,""],[65430,1,""],[65431,1,""],[65432,1,""],[65433,1,""],[65434,1,""],[65435,1,""],[65436,1,""],[65437,1,""],[65438,1,""],[65439,1,""],[65440,3],[65441,1,""],[65442,1,""],[65443,1,""],[65444,1,""],[65445,1,""],[65446,1,""],[65447,1,""],[65448,1,""],[65449,1,""],[65450,1,""],[65451,1,""],[65452,1,""],[65453,1,""],[65454,1,""],[65455,1,""],[65456,1,""],[65457,1,""],[65458,1,""],[65459,1,""],[65460,1,""],[65461,1,""],[65462,1,""],[65463,1,""],[65464,1,""],[65465,1,""],[65466,1,""],[65467,1,""],[65468,1,""],[65469,1,""],[65470,1,""],[[65471,65473],3],[65474,1,""],[65475,1,""],[65476,1,""],[65477,1,""],[65478,1,""],[65479,1,""],[[65480,65481],3],[65482,1,""],[65483,1,""],[65484,1,""],[65485,1,""],[65486,1,""],[65487,1,""],[[65488,65489],3],[65490,1,""],[65491,1,""],[65492,1,""],[65493,1,""],[65494,1,""],[65495,1,""],[[65496,65497],3],[65498,1,""],[65499,1,""],[65500,1,""],[[65501,65503],3],[65504,1,""],[65505,1,""],[65506,1,""],[65507,5," "],[65508,1,""],[65509,1,""],[65510,1,""],[65511,3],[65512,1,""],[65513,1,""],[65514,1,""],[65515,1,""],[65516,1,""],[65517,1,""],[65518,1,""],[[65519,65528],3],[[65529,65531],3],[65532,3],[65533,3],[[65534,65535],3],[[65536,65547],2],[65548,3],[[65549,65574],2],[65575,3],[[65576,65594],2],[65595,3],[[65596,65597],2],[65598,3],[[65599,65613],2],[[65614,65615],3],[[65616,65629],2],[[65630,65663],3],[[65664,65786],2],[[65787,65791],3],[[65792,65794],2],[[65795,65798],3],[[65799,65843],2],[[65844,65846],3],[[65847,65855],2],[[65856,65930],2],[[65931,65932],2],[[65933,65934],2],[65935,3],[[65936,65947],2],[65948,2],[[65949,65951],3],[65952,2],[[65953,65999],3],[[66000,66044],2],[66045,2],[[66046,66175],3],[[66176,66204],2],[[66205,66207],3],[[66208,66256],2],[[66257,66271],3],[66272,2],[[66273,66299],2],[[66300,66303],3],[[66304,66334],2],[66335,2],[[66336,66339],2],[[66340,66348],3],[[66349,66351],2],[[66352,66368],2],[66369,2],[[66370,66377],2],[66378,2],[[66379,66383],3],[[66384,66426],2],[[66427,66431],3],[[66432,66461],2],[66462,3],[66463,2],[[66464,66499],2],[[66500,66503],3],[[66504,66511],2],[[66512,66517],2],[[66518,66559],3],[66560,1,""],[66561,1,""],[66562,1,""],[66563,1,""],[66564,1,""],[66565,1,""],[66566,1,""],[66567,1,""],[66568,1,""],[66569,1,""],[66570,1,""],[66571,1,""],[66572,1,""],[66573,1,""],[66574,1,""],[66575,1,""],[66576,1,""],[66577,1,""],[66578,1,""],[66579,1,""],[66580,1,""],[66581,1,""],[66582,1,""],[66583,1,""],[66584,1,""],[66585,1,""],[66586,1,""],[66587,1,""],[66588,1,""],[66589,1,""],[66590,1,""],[66591,1,""],[66592,1,""],[66593,1,""],[66594,1,""],[66595,1,""],[66596,1,""],[66597,1,""],[66598,1,""],[66599,1,""],[[66600,66637],2],[[66638,66717],2],[[66718,66719],3],[[66720,66729],2],[[66730,66735],3],[66736,1,""],[66737,1,""],[66738,1,""],[66739,1,""],[66740,1,""],[66741,1,""],[66742,1,""],[66743,1,""],[66744,1,""],[66745,1,""],[66746,1,""],[66747,1,""],[66748,1,""],[66749,1,""],[66750,1,""],[66751,1,""],[66752,1,""],[66753,1,""],[66754,1,""],[66755,1,""],[66756,1,""],[66757,1,""],[66758,1,""],[66759,1,""],[66760,1,""],[66761,1,""],[66762,1,""],[66763,1,""],[66764,1,""],[66765,1,""],[66766,1,""],[66767,1,""],[66768,1,""],[66769,1,""],[66770,1,""],[66771,1,""],[[66772,66775],3],[[66776,66811],2],[[66812,66815],3],[[66816,66855],2],[[66856,66863],3],[[66864,66915],2],[[66916,66926],3],[66927,2],[66928,1,""],[66929,1,""],[66930,1,""],[66931,1,""],[66932,1,""],[66933,1,""],[66934,1,""],[66935,1,""],[66936,1,""],[66937,1,""],[66938,1,""],[66939,3],[66940,1,""],[66941,1,""],[66942,1,""],[66943,1,""],[66944,1,""],[66945,1,""],[66946,1,""],[66947,1,""],[66948,1,""],[66949,1,""],[66950,1,""],[66951,1,""],[66952,1,""],[66953,1,""],[66954,1,""],[66955,3],[66956,1,""],[66957,1,""],[66958,1,""],[66959,1,""],[66960,1,""],[66961,1,""],[66962,1,""],[66963,3],[66964,1,""],[66965,1,""],[66966,3],[[66967,66977],2],[66978,3],[[66979,66993],2],[66994,3],[[66995,67001],2],[67002,3],[[67003,67004],2],[[67005,67071],3],[[67072,67382],2],[[67383,67391],3],[[67392,67413],2],[[67414,67423],3],[[67424,67431],2],[[67432,67455],3],[67456,2],[67457,1,""],[67458,1,""],[67459,1,""],[67460,1,""],[67461,1,""],[67462,3],[67463,1,""],[67464,1,""],[67465,1,""],[67466,1,""],[67467,1,""],[67468,1,""],[67469,1,""],[67470,1,""],[67471,1,""],[67472,1,""],[67473,1,""],[67474,1,""],[67475,1,""],[67476,1,""],[67477,1,""],[67478,1,""],[67479,1,""],[67480,1,""],[67481,1,""],[67482,1,""],[67483,1,""],[67484,1,""],[67485,1,""],[67486,1,""],[67487,1,""],[67488,1,""],[67489,1,""],[67490,1,""],[67491,1,""],[67492,1,""],[67493,1,"q"],[67494,1,""],[67495,1,""],[67496,1,""],[67497,1,""],[67498,1,""],[67499,1,""],[67500,1,""],[67501,1,""],[67502,1,""],[67503,1,""],[67504,1,""],[67505,3],[67506,1,""],[67507,1,""],[67508,1,""],[67509,1,""],[67510,1,""],[67511,1,""],[67512,1,""],[67513,1,""],[67514,1,""],[[67515,67583],3],[[67584,67589],2],[[67590,67591],3],[67592,2],[67593,3],[[67594,67637],2],[67638,3],[[67639,67640],2],[[67641,67643],3],[67644,2],[[67645,67646],3],[67647,2],[[67648,67669],2],[67670,3],[[67671,67679],2],[[67680,67702],2],[[67703,67711],2],[[67712,67742],2],[[67743,67750],3],[[67751,67759],2],[[67760,67807],3],[[67808,67826],2],[67827,3],[[67828,67829],2],[[67830,67834],3],[[67835,67839],2],[[67840,67861],2],[[67862,67865],2],[[67866,67867],2],[[67868,67870],3],[67871,2],[[67872,67897],2],[[67898,67902],3],[67903,2],[[67904,67967],3],[[67968,68023],2],[[68024,68027],3],[[68028,68029],2],[[68030,68031],2],[[68032,68047],2],[[68048,68049],3],[[68050,68095],2],[[68096,68099],2],[68100,3],[[68101,68102],2],[[68103,68107],3],[[68108,68115],2],[68116,3],[[68117,68119],2],[68120,3],[[68121,68147],2],[[68148,68149],2],[[68150,68151],3],[[68152,68154],2],[[68155,68158],3],[68159,2],[[68160,68167],2],[68168,2],[[68169,68175],3],[[68176,68184],2],[[68185,68191],3],[[68192,68220],2],[[68221,68223],2],[[68224,68252],2],[[68253,68255],2],[[68256,68287],3],[[68288,68295],2],[68296,2],[[68297,68326],2],[[68327,68330],3],[[68331,68342],2],[[68343,68351],3],[[68352,68405],2],[[68406,68408],3],[[68409,68415],2],[[68416,68437],2],[[68438,68439],3],[[68440,68447],2],[[68448,68466],2],[[68467,68471],3],[[68472,68479],2],[[68480,68497],2],[[68498,68504],3],[[68505,68508],2],[[68509,68520],3],[[68521,68527],2],[[68528,68607],3],[[68608,68680],2],[[68681,68735],3],[68736,1,""],[68737,1,""],[68738,1,""],[68739,1,""],[68740,1,""],[68741,1,""],[68742,1,""],[68743,1,""],[68744,1,""],[68745,1,""],[68746,1,""],[68747,1,""],[68748,1,""],[68749,1,""],[68750,1,""],[68751,1,""],[68752,1,""],[68753,1,""],[68754,1,""],[68755,1,""],[68756,1,""],[68757,1,""],[68758,1,""],[68759,1,""],[68760,1,""],[68761,1,""],[68762,1,""],[68763,1,""],[68764,1,""],[68765,1,""],[68766,1,""],[68767,1,""],[68768,1,""],[68769,1,""],[68770,1,""],[68771,1,""],[68772,1,""],[68773,1,""],[68774,1,""],[68775,1,""],[68776,1,""],[68777,1,""],[68778,1,""],[68779,1,""],[68780,1,""],[68781,1,""],[68782,1,""],[68783,1,""],[68784,1,""],[68785,1,""],[68786,1,""],[[68787,68799],3],[[68800,68850],2],[[68851,68857],3],[[68858,68863],2],[[68864,68903],2],[[68904,68911],3],[[68912,68921],2],[[68922,69215],3],[[69216,69246],2],[69247,3],[[69248,69289],2],[69290,3],[[69291,69292],2],[69293,2],[[69294,69295],3],[[69296,69297],2],[[69298,69372],3],[[69373,69375],2],[[69376,69404],2],[[69405,69414],2],[69415,2],[[69416,69423],3],[[69424,69456],2],[[69457,69465],2],[[69466,69487],3],[[69488,69509],2],[[69510,69513],2],[[69514,69551],3],[[69552,69572],2],[[69573,69579],2],[[69580,69599],3],[[69600,69622],2],[[69623,69631],3],[[69632,69702],2],[[69703,69709],2],[[69710,69713],3],[[69714,69733],2],[[69734,69743],2],[[69744,69749],2],[[69750,69758],3],[69759,2],[[69760,69818],2],[[69819,69820],2],[69821,3],[[69822,69825],2],[69826,2],[[69827,69836],3],[69837,3],[[69838,69839],3],[[69840,69864],2],[[69865,69871],3],[[69872,69881],2],[[69882,69887],3],[[69888,69940],2],[69941,3],[[69942,69951],2],[[69952,69955],2],[[69956,69958],2],[69959,2],[[69960,69967],3],[[69968,70003],2],[[70004,70005],2],[70006,2],[[70007,70015],3],[[70016,70084],2],[[70085,70088],2],[[70089,70092],2],[70093,2],[[70094,70095],2],[[70096,70105],2],[70106,2],[70107,2],[70108,2],[[70109,70111],2],[70112,3],[[70113,70132],2],[[70133,70143],3],[[70144,70161],2],[70162,3],[[70163,70199],2],[[70200,70205],2],[70206,2],[[70207,70209],2],[[70210,70271],3],[[70272,70278],2],[70279,3],[70280,2],[70281,3],[[70282,70285],2],[70286,3],[[70287,70301],2],[70302,3],[[70303,70312],2],[70313,2],[[70314,70319],3],[[70320,70378],2],[[70379,70383],3],[[70384,70393],2],[[70394,70399],3],[70400,2],[[70401,70403],2],[70404,3],[[70405,70412],2],[[70413,70414],3],[[70415,70416],2],[[70417,70418],3],[[70419,70440],2],[70441,3],[[70442,70448],2],[70449,3],[[70450,70451],2],[70452,3],[[70453,70457],2],[70458,3],[70459,2],[[70460,70468],2],[[70469,70470],3],[[70471,70472],2],[[70473,70474],3],[[70475,70477],2],[[70478,70479],3],[70480,2],[[70481,70486],3],[70487,2],[[70488,70492],3],[[70493,70499],2],[[70500,70501],3],[[70502,70508],2],[[70509,70511],3],[[70512,70516],2],[[70517,70655],3],[[70656,70730],2],[[70731,70735],2],[[70736,70745],2],[70746,2],[70747,2],[70748,3],[70749,2],[70750,2],[70751,2],[[70752,70753],2],[[70754,70783],3],[[70784,70853],2],[70854,2],[70855,2],[[70856,70863],3],[[70864,70873],2],[[70874,71039],3],[[71040,71093],2],[[71094,71095],3],[[71096,71104],2],[[71105,71113],2],[[71114,71127],2],[[71128,71133],2],[[71134,71167],3],[[71168,71232],2],[[71233,71235],2],[71236,2],[[71237,71247],3],[[71248,71257],2],[[71258,71263],3],[[71264,71276],2],[[71277,71295],3],[[71296,71351],2],[71352,2],[71353,2],[[71354,71359],3],[[71360,71369],2],[[71370,71423],3],[[71424,71449],2],[71450,2],[[71451,71452],3],[[71453,71467],2],[[71468,71471],3],[[71472,71481],2],[[71482,71487],2],[[71488,71494],2],[[71495,71679],3],[[71680,71738],2],[71739,2],[[71740,71839],3],[71840,1,""],[71841,1,""],[71842,1,""],[71843,1,""],[71844,1,""],[71845,1,""],[71846,1,""],[71847,1,""],[71848,1,""],[71849,1,""],[71850,1,""],[71851,1,""],[71852,1,""],[71853,1,""],[71854,1,""],[71855,1,""],[71856,1,""],[71857,1,""],[71858,1,""],[71859,1,""],[71860,1,""],[71861,1,""],[71862,1,""],[71863,1,""],[71864,1,""],[71865,1,""],[71866,1,""],[71867,1,""],[71868,1,""],[71869,1,""],[71870,1,""],[71871,1,""],[[71872,71913],2],[[71914,71922],2],[[71923,71934],3],[71935,2],[[71936,71942],2],[[71943,71944],3],[71945,2],[[71946,71947],3],[[71948,71955],2],[71956,3],[[71957,71958],2],[71959,3],[[71960,71989],2],[71990,3],[[71991,71992],2],[[71993,71994],3],[[71995,72003],2],[[72004,72006],2],[[72007,72015],3],[[72016,72025],2],[[72026,72095],3],[[72096,72103],2],[[72104,72105],3],[[72106,72151],2],[[72152,72153],3],[[72154,72161],2],[72162,2],[[72163,72164],2],[[72165,72191],3],[[72192,72254],2],[[72255,72262],2],[72263,2],[[72264,72271],3],[[72272,72323],2],[[72324,72325],2],[[72326,72345],2],[[72346,72348],2],[72349,2],[[72350,72354],2],[[72355,72367],3],[[72368,72383],2],[[72384,72440],2],[[72441,72447],3],[[72448,72457],2],[[72458,72703],3],[[72704,72712],2],[72713,3],[[72714,72758],2],[72759,3],[[72760,72768],2],[[72769,72773],2],[[72774,72783],3],[[72784,72793],2],[[72794,72812],2],[[72813,72815],3],[[72816,72817],2],[[72818,72847],2],[[72848,72849],3],[[72850,72871],2],[72872,3],[[72873,72886],2],[[72887,72959],3],[[72960,72966],2],[72967,3],[[72968,72969],2],[72970,3],[[72971,73014],2],[[73015,73017],3],[73018,2],[73019,3],[[73020,73021],2],[73022,3],[[73023,73031],2],[[73032,73039],3],[[73040,73049],2],[[73050,73055],3],[[73056,73061],2],[73062,3],[[73063,73064],2],[73065,3],[[73066,73102],2],[73103,3],[[73104,73105],2],[73106,3],[[73107,73112],2],[[73113,73119],3],[[73120,73129],2],[[73130,73439],3],[[73440,73462],2],[[73463,73464],2],[[73465,73471],3],[[73472,73488],2],[73489,3],[[73490,73530],2],[[73531,73533],3],[[73534,73538],2],[[73539,73551],2],[[73552,73561],2],[[73562,73647],3],[73648,2],[[73649,73663],3],[[73664,73713],2],[[73714,73726],3],[73727,2],[[73728,74606],2],[[74607,74648],2],[74649,2],[[74650,74751],3],[[74752,74850],2],[[74851,74862],2],[74863,3],[[74864,74867],2],[74868,2],[[74869,74879],3],[[74880,75075],2],[[75076,77711],3],[[77712,77808],2],[[77809,77810],2],[[77811,77823],3],[[77824,78894],2],[78895,2],[[78896,78904],3],[[78905,78911],3],[[78912,78933],2],[[78934,82943],3],[[82944,83526],2],[[83527,92159],3],[[92160,92728],2],[[92729,92735],3],[[92736,92766],2],[92767,3],[[92768,92777],2],[[92778,92781],3],[[92782,92783],2],[[92784,92862],2],[92863,3],[[92864,92873],2],[[92874,92879],3],[[92880,92909],2],[[92910,92911],3],[[92912,92916],2],[92917,2],[[92918,92927],3],[[92928,92982],2],[[92983,92991],2],[[92992,92995],2],[[92996,92997],2],[[92998,93007],3],[[93008,93017],2],[93018,3],[[93019,93025],2],[93026,3],[[93027,93047],2],[[93048,93052],3],[[93053,93071],2],[[93072,93759],3],[93760,1,""],[93761,1,""],[93762,1,""],[93763,1,""],[93764,1,""],[93765,1,""],[93766,1,""],[93767,1,""],[93768,1,""],[93769,1,""],[93770,1,""],[93771,1,""],[93772,1,""],[93773,1,""],[93774,1,""],[93775,1,""],[93776,1,""],[93777,1,""],[93778,1,""],[93779,1,""],[93780,1,""],[93781,1,""],[93782,1,""],[93783,1,""],[93784,1,""],[93785,1,""],[93786,1,""],[93787,1,""],[93788,1,""],[93789,1,""],[93790,1,""],[93791,1,""],[[93792,93823],2],[[93824,93850],2],[[93851,93951],3],[[93952,94020],2],[[94021,94026],2],[[94027,94030],3],[94031,2],[[94032,94078],2],[[94079,94087],2],[[94088,94094],3],[[94095,94111],2],[[94112,94175],3],[94176,2],[94177,2],[94178,2],[94179,2],[94180,2],[[94181,94191],3],[[94192,94193],2],[[94194,94207],3],[[94208,100332],2],[[100333,100337],2],[[100338,100343],2],[[100344,100351],3],[[100352,101106],2],[[101107,101589],2],[[101590,101631],3],[[101632,101640],2],[[101641,110575],3],[[110576,110579],2],[110580,3],[[110581,110587],2],[110588,3],[[110589,110590],2],[110591,3],[[110592,110593],2],[[110594,110878],2],[[110879,110882],2],[[110883,110897],3],[110898,2],[[110899,110927],3],[[110928,110930],2],[[110931,110932],3],[110933,2],[[110934,110947],3],[[110948,110951],2],[[110952,110959],3],[[110960,111355],2],[[111356,113663],3],[[113664,113770],2],[[113771,113775],3],[[113776,113788],2],[[113789,113791],3],[[113792,113800],2],[[113801,113807],3],[[113808,113817],2],[[113818,113819],3],[113820,2],[[113821,113822],2],[113823,2],[[113824,113827],7],[[113828,118527],3],[[118528,118573],2],[[118574,118575],3],[[118576,118598],2],[[118599,118607],3],[[118608,118723],2],[[118724,118783],3],[[118784,119029],2],[[119030,119039],3],[[119040,119078],2],[[119079,119080],3],[119081,2],[[119082,119133],2],[119134,1,""],[119135,1,""],[119136,1,""],[119137,1,""],[119138,1,""],[119139,1,""],[119140,1,""],[[119141,119154],2],[[119155,119162],3],[[119163,119226],2],[119227,1,""],[119228,1,""],[119229,1,""],[119230,1,""],[119231,1,""],[119232,1,""],[[119233,119261],2],[[119262,119272],2],[[119273,119274],2],[[119275,119295],3],[[119296,119365],2],[[119366,119487],3],[[119488,119507],2],[[119508,119519],3],[[119520,119539],2],[[119540,119551],3],[[119552,119638],2],[[119639,119647],3],[[119648,119665],2],[[119666,119672],2],[[119673,119807],3],[119808,1,"a"],[119809,1,"b"],[119810,1,"c"],[119811,1,"d"],[119812,1,"e"],[119813,1,"f"],[119814,1,"g"],[119815,1,"h"],[119816,1,"i"],[119817,1,"j"],[119818,1,"k"],[119819,1,"l"],[119820,1,"m"],[119821,1,"n"],[119822,1,"o"],[119823,1,"p"],[119824,1,"q"],[119825,1,"r"],[119826,1,"s"],[119827,1,"t"],[119828,1,"u"],[119829,1,"v"],[119830,1,"w"],[119831,1,"x"],[119832,1,"y"],[119833,1,"z"],[119834,1,"a"],[119835,1,"b"],[119836,1,"c"],[119837,1,"d"],[119838,1,"e"],[119839,1,"f"],[119840,1,"g"],[119841,1,"h"],[119842,1,"i"],[119843,1,"j"],[119844,1,"k"],[119845,1,"l"],[119846,1,"m"],[119847,1,"n"],[119848,1,"o"],[119849,1,"p"],[119850,1,"q"],[119851,1,"r"],[119852,1,"s"],[119853,1,"t"],[119854,1,"u"],[119855,1,"v"],[119856,1,"w"],[119857,1,"x"],[119858,1,"y"],[119859,1,"z"],[119860,1,"a"],[119861,1,"b"],[119862,1,"c"],[119863,1,"d"],[119864,1,"e"],[119865,1,"f"],[119866,1,"g"],[119867,1,"h"],[119868,1,"i"],[119869,1,"j"],[119870,1,"k"],[119871,1,"l"],[119872,1,"m"],[119873,1,"n"],[119874,1,"o"],[119875,1,"p"],[119876,1,"q"],[119877,1,"r"],[119878,1,"s"],[119879,1,"t"],[119880,1,"u"],[119881,1,"v"],[119882,1,"w"],[119883,1,"x"],[119884,1,"y"],[119885,1,"z"],[119886,1,"a"],[119887,1,"b"],[119888,1,"c"],[119889,1,"d"],[119890,1,"e"],[119891,1,"f"],[119892,1,"g"],[119893,3],[119894,1,"i"],[119895,1,"j"],[119896,1,"k"],[119897,1,"l"],[119898,1,"m"],[119899,1,"n"],[119900,1,"o"],[119901,1,"p"],[119902,1,"q"],[119903,1,"r"],[119904,1,"s"],[119905,1,"t"],[119906,1,"u"],[119907,1,"v"],[119908,1,"w"],[119909,1,"x"],[119910,1,"y"],[119911,1,"z"],[119912,1,"a"],[119913,1,"b"],[119914,1,"c"],[119915,1,"d"],[119916,1,"e"],[119917,1,"f"],[119918,1,"g"],[119919,1,"h"],[119920,1,"i"],[119921,1,"j"],[119922,1,"k"],[119923,1,"l"],[119924,1,"m"],[119925,1,"n"],[119926,1,"o"],[119927,1,"p"],[119928,1,"q"],[119929,1,"r"],[119930,1,"s"],[119931,1,"t"],[119932,1,"u"],[119933,1,"v"],[119934,1,"w"],[119935,1,"x"],[119936,1,"y"],[119937,1,"z"],[119938,1,"a"],[119939,1,"b"],[119940,1,"c"],[119941,1,"d"],[119942,1,"e"],[119943,1,"f"],[119944,1,"g"],[119945,1,"h"],[119946,1,"i"],[119947,1,"j"],[119948,1,"k"],[119949,1,"l"],[119950,1,"m"],[119951,1,"n"],[119952,1,"o"],[119953,1,"p"],[119954,1,"q"],[119955,1,"r"],[119956,1,"s"],[119957,1,"t"],[119958,1,"u"],[119959,1,"v"],[119960,1,"w"],[119961,1,"x"],[119962,1,"y"],[119963,1,"z"],[119964,1,"a"],[119965,3],[119966,1,"c"],[119967,1,"d"],[[119968,119969],3],[119970,1,"g"],[[119971,119972],3],[119973,1,"j"],[119974,1,"k"],[[119975,119976],3],[119977,1,"n"],[119978,1,"o"],[119979,1,"p"],[119980,1,"q"],[119981,3],[119982,1,"s"],[119983,1,"t"],[119984,1,"u"],[119985,1,"v"],[119986,1,"w"],[119987,1,"x"],[119988,1,"y"],[119989,1,"z"],[119990,1,"a"],[119991,1,"b"],[119992,1,"c"],[119993,1,"d"],[119994,3],[119995,1,"f"],[119996,3],[119997,1,"h"],[119998,1,"i"],[119999,1,"j"],[120000,1,"k"],[120001,1,"l"],[120002,1,"m"],[120003,1,"n"],[120004,3],[120005,1,"p"],[120006,1,"q"],[120007,1,"r"],[120008,1,"s"],[120009,1,"t"],[120010,1,"u"],[120011,1,"v"],[120012,1,"w"],[120013,1,"x"],[120014,1,"y"],[120015,1,"z"],[120016,1,"a"],[120017,1,"b"],[120018,1,"c"],[120019,1,"d"],[120020,1,"e"],[120021,1,"f"],[120022,1,"g"],[120023,1,"h"],[120024,1,"i"],[120025,1,"j"],[120026,1,"k"],[120027,1,"l"],[120028,1,"m"],[120029,1,"n"],[120030,1,"o"],[120031,1,"p"],[120032,1,"q"],[120033,1,"r"],[120034,1,"s"],[120035,1,"t"],[120036,1,"u"],[120037,1,"v"],[120038,1,"w"],[120039,1,"x"],[120040,1,"y"],[120041,1,"z"],[120042,1,"a"],[120043,1,"b"],[120044,1,"c"],[120045,1,"d"],[120046,1,"e"],[120047,1,"f"],[120048,1,"g"],[120049,1,"h"],[120050,1,"i"],[120051,1,"j"],[120052,1,"k"],[120053,1,"l"],[120054,1,"m"],[120055,1,"n"],[120056,1,"o"],[120057,1,"p"],[120058,1,"q"],[120059,1,"r"],[120060,1,"s"],[120061,1,"t"],[120062,1,"u"],[120063,1,"v"],[120064,1,"w"],[120065,1,"x"],[120066,1,"y"],[120067,1,"z"],[120068,1,"a"],[120069,1,"b"],[120070,3],[120071,1,"d"],[120072,1,"e"],[120073,1,"f"],[120074,1,"g"],[[120075,120076],3],[120077,1,"j"],[120078,1,"k"],[120079,1,"l"],[120080,1,"m"],[120081,1,"n"],[120082,1,"o"],[120083,1,"p"],[120084,1,"q"],[120085,3],[120086,1,"s"],[120087,1,"t"],[120088,1,"u"],[120089,1,"v"],[120090,1,"w"],[120091,1,"x"],[120092,1,"y"],[120093,3],[120094,1,"a"],[120095,1,"b"],[120096,1,"c"],[120097,1,"d"],[120098,1,"e"],[120099,1,"f"],[120100,1,"g"],[120101,1,"h"],[120102,1,"i"],[120103,1,"j"],[120104,1,"k"],[120105,1,"l"],[120106,1,"m"],[120107,1,"n"],[120108,1,"o"],[120109,1,"p"],[120110,1,"q"],[120111,1,"r"],[120112,1,"s"],[120113,1,"t"],[120114,1,"u"],[120115,1,"v"],[120116,1,"w"],[120117,1,"x"],[120118,1,"y"],[120119,1,"z"],[120120,1,"a"],[120121,1,"b"],[120122,3],[120123,1,"d"],[120124,1,"e"],[120125,1,"f"],[120126,1,"g"],[120127,3],[120128,1,"i"],[120129,1,"j"],[120130,1,"k"],[120131,1,"l"],[120132,1,"m"],[120133,3],[120134,1,"o"],[[120135,120137],3],[120138,1,"s"],[120139,1,"t"],[120140,1,"u"],[120141,1,"v"],[120142,1,"w"],[120143,1,"x"],[120144,1,"y"],[120145,3],[120146,1,"a"],[120147,1,"b"],[120148,1,"c"],[120149,1,"d"],[120150,1,"e"],[120151,1,"f"],[120152,1,"g"],[120153,1,"h"],[120154,1,"i"],[120155,1,"j"],[120156,1,"k"],[120157,1,"l"],[120158,1,"m"],[120159,1,"n"],[120160,1,"o"],[120161,1,"p"],[120162,1,"q"],[120163,1,"r"],[120164,1,"s"],[120165,1,"t"],[120166,1,"u"],[120167,1,"v"],[120168,1,"w"],[120169,1,"x"],[120170,1,"y"],[120171,1,"z"],[120172,1,"a"],[120173,1,"b"],[120174,1,"c"],[120175,1,"d"],[120176,1,"e"],[120177,1,"f"],[120178,1,"g"],[120179,1,"h"],[120180,1,"i"],[120181,1,"j"],[120182,1,"k"],[120183,1,"l"],[120184,1,"m"],[120185,1,"n"],[120186,1,"o"],[120187,1,"p"],[120188,1,"q"],[120189,1,"r"],[120190,1,"s"],[120191,1,"t"],[120192,1,"u"],[120193,1,"v"],[120194,1,"w"],[120195,1,"x"],[120196,1,"y"],[120197,1,"z"],[120198,1,"a"],[120199,1,"b"],[120200,1,"c"],[120201,1,"d"],[120202,1,"e"],[120203,1,"f"],[120204,1,"g"],[120205,1,"h"],[120206,1,"i"],[120207,1,"j"],[120208,1,"k"],[120209,1,"l"],[120210,1,"m"],[120211,1,"n"],[120212,1,"o"],[120213,1,"p"],[120214,1,"q"],[120215,1,"r"],[120216,1,"s"],[120217,1,"t"],[120218,1,"u"],[120219,1,"v"],[120220,1,"w"],[120221,1,"x"],[120222,1,"y"],[120223,1,"z"],[120224,1,"a"],[120225,1,"b"],[120226,1,"c"],[120227,1,"d"],[120228,1,"e"],[120229,1,"f"],[120230,1,"g"],[120231,1,"h"],[120232,1,"i"],[120233,1,"j"],[120234,1,"k"],[120235,1,"l"],[120236,1,"m"],[120237,1,"n"],[120238,1,"o"],[120239,1,"p"],[120240,1,"q"],[120241,1,"r"],[120242,1,"s"],[120243,1,"t"],[120244,1,"u"],[120245,1,"v"],[120246,1,"w"],[120247,1,"x"],[120248,1,"y"],[120249,1,"z"],[120250,1,"a"],[120251,1,"b"],[120252,1,"c"],[120253,1,"d"],[120254,1,"e"],[120255,1,"f"],[120256,1,"g"],[120257,1,"h"],[120258,1,"i"],[120259,1,"j"],[120260,1,"k"],[120261,1,"l"],[120262,1,"m"],[120263,1,"n"],[120264,1,"o"],[120265,1,"p"],[120266,1,"q"],[120267,1,"r"],[120268,1,"s"],[120269,1,"t"],[120270,1,"u"],[120271,1,"v"],[120272,1,"w"],[120273,1,"x"],[120274,1,"y"],[120275,1,"z"],[120276,1,"a"],[120277,1,"b"],[120278,1,"c"],[120279,1,"d"],[120280,1,"e"],[120281,1,"f"],[120282,1,"g"],[120283,1,"h"],[120284,1,"i"],[120285,1,"j"],[120286,1,"k"],[120287,1,"l"],[120288,1,"m"],[120289,1,"n"],[120290,1,"o"],[120291,1,"p"],[120292,1,"q"],[120293,1,"r"],[120294,1,"s"],[120295,1,"t"],[120296,1,"u"],[120297,1,"v"],[120298,1,"w"],[120299,1,"x"],[120300,1,"y"],[120301,1,"z"],[120302,1,"a"],[120303,1,"b"],[120304,1,"c"],[120305,1,"d"],[120306,1,"e"],[120307,1,"f"],[120308,1,"g"],[120309,1,"h"],[120310,1,"i"],[120311,1,"j"],[120312,1,"k"],[120313,1,"l"],[120314,1,"m"],[120315,1,"n"],[120316,1,"o"],[120317,1,"p"],[120318,1,"q"],[120319,1,"r"],[120320,1,"s"],[120321,1,"t"],[120322,1,"u"],[120323,1,"v"],[120324,1,"w"],[120325,1,"x"],[120326,1,"y"],[120327,1,"z"],[120328,1,"a"],[120329,1,"b"],[120330,1,"c"],[120331,1,"d"],[120332,1,"e"],[120333,1,"f"],[120334,1,"g"],[120335,1,"h"],[120336,1,"i"],[120337,1,"j"],[120338,1,"k"],[120339,1,"l"],[120340,1,"m"],[120341,1,"n"],[120342,1,"o"],[120343,1,"p"],[120344,1,"q"],[120345,1,"r"],[120346,1,"s"],[120347,1,"t"],[120348,1,"u"],[120349,1,"v"],[120350,1,"w"],[120351,1,"x"],[120352,1,"y"],[120353,1,"z"],[120354,1,"a"],[120355,1,"b"],[120356,1,"c"],[120357,1,"d"],[120358,1,"e"],[120359,1,"f"],[120360,1,"g"],[120361,1,"h"],[120362,1,"i"],[120363,1,"j"],[120364,1,"k"],[120365,1,"l"],[120366,1,"m"],[120367,1,"n"],[120368,1,"o"],[120369,1,"p"],[120370,1,"q"],[120371,1,"r"],[120372,1,"s"],[120373,1,"t"],[120374,1,"u"],[120375,1,"v"],[120376,1,"w"],[120377,1,"x"],[120378,1,"y"],[120379,1,"z"],[120380,1,"a"],[120381,1,"b"],[120382,1,"c"],[120383,1,"d"],[120384,1,"e"],[120385,1,"f"],[120386,1,"g"],[120387,1,"h"],[120388,1,"i"],[120389,1,"j"],[120390,1,"k"],[120391,1,"l"],[120392,1,"m"],[120393,1,"n"],[120394,1,"o"],[120395,1,"p"],[120396,1,"q"],[120397,1,"r"],[120398,1,"s"],[120399,1,"t"],[120400,1,"u"],[120401,1,"v"],[120402,1,"w"],[120403,1,"x"],[120404,1,"y"],[120405,1,"z"],[120406,1,"a"],[120407,1,"b"],[120408,1,"c"],[120409,1,"d"],[120410,1,"e"],[120411,1,"f"],[120412,1,"g"],[120413,1,"h"],[120414,1,"i"],[120415,1,"j"],[120416,1,"k"],[120417,1,"l"],[120418,1,"m"],[120419,1,"n"],[120420,1,"o"],[120421,1,"p"],[120422,1,"q"],[120423,1,"r"],[120424,1,"s"],[120425,1,"t"],[120426,1,"u"],[120427,1,"v"],[120428,1,"w"],[120429,1,"x"],[120430,1,"y"],[120431,1,"z"],[120432,1,"a"],[120433,1,"b"],[120434,1,"c"],[120435,1,"d"],[120436,1,"e"],[120437,1,"f"],[120438,1,"g"],[120439,1,"h"],[120440,1,"i"],[120441,1,"j"],[120442,1,"k"],[120443,1,"l"],[120444,1,"m"],[120445,1,"n"],[120446,1,"o"],[120447,1,"p"],[120448,1,"q"],[120449,1,"r"],[120450,1,"s"],[120451,1,"t"],[120452,1,"u"],[120453,1,"v"],[120454,1,"w"],[120455,1,"x"],[120456,1,"y"],[120457,1,"z"],[120458,1,"a"],[120459,1,"b"],[120460,1,"c"],[120461,1,"d"],[120462,1,"e"],[120463,1,"f"],[120464,1,"g"],[120465,1,"h"],[120466,1,"i"],[120467,1,"j"],[120468,1,"k"],[120469,1,"l"],[120470,1,"m"],[120471,1,"n"],[120472,1,"o"],[120473,1,"p"],[120474,1,"q"],[120475,1,"r"],[120476,1,"s"],[120477,1,"t"],[120478,1,"u"],[120479,1,"v"],[120480,1,"w"],[120481,1,"x"],[120482,1,"y"],[120483,1,"z"],[120484,1,""],[120485,1,""],[[120486,120487],3],[120488,1,""],[120489,1,""],[120490,1,""],[120491,1,""],[120492,1,""],[120493,1,""],[120494,1,""],[120495,1,""],[120496,1,""],[120497,1,""],[120498,1,""],[120499,1,""],[120500,1,""],[120501,1,""],[120502,1,""],[120503,1,""],[120504,1,""],[120505,1,""],[120506,1,""],[120507,1,""],[120508,1,""],[120509,1,""],[120510,1,""],[120511,1,""],[120512,1,""],[120513,1,""],[120514,1,""],[120515,1,""],[120516,1,""],[120517,1,""],[120518,1,""],[120519,1,""],[120520,1,""],[120521,1,""],[120522,1,""],[120523,1,""],[120524,1,""],[120525,1,""],[120526,1,""],[120527,1,""],[120528,1,""],[120529,1,""],[120530,1,""],[[120531,120532],1,""],[120533,1,""],[120534,1,""],[120535,1,""],[120536,1,""],[120537,1,""],[120538,1,""],[120539,1,""],[120540,1,""],[120541,1,""],[120542,1,""],[120543,1,""],[120544,1,""],[120545,1,""],[120546,1,""],[120547,1,""],[120548,1,""],[120549,1,""],[120550,1,""],[120551,1,""],[120552,1,""],[120553,1,""],[120554,1,""],[120555,1,""],[120556,1,""],[120557,1,""],[120558,1,""],[120559,1,""],[120560,1,""],[120561,1,""],[120562,1,""],[120563,1,""],[120564,1,""],[120565,1,""],[120566,1,""],[120567,1,""],[120568,1,""],[120569,1,""],[120570,1,""],[120571,1,""],[120572,1,""],[120573,1,""],[120574,1,""],[120575,1,""],[120576,1,""],[120577,1,""],[120578,1,""],[120579,1,""],[120580,1,""],[120581,1,""],[120582,1,""],[120583,1,""],[120584,1,""],[120585,1,""],[120586,1,""],[120587,1,""],[120588,1,""],[[120589,120590],1,""],[120591,1,""],[120592,1,""],[120593,1,""],[120594,1,""],[120595,1,""],[120596,1,""],[120597,1,""],[120598,1,""],[120599,1,""],[120600,1,""],[120601,1,""],[120602,1,""],[120603,1,""],[120604,1,""],[120605,1,""],[120606,1,""],[120607,1,""],[120608,1,""],[120609,1,""],[120610,1,""],[120611,1,""],[120612,1,""],[120613,1,""],[120614,1,""],[120615,1,""],[120616,1,""],[120617,1,""],[120618,1,""],[120619,1,""],[120620,1,""],[120621,1,""],[120622,1,""],[120623,1,""],[120624,1,""],[120625,1,""],[120626,1,""],[120627,1,""],[120628,1,""],[120629,1,""],[120630,1,""],[120631,1,""],[120632,1,""],[120633,1,""],[120634,1,""],[120635,1,""],[120636,1,""],[120637,1,""],[120638,1,""],[120639,1,""],[120640,1,""],[120641,1,""],[120642,1,""],[120643,1,""],[120644,1,""],[120645,1,""],[120646,1,""],[[120647,120648],1,""],[120649,1,""],[120650,1,""],[120651,1,""],[120652,1,""],[120653,1,""],[120654,1,""],[120655,1,""],[120656,1,""],[120657,1,""],[120658,1,""],[120659,1,""],[120660,1,""],[120661,1,""],[120662,1,""],[120663,1,""],[120664,1,""],[120665,1,""],[120666,1,""],[120667,1,""],[120668,1,""],[120669,1,""],[120670,1,""],[120671,1,""],[120672,1,""],[120673,1,""],[120674,1,""],[120675,1,""],[120676,1,""],[120677,1,""],[120678,1,""],[120679,1,""],[120680,1,""],[120681,1,""],[120682,1,""],[120683,1,""],[120684,1,""],[120685,1,""],[120686,1,""],[120687,1,""],[120688,1,""],[120689,1,""],[120690,1,""],[120691,1,""],[120692,1,""],[120693,1,""],[120694,1,""],[120695,1,""],[120696,1,""],[120697,1,""],[120698,1,""],[120699,1,""],[120700,1,""],[120701,1,""],[120702,1,""],[120703,1,""],[120704,1,""],[[120705,120706],1,""],[120707,1,""],[120708,1,""],[120709,1,""],[120710,1,""],[120711,1,""],[120712,1,""],[120713,1,""],[120714,1,""],[120715,1,""],[120716,1,""],[120717,1,""],[120718,1,""],[120719,1,""],[120720,1,""],[120721,1,""],[120722,1,""],[120723,1,""],[120724,1,""],[120725,1,""],[120726,1,""],[120727,1,""],[120728,1,""],[120729,1,""],[120730,1,""],[120731,1,""],[120732,1,""],[120733,1,""],[120734,1,""],[120735,1,""],[120736,1,""],[120737,1,""],[120738,1,""],[120739,1,""],[120740,1,""],[120741,1,""],[120742,1,""],[120743,1,""],[120744,1,""],[120745,1,""],[120746,1,""],[120747,1,""],[120748,1,""],[120749,1,""],[120750,1,""],[120751,1,""],[120752,1,""],[120753,1,""],[120754,1,""],[120755,1,""],[120756,1,""],[120757,1,""],[120758,1,""],[120759,1,""],[120760,1,""],[120761,1,""],[120762,1,""],[[120763,120764],1,""],[120765,1,""],[120766,1,""],[120767,1,""],[120768,1,""],[120769,1,""],[120770,1,""],[120771,1,""],[120772,1,""],[120773,1,""],[120774,1,""],[120775,1,""],[120776,1,""],[120777,1,""],[[120778,120779],1,""],[[120780,120781],3],[120782,1,"0"],[120783,1,"1"],[120784,1,"2"],[120785,1,"3"],[120786,1,"4"],[120787,1,"5"],[120788,1,"6"],[120789,1,"7"],[120790,1,"8"],[120791,1,"9"],[120792,1,"0"],[120793,1,"1"],[120794,1,"2"],[120795,1,"3"],[120796,1,"4"],[120797,1,"5"],[120798,1,"6"],[120799,1,"7"],[120800,1,"8"],[120801,1,"9"],[120802,1,"0"],[120803,1,"1"],[120804,1,"2"],[120805,1,"3"],[120806,1,"4"],[120807,1,"5"],[120808,1,"6"],[120809,1,"7"],[120810,1,"8"],[120811,1,"9"],[120812,1,"0"],[120813,1,"1"],[120814,1,"2"],[120815,1,"3"],[120816,1,"4"],[120817,1,"5"],[120818,1,"6"],[120819,1,"7"],[120820,1,"8"],[120821,1,"9"],[120822,1,"0"],[120823,1,"1"],[120824,1,"2"],[120825,1,"3"],[120826,1,"4"],[120827,1,"5"],[120828,1,"6"],[120829,1,"7"],[120830,1,"8"],[120831,1,"9"],[[120832,121343],2],[[121344,121398],2],[[121399,121402],2],[[121403,121452],2],[[121453,121460],2],[121461,2],[[121462,121475],2],[121476,2],[[121477,121483],2],[[121484,121498],3],[[121499,121503],2],[121504,3],[[121505,121519],2],[[121520,122623],3],[[122624,122654],2],[[122655,122660],3],[[122661,122666],2],[[122667,122879],3],[[122880,122886],2],[122887,3],[[122888,122904],2],[[122905,122906],3],[[122907,122913],2],[122914,3],[[122915,122916],2],[122917,3],[[122918,122922],2],[[122923,122927],3],[122928,1,""],[122929,1,""],[122930,1,""],[122931,1,""],[122932,1,""],[122933,1,""],[122934,1,""],[122935,1,""],[122936,1,""],[122937,1,""],[122938,1,""],[122939,1,""],[122940,1,""],[122941,1,""],[122942,1,""],[122943,1,""],[122944,1,""],[122945,1,""],[122946,1,""],[122947,1,""],[122948,1,""],[122949,1,""],[122950,1,""],[122951,1,""],[122952,1,""],[122953,1,""],[122954,1,""],[122955,1,""],[122956,1,""],[122957,1,""],[122958,1,""],[122959,1,""],[122960,1,""],[122961,1,""],[122962,1,""],[122963,1,""],[122964,1,""],[122965,1,""],[122966,1,""],[122967,1,""],[122968,1,""],[122969,1,""],[122970,1,""],[122971,1,""],[122972,1,""],[122973,1,""],[122974,1,""],[122975,1,""],[122976,1,""],[122977,1,""],[122978,1,""],[122979,1,""],[122980,1,""],[122981,1,""],[122982,1,""],[122983,1,""],[122984,1,""],[122985,1,""],[122986,1,""],[122987,1,""],[122988,1,""],[122989,1,""],[[122990,123022],3],[123023,2],[[123024,123135],3],[[123136,123180],2],[[123181,123183],3],[[123184,123197],2],[[123198,123199],3],[[123200,123209],2],[[123210,123213],3],[123214,2],[123215,2],[[123216,123535],3],[[123536,123566],2],[[123567,123583],3],[[123584,123641],2],[[123642,123646],3],[123647,2],[[123648,124111],3],[[124112,124153],2],[[124154,124895],3],[[124896,124902],2],[124903,3],[[124904,124907],2],[124908,3],[[124909,124910],2],[124911,3],[[124912,124926],2],[124927,3],[[124928,125124],2],[[125125,125126],3],[[125127,125135],2],[[125136,125142],2],[[125143,125183],3],[125184,1,""],[125185,1,""],[125186,1,""],[125187,1,""],[125188,1,""],[125189,1,""],[125190,1,""],[125191,1,""],[125192,1,""],[125193,1,""],[125194,1,""],[125195,1,""],[125196,1,""],[125197,1,""],[125198,1,""],[125199,1,""],[125200,1,""],[125201,1,""],[125202,1,""],[125203,1,""],[125204,1,""],[125205,1,""],[125206,1,""],[125207,1,""],[125208,1,""],[125209,1,""],[125210,1,""],[125211,1,""],[125212,1,""],[125213,1,""],[125214,1,""],[125215,1,""],[125216,1,""],[125217,1,""],[[125218,125258],2],[125259,2],[[125260,125263],3],[[125264,125273],2],[[125274,125277],3],[[125278,125279],2],[[125280,126064],3],[[126065,126132],2],[[126133,126208],3],[[126209,126269],2],[[126270,126463],3],[126464,1,""],[126465,1,""],[126466,1,""],[126467,1,""],[126468,3],[126469,1,""],[126470,1,""],[126471,1,""],[126472,1,""],[126473,1,""],[126474,1,""],[126475,1,""],[126476,1,""],[126477,1,""],[126478,1,""],[126479,1,""],[126480,1,""],[126481,1,""],[126482,1,""],[126483,1,""],[126484,1,""],[126485,1,""],[126486,1,""],[126487,1,""],[126488,1,""],[126489,1,""],[126490,1,""],[126491,1,""],[126492,1,""],[126493,1,""],[126494,1,""],[126495,1,""],[126496,3],[126497,1,""],[126498,1,""],[126499,3],[126500,1,""],[[126501,126502],3],[126503,1,""],[126504,3],[126505,1,""],[126506,1,""],[126507,1,""],[126508,1,""],[126509,1,""],[126510,1,""],[126511,1,""],[126512,1,""],[126513,1,""],[126514,1,""],[126515,3],[126516,1,""],[126517,1,""],[126518,1,""],[126519,1,""],[126520,3],[126521,1,""],[126522,3],[126523,1,""],[[126524,126529],3],[126530,1,""],[[126531,126534],3],[126535,1,""],[126536,3],[126537,1,""],[126538,3],[126539,1,""],[126540,3],[126541,1,""],[126542,1,""],[126543,1,""],[126544,3],[126545,1,""],[126546,1,""],[126547,3],[126548,1,""],[[126549,126550],3],[126551,1,""],[126552,3],[126553,1,""],[126554,3],[126555,1,""],[126556,3],[126557,1,""],[126558,3],[126559,1,""],[126560,3],[126561,1,""],[126562,1,""],[126563,3],[126564,1,""],[[126565,126566],3],[126567,1,""],[126568,1,""],[126569,1,""],[126570,1,""],[126571,3],[126572,1,""],[126573,1,""],[126574,1,""],[126575,1,""],[126576,1,""],[126577,1,""],[126578,1,""],[126579,3],[126580,1,""],[126581,1,""],[126582,1,""],[126583,1,""],[126584,3],[126585,1,""],[126586,1,""],[126587,1,""],[126588,1,""],[126589,3],[126590,1,""],[126591,3],[126592,1,""],[126593,1,""],[126594,1,""],[126595,1,""],[126596,1,""],[126597,1,""],[126598,1,""],[126599,1,""],[126600,1,""],[126601,1,""],[126602,3],[126603,1,""],[126604,1,""],[126605,1,""],[126606,1,""],[126607,1,""],[126608,1,""],[126609,1,""],[126610,1,""],[126611,1,""],[126612,1,""],[126613,1,""],[126614,1,""],[126615,1,""],[126616,1,""],[126617,1,""],[126618,1,""],[126619,1,""],[[126620,126624],3],[126625,1,""],[126626,1,""],[126627,1,""],[126628,3],[126629,1,""],[126630,1,""],[126631,1,""],[126632,1,""],[126633,1,""],[126634,3],[126635,1,""],[126636,1,""],[126637,1,""],[126638,1,""],[126639,1,""],[126640,1,""],[126641,1,""],[126642,1,""],[126643,1,""],[126644,1,""],[126645,1,""],[126646,1,""],[126647,1,""],[126648,1,""],[126649,1,""],[126650,1,""],[126651,1,""],[[126652,126703],3],[[126704,126705],2],[[126706,126975],3],[[126976,127019],2],[[127020,127023],3],[[127024,127123],2],[[127124,127135],3],[[127136,127150],2],[[127151,127152],3],[[127153,127166],2],[127167,2],[127168,3],[[127169,127183],2],[127184,3],[[127185,127199],2],[[127200,127221],2],[[127222,127231],3],[127232,3],[127233,5,"0,"],[127234,5,"1,"],[127235,5,"2,"],[127236,5,"3,"],[127237,5,"4,"],[127238,5,"5,"],[127239,5,"6,"],[127240,5,"7,"],[127241,5,"8,"],[127242,5,"9,"],[[127243,127244],2],[[127245,127247],2],[127248,5,"(a)"],[127249,5,"(b)"],[127250,5,"(c)"],[127251,5,"(d)"],[127252,5,"(e)"],[127253,5,"(f)"],[127254,5,"(g)"],[127255,5,"(h)"],[127256,5,"(i)"],[127257,5,"(j)"],[127258,5,"(k)"],[127259,5,"(l)"],[127260,5,"(m)"],[127261,5,"(n)"],[127262,5,"(o)"],[127263,5,"(p)"],[127264,5,"(q)"],[127265,5,"(r)"],[127266,5,"(s)"],[127267,5,"(t)"],[127268,5,"(u)"],[127269,5,"(v)"],[127270,5,"(w)"],[127271,5,"(x)"],[127272,5,"(y)"],[127273,5,"(z)"],[127274,1,"s"],[127275,1,"c"],[127276,1,"r"],[127277,1,"cd"],[127278,1,"wz"],[127279,2],[127280,1,"a"],[127281,1,"b"],[127282,1,"c"],[127283,1,"d"],[127284,1,"e"],[127285,1,"f"],[127286,1,"g"],[127287,1,"h"],[127288,1,"i"],[127289,1,"j"],[127290,1,"k"],[127291,1,"l"],[127292,1,"m"],[127293,1,"n"],[127294,1,"o"],[127295,1,"p"],[127296,1,"q"],[127297,1,"r"],[127298,1,"s"],[127299,1,"t"],[127300,1,"u"],[127301,1,"v"],[127302,1,"w"],[127303,1,"x"],[127304,1,"y"],[127305,1,"z"],[127306,1,"hv"],[127307,1,"mv"],[127308,1,"sd"],[127309,1,"ss"],[127310,1,"ppv"],[127311,1,"wc"],[[127312,127318],2],[127319,2],[[127320,127326],2],[127327,2],[[127328,127337],2],[127338,1,"mc"],[127339,1,"md"],[127340,1,"mr"],[[127341,127343],2],[[127344,127352],2],[127353,2],[127354,2],[[127355,127356],2],[[127357,127358],2],[127359,2],[[127360,127369],2],[[127370,127373],2],[[127374,127375],2],[127376,1,"dj"],[[127377,127386],2],[[127387,127404],2],[127405,2],[[127406,127461],3],[[127462,127487],2],[127488,1,""],[127489,1,""],[127490,1,""],[[127491,127503],3],[127504,1,""],[127505,1,""],[127506,1,""],[127507,1,""],[127508,1,""],[127509,1,""],[127510,1,""],[127511,1,""],[127512,1,""],[127513,1,""],[127514,1,""],[127515,1,""],[127516,1,""],[127517,1,""],[127518,1,""],[127519,1,""],[127520,1,""],[127521,1,""],[127522,1,""],[127523,1,""],[127524,1,""],[127525,1,""],[127526,1,""],[127527,1,""],[127528,1,""],[127529,1,""],[127530,1,""],[127531,1,""],[127532,1,""],[127533,1,""],[127534,1,""],[127535,1,""],[127536,1,""],[127537,1,""],[127538,1,""],[127539,1,""],[127540,1,""],[127541,1,""],[127542,1,""],[127543,1,""],[127544,1,""],[127545,1,""],[127546,1,""],[127547,1,""],[[127548,127551],3],[127552,1,""],[127553,1,""],[127554,1,""],[127555,1,""],[127556,1,""],[127557,1,""],[127558,1,""],[127559,1,""],[127560,1,""],[[127561,127567],3],[127568,1,""],[127569,1,""],[[127570,127583],3],[[127584,127589],2],[[127590,127743],3],[[127744,127776],2],[[127777,127788],2],[[127789,127791],2],[[127792,127797],2],[127798,2],[[127799,127868],2],[127869,2],[[127870,127871],2],[[127872,127891],2],[[127892,127903],2],[[127904,127940],2],[127941,2],[[127942,127946],2],[[127947,127950],2],[[127951,127955],2],[[127956,127967],2],[[127968,127984],2],[[127985,127991],2],[[127992,127999],2],[[128000,128062],2],[128063,2],[128064,2],[128065,2],[[128066,128247],2],[128248,2],[[128249,128252],2],[[128253,128254],2],[128255,2],[[128256,128317],2],[[128318,128319],2],[[128320,128323],2],[[128324,128330],2],[[128331,128335],2],[[128336,128359],2],[[128360,128377],2],[128378,2],[[128379,128419],2],[128420,2],[[128421,128506],2],[[128507,128511],2],[128512,2],[[128513,128528],2],[128529,2],[[128530,128532],2],[128533,2],[128534,2],[128535,2],[128536,2],[128537,2],[128538,2],[128539,2],[[128540,128542],2],[128543,2],[[128544,128549],2],[[128550,128551],2],[[128552,128555],2],[128556,2],[128557,2],[[128558,128559],2],[[128560,128563],2],[128564,2],[[128565,128576],2],[[128577,128578],2],[[128579,128580],2],[[128581,128591],2],[[128592,128639],2],[[128640,128709],2],[[128710,128719],2],[128720,2],[[128721,128722],2],[[128723,128724],2],[128725,2],[[128726,128727],2],[[128728,128731],3],[128732,2],[[128733,128735],2],[[128736,128748],2],[[128749,128751],3],[[128752,128755],2],[[128756,128758],2],[[128759,128760],2],[128761,2],[128762,2],[[128763,128764],2],[[128765,128767],3],[[128768,128883],2],[[128884,128886],2],[[128887,128890],3],[[128891,128895],2],[[128896,128980],2],[[128981,128984],2],[128985,2],[[128986,128991],3],[[128992,129003],2],[[129004,129007],3],[129008,2],[[129009,129023],3],[[129024,129035],2],[[129036,129039],3],[[129040,129095],2],[[129096,129103],3],[[129104,129113],2],[[129114,129119],3],[[129120,129159],2],[[129160,129167],3],[[129168,129197],2],[[129198,129199],3],[[129200,129201],2],[[129202,129279],3],[[129280,129291],2],[129292,2],[[129293,129295],2],[[129296,129304],2],[[129305,129310],2],[129311,2],[[129312,129319],2],[[129320,129327],2],[129328,2],[[129329,129330],2],[[129331,129342],2],[129343,2],[[129344,129355],2],[129356,2],[[129357,129359],2],[[129360,129374],2],[[129375,129387],2],[[129388,129392],2],[129393,2],[129394,2],[[129395,129398],2],[[129399,129400],2],[129401,2],[129402,2],[129403,2],[[129404,129407],2],[[129408,129412],2],[[129413,129425],2],[[129426,129431],2],[[129432,129442],2],[[129443,129444],2],[[129445,129450],2],[[129451,129453],2],[[129454,129455],2],[[129456,129465],2],[[129466,129471],2],[129472,2],[[129473,129474],2],[[129475,129482],2],[129483,2],[129484,2],[[129485,129487],2],[[129488,129510],2],[[129511,129535],2],[[129536,129619],2],[[129620,129631],3],[[129632,129645],2],[[129646,129647],3],[[129648,129651],2],[129652,2],[[129653,129655],2],[[129656,129658],2],[[129659,129660],2],[[129661,129663],3],[[129664,129666],2],[[129667,129670],2],[[129671,129672],2],[[129673,129679],3],[[129680,129685],2],[[129686,129704],2],[[129705,129708],2],[[129709,129711],2],[[129712,129718],2],[[129719,129722],2],[[129723,129725],2],[129726,3],[129727,2],[[129728,129730],2],[[129731,129733],2],[[129734,129741],3],[[129742,129743],2],[[129744,129750],2],[[129751,129753],2],[[129754,129755],2],[[129756,129759],3],[[129760,129767],2],[129768,2],[[129769,129775],3],[[129776,129782],2],[[129783,129784],2],[[129785,129791],3],[[129792,129938],2],[129939,3],[[129940,129994],2],[[129995,130031],3],[130032,1,"0"],[130033,1,"1"],[130034,1,"2"],[130035,1,"3"],[130036,1,"4"],[130037,1,"5"],[130038,1,"6"],[130039,1,"7"],[130040,1,"8"],[130041,1,"9"],[[130042,131069],3],[[131070,131071],3],[[131072,173782],2],[[173783,173789],2],[[173790,173791],2],[[173792,173823],3],[[173824,177972],2],[[177973,177976],2],[177977,2],[[177978,177983],3],[[177984,178205],2],[[178206,178207],3],[[178208,183969],2],[[183970,183983],3],[[183984,191456],2],[[191457,194559],3],[194560,1,""],[194561,1,""],[194562,1,""],[194563,1,""],[194564,1,""],[194565,1,""],[194566,1,""],[194567,1,""],[194568,1,""],[194569,1,""],[194570,1,""],[194571,1,""],[194572,1,""],[194573,1,""],[194574,1,""],[194575,1,""],[194576,1,""],[194577,1,""],[194578,1,""],[194579,1,""],[194580,1,""],[194581,1,""],[194582,1,""],[194583,1,""],[194584,1,""],[194585,1,""],[194586,1,""],[194587,1,""],[194588,1,""],[194589,1,""],[194590,1,""],[194591,1,""],[194592,1,""],[194593,1,""],[194594,1,""],[194595,1,""],[194596,1,""],[194597,1,""],[194598,1,""],[194599,1,""],[194600,1,""],[194601,1,""],[194602,1,""],[194603,1,""],[194604,1,""],[194605,1,""],[194606,1,""],[194607,1,""],[194608,1,""],[[194609,194611],1,""],[194612,1,""],[194613,1,""],[194614,1,""],[194615,1,""],[194616,1,""],[194617,1,""],[194618,1,""],[194619,1,""],[194620,1,""],[194621,1,""],[194622,1,""],[194623,1,""],[194624,1,""],[194625,1,""],[194626,1,""],[194627,1,""],[194628,1,""],[[194629,194630],1,""],[194631,1,""],[194632,1,""],[194633,1,""],[194634,1,""],[194635,1,""],[194636,1,""],[194637,1,""],[194638,1,""],[194639,1,""],[194640,1,""],[194641,1,""],[194642,1,""],[194643,1,""],[194644,1,""],[194645,1,""],[194646,1,""],[194647,1,""],[194648,1,""],[194649,1,""],[194650,1,""],[194651,1,""],[194652,1,""],[194653,1,""],[194654,1,""],[194655,1,""],[194656,1,""],[194657,1,""],[194658,1,""],[194659,1,""],[194660,1,""],[194661,1,""],[194662,1,""],[194663,1,""],[194664,3],[194665,1,""],[[194666,194667],1,""],[194668,1,""],[194669,1,""],[194670,1,""],[194671,1,""],[194672,1,""],[194673,1,""],[194674,1,""],[194675,1,""],[194676,3],[194677,1,""],[194678,1,""],[194679,1,""],[194680,1,""],[194681,1,""],[194682,1,""],[194683,1,""],[194684,1,""],[194685,1,""],[194686,1,""],[194687,1,""],[194688,1,""],[194689,1,""],[194690,1,""],[194691,1,""],[194692,1,""],[194693,1,""],[194694,1,""],[194695,1,""],[194696,1,""],[194697,1,""],[194698,1,""],[194699,1,""],[194700,1,""],[194701,1,""],[194702,1,""],[194703,1,""],[194704,1,""],[[194705,194706],1,""],[194707,1,""],[[194708,194709],1,""],[194710,1,""],[194711,1,""],[194712,1,""],[194713,1,""],[194714,1,""],[194715,1,""],[194716,1,""],[194717,1,""],[194718,1,""],[194719,1,""],[194720,1,""],[194721,1,""],[194722,1,""],[194723,1,""],[194724,1,""],[194725,1,""],[194726,1,""],[194727,1,""],[194728,1,""],[194729,1,""],[194730,1,""],[194731,1,""],[194732,1,""],[194733,1,""],[194734,1,""],[194735,1,""],[194736,1,""],[194737,1,""],[194738,1,""],[194739,1,""],[194740,1,""],[194741,1,""],[194742,1,""],[194743,1,""],[194744,1,""],[194745,1,""],[194746,1,""],[194747,1,""],[194748,1,""],[194749,1,""],[194750,1,""],[194751,1,""],[194752,1,""],[194753,1,""],[194754,1,""],[194755,1,""],[194756,1,""],[194757,1,""],[194758,1,""],[194759,1,""],[194760,1,""],[194761,1,""],[194762,1,""],[194763,1,""],[194764,1,""],[194765,1,""],[194766,1,""],[194767,1,""],[194768,1,""],[194769,1,""],[194770,1,""],[194771,1,""],[194772,1,""],[194773,1,""],[194774,1,""],[194775,1,""],[194776,1,""],[194777,1,""],[194778,1,""],[194779,1,""],[194780,1,""],[194781,1,""],[194782,1,""],[194783,1,""],[194784,1,""],[194785,1,""],[194786,1,""],[194787,1,""],[194788,1,""],[194789,1,""],[194790,1,""],[194791,1,""],[194792,1,""],[194793,1,""],[194794,1,""],[194795,1,""],[194796,1,""],[194797,1,""],[194798,1,""],[194799,1,""],[194800,1,""],[194801,1,""],[194802,1,""],[194803,1,""],[194804,1,""],[194805,1,""],[194806,1,""],[194807,1,""],[194808,1,""],[194809,1,""],[194810,1,""],[194811,1,""],[194812,1,""],[194813,1,""],[194814,1,""],[194815,1,""],[194816,1,""],[194817,1,""],[194818,1,""],[194819,1,""],[194820,1,""],[194821,1,""],[194822,1,""],[194823,1,""],[194824,1,""],[194825,1,""],[194826,1,""],[194827,1,""],[194828,1,""],[194829,1,""],[194830,1,""],[194831,1,""],[194832,1,""],[194833,1,""],[194834,1,""],[194835,1,""],[194836,1,""],[194837,1,""],[194838,1,""],[194839,1,""],[194840,1,""],[194841,1,""],[194842,1,""],[194843,1,""],[194844,1,""],[194845,1,""],[194846,1,""],[194847,3],[194848,1,""],[194849,1,""],[194850,1,""],[194851,1,""],[194852,1,""],[194853,1,""],[194854,1,""],[194855,1,""],[194856,1,""],[194857,1,""],[194858,1,""],[194859,1,""],[[194860,194861],1,""],[194862,1,""],[194863,1,""],[194864,1,""],[194865,1,""],[194866,1,""],[194867,1,""],[194868,1,""],[194869,1,""],[194870,1,""],[194871,1,""],[194872,1,""],[194873,1,""],[194874,1,""],[194875,1,""],[194876,1,""],[194877,1,""],[194878,1,""],[194879,1,""],[194880,1,""],[194881,1,""],[194882,1,""],[194883,1,""],[194884,1,""],[194885,1,""],[[194886,194887],1,""],[194888,1,""],[194889,1,""],[194890,1,""],[194891,1,""],[194892,1,""],[194893,1,""],[194894,1,""],[194895,1,""],[194896,1,""],[194897,1,""],[194898,1,""],[194899,1,""],[194900,1,""],[194901,1,""],[194902,1,""],[194903,1,""],[194904,1,""],[194905,1,""],[194906,1,""],[194907,1,""],[194908,1,""],[[194909,194910],1,""],[194911,3],[194912,1,""],[194913,1,""],[194914,1,""],[194915,1,""],[194916,1,""],[194917,1,""],[194918,1,""],[194919,1,""],[194920,1,""],[194921,1,""],[194922,1,""],[194923,1,""],[194924,1,""],[194925,1,""],[194926,1,""],[194927,1,""],[194928,1,""],[194929,1,""],[194930,1,""],[194931,1,""],[194932,1,""],[194933,1,""],[194934,1,""],[194935,1,""],[194936,1,""],[194937,1,""],[194938,1,""],[194939,1,""],[194940,1,""],[194941,1,""],[194942,1,""],[194943,1,""],[194944,1,""],[194945,1,""],[194946,1,""],[194947,1,""],[194948,1,""],[194949,1,""],[194950,1,""],[194951,1,""],[194952,1,""],[194953,1,""],[194954,1,""],[194955,1,""],[194956,1,""],[194957,1,""],[194958,1,""],[194959,1,""],[194960,1,""],[194961,1,""],[194962,1,""],[194963,1,""],[194964,1,""],[194965,1,""],[194966,1,""],[194967,1,""],[194968,1,""],[194969,1,""],[194970,1,""],[194971,1,""],[194972,1,""],[194973,1,""],[194974,1,""],[194975,1,""],[194976,1,""],[194977,1,""],[194978,1,""],[194979,1,""],[194980,1,""],[194981,1,""],[194982,1,""],[194983,1,""],[194984,1,""],[194985,1,""],[194986,1,""],[194987,1,""],[194988,1,""],[194989,1,""],[194990,1,""],[194991,1,""],[194992,1,""],[194993,1,""],[194994,1,""],[194995,1,""],[194996,1,""],[194997,1,""],[194998,1,""],[194999,1,""],[195000,1,""],[195001,1,""],[195002,1,""],[195003,1,""],[195004,1,""],[195005,1,""],[195006,1,""],[195007,3],[195008,1,""],[195009,1,""],[195010,1,""],[195011,1,""],[195012,1,""],[195013,1,""],[195014,1,""],[195015,1,""],[195016,1,""],[195017,1,""],[195018,1,""],[195019,1,""],[195020,1,""],[195021,1,""],[195022,1,""],[195023,1,""],[195024,1,""],[195025,1,""],[195026,1,""],[195027,1,""],[195028,1,""],[195029,1,""],[195030,1,""],[195031,1,""],[195032,1,""],[195033,1,""],[195034,1,""],[195035,1,""],[195036,1,""],[195037,1,""],[195038,1,""],[195039,1,""],[195040,1,""],[195041,1,""],[195042,1,""],[195043,1,""],[195044,1,""],[195045,1,""],[195046,1,""],[195047,1,""],[195048,1,""],[195049,1,""],[195050,1,""],[195051,1,""],[195052,1,""],[195053,1,""],[195054,1,""],[195055,1,""],[195056,1,""],[195057,1,""],[195058,1,""],[195059,1,""],[195060,1,""],[195061,1,""],[195062,1,""],[195063,1,""],[195064,1,""],[195065,1,""],[195066,1,""],[195067,1,""],[195068,1,""],[195069,1,""],[[195070,195071],1,""],[195072,1,""],[195073,1,""],[195074,1,""],[195075,1,""],[195076,1,""],[195077,1,""],[195078,1,""],[195079,1,""],[195080,1,""],[195081,1,""],[195082,1,""],[195083,1,""],[195084,1,""],[195085,1,""],[195086,1,""],[195087,1,""],[195088,1,""],[195089,1,""],[195090,1,""],[195091,1,""],[195092,1,""],[195093,1,""],[195094,1,""],[195095,1,""],[195096,1,""],[195097,1,""],[195098,1,""],[195099,1,""],[195100,1,""],[195101,1,""],[[195102,196605],3],[[196606,196607],3],[[196608,201546],2],[[201547,201551],3],[[201552,205743],2],[[205744,262141],3],[[262142,262143],3],[[262144,327677],3],[[327678,327679],3],[[327680,393213],3],[[393214,393215],3],[[393216,458749],3],[[458750,458751],3],[[458752,524285],3],[[524286,524287],3],[[524288,589821],3],[[589822,589823],3],[[589824,655357],3],[[655358,655359],3],[[655360,720893],3],[[720894,720895],3],[[720896,786429],3],[[786430,786431],3],[[786432,851965],3],[[851966,851967],3],[[851968,917501],3],[[917502,917503],3],[917504,3],[917505,3],[[917506,917535],3],[[917536,917631],3],[[917632,917759],3],[[917760,917999],7],[[918000,983037],3],[[983038,983039],3],[[983040,1048573],3],[[1048574,1048575],3],[[1048576,1114109],3],[[1114110,1114111],3]]});var VR=z((J11,LR)=>{J11.STATUS_MAPPING={mapped:1,valid:2,disallowed:3,disallowed_STD3_valid:4,disallowed_STD3_mapped:5,deviation:6,ignored:7}});var PR=z((iq1,NR)=>{var X11=function(F){return/[^\x00-\x7F]/u.test(F)},RR=function(F,{useSTD3ASCIIRules:A}){let B=0,D=wR.length-1;while(B<=D){const J=Math.floor((B+D)/2),Z=wR[J],X=Array.isArray(Z[0])?Z[0][0]:Z[0],Y=Array.isArray(Z[0])?Z[0][1]:Z[0];if(X<=F&&Y>=F){if(A&&(Z[1]===Z2.disallowed_STD3_valid||Z[1]===Z2.disallowed_STD3_mapped))return[Z2.disallowed,...Z.slice(2)];else if(Z[1]===Z2.disallowed_STD3_valid)return[Z2.valid,...Z.slice(2)];else if(Z[1]===Z2.disallowed_STD3_mapped)return[Z2.mapped,...Z.slice(2)];return Z.slice(1)}else if(X>F)D=J-1;else B=J+1}return null},Y11=function(F,{useSTD3ASCIIRules:A,processingOption:B}){let D=!1,J="";for(let Z of F){const[X,Y]=RR(Z.codePointAt(0),{useSTD3ASCIIRules:A});switch(X){case Z2.disallowed:D=!0,J+=Z;break;case Z2.ignored:break;case Z2.mapped:J+=Y;break;case Z2.deviation:if(B==="transitional")J+=Y;else J+=Z;break;case Z2.valid:J+=Z;break}}return{string:J,error:D}},$11=function(F,{checkHyphens:A,checkBidi:B,checkJoiners:D,processingOption:J,useSTD3ASCIIRules:Z}){if(F.normalize("NFC")!==F)return!1;const X=Array.from(F);if(A){if(X[2]==="-"&&X[3]==="-"||(F.startsWith("-")||F.endsWith("-")))return!1}if(F.includes(".")||X.length>0&&Y6.combiningMarks.test(X[0]))return!1;for(let Y of X){const[$]=RR(Y.codePointAt(0),{useSTD3ASCIIRules:Z});if(J==="transitional"&&$!==Z2.valid||J==="nontransitional"&&$!==Z2.valid&&$!==Z2.deviation)return!1}if(D){let Y=0;for(let[$,G]of X.entries())if(G==="\u200C"||G==="\u200D"){if($>0){if(Y6.combiningClassVirama.test(X[$-1]))continue;if(G==="\u200C"){const E=X.indexOf("\u200C",$+1),W=E<0?X.slice(Y):X.slice(Y,E);if(Y6.validZWNJ.test(W.join(""))){Y=$+1;continue}}}return!1}}if(B&&X.length>0){let Y;if(Y6.bidiS1LTR.test(X[0]))Y=!1;else if(Y6.bidiS1RTL.test(X[0]))Y=!0;else return!1;if(Y){if(!Y6.bidiS2.test(F)||!Y6.bidiS3.test(F)||Y6.bidiS4EN.test(F)&&Y6.bidiS4AN.test(F))return!1}else if(!Y6.bidiS5.test(F)||!Y6.bidiS6.test(F))return!1}return!0},G11=function(F){const A=F.map((B)=>{if(B.startsWith("xn--"))try{return vY.decode(B.substring(4))}catch(D){return""}return B}).join(".");return Y6.bidiDomain.test(A)},IR=function(F,A){const{processingOption:B}=A;let{string:D,error:J}=Y11(F,A);D=D.normalize("NFC");const Z=D.split("."),X=G11(Z);for(let[Y,$]of Z.entries()){let G=$,E=B;if(G.startsWith("xn--")){try{G=vY.decode(G.substring(4)),Z[Y]=G}catch(C){J=!0;continue}E="nontransitional"}if(J)continue;if(!$11(G,{...A,processingOption:E,checkBidi:A.checkBidi&&X}))J=!0}return{string:Z.join("."),error:J}},E11=function(F,{checkHyphens:A=!1,checkBidi:B=!1,checkJoiners:D=!1,useSTD3ASCIIRules:J=!1,processingOption:Z="nontransitional",verifyDNSLength:X=!1}={}){if(Z!=="transitional"&&Z!=="nontransitional")throw new RangeError("processingOption must be either transitional or nontransitional");const Y=IR(F,{processingOption:Z,checkHyphens:A,checkBidi:B,checkJoiners:D,useSTD3ASCIIRules:J});let $=Y.string.split(".");if($=$.map((G)=>{if(X11(G))try{return`xn--${vY.encode(G)}`}catch(E){Y.error=!0}return G}),X){const G=$.join(".").length;if(G>253||G===0)Y.error=!0;for(let E=0;E<$.length;++E)if($[E].length>63||$[E].length===0){Y.error=!0;break}}if(Y.error)return null;return $.join(".")},W11=function(F,{checkHyphens:A=!1,checkBidi:B=!1,checkJoiners:D=!1,useSTD3ASCIIRules:J=!1,processingOption:Z="nontransitional"}={}){const X=IR(F,{processingOption:Z,checkHyphens:A,checkBidi:B,checkJoiners:D,useSTD3ASCIIRules:J});return{domain:X.string,error:X.error}},vY=KR(),Y6=UR(),wR=QR(),{STATUS_MAPPING:Z2}=VR();NR.exports={toASCII:E11,toUnicode:W11}});var mY=z((nq1,TR)=>{var hY=function(F){return F>=48&&F<=57},MR=function(F){return F>=65&&F<=90||F>=97&&F<=122},C11=function(F){return MR(F)||hY(F)},H11=function(F){return hY(F)||F>=65&&F<=70||F>=97&&F<=102};TR.exports={isASCIIDigit:hY,isASCIIAlpha:MR,isASCIIAlphanumeric:C11,isASCIIHex:H11}});var pA=z((sq1,jR)=>{var z11=function(F){return q11.encode(F)},U11=function(F){return K11.decode(F)},q11=new TextEncoder,K11=new TextDecoder("utf-8",{ignoreBOM:!0});jR.exports={utf8Encode:z11,utf8DecodeWithoutBOM:U11}});var iA=z((aq1,_R)=>{var V1=function(F){return F.codePointAt(0)},Q11=function(F){let A=F.toString(16).toUpperCase();if(A.length===1)A=`0${A}`;return`%${A}`},SR=function(F){const A=new Uint8Array(F.byteLength);let B=0;for(let D=0;D<F.byteLength;++D){const J=F[D];if(J!==37)A[B++]=J;else if(J===37&&(!uR(F[D+1])||!uR(F[D+2])))A[B++]=J;else{const Z=parseInt(String.fromCodePoint(F[D+1],F[D+2]),16);A[B++]=Z,D+=2}}return A.slice(0,B)},L11=function(F){const A=OR(F);return SR(A)},dY=function(F){return F<=31||F>126},w11=function(F){return dY(F)||V11.has(F)},cY=function(F){return dY(F)||R11.has(F)},I11=function(F){return cY(F)||F===V1("'")},kR=function(F){return cY(F)||N11.has(F)},xR=function(F){return kR(F)||P11.has(F)},T11=function(F){return xR(F)||M11.has(F)},u11=function(F){return T11(F)||j11.has(F)},fR=function(F,A){const B=OR(F);let D="";for(let J of B)if(!A(J))D+=String.fromCharCode(J);else D+=Q11(J);return D},O11=function(F,A){return fR(String.fromCodePoint(F),A)},S11=function(F,A,B=!1){let D="";for(let J of F)if(B&&J===" ")D+="+";else D+=fR(J,A);return D},{isASCIIHex:uR}=mY(),{utf8Encode:OR}=pA(),V11=new Set([V1(" "),V1("\""),V1("<"),V1(">"),V1("`")]),R11=new Set([V1(" "),V1("\""),V1("#"),V1("<"),V1(">")]),N11=new Set([V1("?"),V1("`"),V1("{"),V1("}")]),P11=new Set([V1("/"),V1(":"),V1(";"),V1("="),V1("@"),V1("["),V1("\\"),V1("]"),V1("^"),V1("|")]),M11=new Set([V1("$"),V1("%"),V1("&"),V1("+"),V1(",")]),j11=new Set([V1("!"),V1("'"),V1("("),V1(")"),V1("~")]);_R.exports={isC0ControlPercentEncode:dY,isFragmentPercentEncode:w11,isQueryPercentEncode:cY,isSpecialQueryPercentEncode:I11,isPathPercentEncode:kR,isUserinfoPercentEncode:xR,isURLEncodedPercentEncode:u11,percentDecodeString:L11,percentDecodeBytes:SR,utf8PercentEncodeString:S11,utf8PercentEncodeCodePoint:O11}});var aY=z((J01,X2)=>{var d=function(F){return F.codePointAt(0)},gR=function(F){return[...F].length},bR=function(F,A){const B=F[A];return isNaN(B)?void 0:String.fromCodePoint(B)},yR=function(F){return F==="."||F.toLowerCase()==="%2e"},v11=function(F){return F=F.toLowerCase(),F===".."||F==="%2e."||F===".%2e"||F==="%2e%2e"},h11=function(F,A){return v0.isASCIIAlpha(F)&&(A===d(":")||A===d("|"))},dR=function(F){return F.length===2&&v0.isASCIIAlpha(F.codePointAt(0))&&(F[1]===":"||F[1]==="|")},m11=function(F){return F.length===2&&v0.isASCIIAlpha(F.codePointAt(0))&&F[1]===":"},cR=function(F){return F.search(/\u0000|\u0009|\u000A|\u000D|\u0020|#|\/|:|<|>|\?|@|\[|\\|\]|\^|\|/u)!==-1},d11=function(F){return cR(F)||F.search(/[\u0000-\u001F]|%|\u007F/u)!==-1},nA=function(F){return mR[F]!==void 0},y0=function(F){return nA(F.scheme)},lY=function(F){return!nA(F.scheme)},lR=function(F){return mR[F]},pR=function(F){if(F==="")return Y1;let A=10;if(F.length>=2&&F.charAt(0)==="0"&&F.charAt(1).toLowerCase()==="x")F=F.substring(2),A=16;else if(F.length>=2&&F.charAt(0)==="0")F=F.substring(1),A=8;if(F==="")return 0;let B=/[^0-7]/u;if(A===10)B=/[^0-9]/u;if(A===16)B=/[^0-9A-Fa-f]/u;if(B.test(F))return Y1;return parseInt(F,A)},c11=function(F){const A=F.split(".");if(A[A.length-1]===""){if(A.length>1)A.pop()}if(A.length>4)return Y1;const B=[];for(let Z of A){const X=pR(Z);if(X===Y1)return Y1;B.push(X)}for(let Z=0;Z<B.length-1;++Z)if(B[Z]>255)return Y1;if(B[B.length-1]>=256**(5-B.length))return Y1;let D=B.pop(),J=0;for(let Z of B)D+=Z*256**(3-J),++J;return D},l11=function(F){let A="",B=F;for(let D=1;D<=4;++D){if(A=String(B%256)+A,D!==4)A=`.${A}`;B=Math.floor(B/256)}return A},p11=function(F){const A=[0,0,0,0,0,0,0,0];let B=0,D=null,J=0;if(F=Array.from(F,(Z)=>Z.codePointAt(0)),F[J]===d(":")){if(F[J+1]!==d(":"))return Y1;J+=2,++B,D=B}while(J<F.length){if(B===8)return Y1;if(F[J]===d(":")){if(D!==null)return Y1;++J,++B,D=B;continue}let Z=0,X=0;while(X<4&&v0.isASCIIHex(F[J]))Z=Z*16+parseInt(bR(F,J),16),++J,++X;if(F[J]===d(".")){if(X===0)return Y1;if(J-=X,B>6)return Y1;let Y=0;while(F[J]!==void 0){let $=null;if(Y>0)if(F[J]===d(".")&&Y<4)++J;else return Y1;if(!v0.isASCIIDigit(F[J]))return Y1;while(v0.isASCIIDigit(F[J])){const G=parseInt(bR(F,J));if($===null)$=G;else if($===0)return Y1;else $=$*10+G;if($>255)return Y1;++J}if(A[B]=A[B]*256+$,++Y,Y===2||Y===4)++B}if(Y!==4)return Y1;break}else if(F[J]===d(":")){if(++J,F[J]===void 0)return Y1}else if(F[J]!==void 0)return Y1;A[B]=Z,++B}if(D!==null){let Z=B-D;B=7;while(B!==0&&Z>0){const X=A[D+Z-1];A[D+Z-1]=A[B],A[B]=X,--B,--Z}}else if(D===null&&B!==8)return Y1;return A},i11=function(F){let A="";const B=a11(F);let D=!1;for(let J=0;J<=7;++J){if(D&&F[J]===0)continue;else if(D)D=!1;if(B===J){A+=J===0?"::":":",D=!0;continue}if(A+=F[J].toString(16),J!==7)A+=":"}return A},pY=function(F,A=!1){if(F[0]==="["){if(F[F.length-1]!=="]")return Y1;return p11(F.substring(1,F.length-1))}if(A)return s11(F);const B=x11(f11(F)),D=r11(B);if(D===Y1)return Y1;if(d11(D))return Y1;if(n11(D))return c11(D);return D},n11=function(F){const A=F.split(".");if(A[A.length-1]===""){if(A.length===1)return!1;A.pop()}const B=A[A.length-1];if(pR(B)!==Y1)return!0;if(/^[0-9]+$/u.test(B))return!0;return!1},s11=function(F){if(cR(F))return Y1;return aA(F,hR)},a11=function(F){let A=null,B=1,D=null,J=0;for(let Z=0;Z<F.length;++Z)if(F[Z]!==0){if(J>B)A=D,B=J;D=null,J=0}else{if(D===null)D=Z;++J}if(J>B)return D;return A},nY=function(F){if(typeof F==="number")return l11(F);if(F instanceof Array)return`[${i11(F)}]`;return F},r11=function(F,A=!1){const B=k11.toASCII(F,{checkBidi:!0,checkHyphens:!1,checkJoiners:!0,useSTD3ASCIIRules:A,verifyDNSLength:A});if(B===null||B==="")return Y1;return B},t11=function(F){return F.replace(/^[\u0000-\u001F\u0020]+|[\u0000-\u001F\u0020]+$/ug,"")},o11=function(F){return F.replace(/\u0009|\u000A|\u000D/ug,"")},iR=function(F){const{path:A}=F;if(A.length===0)return;if(F.scheme==="file"&&A.length===1&&F01(A[0]))return;A.pop()},nR=function(F){return F.username!==""||F.password!==""},e11=function(F){return F.host===null||F.host===""||F.scheme==="file"},q5=function(F){return typeof F.path==="string"},F01=function(F){return/^[A-Za-z]:$/u.test(F)},$0=function(F,A,B,D,J){if(this.pointer=0,this.input=F,this.base=A||null,this.encodingOverride=B||"utf-8",this.stateOverride=J,this.url=D,this.failure=!1,this.parseError=!1,!this.url){this.url={scheme:"",username:"",password:"",host:null,port:null,path:[],query:null,fragment:null};const X=t11(this.input);if(X!==this.input)this.parseError=!0;this.input=X}const Z=o11(this.input);if(Z!==this.input)this.parseError=!0;this.input=Z,this.state=J||"scheme start",this.buffer="",this.atFlag=!1,this.arrFlag=!1,this.passwordTokenSeenFlag=!1,this.input=Array.from(this.input,(X)=>X.codePointAt(0));for(;this.pointer<=this.input.length;++this.pointer){const X=this.input[this.pointer],Y=isNaN(X)?void 0:String.fromCodePoint(X),$=this[`parse ${this.state}`](X,Y);if(!$)break;else if($===Y1){this.failure=!0;break}}},sR=function(F,A){const B=F.length-A;return B>=2&&h11(F[A],F[A+1])&&(B===2||A01.has(F[A+2]))},B01=function(F,A){let B=`${F.scheme}:`;if(F.host!==null){if(B+="//",F.username!==""||F.password!==""){if(B+=F.username,F.password!=="")B+=`:${F.password}`;B+="@"}if(B+=nY(F.host),F.port!==null)B+=`:${F.port}`}if(F.host===null&&!q5(F)&&F.path.length>1&&F.path[0]==="")B+="/.";if(B+=sY(F),F.query!==null)B+=`?${F.query}`;if(!A&&F.fragment!==null)B+=`#${F.fragment}`;return B},D01=function(F){let A=`${F.scheme}://`;if(A+=nY(F.host),F.port!==null)A+=`:${F.port}`;return A},sY=function(F){if(q5(F))return F.path;let A="";for(let B of F.path)A+=`/${B}`;return A},k11=PR(),v0=mY(),{utf8DecodeWithoutBOM:x11}=pA(),{percentDecodeString:f11,utf8PercentEncodeCodePoint:sA,utf8PercentEncodeString:aA,isC0ControlPercentEncode:hR,isFragmentPercentEncode:_11,isQueryPercentEncode:g11,isSpecialQueryPercentEncode:b11,isPathPercentEncode:y11,isUserinfoPercentEncode:iY}=iA(),mR={ftp:21,file:null,http:80,https:443,ws:80,wss:443},Y1=Symbol("failure");$0.prototype["parse scheme start"]=function F(A,B){if(v0.isASCIIAlpha(A))this.buffer+=B.toLowerCase(),this.state="scheme";else if(!this.stateOverride)this.state="no scheme",--this.pointer;else return this.parseError=!0,Y1;return!0};$0.prototype["parse scheme"]=function F(A,B){if(v0.isASCIIAlphanumeric(A)||A===d("+")||A===d("-")||A===d("."))this.buffer+=B.toLowerCase();else if(A===d(":")){if(this.stateOverride){if(y0(this.url)&&!nA(this.buffer))return!1;if(!y0(this.url)&&nA(this.buffer))return!1;if((nR(this.url)||this.url.port!==null)&&this.buffer==="file")return!1;if(this.url.scheme==="file"&&this.url.host==="")return!1}if(this.url.scheme=this.buffer,this.stateOverride){if(this.url.port===lR(this.url.scheme))this.url.port=null;return!1}if(this.buffer="",this.url.scheme==="file"){if(this.input[this.pointer+1]!==d("/")||this.input[this.pointer+2]!==d("/"))this.parseError=!0;this.state="file"}else if(y0(this.url)&&this.base!==null&&this.base.scheme===this.url.scheme)this.state="special relative or authority";else if(y0(this.url))this.state="special authority slashes";else if(this.input[this.pointer+1]===d("/"))this.state="path or authority",++this.pointer;else this.url.path="",this.state="opaque path"}else if(!this.stateOverride)this.buffer="",this.state="no scheme",this.pointer=-1;else return this.parseError=!0,Y1;return!0};$0.prototype["parse no scheme"]=function F(A){if(this.base===null||q5(this.base)&&A!==d("#"))return Y1;else if(q5(this.base)&&A===d("#"))this.url.scheme=this.base.scheme,this.url.path=this.base.path,this.url.query=this.base.query,this.url.fragment="",this.state="fragment";else if(this.base.scheme==="file")this.state="file",--this.pointer;else this.state="relative",--this.pointer;return!0};$0.prototype["parse special relative or authority"]=function F(A){if(A===d("/")&&this.input[this.pointer+1]===d("/"))this.state="special authority ignore slashes",++this.pointer;else this.parseError=!0,this.state="relative",--this.pointer;return!0};$0.prototype["parse path or authority"]=function F(A){if(A===d("/"))this.state="authority";else this.state="path",--this.pointer;return!0};$0.prototype["parse relative"]=function F(A){if(this.url.scheme=this.base.scheme,A===d("/"))this.state="relative slash";else if(y0(this.url)&&A===d("\\"))this.parseError=!0,this.state="relative slash";else if(this.url.username=this.base.username,this.url.password=this.base.password,this.url.host=this.base.host,this.url.port=this.base.port,this.url.path=this.base.path.slice(),this.url.query=this.base.query,A===d("?"))this.url.query="",this.state="query";else if(A===d("#"))this.url.fragment="",this.state="fragment";else if(!isNaN(A))this.url.query=null,this.url.path.pop(),this.state="path",--this.pointer;return!0};$0.prototype["parse relative slash"]=function F(A){if(y0(this.url)&&(A===d("/")||A===d("\\"))){if(A===d("\\"))this.parseError=!0;this.state="special authority ignore slashes"}else if(A===d("/"))this.state="authority";else this.url.username=this.base.username,this.url.password=this.base.password,this.url.host=this.base.host,this.url.port=this.base.port,this.state="path",--this.pointer;return!0};$0.prototype["parse special authority slashes"]=function F(A){if(A===d("/")&&this.input[this.pointer+1]===d("/"))this.state="special authority ignore slashes",++this.pointer;else this.parseError=!0,this.state="special authority ignore slashes",--this.pointer;return!0};$0.prototype["parse special authority ignore slashes"]=function F(A){if(A!==d("/")&&A!==d("\\"))this.state="authority",--this.pointer;else this.parseError=!0;return!0};$0.prototype["parse authority"]=function F(A,B){if(A===d("@")){if(this.parseError=!0,this.atFlag)this.buffer=`%40${this.buffer}`;this.atFlag=!0;const D=gR(this.buffer);for(let J=0;J<D;++J){const Z=this.buffer.codePointAt(J);if(Z===d(":")&&!this.passwordTokenSeenFlag){this.passwordTokenSeenFlag=!0;continue}const X=sA(Z,iY);if(this.passwordTokenSeenFlag)this.url.password+=X;else this.url.username+=X}this.buffer=""}else if(isNaN(A)||A===d("/")||A===d("?")||A===d("#")||y0(this.url)&&A===d("\\")){if(this.atFlag&&this.buffer==="")return this.parseError=!0,Y1;this.pointer-=gR(this.buffer)+1,this.buffer="",this.state="host"}else this.buffer+=B;return!0};$0.prototype["parse hostname"]=$0.prototype["parse host"]=function F(A,B){if(this.stateOverride&&this.url.scheme==="file")--this.pointer,this.state="file host";else if(A===d(":")&&!this.arrFlag){if(this.buffer==="")return this.parseError=!0,Y1;if(this.stateOverride==="hostname")return!1;const D=pY(this.buffer,lY(this.url));if(D===Y1)return Y1;this.url.host=D,this.buffer="",this.state="port"}else if(isNaN(A)||A===d("/")||A===d("?")||A===d("#")||y0(this.url)&&A===d("\\")){if(--this.pointer,y0(this.url)&&this.buffer==="")return this.parseError=!0,Y1;else if(this.stateOverride&&this.buffer===""&&(nR(this.url)||this.url.port!==null))return this.parseError=!0,!1;const D=pY(this.buffer,lY(this.url));if(D===Y1)return Y1;if(this.url.host=D,this.buffer="",this.state="path start",this.stateOverride)return!1}else{if(A===d("["))this.arrFlag=!0;else if(A===d("]"))this.arrFlag=!1;this.buffer+=B}return!0};$0.prototype["parse port"]=function F(A,B){if(v0.isASCIIDigit(A))this.buffer+=B;else if(isNaN(A)||A===d("/")||A===d("?")||A===d("#")||y0(this.url)&&A===d("\\")||this.stateOverride){if(this.buffer!==""){const D=parseInt(this.buffer);if(D>65535)return this.parseError=!0,Y1;this.url.port=D===lR(this.url.scheme)?null:D,this.buffer=""}if(this.stateOverride)return!1;this.state="path start",--this.pointer}else return this.parseError=!0,Y1;return!0};var A01=new Set([d("/"),d("\\"),d("?"),d("#")]);$0.prototype["parse file"]=function F(A){if(this.url.scheme="file",this.url.host="",A===d("/")||A===d("\\")){if(A===d("\\"))this.parseError=!0;this.state="file slash"}else if(this.base!==null&&this.base.scheme==="file"){if(this.url.host=this.base.host,this.url.path=this.base.path.slice(),this.url.query=this.base.query,A===d("?"))this.url.query="",this.state="query";else if(A===d("#"))this.url.fragment="",this.state="fragment";else if(!isNaN(A)){if(this.url.query=null,!sR(this.input,this.pointer))iR(this.url);else this.parseError=!0,this.url.path=[];this.state="path",--this.pointer}}else this.state="path",--this.pointer;return!0};$0.prototype["parse file slash"]=function F(A){if(A===d("/")||A===d("\\")){if(A===d("\\"))this.parseError=!0;this.state="file host"}else{if(this.base!==null&&this.base.scheme==="file"){if(!sR(this.input,this.pointer)&&m11(this.base.path[0]))this.url.path.push(this.base.path[0]);this.url.host=this.base.host}this.state="path",--this.pointer}return!0};$0.prototype["parse file host"]=function F(A,B){if(isNaN(A)||A===d("/")||A===d("\\")||A===d("?")||A===d("#"))if(--this.pointer,!this.stateOverride&&dR(this.buffer))this.parseError=!0,this.state="path";else if(this.buffer===""){if(this.url.host="",this.stateOverride)return!1;this.state="path start"}else{let D=pY(this.buffer,lY(this.url));if(D===Y1)return Y1;if(D==="localhost")D="";if(this.url.host=D,this.stateOverride)return!1;this.buffer="",this.state="path start"}else this.buffer+=B;return!0};$0.prototype["parse path start"]=function F(A){if(y0(this.url)){if(A===d("\\"))this.parseError=!0;if(this.state="path",A!==d("/")&&A!==d("\\"))--this.pointer}else if(!this.stateOverride&&A===d("?"))this.url.query="",this.state="query";else if(!this.stateOverride&&A===d("#"))this.url.fragment="",this.state="fragment";else if(A!==void 0){if(this.state="path",A!==d("/"))--this.pointer}else if(this.stateOverride&&this.url.host===null)this.url.path.push("");return!0};$0.prototype["parse path"]=function F(A){if(isNaN(A)||A===d("/")||y0(this.url)&&A===d("\\")||!this.stateOverride&&(A===d("?")||A===d("#"))){if(y0(this.url)&&A===d("\\"))this.parseError=!0;if(v11(this.buffer)){if(iR(this.url),A!==d("/")&&!(y0(this.url)&&A===d("\\")))this.url.path.push("")}else if(yR(this.buffer)&&A!==d("/")&&!(y0(this.url)&&A===d("\\")))this.url.path.push("");else if(!yR(this.buffer)){if(this.url.scheme==="file"&&this.url.path.length===0&&dR(this.buffer))this.buffer=`${this.buffer[0]}:`;this.url.path.push(this.buffer)}if(this.buffer="",A===d("?"))this.url.query="",this.state="query";if(A===d("#"))this.url.fragment="",this.state="fragment"}else{if(A===d("%")&&(!v0.isASCIIHex(this.input[this.pointer+1])||!v0.isASCIIHex(this.input[this.pointer+2])))this.parseError=!0;this.buffer+=sA(A,y11)}return!0};$0.prototype["parse opaque path"]=function F(A){if(A===d("?"))this.url.query="",this.state="query";else if(A===d("#"))this.url.fragment="",this.state="fragment";else{if(!isNaN(A)&&A!==d("%"))this.parseError=!0;if(A===d("%")&&(!v0.isASCIIHex(this.input[this.pointer+1])||!v0.isASCIIHex(this.input[this.pointer+2])))this.parseError=!0;if(!isNaN(A))this.url.path+=sA(A,hR)}return!0};$0.prototype["parse query"]=function F(A,B){if(!y0(this.url)||this.url.scheme==="ws"||this.url.scheme==="wss")this.encodingOverride="utf-8";if(!this.stateOverride&&A===d("#")||isNaN(A)){const D=y0(this.url)?b11:g11;if(this.url.query+=aA(this.buffer,D),this.buffer="",A===d("#"))this.url.fragment="",this.state="fragment"}else if(!isNaN(A)){if(A===d("%")&&(!v0.isASCIIHex(this.input[this.pointer+1])||!v0.isASCIIHex(this.input[this.pointer+2])))this.parseError=!0;this.buffer+=B}return!0};$0.prototype["parse fragment"]=function F(A){if(!isNaN(A)){if(A===d("%")&&(!v0.isASCIIHex(this.input[this.pointer+1])||!v0.isASCIIHex(this.input[this.pointer+2])))this.parseError=!0;this.url.fragment+=sA(A,_11)}return!0};J01.serializeURL=B01;J01.serializePath=sY;J01.serializeURLOrigin=function(F){switch(F.scheme){case"blob":{const A=J01.parseURL(sY(F));if(A===null)return"null";if(A.scheme!=="http"&&A.scheme!=="https")return"null";return J01.serializeURLOrigin(A)}case"ftp":case"http":case"https":case"ws":case"wss":return D01({scheme:F.scheme,host:F.host,port:F.port});case"file":return"null";default:return"null"}};J01.basicURLParse=function(F,A){if(A===void 0)A={};const B=new $0(F,A.baseURL,A.encodingOverride,A.url,A.stateOverride);if(B.failure)return null;return B.url};J01.setTheUsername=function(F,A){F.username=aA(A,iY)};J01.setThePassword=function(F,A){F.password=aA(A,iY)};J01.serializeHost=nY;J01.cannotHaveAUsernamePasswordPort=e11;J01.hasAnOpaquePath=q5;J01.serializeInteger=function(F){return String(F)};J01.parseURL=function(F,A){if(A===void 0)A={};return J01.basicURLParse(F,{baseURL:A.baseURL,encodingOverride:A.encodingOverride})}});var rY=z((rq1,BI)=>{var FI=function(F){return F.codePointAt(0)},K01=function(F){const A=Q01(F,FI("&")),B=[];for(let D of A){if(D.length===0)continue;let J,Z;const X=D.indexOf(FI("="));if(X>=0)J=D.slice(0,X),Z=D.slice(X+1);else J=D,Z=new Uint8Array(0);J=AI(J,43,32),Z=AI(Z,43,32);const Y=rR(tR(J)),$=rR(tR(Z));B.push([Y,$])}return B},z01=function(F){return K01(q01(F))},U01=function(F,A=void 0){let B="utf-8";if(A!==void 0)B=A;let D="";for(let[J,Z]of F.entries()){const X=oR(Z[0],eR,!0);let Y=Z[1];if(Z.length>2&&Z[2]!==void 0){if(Z[2]==="hidden"&&X==="_charset_")Y=B;else if(Z[2]==="file")Y=Y.name}if(Y=oR(Y,eR,!0),J!==0)D+="&";D+=`${X}=${Y}`}return D},Q01=function(F,A){const B=[];let D=0,J=F.indexOf(A);while(J>=0)B.push(F.slice(D,J)),D=J+1,J=F.indexOf(A,D);if(D!==F.length)B.push(F.slice(D));return B},AI=function(F,A,B){let D=F.indexOf(A);while(D>=0)F[D]=B,D=F.indexOf(A,D+1);return F},{utf8Encode:q01,utf8DecodeWithoutBOM:rR}=pA(),{percentDecodeBytes:tR,utf8PercentEncodeString:oR,isURLEncodedPercentEncode:eR}=iA();BI.exports={parseUrlencodedString:z01,serializeUrlencoded:U01}});var JI=z((L01)=>{var DI=dA(),rA=lA();L01.convert=(F,A,{context:B="The provided value"}={})=>{if(typeof A!=="function")throw new F.TypeError(B+" is not a function");function D(...J){const Z=rA.tryWrapperForImpl(this);let X;for(let Y=0;Y<J.length;Y++)J[Y]=rA.tryWrapperForImpl(J[Y]);return X=Reflect.apply(A,Z,J),X=DI.any(X,{context:B,globals:F}),X}return D.construct=(...J)=>{for(let X=0;X<J.length;X++)J[X]=rA.tryWrapperForImpl(J[X]);let Z=Reflect.construct(A,J);return Z=DI.any(Z,{context:B,globals:F}),Z},D[rA.wrapperSymbol]=A,D.objectReference=A,D}});var ZI=z((w01)=>{var tY=rY();w01.implementation=class F{constructor(A,B,{doNotStripQMark:D=!1}){let J=B[0];if(this._list=[],this._url=null,!D&&typeof J==="string"&&J[0]==="?")J=J.slice(1);if(Array.isArray(J))for(let Z of J){if(Z.length!==2)throw new TypeError("Failed to construct 'URLSearchParams': parameter 1 sequence's element does not contain exactly two elements.");this._list.push([Z[0],Z[1]])}else if(typeof J==="object"&&Object.getPrototypeOf(J)===null)for(let Z of Object.keys(J)){const X=J[Z];this._list.push([Z,X])}else this._list=tY.parseUrlencodedString(J)}_updateSteps(){if(this._url!==null){let A=tY.serializeUrlencoded(this._list);if(A==="")A=null;if(this._url._url.query=A,A===null)this._url._potentiallyStripTrailingSpacesFromAnOpaquePath()}}get size(){return this._list.length}append(A,B){this._list.push([A,B]),this._updateSteps()}delete(A,B){let D=0;while(D<this._list.length)if(this._list[D][0]===A&&(B===void 0||this._list[D][1]===B))this._list.splice(D,1);else D++;this._updateSteps()}get(A){for(let B of this._list)if(B[0]===A)return B[1];return null}getAll(A){const B=[];for(let D of this._list)if(D[0]===A)B.push(D[1]);return B}has(A,B){for(let D of this._list)if(D[0]===A&&(B===void 0||D[1]===B))return!0;return!1}set(A,B){let D=!1,J=0;while(J<this._list.length)if(this._list[J][0]===A)if(D)this._list.splice(J,1);else D=!0,this._list[J][1]=B,J++;else J++;if(!D)this._list.push([A,B]);this._updateSteps()}sort(){this._list.sort((A,B)=>{if(A[0]<B[0])return-1;if(A[0]>B[0])return 1;return 0}),this._updateSteps()}[Symbol.iterator](){return this._list[Symbol.iterator]()}toString(){return tY.serializeUrlencoded(this._list)}}});var eY=z((P01)=>{var $I=function(F,A){let B;if(A!==void 0)B=A.prototype;if(!m1.isObject(B))B=F[YI].URLSearchParams.prototype;return Object.create(B)},R2=dA(),m1=lA(),I01=JI(),XI=m1.newObjectInRealm,K0=m1.implSymbol,YI=m1.ctorRegistrySymbol;P01.is=(F)=>{return m1.isObject(F)&&m1.hasOwn(F,K0)&&F[K0]instanceof G4.implementation};P01.isImpl=(F)=>{return m1.isObject(F)&&F instanceof G4.implementation};P01.convert=(F,A,{context:B="The provided value"}={})=>{if(P01.is(A))return m1.implForWrapper(A);throw new F.TypeError(`${B} is not of type 'URLSearchParams'.`)};P01.createDefaultIterator=(F,A,B)=>{const J=F[YI]["URLSearchParams Iterator"],Z=Object.create(J);return Object.defineProperty(Z,m1.iterInternalSymbol,{value:{target:A,kind:B,index:0},configurable:!0}),Z};P01.create=(F,A,B)=>{const D=$I(F);return P01.setup(D,F,A,B)};P01.createImpl=(F,A,B)=>{const D=P01.create(F,A,B);return m1.implForWrapper(D)};P01._internalSetup=(F,A)=>{};P01.setup=(F,A,B=[],D={})=>{if(D.wrapper=F,P01._internalSetup(F,A),Object.defineProperty(F,K0,{value:new G4.implementation(A,B,D),configurable:!0}),F[K0][m1.wrapperSymbol]=F,G4.init)G4.init(F[K0]);return F};P01.new=(F,A)=>{const B=$I(F,A);if(P01._internalSetup(B,F),Object.defineProperty(B,K0,{value:Object.create(G4.implementation.prototype),configurable:!0}),B[K0][m1.wrapperSymbol]=B,G4.init)G4.init(B[K0]);return B[K0]};var N01=new Set(["Window","Worker"]);P01.install=(F,A)=>{if(!A.some((J)=>N01.has(J)))return;const B=m1.initCtorRegistry(F);class D{constructor(){const J=[];{let Z=arguments[0];if(Z!==void 0)if(m1.isObject(Z))if(Z[Symbol.iterator]!==void 0)if(!m1.isObject(Z))throw new F.TypeError("Failed to construct 'URLSearchParams': parameter 1 sequence is not an iterable object.");else{const X=[],Y=Z;for(let $ of Y){if(!m1.isObject($))throw new F.TypeError("Failed to construct 'URLSearchParams': parameter 1 sequence's element is not an iterable object.");else{const G=[],E=$;for(let W of E)W=R2.USVString(W,{context:"Failed to construct 'URLSearchParams': parameter 1 sequence's element's element",globals:F}),G.push(W);$=G}X.push($)}Z=X}else if(!m1.isObject(Z))throw new F.TypeError("Failed to construct 'URLSearchParams': parameter 1 record is not an object.");else{const X=Object.create(null);for(let Y of Reflect.ownKeys(Z)){const $=Object.getOwnPropertyDescriptor(Z,Y);if($&&$.enumerable){let G=Y;G=R2.USVString(G,{context:"Failed to construct 'URLSearchParams': parameter 1 record's key",globals:F});let E=Z[Y];E=R2.USVString(E,{context:"Failed to construct 'URLSearchParams': parameter 1 record's value",globals:F}),X[G]=E}}Z=X}else Z=R2.USVString(Z,{context:"Failed to construct 'URLSearchParams': parameter 1",globals:F});else Z="";J.push(Z)}return P01.setup(Object.create(new.target.prototype),F,J)}append(J,Z){const X=this!==null&&this!==void 0?this:F;if(!P01.is(X))throw new F.TypeError("'append' called on an object that is not a valid instance of URLSearchParams.");if(arguments.length<2)throw new F.TypeError(`Failed to execute 'append' on 'URLSearchParams': 2 arguments required, but only ${arguments.length} present.`);const Y=[];{let $=arguments[0];$=R2.USVString($,{context:"Failed to execute 'append' on 'URLSearchParams': parameter 1",globals:F}),Y.push($)}{let $=arguments[1];$=R2.USVString($,{context:"Failed to execute 'append' on 'URLSearchParams': parameter 2",globals:F}),Y.push($)}return m1.tryWrapperForImpl(X[K0].append(...Y))}delete(J){const Z=this!==null&&this!==void 0?this:F;if(!P01.is(Z))throw new F.TypeError("'delete' called on an object that is not a valid instance of URLSearchParams.");if(arguments.length<1)throw new F.TypeError(`Failed to execute 'delete' on 'URLSearchParams': 1 argument required, but only ${arguments.length} present.`);const X=[];{let Y=arguments[0];Y=R2.USVString(Y,{context:"Failed to execute 'delete' on 'URLSearchParams': parameter 1",globals:F}),X.push(Y)}{let Y=arguments[1];if(Y!==void 0)Y=R2.USVString(Y,{context:"Failed to execute 'delete' on 'URLSearchParams': parameter 2",globals:F});X.push(Y)}return m1.tryWrapperForImpl(Z[K0].delete(...X))}get(J){const Z=this!==null&&this!==void 0?this:F;if(!P01.is(Z))throw new F.TypeError("'get' called on an object that is not a valid instance of URLSearchParams.");if(arguments.length<1)throw new F.TypeError(`Failed to execute 'get' on 'URLSearchParams': 1 argument required, but only ${arguments.length} present.`);const X=[];{let Y=arguments[0];Y=R2.USVString(Y,{context:"Failed to execute 'get' on 'URLSearchParams': parameter 1",globals:F}),X.push(Y)}return Z[K0].get(...X)}getAll(J){const Z=this!==null&&this!==void 0?this:F;if(!P01.is(Z))throw new F.TypeError("'getAll' called on an object that is not a valid instance of URLSearchParams.");if(arguments.length<1)throw new F.TypeError(`Failed to execute 'getAll' on 'URLSearchParams': 1 argument required, but only ${arguments.length} present.`);const X=[];{let Y=arguments[0];Y=R2.USVString(Y,{context:"Failed to execute 'getAll' on 'URLSearchParams': parameter 1",globals:F}),X.push(Y)}return m1.tryWrapperForImpl(Z[K0].getAll(...X))}has(J){const Z=this!==null&&this!==void 0?this:F;if(!P01.is(Z))throw new F.TypeError("'has' called on an object that is not a valid instance of URLSearchParams.");if(arguments.length<1)throw new F.TypeError(`Failed to execute 'has' on 'URLSearchParams': 1 argument required, but only ${arguments.length} present.`);const X=[];{let Y=arguments[0];Y=R2.USVString(Y,{context:"Failed to execute 'has' on 'URLSearchParams': parameter 1",globals:F}),X.push(Y)}{let Y=arguments[1];if(Y!==void 0)Y=R2.USVString(Y,{context:"Failed to execute 'has' on 'URLSearchParams': parameter 2",globals:F});X.push(Y)}return Z[K0].has(...X)}set(J,Z){const X=this!==null&&this!==void 0?this:F;if(!P01.is(X))throw new F.TypeError("'set' called on an object that is not a valid instance of URLSearchParams.");if(arguments.length<2)throw new F.TypeError(`Failed to execute 'set' on 'URLSearchParams': 2 arguments required, but only ${arguments.length} present.`);const Y=[];{let $=arguments[0];$=R2.USVString($,{context:"Failed to execute 'set' on 'URLSearchParams': parameter 1",globals:F}),Y.push($)}{let $=arguments[1];$=R2.USVString($,{context:"Failed to execute 'set' on 'URLSearchParams': parameter 2",globals:F}),Y.push($)}return m1.tryWrapperForImpl(X[K0].set(...Y))}sort(){const J=this!==null&&this!==void 0?this:F;if(!P01.is(J))throw new F.TypeError("'sort' called on an object that is not a valid instance of URLSearchParams.");return m1.tryWrapperForImpl(J[K0].sort())}toString(){const J=this!==null&&this!==void 0?this:F;if(!P01.is(J))throw new F.TypeError("'toString' called on an object that is not a valid instance of URLSearchParams.");return J[K0].toString()}keys(){if(!P01.is(this))throw new F.TypeError("'keys' called on an object that is not a valid instance of URLSearchParams.");return P01.createDefaultIterator(F,this,"key")}values(){if(!P01.is(this))throw new F.TypeError("'values' called on an object that is not a valid instance of URLSearchParams.");return P01.createDefaultIterator(F,this,"value")}entries(){if(!P01.is(this))throw new F.TypeError("'entries' called on an object that is not a valid instance of URLSearchParams.");return P01.createDefaultIterator(F,this,"key+value")}forEach(J){if(!P01.is(this))throw new F.TypeError("'forEach' called on an object that is not a valid instance of URLSearchParams.");if(arguments.length<1)throw new F.TypeError("Failed to execute 'forEach' on 'iterable': 1 argument required, but only 0 present.");J=I01.convert(F,J,{context:"Failed to execute 'forEach' on 'iterable': The callback provided as parameter 1"});const Z=arguments[1];let X=Array.from(this[K0]),Y=0;while(Y<X.length){const[$,G]=X[Y].map(m1.tryWrapperForImpl);J.call(Z,G,$,this),X=Array.from(this[K0]),Y++}}get size(){const J=this!==null&&this!==void 0?this:F;if(!P01.is(J))throw new F.TypeError("'get size' called on an object that is not a valid instance of URLSearchParams.");return J[K0].size}}Object.defineProperties(D.prototype,{append:{enumerable:!0},delete:{enumerable:!0},get:{enumerable:!0},getAll:{enumerable:!0},has:{enumerable:!0},set:{enumerable:!0},sort:{enumerable:!0},toString:{enumerable:!0},keys:{enumerable:!0},values:{enumerable:!0},entries:{enumerable:!0},forEach:{enumerable:!0},size:{enumerable:!0},[Symbol.toStringTag]:{value:"URLSearchParams",configurable:!0},[Symbol.iterator]:{value:D.prototype.entries,configurable:!0,writable:!0}}),B.URLSearchParams=D,B["URLSearchParams Iterator"]=Object.create(B["%IteratorPrototype%"],{[Symbol.toStringTag]:{configurable:!0,value:"URLSearchParams Iterator"}}),m1.define(B["URLSearchParams Iterator"],{next(){const J=this&&this[m1.iterInternalSymbol];if(!J)throw new F.TypeError("next() called on a value that is not a URLSearchParams iterator object");const{target:Z,kind:X,index:Y}=J,$=Array.from(Z[K0]),G=$.length;if(Y>=G)return XI(F,{value:void 0,done:!0});const E=$[Y];return J.index=Y+1,XI(F,m1.iteratorResult(E.map(m1.tryWrapperForImpl),X))}}),Object.defineProperty(F,"URLSearchParams",{configurable:!0,writable:!0,value:D})};var G4=ZI()});var CI=z((k01)=>{var y1=aY(),WI=rY(),S01=eY();k01.implementation=class F{constructor(A,B){const D=B[0],J=B[1];let Z=null;if(J!==void 0){if(Z=y1.basicURLParse(J),Z===null)throw new TypeError(`Invalid base URL: ${J}`)}const X=y1.basicURLParse(D,{baseURL:Z});if(X===null)throw new TypeError(`Invalid URL: ${D}`);const Y=X.query!==null?X.query:"";this._url=X,this._query=S01.createImpl(A,[Y],{doNotStripQMark:!0}),this._query._url=this}static canParse(A,B){let D=null;if(B!==void 0){if(D=y1.basicURLParse(B),D===null)return!1}if(y1.basicURLParse(A,{baseURL:D})===null)return!1;return!0}get href(){return y1.serializeURL(this._url)}set href(A){const B=y1.basicURLParse(A);if(B===null)throw new TypeError(`Invalid URL: ${A}`);this._url=B,this._query._list.splice(0);const{query:D}=B;if(D!==null)this._query._list=WI.parseUrlencodedString(D)}get origin(){return y1.serializeURLOrigin(this._url)}get protocol(){return`${this._url.scheme}:`}set protocol(A){y1.basicURLParse(`${A}:`,{url:this._url,stateOverride:"scheme start"})}get username(){return this._url.username}set username(A){if(y1.cannotHaveAUsernamePasswordPort(this._url))return;y1.setTheUsername(this._url,A)}get password(){return this._url.password}set password(A){if(y1.cannotHaveAUsernamePasswordPort(this._url))return;y1.setThePassword(this._url,A)}get host(){const A=this._url;if(A.host===null)return"";if(A.port===null)return y1.serializeHost(A.host);return`${y1.serializeHost(A.host)}:${y1.serializeInteger(A.port)}`}set host(A){if(y1.hasAnOpaquePath(this._url))return;y1.basicURLParse(A,{url:this._url,stateOverride:"host"})}get hostname(){if(this._url.host===null)return"";return y1.serializeHost(this._url.host)}set hostname(A){if(y1.hasAnOpaquePath(this._url))return;y1.basicURLParse(A,{url:this._url,stateOverride:"hostname"})}get port(){if(this._url.port===null)return"";return y1.serializeInteger(this._url.port)}set port(A){if(y1.cannotHaveAUsernamePasswordPort(this._url))return;if(A==="")this._url.port=null;else y1.basicURLParse(A,{url:this._url,stateOverride:"port"})}get pathname(){return y1.serializePath(this._url)}set pathname(A){if(y1.hasAnOpaquePath(this._url))return;this._url.path=[],y1.basicURLParse(A,{url:this._url,stateOverride:"path start"})}get search(){if(this._url.query===null||this._url.query==="")return"";return`?${this._url.query}`}set search(A){const B=this._url;if(A===""){B.query=null,this._query._list=[],this._potentiallyStripTrailingSpacesFromAnOpaquePath();return}const D=A[0]==="?"?A.substring(1):A;B.query="",y1.basicURLParse(D,{url:B,stateOverride:"query"}),this._query._list=WI.parseUrlencodedString(D)}get searchParams(){return this._query}get hash(){if(this._url.fragment===null||this._url.fragment==="")return"";return`#${this._url.fragment}`}set hash(A){if(A===""){this._url.fragment=null,this._potentiallyStripTrailingSpacesFromAnOpaquePath();return}const B=A[0]==="#"?A.substring(1):A;this._url.fragment="",y1.basicURLParse(B,{url:this._url,stateOverride:"fragment"})}toJSON(){return this.href}_potentiallyStripTrailingSpacesFromAnOpaquePath(){if(!y1.hasAnOpaquePath(this._url))return;if(this._url.fragment!==null)return;if(this._url.query!==null)return;this._url.path=this._url.path.replace(/\u0020+$/u,"")}}});var zI=z((g01)=>{var HI=function(F,A){let B;if(A!==void 0)B=A.prototype;if(!p2.isObject(B))B=F[f01].URL.prototype;return Object.create(B)},I2=dA(),p2=lA(),I1=p2.implSymbol,f01=p2.ctorRegistrySymbol;g01.is=(F)=>{return p2.isObject(F)&&p2.hasOwn(F,I1)&&F[I1]instanceof w3.implementation};g01.isImpl=(F)=>{return p2.isObject(F)&&F instanceof w3.implementation};g01.convert=(F,A,{context:B="The provided value"}={})=>{if(g01.is(A))return p2.implForWrapper(A);throw new F.TypeError(`${B} is not of type 'URL'.`)};g01.create=(F,A,B)=>{const D=HI(F);return g01.setup(D,F,A,B)};g01.createImpl=(F,A,B)=>{const D=g01.create(F,A,B);return p2.implForWrapper(D)};g01._internalSetup=(F,A)=>{};g01.setup=(F,A,B=[],D={})=>{if(D.wrapper=F,g01._internalSetup(F,A),Object.defineProperty(F,I1,{value:new w3.implementation(A,B,D),configurable:!0}),F[I1][p2.wrapperSymbol]=F,w3.init)w3.init(F[I1]);return F};g01.new=(F,A)=>{const B=HI(F,A);if(g01._internalSetup(B,F),Object.defineProperty(B,I1,{value:Object.create(w3.implementation.prototype),configurable:!0}),B[I1][p2.wrapperSymbol]=B,w3.init)w3.init(B[I1]);return B[I1]};var _01=new Set(["Window","Worker"]);g01.install=(F,A)=>{if(!A.some((J)=>_01.has(J)))return;const B=p2.initCtorRegistry(F);class D{constructor(J){if(arguments.length<1)throw new F.TypeError(`Failed to construct 'URL': 1 argument required, but only ${arguments.length} present.`);const Z=[];{let X=arguments[0];X=I2.USVString(X,{context:"Failed to construct 'URL': parameter 1",globals:F}),Z.push(X)}{let X=arguments[1];if(X!==void 0)X=I2.USVString(X,{context:"Failed to construct 'URL': parameter 2",globals:F});Z.push(X)}return g01.setup(Object.create(new.target.prototype),F,Z)}toJSON(){const J=this!==null&&this!==void 0?this:F;if(!g01.is(J))throw new F.TypeError("'toJSON' called on an object that is not a valid instance of URL.");return J[I1].toJSON()}get href(){const J=this!==null&&this!==void 0?this:F;if(!g01.is(J))throw new F.TypeError("'get href' called on an object that is not a valid instance of URL.");return J[I1].href}set href(J){const Z=this!==null&&this!==void 0?this:F;if(!g01.is(Z))throw new F.TypeError("'set href' called on an object that is not a valid instance of URL.");J=I2.USVString(J,{context:"Failed to set the 'href' property on 'URL': The provided value",globals:F}),Z[I1].href=J}toString(){const J=this;if(!g01.is(J))throw new F.TypeError("'toString' called on an object that is not a valid instance of URL.");return J[I1].href}get origin(){const J=this!==null&&this!==void 0?this:F;if(!g01.is(J))throw new F.TypeError("'get origin' called on an object that is not a valid instance of URL.");return J[I1].origin}get protocol(){const J=this!==null&&this!==void 0?this:F;if(!g01.is(J))throw new F.TypeError("'get protocol' called on an object that is not a valid instance of URL.");return J[I1].protocol}set protocol(J){const Z=this!==null&&this!==void 0?this:F;if(!g01.is(Z))throw new F.TypeError("'set protocol' called on an object that is not a valid instance of URL.");J=I2.USVString(J,{context:"Failed to set the 'protocol' property on 'URL': The provided value",globals:F}),Z[I1].protocol=J}get username(){const J=this!==null&&this!==void 0?this:F;if(!g01.is(J))throw new F.TypeError("'get username' called on an object that is not a valid instance of URL.");return J[I1].username}set username(J){const Z=this!==null&&this!==void 0?this:F;if(!g01.is(Z))throw new F.TypeError("'set username' called on an object that is not a valid instance of URL.");J=I2.USVString(J,{context:"Failed to set the 'username' property on 'URL': The provided value",globals:F}),Z[I1].username=J}get password(){const J=this!==null&&this!==void 0?this:F;if(!g01.is(J))throw new F.TypeError("'get password' called on an object that is not a valid instance of URL.");return J[I1].password}set password(J){const Z=this!==null&&this!==void 0?this:F;if(!g01.is(Z))throw new F.TypeError("'set password' called on an object that is not a valid instance of URL.");J=I2.USVString(J,{context:"Failed to set the 'password' property on 'URL': The provided value",globals:F}),Z[I1].password=J}get host(){const J=this!==null&&this!==void 0?this:F;if(!g01.is(J))throw new F.TypeError("'get host' called on an object that is not a valid instance of URL.");return J[I1].host}set host(J){const Z=this!==null&&this!==void 0?this:F;if(!g01.is(Z))throw new F.TypeError("'set host' called on an object that is not a valid instance of URL.");J=I2.USVString(J,{context:"Failed to set the 'host' property on 'URL': The provided value",globals:F}),Z[I1].host=J}get hostname(){const J=this!==null&&this!==void 0?this:F;if(!g01.is(J))throw new F.TypeError("'get hostname' called on an object that is not a valid instance of URL.");return J[I1].hostname}set hostname(J){const Z=this!==null&&this!==void 0?this:F;if(!g01.is(Z))throw new F.TypeError("'set hostname' called on an object that is not a valid instance of URL.");J=I2.USVString(J,{context:"Failed to set the 'hostname' property on 'URL': The provided value",globals:F}),Z[I1].hostname=J}get port(){const J=this!==null&&this!==void 0?this:F;if(!g01.is(J))throw new F.TypeError("'get port' called on an object that is not a valid instance of URL.");return J[I1].port}set port(J){const Z=this!==null&&this!==void 0?this:F;if(!g01.is(Z))throw new F.TypeError("'set port' called on an object that is not a valid instance of URL.");J=I2.USVString(J,{context:"Failed to set the 'port' property on 'URL': The provided value",globals:F}),Z[I1].port=J}get pathname(){const J=this!==null&&this!==void 0?this:F;if(!g01.is(J))throw new F.TypeError("'get pathname' called on an object that is not a valid instance of URL.");return J[I1].pathname}set pathname(J){const Z=this!==null&&this!==void 0?this:F;if(!g01.is(Z))throw new F.TypeError("'set pathname' called on an object that is not a valid instance of URL.");J=I2.USVString(J,{context:"Failed to set the 'pathname' property on 'URL': The provided value",globals:F}),Z[I1].pathname=J}get search(){const J=this!==null&&this!==void 0?this:F;if(!g01.is(J))throw new F.TypeError("'get search' called on an object that is not a valid instance of URL.");return J[I1].search}set search(J){const Z=this!==null&&this!==void 0?this:F;if(!g01.is(Z))throw new F.TypeError("'set search' called on an object that is not a valid instance of URL.");J=I2.USVString(J,{context:"Failed to set the 'search' property on 'URL': The provided value",globals:F}),Z[I1].search=J}get searchParams(){const J=this!==null&&this!==void 0?this:F;if(!g01.is(J))throw new F.TypeError("'get searchParams' called on an object that is not a valid instance of URL.");return p2.getSameObject(this,"searchParams",()=>{return p2.tryWrapperForImpl(J[I1].searchParams)})}get hash(){const J=this!==null&&this!==void 0?this:F;if(!g01.is(J))throw new F.TypeError("'get hash' called on an object that is not a valid instance of URL.");return J[I1].hash}set hash(J){const Z=this!==null&&this!==void 0?this:F;if(!g01.is(Z))throw new F.TypeError("'set hash' called on an object that is not a valid instance of URL.");J=I2.USVString(J,{context:"Failed to set the 'hash' property on 'URL': The provided value",globals:F}),Z[I1].hash=J}static canParse(J){if(arguments.length<1)throw new F.TypeError(`Failed to execute 'canParse' on 'URL': 1 argument required, but only ${arguments.length} present.`);const Z=[];{let X=arguments[0];X=I2.USVString(X,{context:"Failed to execute 'canParse' on 'URL': parameter 1",globals:F}),Z.push(X)}{let X=arguments[1];if(X!==void 0)X=I2.USVString(X,{context:"Failed to execute 'canParse' on 'URL': parameter 2",globals:F});Z.push(X)}return w3.implementation.canParse(...Z)}}if(Object.defineProperties(D.prototype,{toJSON:{enumerable:!0},href:{enumerable:!0},toString:{enumerable:!0},origin:{enumerable:!0},protocol:{enumerable:!0},username:{enumerable:!0},password:{enumerable:!0},host:{enumerable:!0},hostname:{enumerable:!0},port:{enumerable:!0},pathname:{enumerable:!0},search:{enumerable:!0},searchParams:{enumerable:!0},hash:{enumerable:!0},[Symbol.toStringTag]:{value:"URL",configurable:!0}}),Object.defineProperties(D,{canParse:{enumerable:!0}}),B.URL=D,Object.defineProperty(F,"URL",{configurable:!0,writable:!0,value:D}),A.includes("Window"))Object.defineProperty(F,"webkitURL",{configurable:!0,writable:!0,value:D})};var w3=CI()});var UI=z((l01)=>{var d01=zI(),c01=eY();l01.URL=d01;l01.URLSearchParams=c01});var LI=z((a01)=>{var{URL:n01,URLSearchParams:s01}=UI(),T6=aY(),QI=iA(),oA={Array,Object,Promise,String,TypeError};n01.install(oA,["Window"]);s01.install(oA,["Window"]);a01.URL=oA.URL;a01.URLSearchParams=oA.URLSearchParams;a01.parseURL=T6.parseURL;a01.basicURLParse=T6.basicURLParse;a01.serializeURL=T6.serializeURL;a01.serializePath=T6.serializePath;a01.serializeHost=T6.serializeHost;a01.serializeInteger=T6.serializeInteger;a01.serializeURLOrigin=T6.serializeURLOrigin;a01.setTheUsername=T6.setTheUsername;a01.setThePassword=T6.setThePassword;a01.cannotHaveAUsernamePasswordPort=T6.cannotHaveAUsernamePasswordPort;a01.hasAnOpaquePath=T6.hasAnOpaquePath;a01.percentDecodeString=QI.percentDecodeString;a01.percentDecodeBytes=QI.percentDecodeBytes});var wI=z(($6)=>{var q21=function(F,A){var B,D;const J=F.clone(),Z=(B=A===null||A===void 0?void 0:A.replacementString)!==null&&B!==void 0?B:"_credentials_",X=(D=A===null||A===void 0?void 0:A.redactUsernames)!==null&&D!==void 0?D:!0;if((J.username||J.password)&&X)J.username=Z,J.password="";else if(J.password)J.password=Z;if(J.searchParams.has("authMechanismProperties")){const Y=new VI.CommaAndColonSeparatedRecord(J.searchParams.get("authMechanismProperties"));if(Y.get("AWS_SESSION_TOKEN"))Y.set("AWS_SESSION_TOKEN",Z),J.searchParams.set("authMechanismProperties",Y.toString())}if(J.searchParams.has("tlsCertificateKeyFilePassword"))J.searchParams.set("tlsCertificateKeyFilePassword",Z);if(J.searchParams.has("proxyUsername")&&X)J.searchParams.set("proxyUsername",Z);if(J.searchParams.has("proxyPassword"))J.searchParams.set("proxyPassword",Z);return J},K21=function(F,A){var B,D;const J=(B=A===null||A===void 0?void 0:A.replacementString)!==null&&B!==void 0?B:"<credentials>",Z=(D=A===null||A===void 0?void 0:A.redactUsernames)!==null&&D!==void 0?D:!0;let X;try{X=new VI.default(F)}catch(G){}if(X)return A={...A,replacementString:"___credentials___"},X.redact(A).toString().replace(/___credentials___/g,J);const Y=J,$=[(G)=>G.replace(Z?/(\/\/)(.*)(@)/g:/(\/\/[^@]*:)(.*)(@)/g,`\$1${Y}\$3`),(G)=>G.replace(/(AWS_SESSION_TOKEN(:|%3A))([^,&]+)/gi,`\$1${Y}`),(G)=>G.replace(/(tlsCertificateKeyFilePassword=)([^&]+)/gi,`\$1${Y}`),(G)=>Z?G.replace(/(proxyUsername=)([^&]+)/gi,`\$1${Y}`):G,(G)=>G.replace(/(proxyPassword=)([^&]+)/gi,`\$1${Y}`)];for(let G of $)F=G(F);return F},W21=$6&&$6.__createBinding||(Object.create?function(F,A,B,D){if(D===void 0)D=B;var J=Object.getOwnPropertyDescriptor(A,B);if(!J||("get"in J?!A.__esModule:J.writable||J.configurable))J={enumerable:!0,get:function(){return A[B]}};Object.defineProperty(F,D,J)}:function(F,A,B,D){if(D===void 0)D=B;F[D]=A[B]}),C21=$6&&$6.__setModuleDefault||(Object.create?function(F,A){Object.defineProperty(F,"default",{enumerable:!0,value:A})}:function(F,A){F.default=A}),H21=$6&&$6.__importStar||function(F){if(F&&F.__esModule)return F;var A={};if(F!=null){for(var B in F)if(B!=="default"&&Object.prototype.hasOwnProperty.call(F,B))W21(A,F,B)}return C21(A,F),A};Object.defineProperty($6,"__esModule",{value:!0});$6.redactConnectionString=$6.redactValidConnectionString=void 0;var VI=H21(A$());$6.redactValidConnectionString=q21;$6.redactConnectionString=K21});var A$=z((D$)=>{var U21=function(F){return F.startsWith("mongodb://")||F.startsWith("mongodb+srv://")},L21=function(F){return class A extends F{append(B,D){return super.append(this._normalizeKey(B),D)}delete(B){return super.delete(this._normalizeKey(B))}get(B){return super.get(this._normalizeKey(B))}getAll(B){return super.getAll(this._normalizeKey(B))}has(B){return super.has(this._normalizeKey(B))}set(B,D){return super.set(this._normalizeKey(B),D)}keys(){return super.keys()}values(){return super.values()}entries(){return super.entries()}[Symbol.iterator](){return super[Symbol.iterator]()}_normalizeKey(B){return B$.prototype._normalizeKey.call(this,B)}}};Object.defineProperty(D$,"__esModule",{value:!0});D$.CommaAndColonSeparatedRecord=D$.ConnectionString=D$.redactConnectionString=void 0;var z21=LI(),RI=wI();Object.defineProperty(D$,"redactConnectionString",{enumerable:!0,get:function(){return RI.redactConnectionString}});var K5="__this_is_a_placeholder__",Q21=/^(?<protocol>[^/]+):\/\/(?:(?<username>[^:@]*)(?::(?<password>[^@]*))?@)?(?<hosts>(?!:)[^/?@]*)(?<rest>.*)/;class B$ extends Map{delete(F){return super.delete(this._normalizeKey(F))}get(F){return super.get(this._normalizeKey(F))}has(F){return super.has(this._normalizeKey(F))}set(F,A){return super.set(this._normalizeKey(F),A)}_normalizeKey(F){F=`${F}`;for(let A of this.keys())if(A.toLowerCase()===F.toLowerCase()){F=A;break}return F}}class II extends z21.URL{}class o6 extends Error{get name(){return"MongoParseError"}}class z5 extends II{constructor(F,A={}){var B;const{looseValidation:D}=A;if(!D&&!U21(F))throw new o6('Invalid scheme, expected connection string to start with "mongodb://" or "mongodb+srv://"');const J=F.match(Q21);if(!J)throw new o6(`Invalid connection string "${F}"`);const{protocol:Z,username:X,password:Y,hosts:$,rest:G}=(B=J.groups)!==null&&B!==void 0?B:{};if(!D){if(!Z||!$)throw new o6(`Protocol and host list are required in "${F}"`);try{decodeURIComponent(X!==null&&X!==void 0?X:""),decodeURIComponent(Y!==null&&Y!==void 0?Y:"")}catch(C){throw new o6(C.message)}const W=/[:/?#[\]@]/gi;if(X===null||X===void 0?void 0:X.match(W))throw new o6(`Username contains unescaped characters ${X}`);if(!X||!Y){const C=F.replace(`${Z}://`,"");if(C.startsWith("@")||C.startsWith(":"))throw new o6("URI contained empty userinfo section")}if(Y===null||Y===void 0?void 0:Y.match(W))throw new o6("Password contains unescaped characters")}let E="";if(typeof X==="string")E+=X;if(typeof Y==="string")E+=`:${Y}`;if(E)E+="@";try{super(`${Z.toLowerCase()}://${E}${K5}${G}`)}catch(W){if(D)new z5(F,{...A,looseValidation:!1});if(typeof W.message==="string")W.message=W.message.replace(K5,$);throw W}if(this._hosts=$.split(","),!D){if(this.isSRV&&this.hosts.length!==1)throw new o6("mongodb+srv URI cannot have multiple service names");if(this.isSRV&&this.hosts.some((W)=>W.includes(":")))throw new o6("mongodb+srv URI cannot have port number")}if(!this.pathname)this.pathname="/";Object.setPrototypeOf(this.searchParams,L21(this.searchParams.constructor).prototype)}get host(){return K5}set host(F){throw new Error("No single host for connection string")}get hostname(){return K5}set hostname(F){throw new Error("No single host for connection string")}get port(){return""}set port(F){throw new Error("No single host for connection string")}get href(){return this.toString()}set href(F){throw new Error("Cannot set href for connection strings")}get isSRV(){return this.protocol.includes("srv")}get hosts(){return this._hosts}set hosts(F){this._hosts=F}toString(){return super.toString().replace(K5,this.hosts.join(","))}clone(){return new z5(this.toString(),{looseValidation:!0})}redact(F){return RI.redactValidConnectionString(this,F)}typedSearchParams(){return this.searchParams}[Symbol.for("nodejs.util.inspect.custom")](){const{href:F,origin:A,protocol:B,username:D,password:J,hosts:Z,pathname:X,search:Y,searchParams:$,hash:G}=this;return{href:F,origin:A,protocol:B,username:D,password:J,hosts:Z,pathname:X,search:Y,searchParams:$,hash:G}}}D$.ConnectionString=z5;class NI extends B${constructor(F){super();for(let A of(F!==null&&F!==void 0?F:"").split(",")){if(!A)continue;const B=A.indexOf(":");if(B===-1)this.set(A,"");else this.set(A.slice(0,B),A.slice(B+1))}}toString(){return[...this].map((F)=>F.join(":")).join(",")}}D$.CommaAndColonSeparatedRecord=NI;D$.default=z5});var MI=z((YK1,R21)=>{R21.exports={name:"mongodb",version:"6.6.2",description:"The official MongoDB driver for Node.js",main:"lib/index.js",files:["lib","src","etc/prepare.js","mongodb.d.ts","tsconfig.json"],types:"mongodb.d.ts",repository:{type:"git",url:"git@github.com:mongodb/node-mongodb-native.git"},keywords:["mongodb","driver","official"],author:{name:"The MongoDB NodeJS Team",email:"dbx-node@mongodb.com"},dependencies:{"@mongodb-js/saslprep":"^1.1.5",bson:"^6.7.0","mongodb-connection-string-url":"^3.0.0"},peerDependencies:{"@aws-sdk/credential-providers":"^3.188.0","@mongodb-js/zstd":"^1.1.0","gcp-metadata":"^5.2.0",kerberos:"^2.0.1","mongodb-client-encryption":">=6.0.0 <7",snappy:"^7.2.2",socks:"^2.7.1"},peerDependenciesMeta:{"@aws-sdk/credential-providers":{optional:!0},"@mongodb-js/zstd":{optional:!0},kerberos:{optional:!0},snappy:{optional:!0},"mongodb-client-encryption":{optional:!0},"gcp-metadata":{optional:!0},socks:{optional:!0}},devDependencies:{"@aws-sdk/credential-providers":"^3.515.0","@iarna/toml":"^2.2.5","@istanbuljs/nyc-config-typescript":"^1.0.2","@microsoft/api-extractor":"^7.43.1","@microsoft/tsdoc-config":"^0.16.2","@mongodb-js/zstd":"^1.2.0","@octokit/core":"^6.1.2","@types/chai":"^4.3.14","@types/chai-subset":"^1.3.5","@types/express":"^4.17.21","@types/kerberos":"^1.1.5","@types/mocha":"^10.0.6","@types/node":"^20.12.7","@types/saslprep":"^1.0.3","@types/semver":"^7.5.8","@types/sinon":"^17.0.3","@types/sinon-chai":"^3.2.12","@types/whatwg-url":"^11.0.4","@typescript-eslint/eslint-plugin":"^5.62.0","@typescript-eslint/parser":"^5.62.0",chai:"^4.4.1","chai-subset":"^1.6.0",chalk:"^4.1.2",eslint:"^8.56.0","eslint-config-prettier":"^8.10.0","eslint-plugin-github":"^4.10.2","eslint-plugin-import":"^2.29.1","eslint-plugin-mocha":"^10.4.1","eslint-plugin-prettier":"^4.2.1","eslint-plugin-simple-import-sort":"^10.0.0","eslint-plugin-tsdoc":"^0.2.17","eslint-plugin-unused-imports":"^2.0.0",express:"^4.19.2","gcp-metadata":"^5.3.0","js-yaml":"^4.1.0",mocha:"^10.4.0","mocha-sinon":"^2.1.2","mongodb-client-encryption":"^6.0.0","mongodb-legacy":"^6.0.1",nyc:"^15.1.0",prettier:"^2.8.8",semver:"^7.6.0",sinon:"^17.0.1","sinon-chai":"^3.7.0",snappy:"^7.2.2",socks:"^2.8.1","source-map-support":"^0.5.21","ts-node":"^10.9.2",tsd:"^0.31.0",typescript:"5.0","typescript-cached-transpile":"^0.0.6","v8-heapsnapshot":"^1.3.1",yargs:"^17.7.2"},license:"Apache-2.0",engines:{node:">=16.20.1"},bugs:{url:"https://jira.mongodb.org/projects/NODE/issues/"},homepage:"https://github.com/mongodb/node-mongodb-native",scripts:{"build:evergreen":"node .evergreen/generate_evergreen_tasks.js","build:ts":"node ./node_modules/typescript/bin/tsc","build:dts":"npm run build:ts && api-extractor run && node etc/clean_definition_files.cjs && eslint mongodb.d.ts --fix","build:docs":"./etc/docs/build.ts","build:typedoc":"typedoc","build:nightly":"node ./.github/scripts/nightly.mjs","check:bench":"node test/benchmarks/driverBench","check:coverage":"nyc npm run test:all","check:integration-coverage":"nyc npm run check:test","check:lambda":"mocha --config test/mocha_lambda.json test/integration/node-specific/examples/handler.test.js","check:lambda:aws":"mocha --config test/mocha_lambda.json test/integration/node-specific/examples/aws_handler.test.js","check:lint":"npm run build:dts && npm run check:dts && npm run check:eslint && npm run check:tsd","check:eslint":"eslint -v && eslint --max-warnings=0 --ext '.js,.ts' src test","check:tsd":"tsd --version && tsd","check:dependencies":"mocha test/action/dependency.test.ts","check:dts":"node ./node_modules/typescript/bin/tsc --noEmit mongodb.d.ts && tsd","check:search-indexes":"nyc mocha --config test/mocha_mongodb.json test/manual/search-index-management.prose.test.ts","check:test":"mocha --config test/mocha_mongodb.json test/integration","check:unit":"mocha test/unit","check:ts":"node ./node_modules/typescript/bin/tsc -v && node ./node_modules/typescript/bin/tsc --noEmit","check:atlas":"mocha --config test/manual/mocharc.json test/manual/atlas_connectivity.test.ts","check:drivers-atlas-testing":"mocha --config test/mocha_mongodb.json test/atlas/drivers_atlas_testing.test.ts","check:adl":"mocha --config test/mocha_mongodb.json test/manual/atlas-data-lake-testing","check:aws":"nyc mocha --config test/mocha_mongodb.json test/integration/auth/mongodb_aws.test.ts","check:oidc":"mocha --config test/mocha_mongodb.json test/manual/mongodb_oidc.prose.test.ts","check:oidc-azure":"mocha --config test/mocha_mongodb.json test/integration/auth/mongodb_oidc_azure.prose.test.ts","check:ocsp":"mocha --config test/manual/mocharc.json test/manual/ocsp_support.test.js","check:kerberos":"nyc mocha --config test/manual/mocharc.json test/manual/kerberos.test.ts","check:tls":"mocha --config test/manual/mocharc.json test/manual/tls_support.test.ts","check:ldap":"nyc mocha --config test/manual/mocharc.json test/manual/ldap.test.js","check:socks5":"mocha --config test/manual/mocharc.json test/manual/socks5.test.ts","check:csfle":"mocha --config test/mocha_mongodb.json test/integration/client-side-encryption","check:snappy":"mocha test/unit/assorted/snappy.test.js","check:x509":"mocha test/manual/x509_auth.test.ts","fix:eslint":"npm run check:eslint -- --fix",prepare:"node etc/prepare.js","preview:docs":"ts-node etc/docs/preview.ts",test:"npm run check:lint && npm run test:all","test:all":"npm run check:unit && npm run check:test","update:docs":"npm run build:docs -- --yes"},tsd:{directory:"test/types",compilerOptions:{strict:!0,target:"esnext",module:"commonjs",moduleResolution:"node"}}}});var J$=z((SI)=>{var N21=function(F){const A=new eA(512),{appName:B=""}=F;if(B.length>0){const E=Buffer.byteLength(B,"utf8")<=128?F.appName:Buffer.from(B,"utf8").subarray(0,128).toString("utf8");A.ifItFitsItSits("application",{name:E})}const{name:D="",version:J="",platform:Z=""}=F.driverInfo,X={name:D.length>0?`nodejs|${D}`:"nodejs",version:J.length>0?`${jI}|${J}`:jI};if(!A.ifItFitsItSits("driver",X))throw new TI.MongoInvalidArgumentError("Unable to include driverInfo name and version, metadata cannot exceed 512 bytes");let Y=T21();if(Z.length>0)Y=`${Y}|${Z}`;if(!A.ifItFitsItSits("platform",Y))throw new TI.MongoInvalidArgumentError("Unable to include driverInfo platform, metadata cannot exceed 512 bytes");const $=(new Map()).set("name",Q5.platform).set("architecture",Q5.arch).set("version",U5.release()).set("type",U5.type());if(!A.ifItFitsItSits("os",$))for(let E of $.keys()){if($.delete(E),$.size===0)break;if(A.ifItFitsItSits("os",$))break}const G=OI();if(G!=null){if(!A.ifItFitsItSits("env",G))for(let E of G.keys()){if(G.delete(E),G.size===0)break;if(A.ifItFitsItSits("env",G))break}}return A.toObject()};async function P21(){const F={};uI??=I21.fileIsAccessible("/.dockerenv");const A=await uI,{KUBERNETES_SERVICE_HOST:B=""}=Q5.env,D=B.length>0?!0:!1;if(A)F.runtime="docker";if(D)F.orchestrator="kubernetes";return F}async function M21(F){const A=await P21();if(Object.keys(A).length===0)return F;const B=new eA(512),D={...F?.env,container:A};for(let[J,Z]of Object.entries(F))if(J!=="env")B.ifItFitsItSits(J,Z);else if(!B.ifItFitsItSits("env",D))B.ifItFitsItSits("env",Z);if(!("env"in F))B.ifItFitsItSits("env",D);return B.toObject()}var OI=function(){const{AWS_EXECUTION_ENV:F="",AWS_LAMBDA_RUNTIME_API:A="",FUNCTIONS_WORKER_RUNTIME:B="",K_SERVICE:D="",FUNCTION_NAME:J="",VERCEL:Z="",AWS_LAMBDA_FUNCTION_MEMORY_SIZE:X="",AWS_REGION:Y="",FUNCTION_MEMORY_MB:$="",FUNCTION_REGION:G="",FUNCTION_TIMEOUT_SEC:E="",VERCEL_REGION:W=""}=Q5.env,C=F.startsWith("AWS_Lambda_")||A.length>0,H=B.length>0,q=D.length>0||J.length>0,K=Z.length>0,U=new Map;if(K&&!(H||q)){if(W.length>0)U.set("region",W);return U.set("name","vercel"),U}if(C&&!(H||q||K)){if(Y.length>0)U.set("region",Y);if(X.length>0&&Number.isInteger(+X))U.set("memory_mb",new K7.Int32(X));return U.set("name","aws.lambda"),U}if(H&&!(q||C||K))return U.set("name","azure.func"),U;if(q&&!(H||C||K)){if(G.length>0)U.set("region",G);if($.length>0&&Number.isInteger(+$))U.set("memory_mb",new K7.Int32($));if(E.length>0&&Number.isInteger(+E))U.set("timeout_sec",new K7.Int32(E));return U.set("name","gcp.func"),U}return null},T21=function(){if("Deno"in globalThis)return`Deno v${typeof Deno?.version?.deno==="string"?Deno?.version?.deno:"0.0.0-unknown"}, ${U5.endianness()}`;if("Bun"in globalThis)return`Bun v${typeof Bun?.version==="string"?Bun?.version:"0.0.0-unknown"}, ${U5.endianness()}`;return`Node.js ${Q5.version}, ${U5.endianness()}`};Object.defineProperty(SI,"__esModule",{value:!0});SI.getFAASEnv=SI.addContainerMetadata=SI.makeClientMetadata=SI.LimitedSizeDocument=void 0;var U5=import.meta.require("os"),Q5=import.meta.require("process"),K7=S1(),TI=p(),I21=r(),jI=MI().version;class eA{constructor(F){this.maxSize=F,this.document=new Map,this.documentSize=5}ifItFitsItSits(F,A){const B=K7.BSON.serialize((new Map()).set(F,A)).byteLength-5;if(B+this.documentSize>this.maxSize)return!1;return this.documentSize+=B,this.document.set(F,A),!0}toObject(){return K7.BSON.deserialize(K7.BSON.serialize(this.document),{promoteLongs:!1,promoteBuffers:!1,promoteValues:!1,useBigInt64:!1})}}SI.LimitedSizeDocument=eA;SI.makeClientMetadata=N21;var uI;SI.addContainerMetadata=M21;SI.getFAASEnv=OI});var BB=z((hI)=>{Object.defineProperty(hI,"__esModule",{value:!0});hI.OpCompressedRequest=hI.OpMsgResponse=hI.OpMsgRequest=hI.OpReply=hI.OpQueryRequest=void 0;var FB=S1(),L5=p(),Z$=V5(),z7=d4(),U7=0,S21=2,k21=4,x21=8,f21=16,_21=32,g21=64,b21=128,y21=1,v21=2,h21=4,m21=8;class Y${constructor(F,A,B){this.databaseName=F,this.query=A;const D=`${F}.\$cmd`;if(typeof F!=="string")throw new L5.MongoRuntimeError("Database name must be a string for a query");if(A==null)throw new L5.MongoRuntimeError("A query document must be specified for query");if(D.indexOf("\0")!==-1)throw new L5.MongoRuntimeError("Namespace cannot contain a null character");this.ns=D,this.numberToSkip=B.numberToSkip||0,this.numberToReturn=B.numberToReturn||0,this.returnFieldSelector=B.returnFieldSelector||void 0,this.requestId=B.requestId??Y$.getRequestId(),this.pre32Limit=B.pre32Limit,this.serializeFunctions=typeof B.serializeFunctions==="boolean"?B.serializeFunctions:!1,this.ignoreUndefined=typeof B.ignoreUndefined==="boolean"?B.ignoreUndefined:!1,this.maxBsonSize=B.maxBsonSize||16777216,this.checkKeys=typeof B.checkKeys==="boolean"?B.checkKeys:!1,this.batchSize=this.numberToReturn,this.tailable=!1,this.secondaryOk=typeof B.secondaryOk==="boolean"?B.secondaryOk:!1,this.oplogReplay=!1,this.noCursorTimeout=!1,this.awaitData=!1,this.exhaust=!1,this.partial=!1}incRequestId(){this.requestId=U7++}nextRequestId(){return U7+1}static getRequestId(){return++U7}toBin(){const F=[];let A=null,B=0;if(this.tailable)B|=S21;if(this.secondaryOk)B|=k21;if(this.oplogReplay)B|=x21;if(this.noCursorTimeout)B|=f21;if(this.awaitData)B|=_21;if(this.exhaust)B|=g21;if(this.partial)B|=b21;if(this.batchSize!==this.numberToReturn)this.numberToReturn=this.batchSize;const D=Buffer.alloc(20+Buffer.byteLength(this.ns)+1+4+4);F.push(D);const J=FB.serialize(this.query,{checkKeys:this.checkKeys,serializeFunctions:this.serializeFunctions,ignoreUndefined:this.ignoreUndefined});if(F.push(J),this.returnFieldSelector&&Object.keys(this.returnFieldSelector).length>0)A=FB.serialize(this.returnFieldSelector,{checkKeys:this.checkKeys,serializeFunctions:this.serializeFunctions,ignoreUndefined:this.ignoreUndefined}),F.push(A);const Z=D.length+J.length+(A?A.length:0);let X=4;return D[3]=Z>>24&255,D[2]=Z>>16&255,D[1]=Z>>8&255,D[0]=Z&255,D[X+3]=this.requestId>>24&255,D[X+2]=this.requestId>>16&255,D[X+1]=this.requestId>>8&255,D[X]=this.requestId&255,X=X+4,D[X+3]=0,D[X+2]=0,D[X+1]=0,D[X]=0,X=X+4,D[X+3]=z7.OP_QUERY>>24&255,D[X+2]=z7.OP_QUERY>>16&255,D[X+1]=z7.OP_QUERY>>8&255,D[X]=z7.OP_QUERY&255,X=X+4,D[X+3]=B>>24&255,D[X+2]=B>>16&255,D[X+1]=B>>8&255,D[X]=B&255,X=X+4,X=X+D.write(this.ns,X,"utf8")+1,D[X-1]=0,D[X+3]=this.numberToSkip>>24&255,D[X+2]=this.numberToSkip>>16&255,D[X+1]=this.numberToSkip>>8&255,D[X]=this.numberToSkip&255,X=X+4,D[X+3]=this.numberToReturn>>24&255,D[X+2]=this.numberToReturn>>16&255,D[X+1]=this.numberToReturn>>8&255,D[X]=this.numberToReturn&255,X=X+4,F}}hI.OpQueryRequest=Y$;class fI{constructor(F,A,B,D){this.index=0,this.sections=[],this.moreToCome=!1,this.parsed=!1,this.raw=F,this.data=B,this.opts=D??{useBigInt64:!1,promoteLongs:!0,promoteValues:!0,promoteBuffers:!1,bsonRegExp:!1},this.length=A.length,this.requestId=A.requestId,this.responseTo=A.responseTo,this.opCode=A.opCode,this.fromCompressed=A.fromCompressed,this.useBigInt64=typeof this.opts.useBigInt64==="boolean"?this.opts.useBigInt64:!1,this.promoteLongs=typeof this.opts.promoteLongs==="boolean"?this.opts.promoteLongs:!0,this.promoteValues=typeof this.opts.promoteValues==="boolean"?this.opts.promoteValues:!0,this.promoteBuffers=typeof this.opts.promoteBuffers==="boolean"?this.opts.promoteBuffers:!1,this.bsonRegExp=typeof this.opts.bsonRegExp==="boolean"?this.opts.bsonRegExp:!1}isParsed(){return this.parsed}parse(){if(this.parsed)return this.sections[0];if(this.index=20,this.responseFlags=this.data.readInt32LE(0),this.cursorId=new FB.Long(this.data.readInt32LE(4),this.data.readInt32LE(8)),this.startingFrom=this.data.readInt32LE(12),this.numberReturned=this.data.readInt32LE(16),this.numberReturned<0||this.numberReturned>4294967295)throw new RangeError(`OP_REPLY numberReturned is an invalid array length ${this.numberReturned}`);this.cursorNotFound=(this.responseFlags&y21)!==0,this.queryFailure=(this.responseFlags&v21)!==0,this.shardConfigStale=(this.responseFlags&h21)!==0,this.awaitCapable=(this.responseFlags&m21)!==0;for(let F=0;F<this.numberReturned;F++){const A=this.data[this.index]|this.data[this.index+1]<<8|this.data[this.index+2]<<16|this.data[this.index+3]<<24,B=this.data.subarray(this.index,this.index+A);this.sections.push(B),this.index=this.index+A}return this.parsed=!0,this.sections[0]}}hI.OpReply=fI;var _I=1,gI=2,bI=65536;class AB{constructor(F,A,B){if(this.databaseName=F,this.command=A,this.options=B,A==null)throw new L5.MongoInvalidArgumentError("Query document must be specified for query");this.command.$db=F,this.options=B??{},this.requestId=B.requestId?B.requestId:AB.getRequestId(),this.serializeFunctions=typeof B.serializeFunctions==="boolean"?B.serializeFunctions:!1,this.ignoreUndefined=typeof B.ignoreUndefined==="boolean"?B.ignoreUndefined:!1,this.checkKeys=typeof B.checkKeys==="boolean"?B.checkKeys:!1,this.maxBsonSize=B.maxBsonSize||16777216,this.checksumPresent=!1,this.moreToCome=B.moreToCome||!1,this.exhaustAllowed=typeof B.exhaustAllowed==="boolean"?B.exhaustAllowed:!1}toBin(){const F=[];let A=0;if(this.checksumPresent)A|=_I;if(this.moreToCome)A|=gI;if(this.exhaustAllowed)A|=bI;const B=Buffer.alloc(20);F.push(B);let D=B.length;const J=this.command;return D+=this.makeDocumentSegment(F,J),B.writeInt32LE(D,0),B.writeInt32LE(this.requestId,4),B.writeInt32LE(0,8),B.writeInt32LE(z7.OP_MSG,12),B.writeUInt32LE(A,16),F}makeDocumentSegment(F,A){const B=Buffer.alloc(1);B[0]=0;const D=this.serializeBson(A);return F.push(B),F.push(D),B.length+D.length}serializeBson(F){return FB.serialize(F,{checkKeys:this.checkKeys,serializeFunctions:this.serializeFunctions,ignoreUndefined:this.ignoreUndefined})}static getRequestId(){return U7=U7+1&2147483647,U7}}hI.OpMsgRequest=AB;class yI{constructor(F,A,B,D){this.index=0,this.sections=[],this.parsed=!1,this.raw=F,this.data=B,this.opts=D??{useBigInt64:!1,promoteLongs:!0,promoteValues:!0,promoteBuffers:!1,bsonRegExp:!1},this.length=A.length,this.requestId=A.requestId,this.responseTo=A.responseTo,this.opCode=A.opCode,this.fromCompressed=A.fromCompressed,this.responseFlags=B.readInt32LE(0),this.checksumPresent=(this.responseFlags&_I)!==0,this.moreToCome=(this.responseFlags&gI)!==0,this.exhaustAllowed=(this.responseFlags&bI)!==0,this.useBigInt64=typeof this.opts.useBigInt64==="boolean"?this.opts.useBigInt64:!1,this.promoteLongs=typeof this.opts.promoteLongs==="boolean"?this.opts.promoteLongs:!0,this.promoteValues=typeof this.opts.promoteValues==="boolean"?this.opts.promoteValues:!0,this.promoteBuffers=typeof this.opts.promoteBuffers==="boolean"?this.opts.promoteBuffers:!1,this.bsonRegExp=typeof this.opts.bsonRegExp==="boolean"?this.opts.bsonRegExp:!1}isParsed(){return this.parsed}parse(){if(this.parsed)return this.sections[0];this.index=4;while(this.index<this.data.length){const F=this.data.readUInt8(this.index++);if(F===0){const A=this.data.readUInt32LE(this.index),B=this.data.subarray(this.index,this.index+A);this.sections.push(B),this.index+=A}else if(F===1)throw new L5.MongoRuntimeError("OP_MSG Payload Type 1 detected unsupported protocol")}return this.parsed=!0,this.sections[0]}}hI.OpMsgResponse=yI;var X$=16,xI=9;class vI{constructor(F,A){this.command=F,this.options=A}static canCompress(F){const A=F instanceof AB?F.command:F.query,B=Object.keys(A)[0];return!Z$.uncompressibleCommands.has(B)}async toBin(){const F=Buffer.concat(this.command.toBin()),A=F.slice(X$),B=F.readInt32LE(12),D=await Z$.compress(this.options,A),J=Buffer.alloc(X$);J.writeInt32LE(X$+xI+D.length,0),J.writeInt32LE(this.command.requestId,4),J.writeInt32LE(0,8),J.writeInt32LE(z7.OP_COMPRESSED,12);const Z=Buffer.alloc(xI);return Z.writeInt32LE(B,0),Z.writeInt32LE(A.length,4),Z.writeUInt8(Z$.Compressor[this.options.agreedCompressor],8),[J,Z,D]}}hI.OpCompressedRequest=vI});var V5=z((nI)=>{var lI=function(){if(t4==null){const F=cI.getSnappy();if("kModuleError"in F)throw F.kModuleError;t4=F}return t4};async function r21(F,A){const B={};switch(F.agreedCompressor){case"snappy":return t4??=lI(),await t4.compress(A);case"zstd":{if(iI(),"kModuleError"in W4)throw W4.kModuleError;return await W4.compress(A,n21)}case"zlib":{if(F.zlibCompressionLevel)B.level=F.zlibCompressionLevel;return await a21(A,B)}default:throw new G$.MongoInvalidArgumentError(`Unknown compressor ${F.agreedCompressor} failed to compress`)}}async function pI(F,A){if(F!==nI.Compressor.snappy&&F!==nI.Compressor.zstd&&F!==nI.Compressor.zlib&&F!==nI.Compressor.none)throw new G$.MongoDecompressionError(`Server sent message compressed using an unsupported compressor. (Received compressor ID ${F})`);switch(F){case nI.Compressor.snappy:return t4??=lI(),await t4.uncompress(A,{asBuffer:!0});case nI.Compressor.zstd:{if(iI(),"kModuleError"in W4)throw W4.kModuleError;return await W4.decompress(A)}case nI.Compressor.zlib:return await s21(A);default:return A}}var iI=function(){if(!W4)W4=cI.getZstdLibrary()};async function t21(F,A){const D=await(A.agreedCompressor==="none"||!Q7.OpCompressedRequest.canCompress(F)?F:new Q7.OpCompressedRequest(F,{agreedCompressor:A.agreedCompressor??"none",zlibCompressionLevel:A.zlibCompressionLevel??0})).toBin();return Buffer.concat(D)}async function o21(F){const A={length:F.readInt32LE(0),requestId:F.readInt32LE(4),responseTo:F.readInt32LE(8),opCode:F.readInt32LE(12)};if(A.opCode!==$$.OP_COMPRESSED){const Y=A.opCode===$$.OP_MSG?Q7.OpMsgResponse:Q7.OpReply,$=F.subarray(w5);return new Y(F,A,$)}const B={...A,fromCompressed:!0,opCode:F.readInt32LE(w5),length:F.readInt32LE(w5+4)},D=F[w5+8],J=F.slice(w5+9),Z=B.opCode===$$.OP_MSG?Q7.OpMsgResponse:Q7.OpReply,X=await pI(D,J);if(X.length!==B.length)throw new G$.MongoDecompressionError("Message body and message header must be the same length");return new Z(F,B,X)}Object.defineProperty(nI,"__esModule",{value:!0});nI.decompressResponse=nI.compressCommand=nI.decompress=nI.compress=nI.uncompressibleCommands=nI.Compressor=void 0;var dI=import.meta.require("util"),DB=import.meta.require("zlib"),i21=L0(),cI=P6(),G$=p(),Q7=BB(),$$=d4();nI.Compressor=Object.freeze({none:0,snappy:1,zlib:2,zstd:3});nI.uncompressibleCommands=new Set([i21.LEGACY_HELLO_COMMAND,"saslStart","saslContinue","getnonce","authenticate","createUser","updateUser","copydbSaslStart","copydbgetnonce","copydb"]);var n21=3,s21=dI.promisify(DB.inflate.bind(DB)),a21=dI.promisify(DB.deflate.bind(DB)),W4,t4=null;nI.compress=r21;nI.decompress=pI;var w5=16;nI.compressCommand=t21;nI.decompressResponse=o21});var W$=z((aI)=>{var I5=function(F,A){return function(B,D,J,Z){let X;try{const Y=R5[F](A,B,D);Y.setAutoPadding(!1),X=Y.update(J);const $=Y.final();if($.length>0)X=Buffer.concat([X,$])}catch(Y){return Y}return X.copy(Z),X.length}},D61=function(F,A){try{R5.randomFillSync(F,0,A)}catch(B){return B}return A},J61=function(F,A){let B;try{B=R5.createHash("sha256").update(F).digest()}catch(D){return D}return B.copy(A),B.length},E$=function(F){return(A,B,D)=>{let J;try{J=R5.createHmac(F,A).update(B).digest()}catch(Z){return Z}return J.copy(D),J.length}},Z61=function(F,A,B){let D;try{const J=R5.createSign("sha256WithRSAEncryption"),Z=Buffer.from(`-----BEGIN PRIVATE KEY-----\n${F.toString("base64")}\n-----END PRIVATE KEY-----\n`);D=J.update(A).end().sign(Z)}catch(J){return J}return D.copy(B),D.length};Object.defineProperty(aI,"__esModule",{value:!0});aI.hmacSha256Hook=aI.hmacSha512Hook=aI.aes256CtrDecryptHook=aI.aes256CtrEncryptHook=aI.aes256CbcDecryptHook=aI.aes256CbcEncryptHook=aI.signRsaSha256Hook=aI.makeHmacHook=aI.sha256Hook=aI.randomHook=aI.makeAES256Hook=void 0;var R5=import.meta.require("crypto");aI.makeAES256Hook=I5;aI.randomHook=D61;aI.sha256Hook=J61;aI.makeHmacHook=E$;aI.signRsaSha256Hook=Z61;aI.aes256CbcEncryptHook=I5("createCipheriv","aes-256-cbc");aI.aes256CbcDecryptHook=I5("createDecipheriv","aes-256-cbc");aI.aes256CtrEncryptHook=I5("createCipheriv","aes-256-ctr");aI.aes256CtrDecryptHook=I5("createDecipheriv","aes-256-ctr");aI.hmacSha512Hook=E$("sha512");aI.hmacSha256Hook=E$("sha256")});var e4=z((BN)=>{Object.defineProperty(BN,"__esModule",{value:!0});BN.MongoCryptKMSRequestNetworkTimeoutError=BN.MongoCryptAzureKMSRequestError=BN.MongoCryptCreateEncryptedCollectionError=BN.MongoCryptCreateDataKeyError=BN.MongoCryptInvalidArgumentError=BN.MongoCryptError=void 0;var z61=p();class o4 extends z61.MongoError{constructor(F,A={}){super(F,A)}get name(){return"MongoCryptError"}}BN.MongoCryptError=o4;class tI extends o4{constructor(F){super(F)}get name(){return"MongoCryptInvalidArgumentError"}}BN.MongoCryptInvalidArgumentError=tI;class oI extends o4{constructor(F,{cause:A}){super(`Unable to complete creating data keys: ${A.message}`,{cause:A});this.encryptedFields=F}get name(){return"MongoCryptCreateDataKeyError"}}BN.MongoCryptCreateDataKeyError=oI;class eI extends o4{constructor(F,{cause:A}){super(`Unable to create collection: ${A.message}`,{cause:A});this.encryptedFields=F}get name(){return"MongoCryptCreateEncryptedCollectionError"}}BN.MongoCryptCreateEncryptedCollectionError=eI;class FN extends o4{constructor(F,A){super(F);this.body=A}get name(){return"MongoCryptAzureKMSRequestError"}}BN.MongoCryptAzureKMSRequestError=FN;class AN extends o4{get name(){return"MongoCryptKMSRequestNetworkTimeoutError"}}BN.MongoCryptKMSRequestNetworkTimeoutError=AN});var XN=z((JN)=>{Object.defineProperty(JN,"__esModule",{value:!0});JN.MongocryptdManager=void 0;var R61=p();class JB{constructor(F={}){if(this.uri=typeof F.mongocryptdURI==="string"&&F.mongocryptdURI.length>0?F.mongocryptdURI:JB.DEFAULT_MONGOCRYPTD_URI,this.bypassSpawn=!!F.mongocryptdBypassSpawn,this.spawnPath=F.mongocryptdSpawnPath||"",this.spawnArgs=[],Array.isArray(F.mongocryptdSpawnArgs))this.spawnArgs=this.spawnArgs.concat(F.mongocryptdSpawnArgs);if(this.spawnArgs.filter((A)=>typeof A==="string").every((A)=>A.indexOf("--idleShutdownTimeoutSecs")<0))this.spawnArgs.push("--idleShutdownTimeoutSecs","60")}async spawn(){const F=this.spawnPath||"mongocryptd",{spawn:A}=import.meta.require("child_process");this._child=A(F,this.spawnArgs,{stdio:"ignore",detached:!0}),this._child.on("error",()=>{}),this._child.unref()}async withRespawn(F){try{return await F()}catch(B){if(!(B instanceof R61.MongoNetworkTimeoutError&&!this.bypassSpawn))throw B}return await this.spawn(),await F()}}JB.DEFAULT_MONGOCRYPTD_URI="mongodb://localhost:27020";JN.MongocryptdManager=JB});var H$=z((EN)=>{Object.defineProperty(EN,"__esModule",{value:!0});EN.LegacyAWSTemporaryCredentialProvider=EN.AWSSDKCredentialProvider=EN.AWSTemporaryCredentialProvider=void 0;var I61=P6(),N61=p(),ZB=r(),P61="http://169.254.170.2",C$="http://169.254.169.254",YN="/latest/meta-data/iam/security-credentials";class j6{static get awsSDK(){return j6._awsSDK??=I61.getAwsCredentialProvider(),j6._awsSDK}static get isAWSSDKInstalled(){return!("kModuleError"in j6.awsSDK)}}EN.AWSTemporaryCredentialProvider=j6;class $N extends j6{get provider(){if("kModuleError"in j6.awsSDK)throw j6.awsSDK.kModuleError;if(this._provider)return this._provider;let{AWS_STS_REGIONAL_ENDPOINTS:F="",AWS_REGION:A=""}=process.env;F=F.toLowerCase(),A=A.toLowerCase();const B=A.length!==0&&F.length!==0,J=F==="regional"||F==="legacy"&&!(new Set(["ap-northeast-1","ap-south-1","ap-southeast-1","ap-southeast-2","aws-global","ca-central-1","eu-central-1","eu-north-1","eu-west-1","eu-west-2","eu-west-3","sa-east-1","us-east-1","us-east-2","us-west-1","us-west-2"])).has(A);return this._provider=B&&J?j6.awsSDK.fromNodeProviderChain({clientConfig:{region:A}}):j6.awsSDK.fromNodeProviderChain(),this._provider}async getCredentials(){try{const F=await this.provider();return{AccessKeyId:F.accessKeyId,SecretAccessKey:F.secretAccessKey,Token:F.sessionToken,Expiration:F.expiration}}catch(F){throw new N61.MongoAWSError(F.message,{cause:F})}}}EN.AWSSDKCredentialProvider=$N;class GN extends j6{async getCredentials(){if(process.env.AWS_CONTAINER_CREDENTIALS_RELATIVE_URI)return await ZB.request(`${P61}${process.env.AWS_CONTAINER_CREDENTIALS_RELATIVE_URI}`);const F=await ZB.request(`${C$}/latest/api/token`,{method:"PUT",json:!1,headers:{"X-aws-ec2-metadata-token-ttl-seconds":30}}),A=await ZB.request(`${C$}/${YN}`,{json:!1,headers:{"X-aws-ec2-metadata-token":F}});return await ZB.request(`${C$}/${YN}/${A}`,{headers:{"X-aws-ec2-metadata-token":F}})}}EN.LegacyAWSTemporaryCredentialProvider=GN});var qN=z((CN)=>{async function u61(F){const A=new j61.AWSSDKCredentialProvider,{SecretAccessKey:B="",AccessKeyId:D="",Token:J}=await A.getCredentials(),Z={secretAccessKey:B,accessKeyId:D};return J!=null&&(Z.sessionToken=J),{...F,aws:Z}}Object.defineProperty(CN,"__esModule",{value:!0});CN.loadAWSCredentials=void 0;var j61=H$();CN.loadAWSCredentials=u61});var UN=z((KN)=>{var k61=function(F,A={}){return new Promise((B,D)=>{let J;const Z=O61.get(F,A,(X)=>{X.setEncoding("utf8");let Y="";X.on("data",($)=>Y+=$),X.on("end",()=>{q$.clearTimeout(J),B({status:X.statusCode,body:Y})})}).on("error",(X)=>{q$.clearTimeout(J),D(X)}).end();J=q$.setTimeout(()=>{Z.destroy(new S61.MongoCryptKMSRequestNetworkTimeoutError("request timed out after 10 seconds"))},1e4)})};Object.defineProperty(KN,"__esModule",{value:!0});KN.get=void 0;var O61=import.meta.require("http"),q$=import.meta.require("timers"),S61=e4();KN.get=k61});var IN=z((VN)=>{async function _61(F){const{status:A,body:B}=F,D=(()=>{try{return JSON.parse(B)}catch{throw new F9.MongoCryptAzureKMSRequestError("Malformed JSON body in GET request.")}})();if(A!==200)throw new F9.MongoCryptAzureKMSRequestError("Unable to complete request.",D);if(!D.access_token)throw new F9.MongoCryptAzureKMSRequestError("Malformed response body - missing field `access_token`.");if(!D.expires_in)throw new F9.MongoCryptAzureKMSRequestError("Malformed response body - missing field `expires_in`.");const J=Number(D.expires_in)*1000;if(Number.isNaN(J))throw new F9.MongoCryptAzureKMSRequestError("Malformed response body - unable to parse int from `expires_in` field.");return{accessToken:D.access_token,expiresOnTimestamp:Date.now()+J}}var QN=function(F){const A=new URL(F.url?.toString()??"http://169.254.169.254/metadata/identity/oauth2/token");return A.searchParams.append("api-version","2018-02-01"),A.searchParams.append("resource","https://vault.azure.net"),{headers:{...F.headers,"Content-Type":"application/json",Metadata:!0},url:A}};async function LN(F={}){const{headers:A,url:B}=QN(F);try{const D=await x61.get(B,{headers:A});return await _61(D)}catch(D){if(D instanceof F9.MongoCryptKMSRequestNetworkTimeoutError)throw new F9.MongoCryptAzureKMSRequestError(`[Azure KMS] ${D.message}`);throw D}}async function g61(F){const A=await VN.tokenCache.getToken();return{...F,azure:A}}Object.defineProperty(VN,"__esModule",{value:!0});VN.loadAzureCredentials=VN.fetchAzureKMSToken=VN.prepareRequest=VN.tokenCache=VN.AzureCredentialCache=void 0;var F9=e4(),x61=UN(),f61=6000;class K${constructor(){this.cachedToken=null}async getToken(){if(this.cachedToken==null||this.needsRefresh(this.cachedToken))this.cachedToken=await this._getToken();return{accessToken:this.cachedToken.accessToken}}needsRefresh(F){return F.expiresOnTimestamp-Date.now()<=f61}resetCache(){this.cachedToken=null}_getToken(){return LN()}}VN.AzureCredentialCache=K$;VN.tokenCache=new K$;VN.prepareRequest=QN;VN.fetchAzureKMSToken=LN;VN.loadAzureCredentials=g61});var MN=z((NN)=>{async function m61(F){const A=h61.getGcpMetadata();if("kModuleError"in A)return F;const{access_token:B}=await A.instance({property:"service-accounts/default/token"});return{...F,gcp:{accessToken:B}}}Object.defineProperty(NN,"__esModule",{value:!0});NN.loadGCPCredentials=void 0;var h61=P6();NN.loadGCPCredentials=m61});var z$=z((TN)=>{var XB=function(F,A){const B=A[F];if(B==null)return!1;return typeof B==="object"&&Object.keys(B).length===0};async function p61(F){let A=F;if(XB("aws",F))A=await d61.loadAWSCredentials(A);if(XB("gcp",F))A=await l61.loadGCPCredentials(A);if(XB("azure",F))A=await c61.loadAzureCredentials(A);return A}Object.defineProperty(TN,"__esModule",{value:!0});TN.refreshKMSCredentials=TN.isEmptyCredentials=void 0;var d61=qN(),c61=IN(),l61=MN();TN.isEmptyCredentials=XB;TN.refreshKMSCredentials=p61});var U$=z((vN)=>{var r61=function(){if(N5==null){const F=a61.getSocks();if("kModuleError"in F)throw F.kModuleError;N5=F}return N5},ON=function(F){if(process.env.MONGODB_CRYPT_DEBUG)console.error(F)};Object.defineProperty(vN,"__esModule",{value:!0});vN.StateMachine=void 0;var uN=import.meta.require("fs/promises"),n61=import.meta.require("net"),s61=import.meta.require("tls"),R3=S1(),a61=P6(),L7=r(),I3=e4(),N5=null,YB=0,SN=1,kN=2,xN=3,fN=7,_N=4,gN=5,bN=6,t61=443,o61=new Map([[YB,"MONGOCRYPT_CTX_ERROR"],[SN,"MONGOCRYPT_CTX_NEED_MONGO_COLLINFO"],[kN,"MONGOCRYPT_CTX_NEED_MONGO_MARKINGS"],[xN,"MONGOCRYPT_CTX_NEED_MONGO_KEYS"],[fN,"MONGOCRYPT_CTX_NEED_KMS_CREDENTIALS"],[_N,"MONGOCRYPT_CTX_NEED_KMS"],[gN,"MONGOCRYPT_CTX_READY"],[bN,"MONGOCRYPT_CTX_DONE"]]),e61=["tlsInsecure","tlsAllowInvalidCertificates","tlsAllowInvalidHostnames","tlsDisableOCSPEndpointCheck","tlsDisableCertificateRevocationCheck"];class yN{constructor(F,A=R3.pluckBSONSerializeOptions(F)){this.options=F,this.bsonOptions=A}async execute(F,A){const{_keyVaultNamespace:B,_keyVaultClient:D,_metaDataClient:J,_mongocryptdClient:Z,_mongocryptdManager:X}=F;let Y=null;while(A.state!==bN&&A.state!==YB)switch(ON(`[context#${A.id}] ${o61.get(A.state)||A.state}`),A.state){case SN:{const $=R3.deserialize(A.nextMongoOperation());if(!J)throw new I3.MongoCryptError("unreachable state machine state: entered MONGOCRYPT_CTX_NEED_MONGO_COLLINFO but metadata client is undefined");const G=await this.fetchCollectionInfo(J,A.ns,$);if(G)A.addMongoOperationResponse(G);A.finishMongoOperation();break}case kN:{const $=A.nextMongoOperation();if(!Z)throw new I3.MongoCryptError("unreachable state machine state: entered MONGOCRYPT_CTX_NEED_MONGO_MARKINGS but mongocryptdClient is undefined");const G=X?await X.withRespawn(this.markCommand.bind(this,Z,A.ns,$)):await this.markCommand(Z,A.ns,$);A.addMongoOperationResponse(G),A.finishMongoOperation();break}case xN:{const $=A.nextMongoOperation(),G=await this.fetchKeys(D,B,$);if(G.length===0)Y={v:[]};for await(let E of G)A.addMongoOperationResponse(R3.serialize(E));A.finishMongoOperation();break}case fN:{const $=await F.askForKMSCredentials();A.provideKMSProviders(R3.serialize($));break}case _N:{const $=Array.from(this.requests(A));await Promise.all($),A.finishKMSRequests();break}case gN:{const $=A.finalize();if(A.state===YB){const G=A.status.message||"Finalization error";throw new I3.MongoCryptError(G)}Y=R3.deserialize($,this.options);break}default:throw new I3.MongoCryptError(`Unknown state: ${A.state}`)}if(A.state===YB||Y==null){const $=A.status.message;if(!$)ON("unidentifiable error in MongoCrypt - received an error status from \`libmongocrypt\` but received no error message.");throw new I3.MongoCryptError($??"unidentifiable error in MongoCrypt - received an error status from `libmongocrypt` but received no error message.")}return Y}async kmsRequest(F){const A=F.endpoint.split(":"),B=A[1]!=null?Number.parseInt(A[1],10):t61,D={host:A[0],servername:A[0],port:B},J=F.message,Z=new L7.BufferPool,X=new n61.Socket;let Y;function $(){for(let U of[Y,X])if(U)U.removeAllListeners(),U.destroy()}function G(){return new I3.MongoCryptError("KMS request timed out")}function E(U){return new I3.MongoCryptError("KMS request failed",{cause:U})}function W(){return new I3.MongoCryptError("KMS request closed")}const C=this.options.tlsOptions;if(C){const U=F.kmsProvider,Q=C[U];if(Q){const V=this.validateTlsOptions(U,Q);if(V)throw V;try{await this.setTlsOptions(Q,D)}catch(L){throw E(L)}}}const{promise:H,reject:q,resolve:K}=L7.promiseWithResolvers();X.once("timeout",()=>q(G())).once("error",(U)=>q(E(U))).once("close",()=>q(W())).once("connect",()=>K());try{if(this.options.proxyOptions&&this.options.proxyOptions.proxyHost){X.connect({host:this.options.proxyOptions.proxyHost,port:this.options.proxyOptions.proxyPort||1080}),await H;try{N5??=r61(),D.socket=(await N5.SocksClient.createConnection({existing_socket:X,command:"connect",destination:{host:D.host,port:D.port},proxy:{host:"iLoveJavaScript",port:0,type:5,userId:this.options.proxyOptions.proxyUsername,password:this.options.proxyOptions.proxyPassword}})).socket}catch(L){throw E(L)}}Y=s61.connect(D,()=>{Y.write(J)});const{promise:U,reject:Q,resolve:V}=L7.promiseWithResolvers();Y.once("timeout",()=>Q(G())).once("error",(L)=>Q(E(L))).once("close",()=>Q(W())).on("data",(L)=>{Z.append(L);while(F.bytesNeeded>0&&Z.length){const N=Math.min(F.bytesNeeded,Z.length);F.addResponse(Z.read(N))}if(F.bytesNeeded<=0)V()}),await U}finally{$()}}*requests(F){for(let A=F.nextKMSRequest();A!=null;A=F.nextKMSRequest())yield this.kmsRequest(A)}validateTlsOptions(F,A){const B=Object.keys(A);for(let D of e61)if(B.includes(D))return new I3.MongoCryptError(`Insecure TLS options prohibited for ${F}: ${D}`)}async setTlsOptions(F,A){if(F.tlsCertificateKeyFile){const B=await uN.readFile(F.tlsCertificateKeyFile);A.cert=A.key=B}if(F.tlsCAFile)A.ca=await uN.readFile(F.tlsCAFile);if(F.tlsCertificateKeyFilePassword)A.passphrase=F.tlsCertificateKeyFilePassword}async fetchCollectionInfo(F,A,B){const{db:D}=L7.MongoDBCollectionNamespace.fromString(A),J=await F.db(D).listCollections(B,{promoteLongs:!1,promoteValues:!1}).toArray();return J.length>0?R3.serialize(J[0]):null}async markCommand(F,A,B){const D={promoteLongs:!1,promoteValues:!1},{db:J}=L7.MongoDBCollectionNamespace.fromString(A),Z=R3.deserialize(B,D),X=await F.db(J).command(Z,D);return R3.serialize(X,this.bsonOptions)}fetchKeys(F,A,B){const{db:D,collection:J}=L7.MongoDBCollectionNamespace.fromString(A);return F.db(D).collection(J,{readConcern:{level:"majority"}}).find(R3.deserialize(B)).toArray()}}vN.StateMachine=yN});var L$=z((pN)=>{var lN=function(F,A,B=!0){if(B){if(Buffer.isBuffer(A))A=V7.deserialize(A);if(Buffer.isBuffer(F))throw new $B.MongoRuntimeError("Expected result of decryption to be deserialized BSON object")}if(!F||typeof F!=="object")return;for(let D of Object.keys(F)){const J=A[D];if(J&&J._bsontype==="Binary"&&J.sub_type===6){if(!F[Q$])Object.defineProperty(F,Q$,{value:[],configurable:!0,enumerable:!1,writable:!1});F[Q$].push(D);continue}lN(F[D],J,!1)}},dN;Object.defineProperty(pN,"__esModule",{value:!0});pN.AutoEncrypter=pN.AutoEncryptionLoggerLevel=void 0;var V7=S1(),F31=P6(),$B=p(),A31=A9(),B31=r(),D31=W$(),J31=e4(),Z31=XN(),X31=z$(),mN=U$();pN.AutoEncryptionLoggerLevel=Object.freeze({FatalError:0,Error:1,Warning:2,Info:3,Trace:4});var cN=Symbol.for("@@mdb.decorateDecryptionResult"),Q$=Symbol.for("@@mdb.decryptedKeys");class GB{static getMongoCrypt(){const F=F31.getMongoDBClientEncryption();if("kModuleError"in F)throw F.kModuleError;return F.MongoCrypt}constructor(F,A){this[dN]=!1,this._client=F,this._bypassEncryption=A.bypassAutoEncryption===!0,this._keyVaultNamespace=A.keyVaultNamespace||"admin.datakeys",this._keyVaultClient=A.keyVaultClient||F,this._metaDataClient=A.metadataClient||F,this._proxyOptions=A.proxyOptions||{},this._tlsOptions=A.tlsOptions||{},this._kmsProviders=A.kmsProviders||{};const B={cryptoCallbacks:D31};if(A.schemaMap)B.schemaMap=Buffer.isBuffer(A.schemaMap)?A.schemaMap:V7.serialize(A.schemaMap);if(A.encryptedFieldsMap)B.encryptedFieldsMap=Buffer.isBuffer(A.encryptedFieldsMap)?A.encryptedFieldsMap:V7.serialize(A.encryptedFieldsMap);if(B.kmsProviders=!Buffer.isBuffer(this._kmsProviders)?V7.serialize(this._kmsProviders):this._kmsProviders,A.options?.logger)B.logger=A.options.logger;if(A.extraOptions&&A.extraOptions.cryptSharedLibPath)B.cryptSharedLibPath=A.extraOptions.cryptSharedLibPath;if(A.bypassQueryAnalysis)B.bypassQueryAnalysis=A.bypassQueryAnalysis;if(this._bypassMongocryptdAndCryptShared=this._bypassEncryption||!!A.bypassQueryAnalysis,A.extraOptions&&A.extraOptions.cryptSharedLibSearchPaths)B.cryptSharedLibSearchPaths=A.extraOptions.cryptSharedLibSearchPaths;else if(!this._bypassMongocryptdAndCryptShared)B.cryptSharedLibSearchPaths=["$SYSTEM"];const D=GB.getMongoCrypt();if(this._mongocrypt=new D(B),this._contextCounter=0,A.extraOptions&&A.extraOptions.cryptSharedLibRequired&&!this.cryptSharedLibVersionInfo)throw new J31.MongoCryptInvalidArgumentError("`cryptSharedLibRequired` set but no crypt_shared library loaded");if(!this._bypassMongocryptdAndCryptShared&&!this.cryptSharedLibVersionInfo){this._mongocryptdManager=new Z31.MongocryptdManager(A.extraOptions);const J={serverSelectionTimeoutMS:1e4};if(A.extraOptions==null||typeof A.extraOptions.mongocryptdURI!=="string")J.family=4;this._mongocryptdClient=new A31.MongoClient(this._mongocryptdManager.uri,J)}}async init(){if(this._bypassMongocryptdAndCryptShared||this.cryptSharedLibVersionInfo)return;if(!this._mongocryptdManager)throw new $B.MongoRuntimeError("Reached impossible state: mongocryptdManager is undefined when neither bypassSpawn nor the shared lib are specified.");if(!this._mongocryptdClient)throw new $B.MongoRuntimeError("Reached impossible state: mongocryptdClient is undefined when neither bypassSpawn nor the shared lib are specified.");if(!this._mongocryptdManager.bypassSpawn)await this._mongocryptdManager.spawn();try{return await this._mongocryptdClient.connect()}catch(F){const{message:A}=F;if(A&&(A.match(/timed out after/)||A.match(/ENOTFOUND/)))throw new $B.MongoRuntimeError("Unable to connect to `mongocryptd`, please make sure it is running or in your PATH for auto-spawn",{cause:F});throw F}}async teardown(F){await this._mongocryptdClient?.close(F)}async encrypt(F,A,B={}){if(this._bypassEncryption)return A;const D=Buffer.isBuffer(A)?A:V7.serialize(A,B),J=this._mongocrypt.makeEncryptionContext(B31.MongoDBCollectionNamespace.fromString(F).db,D);return J.id=this._contextCounter++,J.ns=F,J.document=A,await new mN.StateMachine({promoteValues:!1,promoteLongs:!1,proxyOptions:this._proxyOptions,tlsOptions:this._tlsOptions}).execute(this,J)}async decrypt(F,A={}){const B=Buffer.isBuffer(F)?F:V7.serialize(F,A),D=this._mongocrypt.makeDecryptionContext(B);D.id=this._contextCounter++;const J=new mN.StateMachine({...A,proxyOptions:this._proxyOptions,tlsOptions:this._tlsOptions}),Z=this[cN],X=await J.execute(this,D);if(Z)lN(X,F);return X}async askForKMSCredentials(){return await X31.refreshKMSCredentials(this._kmsProviders)}get cryptSharedLibVersionInfo(){return this._mongocrypt.cryptSharedLibVersionInfo}static get libmongocryptVersion(){return GB.getMongoCrypt().libmongocryptVersion}}pN.AutoEncrypter=GB;dN=cN});var tN=z((aN)=>{Object.defineProperty(aN,"__esModule",{value:!0});aN.Encrypter=void 0;var $31=import.meta.require("util"),G31=L$(),E31=L0(),W31=P6(),nN=p(),C31=A9(),P5=Symbol("internalClient");class sN{constructor(F,A,B){if(typeof B.autoEncryption!=="object")throw new nN.MongoInvalidArgumentError('Option "autoEncryption" must be specified');if(this[P5]=null,this.bypassAutoEncryption=!!B.autoEncryption.bypassAutoEncryption,this.needsConnecting=!1,B.maxPoolSize===0&&B.autoEncryption.keyVaultClient==null)B.autoEncryption.keyVaultClient=F;else if(B.autoEncryption.keyVaultClient==null)B.autoEncryption.keyVaultClient=this.getInternalClient(F,A,B);if(this.bypassAutoEncryption)B.autoEncryption.metadataClient=void 0;else if(B.maxPoolSize===0)B.autoEncryption.metadataClient=F;else B.autoEncryption.metadataClient=this.getInternalClient(F,A,B);if(B.proxyHost)B.autoEncryption.proxyOptions={proxyHost:B.proxyHost,proxyPort:B.proxyPort,proxyUsername:B.proxyUsername,proxyPassword:B.proxyPassword};this.autoEncrypter=new G31.AutoEncrypter(F,B.autoEncryption)}getInternalClient(F,A,B){let D=this[P5];if(D==null){const J={};for(let Z of[...Object.getOwnPropertyNames(B),...Object.getOwnPropertySymbols(B)]){if(["autoEncryption","minPoolSize","servers","caseTranslate","dbName"].includes(Z))continue;Reflect.set(J,Z,Reflect.get(B,Z))}J.minPoolSize=0,D=new C31.MongoClient(A,J),this[P5]=D;for(let Z of E31.MONGO_CLIENT_EVENTS)for(let X of F.listeners(Z))D.on(Z,X);F.on("newListener",(Z,X)=>{D?.on(Z,X)}),this.needsConnecting=!0}return D}async connectInternalClient(){const F=this[P5];if(this.needsConnecting&&F!=null)this.needsConnecting=!1,await F.connect()}closeCallback(F,A,B){$31.callbackify(this.close.bind(this))(F,A,B)}async close(F,A){let B;try{await this.autoEncrypter.teardown(A)}catch(J){B=J}const D=this[P5];if(D!=null&&F!==D)return await D.close(A);if(B!=null)throw B}static checkForMongoCrypt(){const F=W31.getMongoDBClientEncryption();if("kModuleError"in F)throw new nN.MongoMissingDependencyError("Auto-encryption requested, but the module is not installed. Please add `mongodb-client-encryption` as a dependency of your project",{cause:F.kModuleError,dependencyName:"mongodb-client-encryption"})}}aN.Encrypter=sN});var N$=z((JP)=>{var R$=function(F){if(F instanceof FP.OpMsgRequest)return u6.deepCopy(F.command);if(F.query?.$query){let D;if(F.ns==="admin.$cmd")D=Object.assign({},F.query.$query);else D={find:K31(F)},Object.keys(oN).forEach((J)=>{if(F.query[J]!=null)D[oN[J]]=u6.deepCopy(F.query[J])});if(Object.keys(eN).forEach((J)=>{const Z=J;if(F[Z]!=null)D[eN[Z]]=u6.deepCopy(F[Z])}),z31.forEach((J)=>{if(F[J])D[J]=F[J]}),F.pre32Limit!=null)D.limit=F.pre32Limit;if(F.query.$explain)return{explain:D};return D}const A={},B={};if(F.query){for(let D in F.query)A[D]=u6.deepCopy(F.query[D]);B.query=A}for(let D in F){if(D==="query")continue;B[D]=u6.deepCopy(F[D])}return F.query?A:B},U31=function(F,A){if(!A)return A;if(F instanceof FP.OpMsgRequest)return u6.deepCopy(A.result?A.result:A);if(F.query&&F.query.$query!=null)return{ok:1,cursor:{id:u6.deepCopy(A.cursorId),ns:q31(F),firstBatch:u6.deepCopy(A.documents)}};return u6.deepCopy(A.result?A.result:A)},I$=function(F){let A;if("id"in F)A=F.id;return{address:F.address,serviceId:F.serviceId,connectionId:A}};Object.defineProperty(JP,"__esModule",{value:!0});JP.SENSITIVE_COMMANDS=JP.CommandFailedEvent=JP.CommandSucceededEvent=JP.CommandStartedEvent=void 0;var M5=L0(),u6=r(),FP=BB();class AP{constructor(F,A,B){this.name=M5.COMMAND_STARTED;const D=R$(A),J=V$(D),{address:Z,connectionId:X,serviceId:Y}=I$(F);if(JP.SENSITIVE_COMMANDS.has(J))this.commandObj={},this.commandObj[J]=!0;this.address=Z,this.connectionId=X,this.serviceId=Y,this.requestId=A.requestId,this.databaseName=A.databaseName,this.commandName=J,this.command=w$(J,D,D),this.serverConnectionId=B}get hasServiceId(){return!!this.serviceId}}JP.CommandStartedEvent=AP;class BP{constructor(F,A,B,D,J){this.name=M5.COMMAND_SUCCEEDED;const Z=R$(A),X=V$(Z),{address:Y,connectionId:$,serviceId:G}=I$(F);this.address=Y,this.connectionId=$,this.serviceId=G,this.requestId=A.requestId,this.commandName=X,this.duration=u6.calculateDurationInMs(D),this.reply=w$(X,Z,U31(A,B)),this.serverConnectionId=J}get hasServiceId(){return!!this.serviceId}}JP.CommandSucceededEvent=BP;class DP{constructor(F,A,B,D,J){this.name=M5.COMMAND_FAILED;const Z=R$(A),X=V$(Z),{address:Y,connectionId:$,serviceId:G}=I$(F);this.address=Y,this.connectionId=$,this.serviceId=G,this.requestId=A.requestId,this.commandName=X,this.duration=u6.calculateDurationInMs(D),this.failure=w$(X,Z,B),this.serverConnectionId=J}get hasServiceId(){return!!this.serviceId}}JP.CommandFailedEvent=DP;JP.SENSITIVE_COMMANDS=new Set(["authenticate","saslStart","saslContinue","getnonce","createUser","updateUser","copydbgetnonce","copydbsaslstart","copydb"]);var H31=new Set(["hello",M5.LEGACY_HELLO_COMMAND,M5.LEGACY_HELLO_COMMAND_CAMEL_CASE]),V$=(F)=>Object.keys(F)[0],q31=(F)=>F.ns,K31=(F)=>F.ns.split(".")[1],w$=(F,A,B)=>JP.SENSITIVE_COMMANDS.has(F)||H31.has(F)&&A.speculativeAuthenticate?{}:B,oN={$query:"filter",$orderby:"sort",$hint:"hint",$comment:"comment",$maxScan:"maxScan",$max:"max",$min:"min",$returnKey:"returnKey",$showDiskLoc:"showRecordId",$maxTimeMS:"maxTimeMS",$snapshot:"snapshot"},eN={numberToSkip:"skip",numberToReturn:"batchSize",returnFieldSelector:"projection"},z31=["tailable","oplogReplay","noCursorTimeout","awaitData","partial","exhaust"]});var $P=z((XP)=>{Object.defineProperty(XP,"__esModule",{value:!0});XP.StreamDescription=void 0;var w31=S1(),R31=v2(),I31=e8(),N31=["minWireVersion","maxWireVersion","maxBsonObjectSize","maxMessageSizeBytes","maxWriteBatchSize","logicalSessionTimeoutMinutes"];class ZP{constructor(F,A){this.hello=null,this.address=F,this.type=R31.ServerType.Unknown,this.minWireVersion=void 0,this.maxWireVersion=void 0,this.maxBsonObjectSize=16777216,this.maxMessageSizeBytes=48000000,this.maxWriteBatchSize=1e5,this.logicalSessionTimeoutMinutes=A?.logicalSessionTimeoutMinutes,this.loadBalanced=!!A?.loadBalanced,this.compressors=A&&A.compressors&&Array.isArray(A.compressors)?A.compressors:[],this.serverConnectionId=null}receiveResponse(F){if(F==null)return;if(this.hello=F,this.type=I31.parseServerType(F),"connectionId"in F)this.serverConnectionId=this.parseServerConnectionID(F.connectionId);else this.serverConnectionId=null;for(let A of N31){if(F[A]!=null)this[A]=F[A];if("__nodejs_mock_server__"in F)this.__nodejs_mock_server__=F.__nodejs_mock_server__}if(F.compression)this.compressor=this.compressors.filter((A)=>F.compression?.includes(A))[0]}parseServerConnectionID(F){return w31.Long.isLong(F)?F.toBigInt():BigInt(F)}}XP.StreamDescription=ZP});var WP=z((GP)=>{var P31=function(F){const A=new P$.List,B=new P$.List;let D=null,J=!1;const Z={next(){const G=A.shift();if(G!=null)return Promise.resolve({value:G,done:!1});if(D!=null){const H=Promise.reject(D);return D=null,H}if(J)return $();const{promise:E,resolve:W,reject:C}=P$.promiseWithResolvers();return B.push({resolve:W,reject:C}),E},return(){return $()},throw(G){return Y(G),Promise.resolve({value:void 0,done:!0})},[Symbol.asyncIterator](){return this}};return F.on("data",X),F.on("error",Y),Z;function X(G){const E=B.shift();if(E!=null)E.resolve({value:G,done:!1});else A.push(G)}function Y(G){const E=B.shift();if(E!=null)E.reject(G);else D=G;$()}function $(){F.off("data",X),F.off("error",Y),J=!0;const G={value:void 0,done:J};for(let E of B)E.resolve(G);return Promise.resolve(G)}};Object.defineProperty(GP,"__esModule",{value:!0});GP.onData=void 0;var P$=r();GP.onData=P31});var qB=z((zP)=>{var x31=function(F){return F.description.logicalSessionTimeoutMinutes!=null},f31=function(F,A){if(A.proxyHost)return A.hostAddress.toString();const{remoteAddress:B,remotePort:D}=F;if(typeof B==="string"&&typeof D==="number")return S6.HostAddress.fromHostPort(B,D).toString();return S6.uuidV4().toString("hex")};Object.defineProperty(zP,"__esModule",{value:!0});zP.CryptoConnection=zP.SizedMessageTransform=zP.Connection=zP.hasSessionSupport=void 0;var M31=import.meta.require("stream"),qP=import.meta.require("timers"),B9=L0(),O6=p(),CP=p4(),T31=d2(),j31=T0(),u31=v2(),HP=B5(),S6=r(),WB=N$(),CB=BB(),O31=$P(),S31=V5(),k31=WP(),HB=o8(),M$=dX();zP.hasSessionSupport=x31;class u0 extends T31.TypedEventEmitter{constructor(F,A){super();this.lastHelloMS=-1,this.helloOk=!1,this.delayedTimeoutId=null,this.closed=!1,this.clusterTime=null,this.error=null,this.dataEvents=null,this.socket=F,this.id=A.id,this.address=f31(F,A),this.socketTimeoutMS=A.socketTimeoutMS??0,this.monitorCommands=A.monitorCommands,this.serverApi=A.serverApi,this.mongoLogger=A.mongoLogger,this.established=!1,this.description=new O31.StreamDescription(this.address,A),this.generation=A.generation,this.lastUseTime=S6.now(),this.messageStream=this.socket.on("error",this.onError.bind(this)).pipe(new T$({connection:this})).on("error",this.onError.bind(this)),this.socket.on("close",this.onClose.bind(this)),this.socket.on("timeout",this.onTimeout.bind(this))}get hello(){return this.description.hello}set hello(F){this.description.receiveResponse(F),Object.freeze(this.description)}get serviceId(){return this.hello?.serviceId}get loadBalanced(){return this.description.loadBalanced}get idleTime(){return S6.calculateDurationInMs(this.lastUseTime)}get hasSessionSupport(){return this.description.logicalSessionTimeoutMinutes!=null}get supportsOpMsg(){return this.description!=null&&S6.maxWireVersion(this)>=6&&!this.description.__nodejs_mock_server__}get shouldEmitAndLogCommand(){return(this.monitorCommands||this.established&&!this.authContext?.reauthenticating&&this.mongoLogger?.willLog(CP.MongoLoggableComponent.COMMAND,CP.SeverityLevel.DEBUG))??!1}markAvailable(){this.lastUseTime=S6.now()}onError(F){this.cleanup(F)}onClose(){const F=`connection ${this.id} to ${this.address} closed`;this.cleanup(new O6.MongoNetworkError(F))}onTimeout(){this.delayedTimeoutId=qP.setTimeout(()=>{const F=`connection ${this.id} to ${this.address} timed out`,A=this.hello==null;this.cleanup(new O6.MongoNetworkTimeoutError(F,{beforeHandshake:A}))},1).unref()}destroy(){if(this.closed)return;this.removeAllListeners(u0.PINNED),this.removeAllListeners(u0.UNPINNED);const F=`connection ${this.id} to ${this.address} closed`;this.cleanup(new O6.MongoNetworkError(F))}cleanup(F){if(this.closed)return;this.socket.destroy(),this.error=F,this.dataEvents?.throw(F).then(void 0,S6.squashError),this.closed=!0,this.emit(u0.CLOSE)}prepareCommand(F,A,B){let D={...A};const J=M$.getReadPreference(B),Z=B?.session;let X=this.clusterTime;if(this.serverApi){const{version:G,strict:E,deprecationErrors:W}=this.serverApi;if(D.apiVersion=G,E!=null)D.apiStrict=E;if(W!=null)D.apiDeprecationErrors=W}if(this.hasSessionSupport&&Z){if(Z.clusterTime&&X&&Z.clusterTime.clusterTime.greaterThan(X.clusterTime))X=Z.clusterTime;const G=HP.applySession(Z,D,B);if(G)throw G}else if(Z?.explicit)throw new O6.MongoCompatibilityError("Current topology does not support sessions");if(X)D.$clusterTime=X;if(this.description.type!==u31.ServerType.Standalone){if(!M$.isSharded(this)&&!this.description.loadBalanced&&this.supportsOpMsg&&B.directConnection===!0&&J?.mode==="primary")D.$readPreference=j31.ReadPreference.primaryPreferred.toJSON();else if(M$.isSharded(this)&&!this.supportsOpMsg&&J?.mode!=="primary")D={$query:D,$readPreference:J.toJSON()};else if(J?.mode!=="primary")D.$readPreference=J.toJSON()}const Y={numberToSkip:0,numberToReturn:-1,checkKeys:!1,secondaryOk:J.secondaryOk(),...B};return this.supportsOpMsg?new CB.OpMsgRequest(F,D,Y):new CB.OpQueryRequest(F,D,Y)}async*sendWire(F,A,B){if(this.throwIfAborted(),typeof A.socketTimeoutMS==="number")this.socket.setTimeout(A.socketTimeoutMS);else if(this.socketTimeoutMS!==0)this.socket.setTimeout(this.socketTimeoutMS);try{if(await this.writeCommand(F,{agreedCompressor:this.description.compressor??"none",zlibCompressionLevel:this.description.zlibCompressionLevel}),A.noResponse){yield HB.MongoDBResponse.empty;return}this.throwIfAborted();for await(let D of this.readMany()){this.socket.setTimeout(0);const J=D.parse();if(yield B==null?new HB.MongoDBResponse(J):HB.isErrorResponse(J)?new HB.MongoDBResponse(J):new B(J),this.throwIfAborted(),typeof A.socketTimeoutMS==="number")this.socket.setTimeout(A.socketTimeoutMS);else if(this.socketTimeoutMS!==0)this.socket.setTimeout(this.socketTimeoutMS)}}finally{this.socket.setTimeout(0)}}async*sendCommand(F,A,B,D){const J=this.prepareCommand(F.db,A,B);let Z=0;if(this.shouldEmitAndLogCommand)Z=S6.now(),this.emitAndLogCommand(this.monitorCommands,u0.COMMAND_STARTED,J.databaseName,this.established,new WB.CommandStartedEvent(this,J,this.description.serverConnectionId));const X=B.documentsReturnedIn==null||!B.raw?B:{...B,raw:!1,fieldsAsRaw:{[B.documentsReturnedIn]:!0}};let Y=void 0,$=void 0;try{this.throwIfAborted();for await(Y of this.sendWire(J,B,D)){if($=void 0,B.session!=null)HP.updateSessionFromResponse(B.session,Y);if(Y.$clusterTime)this.clusterTime=Y.$clusterTime,this.emit(u0.CLUSTER_TIME_RECEIVED,Y.$clusterTime);if(Y.has("writeConcernError"))throw $??=Y.toObject(X),new O6.MongoWriteConcernError($.writeConcernError,$);if(Y.isError)throw new O6.MongoServerError($??=Y.toObject(X));if(this.shouldEmitAndLogCommand)this.emitAndLogCommand(this.monitorCommands,u0.COMMAND_SUCCEEDED,J.databaseName,this.established,new WB.CommandSucceededEvent(this,J,B.noResponse?void 0:$??=Y.toObject(X),Z,this.description.serverConnectionId));if(D==null)yield $??=Y.toObject(X);else yield Y;this.throwIfAborted()}}catch(G){if(this.shouldEmitAndLogCommand)if(G.name==="MongoWriteConcernError")this.emitAndLogCommand(this.monitorCommands,u0.COMMAND_SUCCEEDED,J.databaseName,this.established,new WB.CommandSucceededEvent(this,J,B.noResponse?void 0:$??=Y?.toObject(X),Z,this.description.serverConnectionId));else this.emitAndLogCommand(this.monitorCommands,u0.COMMAND_FAILED,J.databaseName,this.established,new WB.CommandFailedEvent(this,J,G,Z,this.description.serverConnectionId));throw G}}async command(F,A,B={},D){this.throwIfAborted();for await(let J of this.sendCommand(F,A,B,D))return J;throw new O6.MongoUnexpectedServerResponseError("Unable to get response from server")}exhaustCommand(F,A,B,D){(async()=>{this.throwIfAborted();for await(let Z of this.sendCommand(F,A,B))D(void 0,Z),this.throwIfAborted();throw new O6.MongoUnexpectedServerResponseError("Server ended moreToCome unexpectedly")})().then(void 0,D)}throwIfAborted(){if(this.error)throw this.error}async writeCommand(F,A){const B=A.agreedCompressor==="none"||!CB.OpCompressedRequest.canCompress(F)?F:new CB.OpCompressedRequest(F,{agreedCompressor:A.agreedCompressor??"none",zlibCompressionLevel:A.zlibCompressionLevel??0}),D=Buffer.concat(await B.toBin());if(this.socket.write(D))return;return await S6.once(this.socket,"drain")}async*readMany(){try{this.dataEvents=k31.onData(this.messageStream);for await(let F of this.dataEvents){const A=await S31.decompressResponse(F);if(yield A,!A.moreToCome)return}}finally{this.dataEvents=null,this.throwIfAborted()}}}u0.COMMAND_STARTED=B9.COMMAND_STARTED;u0.COMMAND_SUCCEEDED=B9.COMMAND_SUCCEEDED;u0.COMMAND_FAILED=B9.COMMAND_FAILED;u0.CLUSTER_TIME_RECEIVED=B9.CLUSTER_TIME_RECEIVED;u0.CLOSE=B9.CLOSE;u0.PINNED=B9.PINNED;u0.UNPINNED=B9.UNPINNED;zP.Connection=u0;class T$ extends M31.Transform{constructor({connection:F}){super({objectMode:!1});this.bufferPool=new S6.BufferPool,this.connection=F}_transform(F,A,B){if(this.connection.delayedTimeoutId!=null)qP.clearTimeout(this.connection.delayedTimeoutId),this.connection.delayedTimeoutId=null;this.bufferPool.append(F);const D=this.bufferPool.getInt32();if(D==null)return B();if(D<0)return B(new O6.MongoParseError(`Invalid message size: ${D}, too small`));if(D>this.bufferPool.length)return B();const J=this.bufferPool.read(D);return B(null,J)}}zP.SizedMessageTransform=T$;class KP extends u0{constructor(F,A){super(F,A);this.autoEncrypter=A.autoEncrypter}async command(F,A,B,D){const{autoEncrypter:J}=this;if(!J)throw new O6.MongoMissingDependencyError("No AutoEncrypter available for encryption",{dependencyName:"n/a"});const Z=S6.maxWireVersion(this);if(Z===0)return await super.command(F,A,B,void 0);if(Z<8)throw new O6.MongoCompatibilityError("Auto-encryption requires a minimum MongoDB version of 4.2");const X=A.find||A.findAndModify?A.sort:null,Y=A.createIndexes?A.indexes.map((E)=>E.key):null,$=await J.encrypt(F.toString(),A,B);if(X!=null&&(A.find||A.findAndModify))$.sort=X;if(Y!=null&&A.createIndexes)for(let[E,W]of Y.entries())$.indexes[E].key=W;const G=await super.command(F,$,B,void 0);return await J.decrypt(G,B)}}zP.CryptoConnection=KP});var O$=z((NP)=>{async function m31(F){let A=null;try{const B=await zB(F);return A=wP(F,B),await RP(A,F),A}catch(B){throw A?.destroy(),B}}var wP=function(F,A){let B=F.connectionType??QP.Connection;if(F.autoEncrypter)B=QP.CryptoConnection;return new B(A,F)},d31=function(F,A){const B=Number(F.maxWireVersion),D=Number(F.minWireVersion),J=!Number.isNaN(B)&&B>=w7.MIN_SUPPORTED_WIRE_VERSION,Z=!Number.isNaN(D)&&D<=w7.MAX_SUPPORTED_WIRE_VERSION;if(J){if(Z)return null;const Y=`Server at ${A.hostAddress} reports minimum wire version ${JSON.stringify(F.minWireVersion)}, but this version of the Node.js Driver requires at most ${w7.MAX_SUPPORTED_WIRE_VERSION} (MongoDB ${w7.MAX_SUPPORTED_SERVER_VERSION})`;return new w0.MongoCompatibilityError(Y)}const X=`Server at ${A.hostAddress} reports maximum wire version ${JSON.stringify(F.maxWireVersion)??0}, but this version of the Node.js Driver requires at least ${w7.MIN_SUPPORTED_WIRE_VERSION} (MongoDB ${w7.MIN_SUPPORTED_SERVER_VERSION})`;return new w0.MongoCompatibilityError(X)};async function RP(F,A){const B=A.credentials;if(B){if(B.mechanism!==KB.AuthMechanism.MONGODB_DEFAULT&&!A.authProviders.getOrCreateProvider(B.mechanism))throw new w0.MongoInvalidArgumentError(`AuthMechanism '${B.mechanism}' not supported`)}const D=new h31.AuthContext(F,B,A);F.authContext=D;const J=await IP(D),Z={...A,raw:!1};if(typeof A.connectTimeoutMS==="number")Z.socketTimeoutMS=A.connectTimeoutMS;const X=(new Date()).getTime(),Y=await F.command(j$.ns("admin.$cmd"),J,Z);if(!("isWritablePrimary"in Y))Y.isWritablePrimary=Y[VP.LEGACY_HELLO_COMMAND];if(Y.helloOk)F.helloOk=!0;const $=d31(Y,A);if($)throw $;if(A.loadBalanced){if(!Y.serviceId)throw new w0.MongoCompatibilityError("Driver attempted to initialize in load balancing mode, but the server does not support this mode.")}if(F.hello=Y,F.lastHelloMS=(new Date()).getTime()-X,!Y.arbiterOnly&&B){D.response=Y;const G=B.resolveAuthMechanism(Y),E=A.authProviders.getOrCreateProvider(G.mechanism);if(!E)throw new w0.MongoInvalidArgumentError(`No AuthProvider for ${G.mechanism} defined.`);try{await E.auth(D)}catch(W){if(W instanceof w0.MongoError){if(W.addErrorLabel(w0.MongoErrorLabel.HandshakeError),w0.needsRetryableWriteLabel(W,Y.maxWireVersion))W.addErrorLabel(w0.MongoErrorLabel.RetryableWriteError)}throw W}}F.established=!0}async function IP(F){const A=F.options,B=A.compressors?A.compressors:[],{serverApi:D}=F.connection,J=await A.extendedMetadata,Z={[D?.version||A.loadBalanced===!0?"hello":VP.LEGACY_HELLO_COMMAND]:1,helloOk:!0,client:J,compression:B};if(A.loadBalanced===!0)Z.loadBalanced=!0;const X=F.credentials;if(X){if(X.mechanism===KB.AuthMechanism.MONGODB_DEFAULT&&X.username){Z.saslSupportedMechs=`${X.source}.${X.username}`;const $=F.options.authProviders.getOrCreateProvider(KB.AuthMechanism.MONGODB_SCRAM_SHA256);if(!$)throw new w0.MongoInvalidArgumentError(`No AuthProvider for ${KB.AuthMechanism.MONGODB_SCRAM_SHA256} defined.`);return await $.prepare(Z,F)}const Y=F.options.authProviders.getOrCreateProvider(X.mechanism);if(!Y)throw new w0.MongoInvalidArgumentError(`No AuthProvider for ${X.mechanism} defined.`);return await Y.prepare(Z,F)}return Z}var u$=function(F){const A=F.hostAddress;if(!A)throw new w0.MongoInvalidArgumentError('Option "hostAddress" is required');const B={};for(let D of NP.LEGAL_TCP_SOCKET_OPTIONS)if(F[D]!=null)B[D]=F[D];if(typeof A.socketPath==="string")return B.path=A.socketPath,B;else if(typeof A.host==="string")return B.host=A.host,B.port=A.port,B;else throw new w0.MongoRuntimeError(`Unexpected HostAddress ${JSON.stringify(A)}`)},c31=function(F){const A=u$(F);for(let B of NP.LEGAL_TLS_SOCKET_OPTIONS)if(F[B]!=null)A[B]=F[B];if(F.existingSocket)A.socket=F.existingSocket;if(A.servername==null&&A.host&&!LP.isIP(A.host))A.servername=A.host;return A};async function zB(F){const A=F.tls??!1,B=F.noDelay??!0,D=F.connectTimeoutMS??30000,J=F.existingSocket;let Z;if(F.proxyHost!=null)return await p31({...F,connectTimeoutMS:D});if(A){const E=y31.connect(c31(F));if(typeof E.disableRenegotiation==="function")E.disableRenegotiation();Z=E}else if(J)Z=J;else Z=LP.createConnection(u$(F));Z.setKeepAlive(!0,300000),Z.setTimeout(D),Z.setNoDelay(B);let X=null;const{promise:Y,resolve:$,reject:G}=j$.promiseWithResolvers();if(J)$(Z);else{const E=A?"secureConnect":"connect";if(Z.once(E,()=>$(Z)).once("error",(W)=>G(T5("error",W))).once("timeout",()=>G(T5("timeout"))).once("close",()=>G(T5("close"))),F.cancellationToken!=null)X=()=>G(T5("cancel")),F.cancellationToken.once("cancel",X)}try{return Z=await Y,Z}catch(E){throw Z.destroy(),E}finally{if(Z.setTimeout(0),Z.removeAllListeners(),X!=null)F.cancellationToken?.removeListener("cancel",X)}}var l31=function(){if(j5==null){const F=v31.getSocks();if("kModuleError"in F)throw F.kModuleError;j5=F}return j5};async function p31(F){const A=j$.HostAddress.fromHostPort(F.proxyHost??"",F.proxyPort??1080),B=await zB({...F,hostAddress:A,tls:!1,proxyHost:void 0}),D=u$(F);if(typeof D.host!=="string"||typeof D.port!=="number")throw new w0.MongoInvalidArgumentError("Can only make Socks5 connections to TCP hosts");j5??=l31();try{const{socket:J}=await j5.SocksClient.createConnection({existing_socket:B,timeout:F.connectTimeoutMS,command:"connect",destination:{host:D.host,port:D.port},proxy:{host:"iLoveJavaScript",port:0,type:5,userId:F.proxyUsername||void 0,password:F.proxyPassword||void 0}});return await zB({...F,existingSocket:J,proxyHost:void 0})}catch(J){throw T5("error",J)}}var T5=function(F,A){switch(F){case"error":return new w0.MongoNetworkError(w0.MongoError.buildErrorMessage(A),{cause:A});case"timeout":return new w0.MongoNetworkTimeoutError("connection timed out");case"close":return new w0.MongoNetworkError("connection closed");case"cancel":return new w0.MongoNetworkError("connection establishment was cancelled");default:return new w0.MongoNetworkError("unknown network error")}};Object.defineProperty(NP,"__esModule",{value:!0});NP.makeSocket=NP.LEGAL_TCP_SOCKET_OPTIONS=NP.LEGAL_TLS_SOCKET_OPTIONS=NP.prepareHandshakeDocument=NP.performInitialHandshake=NP.makeConnection=NP.connect=void 0;var LP=import.meta.require("net"),y31=import.meta.require("tls"),VP=L0(),v31=P6(),w0=p(),j$=r(),h31=V3(),KB=M6(),QP=qB(),w7=d4();NP.connect=m31;NP.makeConnection=wP;NP.performInitialHandshake=RP;NP.prepareHandshakeDocument=IP;NP.LEGAL_TLS_SOCKET_OPTIONS=["ALPNProtocols","ca","cert","checkServerIdentity","ciphers","crl","ecdhCurve","key","minDHSize","passphrase","pfx","rejectUnauthorized","secureContext","secureProtocol","servername","session"];NP.LEGAL_TCP_SOCKET_OPTIONS=["family","hints","localAddress","localPort","lookup"];NP.makeSocket=zB;var j5=null});var UB=z((bP)=>{Object.defineProperty(bP,"__esModule",{value:!0});bP.ServerHeartbeatFailedEvent=bP.ServerHeartbeatSucceededEvent=bP.ServerHeartbeatStartedEvent=bP.TopologyClosedEvent=bP.TopologyOpeningEvent=bP.TopologyDescriptionChangedEvent=bP.ServerClosedEvent=bP.ServerOpeningEvent=bP.ServerDescriptionChangedEvent=void 0;var N3=L0();class jP{constructor(F,A,B,D){this.name=N3.SERVER_DESCRIPTION_CHANGED,this.topologyId=F,this.address=A,this.previousDescription=B,this.newDescription=D}}bP.ServerDescriptionChangedEvent=jP;class uP{constructor(F,A){this.name=N3.SERVER_OPENING,this.topologyId=F,this.address=A}}bP.ServerOpeningEvent=uP;class OP{constructor(F,A){this.name=N3.SERVER_CLOSED,this.topologyId=F,this.address=A}}bP.ServerClosedEvent=OP;class SP{constructor(F,A,B){this.name=N3.TOPOLOGY_DESCRIPTION_CHANGED,this.topologyId=F,this.previousDescription=A,this.newDescription=B}}bP.TopologyDescriptionChangedEvent=SP;class kP{constructor(F){this.name=N3.TOPOLOGY_OPENING,this.topologyId=F}}bP.TopologyOpeningEvent=kP;class xP{constructor(F){this.name=N3.TOPOLOGY_CLOSED,this.topologyId=F}}bP.TopologyClosedEvent=xP;class fP{constructor(F,A){this.name=N3.SERVER_HEARTBEAT_STARTED,this.connectionId=F,this.awaited=A}}bP.ServerHeartbeatStartedEvent=fP;class _P{constructor(F,A,B,D){this.name=N3.SERVER_HEARTBEAT_SUCCEEDED,this.connectionId=F,this.duration=A,this.reply=B??{},this.awaited=D}}bP.ServerHeartbeatSucceededEvent=_P;class gP{constructor(F,A,B,D){this.name=N3.SERVER_HEARTBEAT_FAILED,this.connectionId=F,this.duration=A,this.failure=B,this.awaited=D}}bP.ServerHeartbeatFailedEvent=gP});var x$=z((hP)=>{Object.defineProperty(hP,"__esModule",{value:!0});hP.Timeout=hP.TimeoutError=void 0;var vP=import.meta.require("timers"),J41=p(),Z41=r();class S$ extends Error{get name(){return"TimeoutError"}constructor(F,A){super(F,A)}static is(F){return F!=null&&typeof F==="object"&&"name"in F&&F.name==="TimeoutError"}}hP.TimeoutError=S$;class k$ extends Promise{get[Symbol.toStringTag](){return"MongoDBTimeout"}constructor(F=()=>null,A,B=!1){let D;if(A<0)throw new J41.MongoInvalidArgumentError("Cannot create a Timeout with a negative duration");super((J,Z)=>{D=Z,F(Z41.noop,Z)});if(this.ended=null,this.timedOut=!1,this.duration=A,this.start=Math.trunc(performance.now()),this.duration>0){if(this.id=vP.setTimeout(()=>{this.ended=Math.trunc(performance.now()),this.timedOut=!0,D(new S$(`Expired after ${A}ms`))},this.duration),typeof this.id.unref==="function"&&B)this.id.unref()}}clear(){vP.clearTimeout(this.id),this.id=void 0}static expires(F,A){return new k$(void 0,F,A)}static is(F){return typeof F==="object"&&F!=null&&Symbol.toStringTag in F&&F[Symbol.toStringTag]==="MongoDBTimeout"&&"then"in F&&typeof F.then==="function"}}hP.Timeout=k$});var f$=z((eP)=>{Object.defineProperty(eP,"__esModule",{value:!0});eP.ConnectionPoolClearedEvent=eP.ConnectionCheckedInEvent=eP.ConnectionCheckedOutEvent=eP.ConnectionCheckOutFailedEvent=eP.ConnectionCheckOutStartedEvent=eP.ConnectionClosedEvent=eP.ConnectionReadyEvent=eP.ConnectionCreatedEvent=eP.ConnectionPoolClosedEvent=eP.ConnectionPoolReadyEvent=eP.ConnectionPoolCreatedEvent=eP.ConnectionPoolMonitoringEvent=void 0;var k6=L0();class i2{constructor(F){this.time=new Date,this.address=F.address}}eP.ConnectionPoolMonitoringEvent=i2;class dP extends i2{constructor(F){super(F);this.name=k6.CONNECTION_POOL_CREATED;const{maxConnecting:A,maxPoolSize:B,minPoolSize:D,maxIdleTimeMS:J,waitQueueTimeoutMS:Z}=F.options;this.options={maxConnecting:A,maxPoolSize:B,minPoolSize:D,maxIdleTimeMS:J,waitQueueTimeoutMS:Z}}}eP.ConnectionPoolCreatedEvent=dP;class cP extends i2{constructor(F){super(F);this.name=k6.CONNECTION_POOL_READY}}eP.ConnectionPoolReadyEvent=cP;class lP extends i2{constructor(F){super(F);this.name=k6.CONNECTION_POOL_CLOSED}}eP.ConnectionPoolClosedEvent=lP;class pP extends i2{constructor(F,A){super(F);this.name=k6.CONNECTION_CREATED,this.connectionId=A.id}}eP.ConnectionCreatedEvent=pP;class iP extends i2{constructor(F,A){super(F);this.name=k6.CONNECTION_READY,this.connectionId=A.id}}eP.ConnectionReadyEvent=iP;class nP extends i2{constructor(F,A,B,D){super(F);this.name=k6.CONNECTION_CLOSED,this.connectionId=A.id,this.reason=B,this.serviceId=A.serviceId,this.error=D??null}}eP.ConnectionClosedEvent=nP;class sP extends i2{constructor(F){super(F);this.name=k6.CONNECTION_CHECK_OUT_STARTED}}eP.ConnectionCheckOutStartedEvent=sP;class aP extends i2{constructor(F,A,B){super(F);this.name=k6.CONNECTION_CHECK_OUT_FAILED,this.reason=A,this.error=B}}eP.ConnectionCheckOutFailedEvent=aP;class rP extends i2{constructor(F,A){super(F);this.name=k6.CONNECTION_CHECKED_OUT,this.connectionId=A.id}}eP.ConnectionCheckedOutEvent=rP;class tP extends i2{constructor(F,A){super(F);this.name=k6.CONNECTION_CHECKED_IN,this.connectionId=A.id}}eP.ConnectionCheckedInEvent=tP;class oP extends i2{constructor(F,A={}){super(F);this.name=k6.CONNECTION_POOL_CLEARED,this.serviceId=A.serviceId,this.interruptInUseConnections=A.interruptInUseConnections}}eP.ConnectionPoolClearedEvent=oP});var g$=z((JM)=>{Object.defineProperty(JM,"__esModule",{value:!0});JM.WaitQueueTimeoutError=JM.PoolClearedOnNetworkError=JM.PoolClearedError=JM.PoolClosedError=void 0;var QB=p();class AM extends QB.MongoDriverError{constructor(F){super("Attempted to check out a connection from closed connection pool");this.address=F.address}get name(){return"MongoPoolClosedError"}}JM.PoolClosedError=AM;class _$ extends QB.MongoNetworkError{constructor(F,A){const B=A?A:`Connection pool for ${F.address} was cleared because another operation failed with: "${F.serverError?.message}"`;super(B,F.serverError?{cause:F.serverError}:void 0);this.address=F.address,this.addErrorLabel(QB.MongoErrorLabel.PoolRequstedRetry)}get name(){return"MongoPoolClearedError"}}JM.PoolClearedError=_$;class BM extends _${constructor(F){super(F,`Connection to ${F.address} interrupted due to server monitor timeout`)}get name(){return"PoolClearedOnNetworkError"}}JM.PoolClearedOnNetworkError=BM;class DM extends QB.MongoDriverError{constructor(F,A){super(F);this.address=A}get name(){return"MongoWaitQueueTimeoutError"}}JM.WaitQueueTimeoutError=DM});var WM=z((GM)=>{Object.defineProperty(GM,"__esModule",{value:!0});GM.ConnectionPool=GM.PoolState=void 0;var R7=import.meta.require("timers"),E6=L0(),P3=p(),XM=d2(),YM=x$(),LB=r(),w41=O$(),VB=qB(),h0=f$(),I7=g$(),R41=yX(),N7=Symbol("server"),M3=Symbol("connections"),P7=Symbol("pending"),C4=Symbol("checkedOut"),D9=Symbol("minPoolSizeTimer"),M7=Symbol("generation"),$M=Symbol("serviceGenerations"),wB=Symbol("connectionCounter"),RB=Symbol("cancellationToken"),T3=Symbol("waitQueue"),IB=Symbol("cancelled"),NB=Symbol("metrics"),PB=Symbol("processingWaitQueue"),x6=Symbol("poolState");GM.PoolState=Object.freeze({paused:"paused",ready:"ready",closed:"closed"});class x1 extends XM.TypedEventEmitter{constructor(F,A){super();if(this.options=Object.freeze({connectionType:VB.Connection,...A,maxPoolSize:A.maxPoolSize??100,minPoolSize:A.minPoolSize??0,maxConnecting:A.maxConnecting??2,maxIdleTimeMS:A.maxIdleTimeMS??0,waitQueueTimeoutMS:A.waitQueueTimeoutMS??0,minPoolSizeCheckFrequencyMS:A.minPoolSizeCheckFrequencyMS??100,autoEncrypter:A.autoEncrypter}),this.options.minPoolSize>this.options.maxPoolSize)throw new P3.MongoInvalidArgumentError("Connection pool minimum size must not be greater than maximum pool size");this[x6]=GM.PoolState.paused,this[N7]=F,this[M3]=new LB.List,this[P7]=0,this[C4]=new Set,this[D9]=void 0,this[M7]=0,this[$M]=new Map,this[wB]=LB.makeCounter(1),this[RB]=new XM.CancellationToken,this[RB].setMaxListeners(1/0),this[T3]=new LB.List,this[NB]=new R41.ConnectionPoolMetrics,this[PB]=!1,this.mongoLogger=this[N7].topology.client?.mongoLogger,this.component="connection",process.nextTick(()=>{this.emitAndLog(x1.CONNECTION_POOL_CREATED,new h0.ConnectionPoolCreatedEvent(this))})}get address(){return this.options.hostAddress.toString()}get closed(){return this[x6]===GM.PoolState.closed}get generation(){return this[M7]}get totalConnectionCount(){return this.availableConnectionCount+this.pendingConnectionCount+this.currentCheckedOutCount}get availableConnectionCount(){return this[M3].length}get pendingConnectionCount(){return this[P7]}get currentCheckedOutCount(){return this[C4].size}get waitQueueSize(){return this[T3].length}get loadBalanced(){return this.options.loadBalanced}get serviceGenerations(){return this[$M]}get serverError(){return this[N7].description.error}get checkedOutConnections(){return this[C4]}waitQueueErrorMetrics(){return this[NB].info(this.options.maxPoolSize)}ready(){if(this[x6]!==GM.PoolState.paused)return;this[x6]=GM.PoolState.ready,this.emitAndLog(x1.CONNECTION_POOL_READY,new h0.ConnectionPoolReadyEvent(this)),R7.clearTimeout(this[D9]),this.ensureMinPoolSize()}async checkOut(){this.emitAndLog(x1.CONNECTION_CHECK_OUT_STARTED,new h0.ConnectionCheckOutStartedEvent(this));const F=this.options.waitQueueTimeoutMS,{promise:A,resolve:B,reject:D}=LB.promiseWithResolvers(),J=YM.Timeout.expires(F),Z={resolve:B,reject:D,timeout:J};this[T3].push(Z),process.nextTick(()=>this.processWaitQueue());try{return await Promise.race([A,Z.timeout])}catch(X){if(YM.TimeoutError.is(X))throw Z[IB]=!0,Z.timeout.clear(),this.emitAndLog(x1.CONNECTION_CHECK_OUT_FAILED,new h0.ConnectionCheckOutFailedEvent(this,"timeout")),new I7.WaitQueueTimeoutError(this.loadBalanced?this.waitQueueErrorMetrics():"Timed out while checking out a connection from connection pool",this.address);throw X}}checkIn(F){if(!this[C4].has(F))return;const A=this.closed,B=this.connectionIsStale(F),D=!!(A||B||F.closed);if(!D)F.markAvailable(),this[M3].unshift(F);if(this[C4].delete(F),this.emitAndLog(x1.CONNECTION_CHECKED_IN,new h0.ConnectionCheckedInEvent(this,F)),D){const J=F.closed?"error":A?"poolClosed":"stale";this.destroyConnection(F,J)}process.nextTick(()=>this.processWaitQueue())}clear(F={}){if(this.closed)return;if(this.loadBalanced){const{serviceId:J}=F;if(!J)throw new P3.MongoRuntimeError("ConnectionPool.clear() called in load balanced mode with no serviceId.");const Z=J.toHexString(),X=this.serviceGenerations.get(Z);if(X==null)throw new P3.MongoRuntimeError("Service generations are required in load balancer mode.");else this.serviceGenerations.set(Z,X+1);this.emitAndLog(x1.CONNECTION_POOL_CLEARED,new h0.ConnectionPoolClearedEvent(this,{serviceId:J}));return}const A=F.interruptInUseConnections??!1,B=this[M7];this[M7]+=1;const D=this[x6]===GM.PoolState.paused;if(this[x6]=GM.PoolState.paused,this.clearMinPoolSizeTimer(),!D)this.emitAndLog(x1.CONNECTION_POOL_CLEARED,new h0.ConnectionPoolClearedEvent(this,{interruptInUseConnections:A}));if(A)process.nextTick(()=>this.interruptInUseConnections(B));this.processWaitQueue()}interruptInUseConnections(F){for(let A of this[C4])if(A.generation<=F)A.onError(new I7.PoolClearedOnNetworkError(this)),this.checkIn(A)}close(){if(this.closed)return;if(this[RB].emit("cancel"),typeof this[wB].return==="function")this[wB].return(void 0);this[x6]=GM.PoolState.closed,this.clearMinPoolSizeTimer(),this.processWaitQueue();for(let F of this[M3])this.emitAndLog(x1.CONNECTION_CLOSED,new h0.ConnectionClosedEvent(this,F,"poolClosed")),F.destroy();this[M3].clear(),this.emitAndLog(x1.CONNECTION_POOL_CLOSED,new h0.ConnectionPoolClosedEvent(this))}async reauthenticate(F){const A=F.authContext;if(!A)throw new P3.MongoRuntimeError("No auth context found on connection.");const B=A.credentials;if(!B)throw new P3.MongoMissingCredentialsError("Connection is missing credentials when asked to reauthenticate");const D=B.resolveAuthMechanism(F.hello),J=this[N7].topology.client.s.authProviders.getOrCreateProvider(D.mechanism);if(!J)throw new P3.MongoMissingCredentialsError(`Reauthenticate failed due to no auth provider for ${B.mechanism}`);await J.reauth(A);return}clearMinPoolSizeTimer(){const F=this[D9];if(F)R7.clearTimeout(F)}destroyConnection(F,A){this.emitAndLog(x1.CONNECTION_CLOSED,new h0.ConnectionClosedEvent(this,F,A)),F.destroy()}connectionIsStale(F){const A=F.serviceId;if(this.loadBalanced&&A){const B=A.toHexString(),D=this.serviceGenerations.get(B);return F.generation!==D}return F.generation!==this[M7]}connectionIsIdle(F){return!!(this.options.maxIdleTimeMS&&F.idleTime>this.options.maxIdleTimeMS)}destroyConnectionIfPerished(F){const A=this.connectionIsStale(F),B=this.connectionIsIdle(F);if(!A&&!B&&!F.closed)return!1;const D=F.closed?"error":A?"stale":"idle";return this.destroyConnection(F,D),!0}createConnection(F){const A={...this.options,id:this[wB].next().value,generation:this[M7],cancellationToken:this[RB],mongoLogger:this.mongoLogger,authProviders:this[N7].topology.client.s.authProviders};this[P7]++,this.emitAndLog(x1.CONNECTION_CREATED,new h0.ConnectionCreatedEvent(this,{id:A.id})),w41.connect(A).then((B)=>{if(this[x6]!==GM.PoolState.ready){this[P7]--,B.destroy(),F(this.closed?new I7.PoolClosedError(this):new I7.PoolClearedError(this));return}for(let D of[...E6.APM_EVENTS,VB.Connection.CLUSTER_TIME_RECEIVED])B.on(D,(J)=>this.emit(D,J));if(this.loadBalanced){B.on(VB.Connection.PINNED,(J)=>this[NB].markPinned(J)),B.on(VB.Connection.UNPINNED,(J)=>this[NB].markUnpinned(J));const D=B.serviceId;if(D){let J;const Z=D.toHexString();if(J=this.serviceGenerations.get(Z))B.generation=J;else this.serviceGenerations.set(Z,0),B.generation=0}}B.markAvailable(),this.emitAndLog(x1.CONNECTION_READY,new h0.ConnectionReadyEvent(this,B)),this[P7]--,F(void 0,B)},(B)=>{if(this[P7]--,this.emitAndLog(x1.CONNECTION_CLOSED,new h0.ConnectionClosedEvent(this,{id:A.id,serviceId:void 0},"error",B)),B instanceof P3.MongoNetworkError||B instanceof P3.MongoServerError)B.connectionGeneration=A.generation;F(B??new P3.MongoRuntimeError("Connection creation failed without error"))})}ensureMinPoolSize(){const F=this.options.minPoolSize;if(this[x6]!==GM.PoolState.ready||F===0)return;if(this[M3].prune((A)=>this.destroyConnectionIfPerished(A)),this.totalConnectionCount<F&&this.pendingConnectionCount<this.options.maxConnecting)this.createConnection((A,B)=>{if(A)this[N7].handleError(A);if(!A&&B)this[M3].push(B),process.nextTick(()=>this.processWaitQueue());if(this[x6]===GM.PoolState.ready)R7.clearTimeout(this[D9]),this[D9]=R7.setTimeout(()=>this.ensureMinPoolSize(),this.options.minPoolSizeCheckFrequencyMS)});else R7.clearTimeout(this[D9]),this[D9]=R7.setTimeout(()=>this.ensureMinPoolSize(),this.options.minPoolSizeCheckFrequencyMS)}processWaitQueue(){if(this[PB])return;this[PB]=!0;while(this.waitQueueSize){const B=this[T3].first();if(!B){this[T3].shift();continue}if(B[IB]){this[T3].shift();continue}if(this[x6]!==GM.PoolState.ready){const J=this.closed?"poolClosed":"connectionError",Z=this.closed?new I7.PoolClosedError(this):new I7.PoolClearedError(this);this.emitAndLog(x1.CONNECTION_CHECK_OUT_FAILED,new h0.ConnectionCheckOutFailedEvent(this,J,Z)),B.timeout.clear(),this[T3].shift(),B.reject(Z);continue}if(!this.availableConnectionCount)break;const D=this[M3].shift();if(!D)break;if(!this.destroyConnectionIfPerished(D))this[C4].add(D),this.emitAndLog(x1.CONNECTION_CHECKED_OUT,new h0.ConnectionCheckedOutEvent(this,D)),B.timeout.clear(),this[T3].shift(),B.resolve(D)}const{maxPoolSize:F,maxConnecting:A}=this.options;while(this.waitQueueSize>0&&this.pendingConnectionCount<A&&(F===0||this.totalConnectionCount<F)){const B=this[T3].shift();if(!B||B[IB])continue;this.createConnection((D,J)=>{if(B[IB]){if(!D&&J)this[M3].push(J)}else{if(D)this.emitAndLog(x1.CONNECTION_CHECK_OUT_FAILED,new h0.ConnectionCheckOutFailedEvent(this,"connectionError",D)),B.reject(D);else if(J)this[C4].add(J),this.emitAndLog(x1.CONNECTION_CHECKED_OUT,new h0.ConnectionCheckedOutEvent(this,J)),B.resolve(J);B.timeout.clear()}process.nextTick(()=>this.processWaitQueue())})}this[PB]=!1}}x1.CONNECTION_POOL_CREATED=E6.CONNECTION_POOL_CREATED;x1.CONNECTION_POOL_CLOSED=E6.CONNECTION_POOL_CLOSED;x1.CONNECTION_POOL_CLEARED=E6.CONNECTION_POOL_CLEARED;x1.CONNECTION_POOL_READY=E6.CONNECTION_POOL_READY;x1.CONNECTION_CREATED=E6.CONNECTION_CREATED;x1.CONNECTION_READY=E6.CONNECTION_READY;x1.CONNECTION_CLOSED=E6.CONNECTION_CLOSED;x1.CONNECTION_CHECK_OUT_STARTED=E6.CONNECTION_CHECK_OUT_STARTED;x1.CONNECTION_CHECK_OUT_FAILED=E6.CONNECTION_CHECK_OUT_FAILED;x1.CONNECTION_CHECKED_OUT=E6.CONNECTION_CHECKED_OUT;x1.CONNECTION_CHECKED_IN=E6.CONNECTION_CHECKED_IN;GM.ConnectionPool=x1});var m$=z((HM)=>{var b$=function(F,A){if(F.loadBalanced)return;if(A instanceof r1.MongoNetworkError&&!(A instanceof r1.MongoNetworkTimeoutError))F.monitor?.reset();F.emit(N2.DESCRIPTION_RECEIVED,new h$.ServerDescription(F.description.hostAddress,void 0,{error:A}))},j41=function(F,A){if(A)return A.inTransaction()||A.transaction.isCommitted&&"commitTransaction"in F||"aggregate"in F||"find"in F||"getMore"in F||"listCollections"in F||"listIndexes"in F;return!1},u41=function(F,A){if(A.serviceId)return A.generation!==F.serviceGenerations.get(A.serviceId.toHexString());return A.generation!==F.generation},O41=function(F,A){const B=A.topologyVersion,D=F.description.topologyVersion;return h$.compareTopologyVersion(D,B)<0},y$=function(F,A){return F&&F.inTransaction()&&!v$.isTransactionCommand(A)},CM=function(F){return F.s.options.retryWrites!==!1};Object.defineProperty(HM,"__esModule",{value:!0});HM.Server=void 0;var I41=qB(),N41=WM(),P41=g$(),e6=L0(),r1=p(),M41=d2(),v$=cX(),MB=r(),d1=v2(),T41=d$(),h$=e8(),u5=MB.makeStateMachine({[d1.STATE_CLOSED]:[d1.STATE_CLOSED,d1.STATE_CONNECTING],[d1.STATE_CONNECTING]:[d1.STATE_CONNECTING,d1.STATE_CLOSING,d1.STATE_CONNECTED,d1.STATE_CLOSED],[d1.STATE_CONNECTED]:[d1.STATE_CONNECTED,d1.STATE_CLOSING,d1.STATE_CLOSED],[d1.STATE_CLOSING]:[d1.STATE_CLOSING,d1.STATE_CLOSED]});class N2 extends M41.TypedEventEmitter{constructor(F,A,B){super();this.serverApi=B.serverApi;const D={hostAddress:A.hostAddress,...B};this.topology=F,this.pool=new N41.ConnectionPool(this,D),this.s={description:A,options:B,state:d1.STATE_CLOSED,operationCount:0};for(let J of[...e6.CMAP_EVENTS,...e6.APM_EVENTS])this.pool.on(J,(Z)=>this.emit(J,Z));if(this.pool.on(I41.Connection.CLUSTER_TIME_RECEIVED,(J)=>{this.clusterTime=J}),this.loadBalanced){this.monitor=null;return}this.monitor=new T41.Monitor(this,this.s.options);for(let J of e6.HEARTBEAT_EVENTS)this.monitor.on(J,(Z)=>this.emit(J,Z));this.monitor.on("resetServer",(J)=>b$(this,J)),this.monitor.on(N2.SERVER_HEARTBEAT_SUCCEEDED,(J)=>{if(this.emit(N2.DESCRIPTION_RECEIVED,new h$.ServerDescription(this.description.hostAddress,J.reply,{roundTripTime:this.monitor?.roundTripTime,minRoundTripTime:this.monitor?.minRoundTripTime})),this.s.state===d1.STATE_CONNECTING)u5(this,d1.STATE_CONNECTED),this.emit(N2.CONNECT,this)})}get clusterTime(){return this.topology.clusterTime}set clusterTime(F){this.topology.clusterTime=F}get description(){return this.s.description}get name(){return this.s.description.address}get autoEncrypter(){if(this.s.options&&this.s.options.autoEncrypter)return this.s.options.autoEncrypter;return}get loadBalanced(){return this.topology.description.type===d1.TopologyType.LoadBalanced}connect(){if(this.s.state!==d1.STATE_CLOSED)return;if(u5(this,d1.STATE_CONNECTING),!this.loadBalanced)this.monitor?.connect();else u5(this,d1.STATE_CONNECTED),this.emit(N2.CONNECT,this)}destroy(){if(this.s.state===d1.STATE_CLOSED)return;if(u5(this,d1.STATE_CLOSING),!this.loadBalanced)this.monitor?.close();this.pool.close(),u5(this,d1.STATE_CLOSED),this.emit("closed")}requestCheck(){if(!this.loadBalanced)this.monitor?.requestCheck()}async command(F,A,B,D){if(F.db==null||typeof F==="string")throw new r1.MongoInvalidArgumentError("Namespace must not be a string");if(this.s.state===d1.STATE_CLOSING||this.s.state===d1.STATE_CLOSED)throw new r1.MongoServerClosedError;const J=Object.assign({},B,{wireProtocolCommand:!1,directConnection:this.topology.s.options.directConnection});if(J.omitReadPreference)delete J.readPreference;const Z=J.session;let X=Z?.pinnedConnection;if(this.incrementOperationCount(),X==null)try{if(X=await this.pool.checkOut(),this.loadBalanced&&j41(A,Z))Z?.pin(X)}catch(Y){if(this.decrementOperationCount(),!(Y instanceof P41.PoolClearedError))this.handleError(Y);throw Y}try{try{return await X.command(F,A,J,D)}catch(Y){throw this.decorateCommandError(X,A,J,Y)}}catch(Y){if(Y instanceof r1.MongoError&&Y.code===r1.MONGODB_ERROR_CODES.Reauthenticate){await this.pool.reauthenticate(X);try{return await X.command(F,A,J,D)}catch($){throw this.decorateCommandError(X,A,J,$)}}else throw Y}finally{if(this.decrementOperationCount(),Z?.pinnedConnection!==X)this.pool.checkIn(X)}}handleError(F,A){if(!(F instanceof r1.MongoError))return;if(F.connectionGeneration&&F.connectionGeneration<this.pool.generation)return;const D=F instanceof r1.MongoNetworkError&&!(F instanceof r1.MongoNetworkTimeoutError),J=r1.isNetworkErrorBeforeHandshake(F),Z=F.hasErrorLabel(r1.MongoErrorLabel.HandshakeError);if(D||J||Z){if(!this.loadBalanced)F.addErrorLabel(r1.MongoErrorLabel.ResetPool),b$(this,F);else if(A)this.pool.clear({serviceId:A.serviceId})}else if(r1.isSDAMUnrecoverableError(F)){if(O41(this,F)){const X=MB.maxWireVersion(this)<=7||r1.isNodeShuttingDownError(F);if(this.loadBalanced&&A&&X)this.pool.clear({serviceId:A.serviceId});if(!this.loadBalanced){if(X)F.addErrorLabel(r1.MongoErrorLabel.ResetPool);b$(this,F),process.nextTick(()=>this.requestCheck())}}}}decorateCommandError(F,A,B,D){if(typeof D!=="object"||D==null||!("name"in D))throw new r1.MongoRuntimeError("An unexpected error type: "+typeof D);if(D.name==="AbortError"&&"cause"in D&&D.cause instanceof r1.MongoError)D=D.cause;if(!(D instanceof r1.MongoError))return D;if(u41(this.pool,F))return D;const J=B?.session;if(D instanceof r1.MongoNetworkError){if(J&&!J.hasEnded&&J.serverSession)J.serverSession.isDirty=!0;if(y$(J,A)&&!D.hasErrorLabel(r1.MongoErrorLabel.TransientTransactionError))D.addErrorLabel(r1.MongoErrorLabel.TransientTransactionError);if((CM(this.topology)||v$.isTransactionCommand(A))&&MB.supportsRetryableWrites(this)&&!y$(J,A))D.addErrorLabel(r1.MongoErrorLabel.RetryableWriteError)}else if((CM(this.topology)||v$.isTransactionCommand(A))&&r1.needsRetryableWriteLabel(D,MB.maxWireVersion(this))&&!y$(J,A))D.addErrorLabel(r1.MongoErrorLabel.RetryableWriteError);if(J&&J.isPinned&&D.hasErrorLabel(r1.MongoErrorLabel.TransientTransactionError))J.unpin({force:!0});return this.handleError(D,F),D}decrementOperationCount(){return this.s.operationCount-=1}incrementOperationCount(){return this.s.operationCount+=1}}N2.SERVER_HEARTBEAT_STARTED=e6.SERVER_HEARTBEAT_STARTED;N2.SERVER_HEARTBEAT_SUCCEEDED=e6.SERVER_HEARTBEAT_SUCCEEDED;N2.SERVER_HEARTBEAT_FAILED=e6.SERVER_HEARTBEAT_FAILED;N2.CONNECT=e6.CONNECT;N2.DESCRIPTION_RECEIVED=e6.DESCRIPTION_RECEIVED;N2.CLOSED=e6.CLOSED;N2.ENDED=e6.ENDED;HM.Server=N2});var d$=z((VM)=>{var k5=function(F){return F.s.state===m0.STATE_CLOSED||F.s.state===m0.STATE_CLOSING},UM=function(F){F[A3]?.stop(),F[A3]=void 0,F.rttPinger?.close(),F.rttPinger=void 0,F[O7].emit("cancel"),F.connection?.destroy(),F.connection=null,F.clearRttSamples()},l$=function(F,A){if(A==null)return!1;const B=F.options.serverMonitoringMode;if(B===VM.ServerMonitoringMode.poll)return!1;if(B===VM.ServerMonitoringMode.stream)return!0;if(F.isRunningInFaasEnv)return!1;return!0},f41=function(F,A){let B,D;const J=F[F3].description.topologyVersion,Z=l$(F,J);F.emitAndLogHeartbeat(S5.Server.SERVER_HEARTBEAT_STARTED,F[F3].topology.s.id,void 0,new O5.ServerHeartbeatStartedEvent(F.address,Z));function X(G){F.connection?.destroy(),F.connection=null,F.emitAndLogHeartbeat(S5.Server.SERVER_HEARTBEAT_FAILED,F[F3].topology.s.id,void 0,new O5.ServerHeartbeatFailedEvent(F.address,t0.calculateDurationInMs(B),G,D));const E=!(G instanceof T7.MongoError)?new T7.MongoError(T7.MongoError.buildErrorMessage(G),{cause:G}):G;if(E.addErrorLabel(T7.MongoErrorLabel.ResetPool),E instanceof T7.MongoNetworkTimeoutError)E.addErrorLabel(T7.MongoErrorLabel.InterruptInUseConnections);F.emit("resetServer",E),A(G)}function Y(G){if(!("isWritablePrimary"in G))G.isWritablePrimary=G[c$.LEGACY_HELLO_COMMAND];const E=Z&&F.rttPinger?F.rttPinger.latestRtt??t0.calculateDurationInMs(B):t0.calculateDurationInMs(B);if(F.addRttSample(E),F.emitAndLogHeartbeat(S5.Server.SERVER_HEARTBEAT_SUCCEEDED,F[F3].topology.s.id,G.connectionId,new O5.ServerHeartbeatSucceededEvent(F.address,E,G,Z)),Z)F.emitAndLogHeartbeat(S5.Server.SERVER_HEARTBEAT_STARTED,F[F3].topology.s.id,void 0,new O5.ServerHeartbeatStartedEvent(F.address,!0)),B=t0.now();else F.rttPinger?.close(),F.rttPinger=void 0,A(void 0,G)}const{connection:$}=F;if($&&!$.closed){const{serverApi:G,helloOk:E}=$,W=F.options.connectTimeoutMS,C=F.options.heartbeatFrequencyMS,H={[G?.version||E?"hello":c$.LEGACY_HELLO_COMMAND]:1,...Z&&J?{maxAwaitTimeMS:C,topologyVersion:_41(J)}:{}},q=Z?{socketTimeoutMS:W?W+C:0,exhaustAllowed:!0}:{socketTimeoutMS:W};if(Z&&F.rttPinger==null)F.rttPinger=new i$(F);if(B=t0.now(),Z)return D=!0,$.exhaustCommand(t0.ns("admin.$cmd"),H,q,(K,U)=>{if(K)return X(K);return Y(U)});D=!1,$.command(t0.ns("admin.$cmd"),H,q).then(Y,X);return}(async()=>{const G=await TB.makeSocket(F.connectOptions),E=TB.makeConnection(F.connectOptions,G);B=t0.now();try{return await TB.performInitialHandshake(E,F.connectOptions),E}catch(W){throw E.destroy(),W}})().then((G)=>{if(k5(F)){G.destroy();return}const E=t0.calculateDurationInMs(B);F.addRttSample(E),F.connection=G,F.emitAndLogHeartbeat(S5.Server.SERVER_HEARTBEAT_SUCCEEDED,F[F3].topology.s.id,G.hello?.connectionId,new O5.ServerHeartbeatSucceededEvent(F.address,E,G.hello,l$(F,G.hello?.topologyVersion))),A(void 0,G.hello)},(G)=>{F.connection=null,D=!1,X(G)})},QM=function(F){return(A)=>{if(F.s.state===J9){process.nextTick(A);return}u7(F,J9);function B(){if(!k5(F))u7(F,j7);A()}f41(F,(D,J)=>{if(D){if(F[F3].description.type===m0.ServerType.Unknown)return B()}if(l$(F,J?.topologyVersion))H4.setTimeout(()=>{if(!k5(F))F[A3]?.wake()},0);B()})}},_41=function(F){return{processId:F.processId,counter:KM.Long.isLong(F.counter)?F.counter:KM.Long.fromNumber(F.counter)}};Object.defineProperty(VM,"__esModule",{value:!0});VM.RTTSampler=VM.MonitorInterval=VM.RTTPinger=VM.Monitor=VM.ServerMonitoringMode=void 0;var H4=import.meta.require("timers"),KM=S1(),TB=O$(),S41=J$(),c$=L0(),T7=p(),k41=p4(),zM=d2(),t0=r(),m0=v2(),O5=UB(),S5=m$(),F3=Symbol("server"),A3=Symbol("monitorId"),O7=Symbol("cancellationToken"),j7="idle",J9="monitoring",u7=t0.makeStateMachine({[m0.STATE_CLOSING]:[m0.STATE_CLOSING,j7,m0.STATE_CLOSED],[m0.STATE_CLOSED]:[m0.STATE_CLOSED,J9],[j7]:[j7,J9,m0.STATE_CLOSING],[J9]:[J9,j7,m0.STATE_CLOSING]}),x41=new Set([m0.STATE_CLOSING,m0.STATE_CLOSED,J9]);VM.ServerMonitoringMode=Object.freeze({auto:"auto",poll:"poll",stream:"stream"});class LM extends zM.TypedEventEmitter{constructor(F,A){super();this.component=k41.MongoLoggableComponent.TOPOLOGY,this[F3]=F,this.connection=null,this[O7]=new zM.CancellationToken,this[O7].setMaxListeners(1/0),this[A3]=void 0,this.s={state:m0.STATE_CLOSED},this.address=F.description.address,this.options=Object.freeze({connectTimeoutMS:A.connectTimeoutMS??1e4,heartbeatFrequencyMS:A.heartbeatFrequencyMS??1e4,minHeartbeatFrequencyMS:A.minHeartbeatFrequencyMS??500,serverMonitoringMode:A.serverMonitoringMode}),this.isRunningInFaasEnv=S41.getFAASEnv()!=null,this.mongoLogger=this[F3].topology.client?.mongoLogger,this.rttSampler=new n$(10);const B=this[O7],D={id:"<monitor>",generation:F.pool.generation,cancellationToken:B,hostAddress:F.description.hostAddress,...A,raw:!1,useBigInt64:!1,promoteLongs:!0,promoteValues:!0,promoteBuffers:!0};if(delete D.credentials,D.autoEncrypter)delete D.autoEncrypter;this.connectOptions=Object.freeze(D)}connect(){if(this.s.state!==m0.STATE_CLOSED)return;const F=this.options.heartbeatFrequencyMS,A=this.options.minHeartbeatFrequencyMS;this[A3]=new jB(QM(this),{heartbeatFrequencyMS:F,minHeartbeatFrequencyMS:A,immediate:!0})}requestCheck(){if(x41.has(this.s.state))return;this[A3]?.wake()}reset(){const F=this[F3].description.topologyVersion;if(k5(this)||F==null)return;u7(this,m0.STATE_CLOSING),UM(this),u7(this,j7);const A=this.options.heartbeatFrequencyMS,B=this.options.minHeartbeatFrequencyMS;this[A3]=new jB(QM(this),{heartbeatFrequencyMS:A,minHeartbeatFrequencyMS:B})}close(){if(k5(this))return;u7(this,m0.STATE_CLOSING),UM(this),this.emit("close"),u7(this,m0.STATE_CLOSED)}get roundTripTime(){return this.rttSampler.average()}get minRoundTripTime(){return this.rttSampler.min()}get latestRtt(){return this.rttSampler.last}addRttSample(F){this.rttSampler.addSample(F)}clearRttSamples(){this.rttSampler.clear()}}VM.Monitor=LM;class i${constructor(F){this.connection=void 0,this[O7]=F[O7],this.closed=!1,this.monitor=F,this.latestRtt=F.latestRtt??void 0;const A=F.options.heartbeatFrequencyMS;this[A3]=H4.setTimeout(()=>this.measureRoundTripTime(),A)}get roundTripTime(){return this.monitor.roundTripTime}get minRoundTripTime(){return this.monitor.minRoundTripTime}close(){this.closed=!0,H4.clearTimeout(this[A3]),this.connection?.destroy(),this.connection=void 0}measureAndReschedule(F,A){if(this.closed){A?.destroy();return}if(this.connection==null)this.connection=A;this.latestRtt=t0.calculateDurationInMs(F),this[A3]=H4.setTimeout(()=>this.measureRoundTripTime(),this.monitor.options.heartbeatFrequencyMS)}measureRoundTripTime(){const F=t0.now();if(this.closed)return;const A=this.connection;if(A==null){TB.connect(this.monitor.connectOptions).then((D)=>{this.measureAndReschedule(F,D)},()=>{this.connection=void 0});return}const B=A.serverApi?.version||A.helloOk?"hello":c$.LEGACY_HELLO_COMMAND;A.command(t0.ns("admin.$cmd"),{[B]:1},void 0).then(()=>this.measureAndReschedule(F),()=>{this.connection?.destroy(),this.connection=void 0;return})}}VM.RTTPinger=i$;class jB{constructor(F,A={}){if(this.isExpeditedCallToFnScheduled=!1,this.stopped=!1,this.isExecutionInProgress=!1,this.hasExecutedOnce=!1,this._executeAndReschedule=()=>{if(this.stopped)return;if(this.timerId)H4.clearTimeout(this.timerId);this.isExpeditedCallToFnScheduled=!1,this.isExecutionInProgress=!0,this.fn(()=>{this.lastExecutionEnded=t0.now(),this.isExecutionInProgress=!1,this._reschedule(this.heartbeatFrequencyMS)})},this.fn=F,this.lastExecutionEnded=-1/0,this.heartbeatFrequencyMS=A.heartbeatFrequencyMS??1000,this.minHeartbeatFrequencyMS=A.minHeartbeatFrequencyMS??500,A.immediate)this._executeAndReschedule();else this._reschedule(void 0)}wake(){const A=t0.now()-this.lastExecutionEnded;if(A<0)return this._executeAndReschedule();if(this.isExecutionInProgress)return;if(this.isExpeditedCallToFnScheduled)return;if(A<this.minHeartbeatFrequencyMS){this.isExpeditedCallToFnScheduled=!0,this._reschedule(this.minHeartbeatFrequencyMS-A);return}this._executeAndReschedule()}stop(){if(this.stopped=!0,this.timerId)H4.clearTimeout(this.timerId),this.timerId=void 0;this.lastExecutionEnded=-1/0,this.isExpeditedCallToFnScheduled=!1}toString(){return JSON.stringify(this)}toJSON(){const F=t0.now(),A=F-this.lastExecutionEnded;return{timerId:this.timerId!=null?"set":"cleared",lastCallTime:this.lastExecutionEnded,isExpeditedCheckScheduled:this.isExpeditedCallToFnScheduled,stopped:this.stopped,heartbeatFrequencyMS:this.heartbeatFrequencyMS,minHeartbeatFrequencyMS:this.minHeartbeatFrequencyMS,currentTime:F,timeSinceLastCall:A}}_reschedule(F){if(this.stopped)return;if(this.timerId)H4.clearTimeout(this.timerId);this.timerId=H4.setTimeout(this._executeAndReschedule,F||this.heartbeatFrequencyMS)}}VM.MonitorInterval=jB;class n${constructor(F=10){this.rttSamples=new Float64Array(F),this.length=0,this.writeIndex=0}addSample(F){if(this.rttSamples[this.writeIndex++]=F,this.length<this.rttSamples.length)this.length++;this.writeIndex%=this.rttSamples.length}min(){if(this.length<2)return 0;let F=this.rttSamples[0];for(let A=1;A<this.length;A++)if(this.rttSamples[A]<F)F=this.rttSamples[A];return F}average(){if(this.length===0)return 0;let F=0;for(let A=0;A<this.length;A++)F+=this.rttSamples[A];return F/this.length}get last(){if(this.length===0)return null;return this.rttSamples[this.writeIndex===0?this.length-1:this.writeIndex-1]}clear(){this.length=0,this.writeIndex=0}}VM.RTTSampler=n$});var AG=z((jM)=>{async function p41(F){if(typeof F.srvHost!=="string")throw new a.MongoAPIError('Option "srvHost" must not be empty');if(F.srvHost.split(".").length<3)throw new a.MongoAPIError("URI must include hostname, domain name, and tld");const A=F.srvHost,B=RM.promises.resolveTxt(A);B.then(void 0,d0.squashError);const D=await RM.promises.resolveSrv(`_${F.srvServiceName}._tcp.${A}`);if(D.length===0)throw new a.MongoAPIError("No addresses found at host");for(let{name:W}of D)if(!d0.matchesParentDomain(W,A))throw new a.MongoAPIError("Server record does not share hostname with parent URI");const J=D.map((W)=>d0.HostAddress.fromString(`${W.name}:${W.port??27017}`));t$(J,F,!0);let Z;try{Z=await B}catch(W){if(W.code!=="ENODATA"&&W.code!=="ENOTFOUND")throw W;return J}if(Z.length>1)throw new a.MongoParseError("Multiple text records not allowed");const X=new h41.URLSearchParams(Z[0].join(""));if([...X.keys()].some((W)=>!a$.includes(W)))throw new a.MongoParseError(`Text record may only set any of: ${a$.join(", ")}`);if(a$.some((W)=>X.get(W)===""))throw new a.MongoParseError("Cannot have empty URI params in DNS TXT Record");const $=X.get("authSource")??void 0,G=X.get("replicaSet")??void 0,E=X.get("loadBalanced")??void 0;if(!F.userSpecifiedAuthSource&&$&&F.credentials&&!B3.AUTH_MECHS_AUTH_SRC_EXTERNAL.has(F.credentials.mechanism))F.credentials=S7.MongoCredentials.merge(F.credentials,{source:$});if(!F.userSpecifiedReplicaSet&&G)F.replicaSet=G;if(E==="true")F.loadBalanced=!0;if(F.replicaSet&&F.srvMaxHosts>0)throw new a.MongoParseError("Cannot combine replicaSet option with srvMaxHosts");return t$(J,F,!0),J}var i41=function(F){if(!F)return;const A=(B,D)=>{if(F.has(B)&&F.has(D))throw new a.MongoAPIError(`The '${B}' option cannot be used with the '${D}' option`)};A("tlsInsecure","tlsAllowInvalidCertificates"),A("tlsInsecure","tlsAllowInvalidHostnames"),A("tlsInsecure","tlsDisableCertificateRevocationCheck"),A("tlsInsecure","tlsDisableOCSPEndpointCheck"),A("tlsAllowInvalidCertificates","tlsDisableCertificateRevocationCheck"),A("tlsAllowInvalidCertificates","tlsDisableOCSPEndpointCheck"),A("tlsDisableCertificateRevocationCheck","tlsDisableOCSPEndpointCheck")},u3=function(F,A){if(typeof A==="boolean")return A;switch(A){case"true":return!0;case"false":return!1;default:throw new a.MongoParseError(`${F} must be either "true" or "false"`)}},e$=function(F,A){const B=d0.parseInteger(A);if(B!=null)return B;throw new a.MongoParseError(`Expected ${F} to be stringified int value, got: ${A}`)},x5=function(F,A){const B=e$(F,A);if(B<0)throw new a.MongoParseError(`${F} can only be a positive int value, got: ${A}`);return B};function*MM(F){if(F==="")return;const A=F.split(",");for(let B of A){const[D,J]=B.split(/:(.*)/);if(J==null)throw new a.MongoParseError("Cannot have undefined values in key value pairs");yield[D,J]}}var n41=function(F,A=void 0,B={}){if(A!=null&&!(A instanceof uB.MongoClient))B=A,A=void 0;if(B.useBigInt64&&typeof B.promoteLongs==="boolean"&&!B.promoteLongs)throw new a.MongoAPIError("Must request either bigint or Long for int64 deserialization");if(B.useBigInt64&&typeof B.promoteValues==="boolean"&&!B.promoteValues)throw new a.MongoAPIError("Must request either bigint or Long for int64 deserialization");const D=new v41.default(F),{hosts:J,isSRV:Z}=D,X=Object.create(null);for(let Q of Object.getOwnPropertySymbols(B))if(jM.FEATURE_FLAGS.has(Q))X[Q]=B[Q];X.hosts=Z?[]:J.map(d0.HostAddress.fromString);const Y=new f5;if(D.pathname!=="/"&&D.pathname!==""){const Q=decodeURIComponent(D.pathname[0]==="/"?D.pathname.slice(1):D.pathname);if(Q)Y.set("dbName",[Q])}if(D.username!==""){const Q={username:decodeURIComponent(D.username)};if(typeof D.password==="string")Q.password=decodeURIComponent(D.password);Y.set("auth",[Q])}for(let Q of D.searchParams.keys()){const V=D.searchParams.getAll(Q),L=/readPreferenceTags/i.test(Q);if(!L&&V.length>1)throw new a.MongoInvalidArgumentError(`URI option "${Q}" cannot appear more than once in the connection string`);if(!L&&V.includes(""))throw new a.MongoAPIError(`URI option "${Q}" cannot be specified with no value`);if(!Y.has(Q))Y.set(Q,V)}const $=new f5(Object.entries(B).filter(([,Q])=>Q!=null));if(Y.has("serverApi"))throw new a.MongoParseError("URI cannot contain `serverApi`, it can only be passed to the client");const G=Y.get("authMechanismProperties");if(G){for(let Q of G)if(/(^|,)ALLOWED_HOSTS:/.test(Q))throw new a.MongoParseError("Auth mechanism property ALLOWED_HOSTS is not allowed in the connection string.")}if($.has("loadBalanced"))throw new a.MongoParseError("loadBalanced is only a valid option in the URI");const E=new f5,W=new Set([...Y.keys(),...$.keys()]);for(let Q of W){const V=[],L=$.get(Q);if(L!=null)V.push(L);const N=Y.get(Q)??[];V.push(...N),E.set(Q,V)}if(E.has("tls")||E.has("ssl")){const Q=(E.get("tls")||[]).concat(E.get("ssl")||[]).map(u3.bind(null,"tls/ssl"));if(new Set(Q).size!==1)throw new a.MongoParseError("All values of tls/ssl must be the same.")}i41(E);const C=d0.setDifference(W,Array.from(Object.keys(jM.OPTIONS)).map((Q)=>Q.toLowerCase()));if(C.size!==0){const Q=C.size>1?"options":"option",V=C.size>1?"are":"is";throw new a.MongoParseError(`${Q} ${Array.from(C).join(", ")} ${V} not supported`)}for(let[Q,V]of Object.entries(jM.OPTIONS)){const L=E.get(Q);if(!L||L.length===0){if(jM.DEFAULT_OPTIONS.has(Q))TM(X,Q,V,[jM.DEFAULT_OPTIONS.get(Q)])}else{const{deprecated:N}=V;if(N){const h=typeof N==="string"?`: ${N}`:"";d0.emitWarning(`${Q} is a deprecated option${h}`)}TM(X,Q,V,L)}}if(X.credentials){const Q=X.credentials.mechanism===B3.AuthMechanism.MONGODB_GSSAPI,V=X.credentials.mechanism===B3.AuthMechanism.MONGODB_X509,L=X.credentials.mechanism===B3.AuthMechanism.MONGODB_AWS,N=X.credentials.mechanism===B3.AuthMechanism.MONGODB_OIDC;if((Q||V)&&E.has("authSource")&&X.credentials.source!=="$external")throw new a.MongoParseError(`authMechanism ${X.credentials.mechanism} requires an authSource of '\$external'`);if(!(Q||V||L||N)&&X.dbName&&!E.has("authSource"))X.credentials=S7.MongoCredentials.merge(X.credentials,{source:X.dbName});if(L&&X.credentials.username&&!X.credentials.password)throw new a.MongoMissingCredentialsError(`When using ${X.credentials.mechanism} password must be set when a username is specified`);if(X.credentials.validate(),X.credentials.password===""&&X.credentials.username===""&&X.credentials.mechanism===B3.AuthMechanism.MONGODB_DEFAULT&&Object.keys(X.credentials.mechanismProperties).length===0)delete X.credentials}if(!X.dbName)X.dbName="test";if(t$(J,X,Z),A&&X.autoEncryption)PM.Encrypter.checkForMongoCrypt(),X.encrypter=new PM.Encrypter(A,F,B),X.autoEncrypter=X.encrypter.autoEncrypter;if(X.userSpecifiedAuthSource=$.has("authSource")||Y.has("authSource"),X.userSpecifiedReplicaSet=$.has("replicaSet")||Y.has("replicaSet"),Z){if(X.srvHost=J[0],X.directConnection)throw new a.MongoAPIError("SRV URI does not support directConnection");if(X.srvMaxHosts>0&&typeof X.replicaSet==="string")throw new a.MongoParseError("Cannot use srvMaxHosts option with replicaSet");const Q=!$.has("tls")&&!Y.has("tls"),V=!$.has("ssl")&&!Y.has("ssl");if(Q&&V)X.tls=!0}else if(Y.has("srvMaxHosts")||$.has("srvMaxHosts")||Y.has("srvServiceName")||$.has("srvServiceName"))throw new a.MongoParseError("Cannot use srvMaxHosts or srvServiceName with a non-srv connection string");if(X.directConnection&&X.hosts.length!==1)throw new a.MongoParseError("directConnection option requires exactly one host");if(!X.proxyHost&&(X.proxyPort||X.proxyUsername||X.proxyPassword))throw new a.MongoParseError("Must specify proxyHost if other proxy options are passed");if(X.proxyUsername&&!X.proxyPassword||!X.proxyUsername&&X.proxyPassword)throw new a.MongoParseError("Can only specify both of proxy username/password or neither");if(["proxyHost","proxyPort","proxyUsername","proxyPassword"].map((Q)=>Y.get(Q)??[]).some((Q)=>Q.length>1))throw new a.MongoParseError("Proxy options cannot be specified multiple times in the connection string");const q=Symbol.for("@@mdb.enableMongoLogger");X[q]=X[q]??!1;let K={},U={};if(X[q])K={MONGODB_LOG_COMMAND:process.env.MONGODB_LOG_COMMAND,MONGODB_LOG_TOPOLOGY:process.env.MONGODB_LOG_TOPOLOGY,MONGODB_LOG_SERVER_SELECTION:process.env.MONGODB_LOG_SERVER_SELECTION,MONGODB_LOG_CONNECTION:process.env.MONGODB_LOG_CONNECTION,MONGODB_LOG_CLIENT:process.env.MONGODB_LOG_CLIENT,MONGODB_LOG_ALL:process.env.MONGODB_LOG_ALL,MONGODB_LOG_MAX_DOCUMENT_LENGTH:process.env.MONGODB_LOG_MAX_DOCUMENT_LENGTH,MONGODB_LOG_PATH:process.env.MONGODB_LOG_PATH,...X[Symbol.for("@@mdb.internalLoggerConfig")]},U={mongodbLogPath:X.mongodbLogPath,mongodbLogComponentSeverities:X.mongodbLogComponentSeverities,mongodbLogMaxDocumentLength:X.mongodbLogMaxDocumentLength};return X.mongoLoggerOptions=r$.MongoLogger.resolveOptions(K,U),X.metadata=IM.makeClientMetadata(X),X.extendedMetadata=IM.addContainerMetadata(X.metadata).then(void 0,d0.squashError),X},t$=function(F,A,B){if(A.loadBalanced){if(F.length>1)throw new a.MongoParseError(d41);if(A.replicaSet)throw new a.MongoParseError(c41);if(A.directConnection)throw new a.MongoParseError(l41);if(B&&A.srvMaxHosts>0)throw new a.MongoParseError("Cannot limit srv hosts with loadBalanced enabled")}return},TM=function(F,A,B,D){const{target:J,type:Z,transform:X}=B,Y=J??A;switch(Z){case"boolean":F[Y]=u3(Y,D[0]);break;case"int":F[Y]=e$(Y,D[0]);break;case"uint":F[Y]=x5(Y,D[0]);break;case"string":if(D[0]==null)break;F[Y]=String(D[0]);break;case"record":if(!d0.isRecord(D[0]))throw new a.MongoParseError(`${Y} must be an object`);F[Y]=D[0];break;case"any":F[Y]=D[0];break;default:{if(!X)throw new a.MongoParseError("Descriptors missing a type must define a transform");const $=X({name:Y,options:F,values:D});F[Y]=$;break}}};Object.defineProperty(jM,"__esModule",{value:!0});jM.FEATURE_FLAGS=jM.DEFAULT_OPTIONS=jM.OPTIONS=jM.parseOptions=jM.resolveSRVRecord=void 0;var RM=import.meta.require("dns"),v41=A$(),h41=import.meta.require("url"),S7=hA(),B3=M6(),IM=J$(),NM=V5(),PM=tN(),a=p(),uB=A9(),r$=p4(),s$=D6(),q4=T0(),m41=d$(),d0=r(),j3=V2(),a$=["authSource","replicaSet","loadBalanced"],d41="loadBalanced option only supported with a single host in the URI",c41="loadBalanced option not supported with a replicaSet option",l41="loadBalanced option not supported when directConnection is provided";jM.resolveSRVRecord=p41;class f5 extends Map{constructor(F=[]){super(F.map(([A,B])=>[A.toLowerCase(),B]))}has(F){return super.has(F.toLowerCase())}get(F){return super.get(F.toLowerCase())}set(F,A){return super.set(F.toLowerCase(),A)}delete(F){return super.delete(F.toLowerCase())}}jM.parseOptions=n41;jM.OPTIONS={appName:{type:"string"},auth:{target:"credentials",transform({name:F,options:A,values:[B]}){if(!d0.isRecord(B,["username","password"]))throw new a.MongoParseError(`${F} must be an object with 'username' and 'password' properties`);return S7.MongoCredentials.merge(A.credentials,{username:B.username,password:B.password})}},authMechanism:{target:"credentials",transform({options:F,values:[A]}){const B=Object.values(B3.AuthMechanism),[D]=B.filter((X)=>X.match(RegExp(String.raw`\b${A}\b`,"i")));if(!D)throw new a.MongoParseError(`authMechanism one of ${B}, got ${A}`);let J=F.credentials?.source;if(D===B3.AuthMechanism.MONGODB_PLAIN||B3.AUTH_MECHS_AUTH_SRC_EXTERNAL.has(D))J="$external";let Z=F.credentials?.password;if(D===B3.AuthMechanism.MONGODB_X509&&Z==="")Z=void 0;return S7.MongoCredentials.merge(F.credentials,{mechanism:D,source:J,password:Z})}},authMechanismProperties:{target:"credentials",transform({options:F,values:A}){let B=Object.create(null);for(let D of A)if(typeof D==="string")for(let[J,Z]of MM(D))try{B[J]=u3(J,Z)}catch{B[J]=Z}else{if(!d0.isRecord(D))throw new a.MongoParseError("AuthMechanismProperties must be an object");B={...D}}return S7.MongoCredentials.merge(F.credentials,{mechanismProperties:B})}},authSource:{target:"credentials",transform({options:F,values:[A]}){const B=String(A);return S7.MongoCredentials.merge(F.credentials,{source:B})}},autoEncryption:{type:"record"},bsonRegExp:{type:"boolean"},serverApi:{target:"serverApi",transform({values:[F]}){const A=typeof F==="string"?{version:F}:F,B=A&&A.version;if(!B)throw new a.MongoParseError(`Invalid \`serverApi\` property; must specify a version from the following enum: ["${Object.values(uB.ServerApiVersion).join('", "')}"]`);if(!Object.values(uB.ServerApiVersion).some((D)=>D===B))throw new a.MongoParseError(`Invalid server API version=${B}; must be in the following enum: ["${Object.values(uB.ServerApiVersion).join('", "')}"]`);return A}},checkKeys:{type:"boolean"},compressors:{default:"none",target:"compressors",transform({values:F}){const A=new Set;for(let B of F){const D=typeof B==="string"?B.split(","):B;if(!Array.isArray(D))throw new a.MongoInvalidArgumentError("compressors must be an array or a comma-delimited list of strings");for(let J of D)if(Object.keys(NM.Compressor).includes(String(J)))A.add(String(J));else throw new a.MongoInvalidArgumentError(`${J} is not a valid compression mechanism. Must be one of: ${Object.keys(NM.Compressor)}.`)}return[...A]}},connectTimeoutMS:{default:30000,type:"uint"},dbName:{type:"string"},directConnection:{default:!1,type:"boolean"},driverInfo:{default:{},type:"record"},enableUtf8Validation:{type:"boolean",default:!0},family:{transform({name:F,values:[A]}){const B=e$(F,A);if(B===4||B===6)return B;throw new a.MongoParseError(`Option 'family' must be 4 or 6 got ${B}.`)}},fieldsAsRaw:{type:"record"},forceServerObjectId:{default:!1,type:"boolean"},fsync:{deprecated:"Please use journal instead",target:"writeConcern",transform({name:F,options:A,values:[B]}){const D=j3.WriteConcern.fromOptions({writeConcern:{...A.writeConcern,fsync:u3(F,B)}});if(!D)throw new a.MongoParseError(`Unable to make a writeConcern from fsync=${B}`);return D}},heartbeatFrequencyMS:{default:1e4,type:"uint"},ignoreUndefined:{type:"boolean"},j:{deprecated:"Please use journal instead",target:"writeConcern",transform({name:F,options:A,values:[B]}){const D=j3.WriteConcern.fromOptions({writeConcern:{...A.writeConcern,journal:u3(F,B)}});if(!D)throw new a.MongoParseError(`Unable to make a writeConcern from journal=${B}`);return D}},journal:{target:"writeConcern",transform({name:F,options:A,values:[B]}){const D=j3.WriteConcern.fromOptions({writeConcern:{...A.writeConcern,journal:u3(F,B)}});if(!D)throw new a.MongoParseError(`Unable to make a writeConcern from journal=${B}`);return D}},loadBalanced:{default:!1,type:"boolean"},localThresholdMS:{default:15,type:"uint"},maxConnecting:{default:2,transform({name:F,values:[A]}){const B=x5(F,A);if(B===0)throw new a.MongoInvalidArgumentError("maxConnecting must be > 0 if specified");return B}},maxIdleTimeMS:{default:0,type:"uint"},maxPoolSize:{default:100,type:"uint"},maxStalenessSeconds:{target:"readPreference",transform({name:F,options:A,values:[B]}){const D=x5(F,B);if(A.readPreference)return q4.ReadPreference.fromOptions({readPreference:{...A.readPreference,maxStalenessSeconds:D}});else return new q4.ReadPreference("secondary",void 0,{maxStalenessSeconds:D})}},minInternalBufferSize:{type:"uint"},minPoolSize:{default:0,type:"uint"},minHeartbeatFrequencyMS:{default:500,type:"uint"},monitorCommands:{default:!1,type:"boolean"},name:{target:"driverInfo",transform({values:[F],options:A}){return{...A.driverInfo,name:String(F)}}},noDelay:{default:!0,type:"boolean"},pkFactory:{default:d0.DEFAULT_PK_FACTORY,transform({values:[F]}){if(d0.isRecord(F,["createPk"])&&typeof F.createPk==="function")return F;throw new a.MongoParseError(`Option pkFactory must be an object with a createPk function, got ${F}`)}},promoteBuffers:{type:"boolean"},promoteLongs:{type:"boolean"},promoteValues:{type:"boolean"},useBigInt64:{type:"boolean"},proxyHost:{type:"string"},proxyPassword:{type:"string"},proxyPort:{type:"uint"},proxyUsername:{type:"string"},raw:{default:!1,type:"boolean"},readConcern:{transform({values:[F],options:A}){if(F instanceof s$.ReadConcern||d0.isRecord(F,["level"]))return s$.ReadConcern.fromOptions({...A.readConcern,...F});throw new a.MongoParseError(`ReadConcern must be an object, got ${JSON.stringify(F)}`)}},readConcernLevel:{target:"readConcern",transform({values:[F],options:A}){return s$.ReadConcern.fromOptions({...A.readConcern,level:F})}},readPreference:{default:q4.ReadPreference.primary,transform({values:[F],options:A}){if(F instanceof q4.ReadPreference)return q4.ReadPreference.fromOptions({readPreference:{...A.readPreference,...F},...F});if(d0.isRecord(F,["mode"])){const B=q4.ReadPreference.fromOptions({readPreference:{...A.readPreference,...F},...F});if(B)return B;else throw new a.MongoParseError(`Cannot make read preference from ${JSON.stringify(F)}`)}if(typeof F==="string"){const B={hedge:A.readPreference?.hedge,maxStalenessSeconds:A.readPreference?.maxStalenessSeconds};return new q4.ReadPreference(F,A.readPreference?.tags,B)}throw new a.MongoParseError(`Unknown ReadPreference value: ${F}`)}},readPreferenceTags:{target:"readPreference",transform({values:F,options:A}){const B=Array.isArray(F[0])?F[0]:F,D=[];for(let J of B){const Z=Object.create(null);if(typeof J==="string")for(let[X,Y]of MM(J))Z[X]=Y;if(d0.isRecord(J))for(let[X,Y]of Object.entries(J))Z[X]=Y;D.push(Z)}return q4.ReadPreference.fromOptions({readPreference:A.readPreference,readPreferenceTags:D})}},replicaSet:{type:"string"},retryReads:{default:!0,type:"boolean"},retryWrites:{default:!0,type:"boolean"},serializeFunctions:{type:"boolean"},serverMonitoringMode:{default:"auto",transform({values:[F]}){if(!Object.values(m41.ServerMonitoringMode).includes(F))throw new a.MongoParseError("serverMonitoringMode must be one of `auto`, `poll`, or `stream`");return F}},serverSelectionTimeoutMS:{default:30000,type:"uint"},servername:{type:"string"},socketTimeoutMS:{default:0,type:"uint"},srvMaxHosts:{type:"uint",default:0},srvServiceName:{type:"string",default:"mongodb"},ssl:{target:"tls",type:"boolean"},timeoutMS:{type:"uint"},tls:{type:"boolean"},tlsAllowInvalidCertificates:{target:"rejectUnauthorized",transform({name:F,values:[A]}){return!u3(F,A)}},tlsAllowInvalidHostnames:{target:"checkServerIdentity",transform({name:F,values:[A]}){return u3(F,A)?()=>{return}:void 0}},tlsCAFile:{type:"string"},tlsCRLFile:{type:"string"},tlsCertificateKeyFile:{type:"string"},tlsCertificateKeyFilePassword:{target:"passphrase",type:"any"},tlsInsecure:{transform({name:F,options:A,values:[B]}){const D=u3(F,B);if(D)A.checkServerIdentity=()=>{return},A.rejectUnauthorized=!1;else A.checkServerIdentity=A.tlsAllowInvalidHostnames?()=>{return}:void 0,A.rejectUnauthorized=A.tlsAllowInvalidCertificates?!1:!0;return D}},w:{target:"writeConcern",transform({values:[F],options:A}){return j3.WriteConcern.fromOptions({writeConcern:{...A.writeConcern,w:F}})}},waitQueueTimeoutMS:{default:0,type:"uint"},writeConcern:{target:"writeConcern",transform({values:[F],options:A}){if(d0.isRecord(F)||F instanceof j3.WriteConcern)return j3.WriteConcern.fromOptions({writeConcern:{...A.writeConcern,...F}});else if(F==="majority"||typeof F==="number")return j3.WriteConcern.fromOptions({writeConcern:{...A.writeConcern,w:F}});throw new a.MongoParseError(`Invalid WriteConcern cannot parse: ${JSON.stringify(F)}`)}},wtimeout:{deprecated:"Please use wtimeoutMS instead",target:"writeConcern",transform({values:[F],options:A}){const B=j3.WriteConcern.fromOptions({writeConcern:{...A.writeConcern,wtimeout:x5("wtimeout",F)}});if(B)return B;throw new a.MongoParseError("Cannot make WriteConcern from wtimeout")}},wtimeoutMS:{target:"writeConcern",transform({values:[F],options:A}){const B=j3.WriteConcern.fromOptions({writeConcern:{...A.writeConcern,wtimeoutMS:x5("wtimeoutMS",F)}});if(B)return B;throw new a.MongoParseError("Cannot make WriteConcern from wtimeout")}},zlibCompressionLevel:{default:0,type:"int"},connectionType:{type:"any"},srvPoller:{type:"any"},minDHSize:{type:"any"},pskCallback:{type:"any"},secureContext:{type:"any"},enableTrace:{type:"any"},requestCert:{type:"any"},rejectUnauthorized:{type:"any"},checkServerIdentity:{type:"any"},ALPNProtocols:{type:"any"},SNICallback:{type:"any"},session:{type:"any"},requestOCSP:{type:"any"},localAddress:{type:"any"},localPort:{type:"any"},hints:{type:"any"},lookup:{type:"any"},ca:{type:"any"},cert:{type:"any"},ciphers:{type:"any"},crl:{type:"any"},ecdhCurve:{type:"any"},key:{type:"any"},passphrase:{type:"any"},pfx:{type:"any"},secureProtocol:{type:"any"},index:{type:"any"},useNewUrlParser:{type:"boolean",deprecated:"useNewUrlParser has no effect since Node.js Driver version 4.0.0 and will be removed in the next major version"},useUnifiedTopology:{type:"boolean",deprecated:"useUnifiedTopology has no effect since Node.js Driver version 4.0.0 and will be removed in the next major version"},mongodbLogPath:{transform({values:[F]}){if(!(typeof F==="string"&&["stderr","stdout"].includes(F)||F&&typeof F==="object"&&("write"in F)&&typeof F.write==="function"))throw new a.MongoAPIError("Option 'mongodbLogPath' must be of type 'stderr' | 'stdout' | MongoDBLogWritable");return F}},mongodbLogComponentSeverities:{transform({values:[F]}){if(typeof F!=="object"||!F)throw new a.MongoAPIError("Option 'mongodbLogComponentSeverities' must be a non-null object");for(let[A,B]of Object.entries(F)){if(typeof B!=="string"||typeof A!=="string")throw new a.MongoAPIError("User input for option 'mongodbLogComponentSeverities' object cannot include a non-string key or value");if(!Object.values(r$.MongoLoggableComponent).some((D)=>D===A)&&A!=="default")throw new a.MongoAPIError(`User input for option 'mongodbLogComponentSeverities' contains invalid key: ${A}`);if(!Object.values(r$.SeverityLevel).some((D)=>D===B))throw new a.MongoAPIError(`Option 'mongodbLogComponentSeverities' does not support ${B} as a value for ${A}`)}return F}},mongodbLogMaxDocumentLength:{type:"uint"}};jM.DEFAULT_OPTIONS=new f5(Object.entries(jM.OPTIONS).filter(([,F])=>F.default!=null).map(([F,A])=>[F,A.default]));jM.FEATURE_FLAGS=new Set([Symbol.for("@@mdb.skipPingOnConnect"),Symbol.for("@@mdb.enableMongoLogger"),Symbol.for("@@mdb.internalLoggerConfig")])});var fM=z((kM)=>{Object.defineProperty(kM,"__esModule",{value:!0});kM.MongoCR=void 0;var uM=import.meta.require("crypto"),r41=p(),OM=r(),t41=V3();class SM extends t41.AuthProvider{async auth(F){const{connection:A,credentials:B}=F;if(!B)throw new r41.MongoMissingCredentialsError("AuthContext must provide credentials.");const{username:D,password:J,source:Z}=B,{nonce:X}=await A.command(OM.ns(`${Z}.\$cmd`),{getnonce:1},void 0),Y=uM.createHash("md5").update(`${D}:mongo:${J}`,"utf8").digest("hex"),$=uM.createHash("md5").update(`${X}${D}${Y}`,"utf8").digest("hex"),G={authenticate:1,user:D,nonce:X,key:$};await A.command(OM.ns(`${Z}.\$cmd`),G,void 0)}}kM.MongoCR=SM});var yM=z((gM)=>{async function B91(F,A){function B(J){if(!J.AccessKeyId||!J.SecretAccessKey)throw new x7.MongoMissingCredentialsError("Could not obtain temporary MONGODB-AWS credentials");return new e41.MongoCredentials({username:J.AccessKeyId,password:J.SecretAccessKey,source:F.source,mechanism:F91.AuthMechanism.MONGODB_AWS,mechanismProperties:{AWS_SESSION_TOKEN:J.Token}})}const D=await A.getCredentials();return B(D)}var D91=function(F){const A=F.split(".");if(A.length===1||A[1]==="amazonaws")return"us-east-1";return A[1]};Object.defineProperty(gM,"__esModule",{value:!0});gM.MongoDBAWS=void 0;var BG=S1(),DG=P6(),x7=p(),k7=r(),o41=V3(),JG=H$(),e41=hA(),F91=M6(),A91=110,ZG={useBigInt64:!1,promoteLongs:!0,promoteValues:!0,promoteBuffers:!1,bsonRegExp:!1};class _M extends o41.AuthProvider{constructor(){super();this.credentialFetcher=JG.AWSTemporaryCredentialProvider.isAWSSDKInstalled?new JG.AWSSDKCredentialProvider:new JG.LegacyAWSTemporaryCredentialProvider}async auth(F){const{connection:A}=F;if(!F.credentials)throw new x7.MongoMissingCredentialsError("AuthContext must provide credentials.");if("kModuleError"in DG.aws4)throw DG.aws4.kModuleError;const{sign:B}=DG.aws4;if(k7.maxWireVersion(A)<9)throw new x7.MongoCompatibilityError("MONGODB-AWS authentication requires MongoDB version 4.4 or later");if(!F.credentials.username)F.credentials=await B91(F.credentials,this.credentialFetcher);const{credentials:D}=F,J=D.username,Z=D.password,X=D.mechanismProperties.AWS_SESSION_TOKEN,Y=J&&Z&&X?{accessKeyId:J,secretAccessKey:Z,sessionToken:X}:J&&Z?{accessKeyId:J,secretAccessKey:Z}:void 0,$=D.source,G=await k7.randomBytes(32),E={saslStart:1,mechanism:"MONGODB-AWS",payload:BG.serialize({r:G,p:A91},ZG)},W=await A.command(k7.ns(`${$}.\$cmd`),E,void 0),C=BG.deserialize(W.payload.buffer,ZG),H=C.h,q=C.s.buffer;if(q.length!==64)throw new x7.MongoRuntimeError(`Invalid server nonce length ${q.length}, expected 64`);if(!k7.ByteUtils.equals(q.subarray(0,G.byteLength),G))throw new x7.MongoRuntimeError("Server nonce does not begin with client nonce");if(H.length<1||H.length>255||H.indexOf("..")!==-1)throw new x7.MongoRuntimeError(`Server returned an invalid host: "${H}"`);const K="Action=GetCallerIdentity&Version=2011-06-15",U=B({method:"POST",host:H,region:D91(C.h),service:"sts",headers:{"Content-Type":"application/x-www-form-urlencoded","Content-Length":K.length,"X-MongoDB-Server-Nonce":k7.ByteUtils.toBase64(q),"X-MongoDB-GS2-CB-Flag":"n"},path:"/",body:K},Y),Q={a:U.headers.Authorization,d:U.headers["X-Amz-Date"]};if(X)Q.t=X;const V={saslContinue:1,conversationId:1,payload:BG.serialize(Q,ZG)};await A.command(k7.ns(`${$}.\$cmd`),V,void 0)}}gM.MongoDBAWS=_M});var YG=z((hM)=>{var XG=function(F){return{saslStart:1,mechanism:X91.AuthMechanism.MONGODB_OIDC,payload:J91.BSON.serialize({jwt:F})}};Object.defineProperty(hM,"__esModule",{value:!0});hM.commandDocument=hM.ServiceWorkflow=void 0;var J91=B6(),Z91=r(),X91=M6();class vM{async execute(F,A){const B=await this.getToken(A),D=XG(B);return await F.command(Z91.ns(A.source),D,void 0)}async speculativeAuth(F){const A=await this.getToken(F),B=XG(A);return B.db=F.source,{speculativeAuthenticate:B}}}hM.ServiceWorkflow=vM;hM.commandDocument=XG});var pM=z((cM)=>{Object.defineProperty(cM,"__esModule",{value:!0});cM.AwsServiceWorkflow=void 0;var $91=import.meta.require("fs"),G91=p(),E91=YG(),W91="AWS_WEB_IDENTITY_TOKEN_FILE must be set in the environment.";class dM extends E91.ServiceWorkflow{constructor(){super()}async getToken(){const F=process.env.AWS_WEB_IDENTITY_TOKEN_FILE;if(!F)throw new G91.MongoAWSError(W91);return await $91.promises.readFile(F,"utf8")}}cM.AwsServiceWorkflow=dM});var SB=z((sM)=>{Object.defineProperty(sM,"__esModule",{value:!0});sM.Cache=sM.ExpiringCacheEntry=void 0;var C91=300000;class iM{constructor(F){this.expiration=this.expirationTime(F)}isValid(){return this.expiration-Date.now()>C91}expirationTime(F){return Date.now()+F*1000}}sM.ExpiringCacheEntry=iM;class nM{constructor(){this.entries=new Map}clear(){this.entries.clear()}hashedCacheKey(F,A,B){return JSON.stringify([F,A,B])}}sM.Cache=nM});var FT=z((oM)=>{Object.defineProperty(oM,"__esModule",{value:!0});oM.AzureTokenCache=oM.AzureTokenEntry=void 0;var rM=SB();class $G extends rM.ExpiringCacheEntry{constructor(F,A){super(A);this.token=F}}oM.AzureTokenEntry=$G;class tM extends rM.Cache{addEntry(F,A){const B=new $G(A.access_token,A.expires_in);return this.entries.set(F,B),B}cacheKey(F){return F}deleteEntry(F){this.entries.delete(F)}getEntry(F){return this.entries.get(F)}}oM.AzureTokenCache=tM});var ZT=z((DT)=>{async function R91(F){const A=`${Q91}&resource=${F}`;return await K91.request(A,{json:!0,headers:L91})}var I91=function(F){if(F==null||typeof F!=="object")return!1;return"access_token"in F&&"expires_in"in F};Object.defineProperty(DT,"__esModule",{value:!0});DT.AzureServiceWorkflow=void 0;var AT=p(),K91=r(),z91=FT(),U91=YG(),Q91="http://169.254.169.254/metadata/identity/oauth2/token?api-version=2018-02-01",L91=Object.freeze({Metadata:"true",Accept:"application/json"}),V91="Azure endpoint did not return a value with only access_token and expires_in properties",w91="TOKEN_AUDIENCE must be set in the auth mechanism properties when PROVIDER_NAME is azure.";class BT extends U91.ServiceWorkflow{constructor(){super(...arguments);this.cache=new z91.AzureTokenCache}async getToken(F){const A=F?.mechanismProperties.TOKEN_AUDIENCE;if(!A)throw new AT.MongoAzureError(w91);let B;const D=this.cache.getEntry(A);if(D?.isValid())B=D.token;else{this.cache.deleteEntry(A);const J=await R91(A);if(!I91(J))throw new AT.MongoAzureError(V91);this.cache.addEntry(A,J),B=J.access_token}return B}}DT.AzureServiceWorkflow=BT});var WT=z((GT)=>{var XT=function(F){let A=Promise.resolve();return async(B,D)=>{return await A,A=A.then(()=>F(B,D)),await A}},T91=function(F,A){let B=_5.get(F),D=_5.get(A??YT);if(B==null)Z9++,B=Z9,_5.set(F,Z9);if(D==null&&A)Z9++,D=Z9,_5.set(A,Z9);return`${B}-${D}`};Object.defineProperty(GT,"__esModule",{value:!0});GT.CallbackLockCache=void 0;var N91=p(),P91=SB(),M91="Auth mechanism property REQUEST_TOKEN_CALLBACK is required.",Z9=0,YT=async()=>({accessToken:"test"}),_5=new WeakMap;_5.set(YT,Z9);class $T extends P91.Cache{getEntry(F,A){const B=A.mechanismProperties.REQUEST_TOKEN_CALLBACK,D=A.mechanismProperties.REFRESH_TOKEN_CALLBACK;if(!B)throw new N91.MongoInvalidArgumentError(M91);const J=T91(B,D),Z=this.cacheKey(F.address,A.username,J),X=this.entries.get(Z);if(X)return X;return this.addEntry(Z,J,B,D)}addEntry(F,A,B,D){const J={requestCallback:XT(B),refreshCallback:D?XT(D):void 0,callbackHash:A};return this.entries.set(F,J),J}cacheKey(F,A,B){return this.hashedCacheKey(F,A,B)}}GT.CallbackLockCache=$T});var zT=z((qT)=>{Object.defineProperty(qT,"__esModule",{value:!0});qT.TokenEntryCache=qT.TokenEntry=void 0;var CT=SB(),j91=0;class GG extends CT.ExpiringCacheEntry{constructor(F,A,B){super(B);this.tokenResult=F,this.serverInfo=A}}qT.TokenEntry=GG;class HT extends CT.Cache{addEntry(F,A,B,D,J){const Z=new GG(D,J,D.expiresInSeconds??j91);return this.entries.set(this.cacheKey(F,A,B),Z),Z}deleteEntry(F,A,B){this.entries.delete(this.cacheKey(F,A,B))}getEntry(F,A,B){return this.entries.get(this.cacheKey(F,A,B))}deleteExpiredEntries(){for(let[F,A]of this.entries)if(!A.isValid())this.entries.delete(F)}cacheKey(F,A,B){return this.hashedCacheKey(F,A,B)}}qT.TokenEntryCache=HT});var IT=z((wT)=>{var g91=function(F,A){if(A!=null&&typeof A==="number")return{saslContinue:1,conversationId:A,payload:new X9.Binary(X9.BSON.serialize({jwt:F}))};return{saslStart:1,mechanism:LT.AuthMechanism.MONGODB_OIDC,payload:new X9.Binary(X9.BSON.serialize({jwt:F}))}},b91=function(F){if(F==null||typeof F!=="object")return!0;if(!("accessToken"in F))return!0;return!Object.getOwnPropertyNames(F).every((A)=>f91.includes(A))},QT=function(F){const A={};if(F.username)A.n=F.username;return{saslStart:1,autoAuthorize:1,mechanism:LT.AuthMechanism.MONGODB_OIDC,payload:new X9.Binary(X9.BSON.serialize(A))}};Object.defineProperty(wT,"__esModule",{value:!0});wT.CallbackWorkflow=void 0;var X9=B6(),EG=p(),UT=r(),LT=M6(),O91=WT(),S91=zT(),k91=0,x91=300,f91=["accessToken","expiresInSeconds","refreshToken"],_91="User provided OIDC callbacks must return a valid object with an accessToken.";class VT{constructor(){this.cache=new S91.TokenEntryCache,this.callbackCache=new O91.CallbackLockCache}async speculativeAuth(F){const A=QT(F);return A.db=F.source,{speculativeAuthenticate:A}}async execute(F,A,B,D){const{requestCallback:J,refreshCallback:Z,callbackHash:X}=this.callbackCache.getEntry(F,A),Y=this.cache.getEntry(F.address,A.username,X);let $;if(Y)if(Y.isValid()&&!B)$=await this.finishAuthentication(F,A,Y.tokenResult,D?.speculativeAuthenticate?.conversationId);else{const G=await this.fetchAccessToken(F,A,Y.serverInfo,B,X,J,Z);try{$=await this.finishAuthentication(F,A,G,B?void 0:D?.speculativeAuthenticate?.conversationId)}catch(E){if(B&&E instanceof EG.MongoError&&E.code===EG.MONGODB_ERROR_CODES.Reauthenticate)this.cache.deleteEntry(F.address,A.username,X),$=await this.execute(F,A,B);else throw E}}else{const G=await this.startAuthentication(F,A,B,D),E=G.conversationId,W=X9.BSON.deserialize(G.payload.buffer),C=await this.fetchAccessToken(F,A,W,B,X,J,Z);$=await this.finishAuthentication(F,A,C,E)}return $}async startAuthentication(F,A,B,D){let J;if(!B&&D?.speculativeAuthenticate)J=D.speculativeAuthenticate;else J=await F.command(UT.ns(A.source),QT(A),void 0);return J}async finishAuthentication(F,A,B,D){return await F.command(UT.ns(A.source),g91(B.accessToken,D),void 0)}async fetchAccessToken(F,A,B,D,J,Z,X){const Y=this.cache.getEntry(F.address,A.username,J);let $;const G={timeoutSeconds:x91,version:k91};if(Y){if(Y.isValid()&&!D)return Y.tokenResult;if(X)G.refreshToken=Y.tokenResult.refreshToken,$=await X(B,G);else $=await Z(B,G)}else $=await Z(B,G);if(b91($))throw this.cache.deleteEntry(F.address,A.username,J),new EG.MongoMissingCredentialsError(_91);return this.cache.deleteExpiredEntries(),this.cache.addEntry(F.address,A.username||"",J,$,B),$}}wT.CallbackWorkflow=VT});var OT=z((jT)=>{var NT=function(F){const{credentials:A}=F;if(!A)throw new MT.MongoMissingCredentialsError(d91);return A},PT=function(F){const A=F.mechanismProperties.PROVIDER_NAME,B=jT.OIDC_WORKFLOWS.get(A||"callback");if(!B)throw new MT.MongoInvalidArgumentError(`Could not load workflow for provider ${F.mechanismProperties.PROVIDER_NAME}`);return B};Object.defineProperty(jT,"__esModule",{value:!0});jT.MongoDBOIDC=jT.OIDC_WORKFLOWS=void 0;var MT=p(),y91=V3(),v91=pM(),h91=ZT(),m91=IT(),d91="AuthContext must provide credentials.";jT.OIDC_WORKFLOWS=new Map;jT.OIDC_WORKFLOWS.set("callback",new m91.CallbackWorkflow);jT.OIDC_WORKFLOWS.set("aws",new v91.AwsServiceWorkflow);jT.OIDC_WORKFLOWS.set("azure",new h91.AzureServiceWorkflow);class TT extends y91.AuthProvider{constructor(){super()}async auth(F){const{connection:A,reauthenticating:B,response:D}=F,J=NT(F);await PT(J).execute(A,J,B,D)}async prepare(F,A){const B=NT(A),J=await PT(B).speculativeAuth(B);return{...F,...J}}}jT.MongoDBOIDC=TT});var fT=z((kT)=>{Object.defineProperty(kT,"__esModule",{value:!0});kT.Plain=void 0;var c91=S1(),l91=p(),p91=r(),i91=V3();class ST extends i91.AuthProvider{async auth(F){const{connection:A,credentials:B}=F;if(!B)throw new l91.MongoMissingCredentialsError("AuthContext must provide credentials.");const{username:D,password:J}=B,X={saslStart:1,mechanism:"PLAIN",payload:new c91.Binary(Buffer.from(`\0${D}\0${J}`)),autoAuthorize:1};await A.command(p91.ns("$external.$cmd"),X,void 0)}}kT.Plain=ST});var yT=z((sK1,bT)=>{var gT=function(F){const A=[],B=F.length;for(let D=0;D<B;D+=1){const J=F.charCodeAt(D);if(J>=55296&&J<=56319&&B>D+1){const Z=F.charCodeAt(D+1);if(Z>=56320&&Z<=57343){A.push((J-55296)*1024+Z-56320+65536),D+=1;continue}}A.push(J)}return A},b5=function({unassigned_code_points:F,commonly_mapped_to_nothing:A,non_ASCII_space_characters:B,prohibited_characters:D,bidirectional_r_al:J,bidirectional_l:Z},X,Y={}){const $=B,G=A;if(typeof X!=="string")throw new TypeError("Expected string.");if(X.length===0)return"";const E=gT(X).map((V)=>$.get(V)?32:V).filter((V)=>!G.get(V)),W=String.fromCodePoint.apply(null,E).normalize("NFKC"),C=gT(W);if(C.some((V)=>D.get(V)))throw new Error("Prohibited character, see https://tools.ietf.org/html/rfc4013#section-2.3");if(Y.allowUnassigned!==!0){if(C.some((L)=>F.get(L)))throw new Error("Unassigned code point, see https://tools.ietf.org/html/rfc4013#section-2.5")}const q=C.some((V)=>J.get(V)),K=C.some((V)=>Z.get(V));if(q&&K)throw new Error("String must not contain RandALCat and LCat at the same time, see https://tools.ietf.org/html/rfc3454#section-6");const U=J.get(_T(n91(W))),Q=J.get(_T(s91(W)));if(q&&!(U&&Q))throw new Error("Bidirectional RandALCat character must be the first and the last character of the string, see https://tools.ietf.org/html/rfc3454#section-6");return W},_T=(F)=>F.codePointAt(0),n91=(F)=>F[0],s91=(F)=>F[F.length-1];b5.saslprep=b5;b5.default=b5;bT.exports=b5});var mT=z((aK1,hT)=>{var O3=function(F,A){if(!(this instanceof O3))return new O3(F,A);this.length=0,this.updates=[],this.path=new Uint16Array(4),this.pages=new Array(32768),this.maxPages=this.pages.length,this.level=0,this.pageSize=F||1024,this.deduplicate=A?A.deduplicate:null,this.zeros=this.deduplicate?kB(this.deduplicate.length):null},a91=function(F,A){while(F.maxPages<A){var B=F.pages;F.pages=new Array(32768),F.pages[0]=B,F.level++,F.maxPages*=32768}},r91=function(F,A){if(F.length===A)return F;if(F.length>A)return F.slice(0,A);var B=kB(A);return F.copy(B),B},kB=function(F){if(Buffer.alloc)return Buffer.alloc(F);var A=new Buffer(F);return A.fill(0),A},t91=function(F){var A=Buffer.allocUnsafe?Buffer.allocUnsafe(F.length):new Buffer(F.length);return F.copy(A),A},vT=function(F,A){this.offset=F*A.length,this.buffer=A,this.updated=!1,this.deduplicate=0},o91=function(F,A){F=(F-(A[0]=F&32767))/32768,F=(F-(A[1]=F&32767))/32768,A[3]=(F-(A[2]=F&32767))/32768&32767};hT.exports=O3;O3.prototype.updated=function(F){while(this.deduplicate&&F.buffer[F.deduplicate]===this.deduplicate[F.deduplicate])if(F.deduplicate++,F.deduplicate===this.deduplicate.length){if(F.deduplicate=0,F.buffer.equals&&F.buffer.equals(this.deduplicate))F.buffer=this.deduplicate;break}if(F.updated||!this.updates)return;F.updated=!0,this.updates.push(F)};O3.prototype.lastUpdate=function(){if(!this.updates||!this.updates.length)return null;var F=this.updates.pop();return F.updated=!1,F};O3.prototype._array=function(F,A){if(F>=this.maxPages){if(A)return;a91(this,F)}o91(F,this.path);var B=this.pages;for(var D=this.level;D>0;D--){var J=this.path[D],Z=B[J];if(!Z){if(A)return;Z=B[J]=new Array(32768)}B=Z}return B};O3.prototype.get=function(F,A){var B=this._array(F,A),D=this.path[0],J=B&&B[D];if(!J&&!A){if(J=B[D]=new vT(F,kB(this.pageSize)),F>=this.length)this.length=F+1}if(J&&J.buffer===this.deduplicate&&this.deduplicate&&!A)J.buffer=t91(J.buffer),J.deduplicate=0;return J};O3.prototype.set=function(F,A){var B=this._array(F,!1),D=this.path[0];if(F>=this.length)this.length=F+1;if(!A||this.zeros&&A.equals&&A.equals(this.zeros)){B[D]=void 0;return}if(this.deduplicate&&A.equals&&A.equals(this.deduplicate))A=this.deduplicate;var J=B[D],Z=r91(A,this.pageSize);if(J)J.buffer=Z;else B[D]=new vT(F,Z)};O3.prototype.toBuffer=function(){var F=new Array(this.length),A=kB(this.pageSize),B=0;while(B<F.length){var D=this._array(B,!0);for(var J=0;J<32768&&B<F.length;J++)F[B++]=D&&D[J]?D[J].buffer:A}return Buffer.concat(F)}});var cT=z((rK1,dT)=>{var K4=function(F){if(!(this instanceof K4))return new K4(F);if(!F)F={};if(Buffer.isBuffer(F))F={buffer:F};if(this.pageOffset=F.pageOffset||0,this.pageSize=F.pageSize||1024,this.pages=F.pages||e91(this.pageSize),this.byteLength=this.pages.length*this.pageSize,this.length=8*this.byteLength,!A71(this.pageSize))throw new Error("The page size should be a power of two");if(this._trackUpdates=!!F.trackUpdates,this._pageMask=this.pageSize-1,F.buffer){for(var A=0;A<F.buffer.length;A+=this.pageSize)this.pages.set(A/this.pageSize,F.buffer.slice(A,A+this.pageSize));this.byteLength=F.buffer.length,this.length=8*this.byteLength}},F71=function(F){if(Buffer.alloc)return Buffer.alloc(F);var A=new Buffer(F);return A.fill(0),A},A71=function(F){return!(F&F-1)},e91=mT();dT.exports=K4;K4.prototype.get=function(F){var A=F&7,B=(F-A)/8;return!!(this.getByte(B)&128>>A)};K4.prototype.getByte=function(F){var A=F&this._pageMask,B=(F-A)/this.pageSize,D=this.pages.get(B,!0);return D?D.buffer[A+this.pageOffset]:0};K4.prototype.set=function(F,A){var B=F&7,D=(F-B)/8,J=this.getByte(D);return this.setByte(D,A?J|128>>B:J&(255^128>>B))};K4.prototype.toBuffer=function(){var F=F71(this.pages.length*this.pageSize);for(var A=0;A<this.pages.length;A++){var B=this.pages.get(A,!0),D=A*this.pageSize;if(B)B.buffer.copy(F,D,this.pageOffset,this.pageOffset+this.pageSize)}return F};K4.prototype.setByte=function(F,A){var B=F&this._pageMask,D=(F-B)/this.pageSize,J=this.pages.get(D,!1);if(B+=this.pageOffset,J.buffer[B]===A)return!1;if(J.buffer[B]=A,F>=this.byteLength)this.byteLength=F+1,this.length=this.byteLength*8;if(this._trackUpdates)this.pages.updated(J);return!0}});var lT=z((f7)=>{var J71=function(F){let A=0;function B(){const G=F.readUInt32BE(A);A+=4;const E=F.slice(A,A+G);return A+=G,D71.default({buffer:E})}const D=B(),J=B(),Z=B(),X=B(),Y=B(),$=B();return{unassigned_code_points:D,commonly_mapped_to_nothing:J,non_ASCII_space_characters:Z,prohibited_characters:X,bidirectional_r_al:Y,bidirectional_l:$}},B71=f7&&f7.__importDefault||function(F){return F&&F.__esModule?F:{default:F}};Object.defineProperty(f7,"__esModule",{value:!0});f7.createMemoryCodePoints=void 0;var D71=B71(cT());f7.createMemoryCodePoints=J71});var iT=z((pT)=>{Object.defineProperty(pT,"__esModule",{value:!0});var Z71=import.meta.require("zlib");pT.default=Z71.gunzipSync(Buffer.from("H4sIAAAAAAACA+3dTYgcWR0A8FfTnekQ47aCkBxiZpYV8RhwYQM7bA/ksoLgSRD0IOSiePAkLrowvWSF4CkHEW856MlTQHA9RKZ1ZJODsEcVcTOyhxUEbXdXtpPp1PNVV39Uz4czEyaTVOb3G6a7XtWrr/devX49/+qekG2Go7Aa2jHGyozG+Dmrzi2mP/xb/zMhLI+WlRm2byubm2h0ivVi7BYzusVjuNkt1l9uFWsutWL8OP4rzV9KeXdsKx1HFhbSc6vIG0fKBZ14UNfLFS6FRrGRtXh98ZvphL/x4uLV/IOzaat/vlikv/TixavxR8PQitfPpKNbffXSwgtr8fV07GX+L1967urwg5W0/t0LV37y/oWFlQtX8ping7reXE3LT680r9yPKyn/3Vn64SwdVs6m/KN0yHrp9D+RvXsqpe6MSia5mH6LSog//Xq/++O74YVTjfDFWK2VIuNSemiPppphcVYeyzcudKqFMiq6cs3vVkrzlcnE0mxeZ1Jf2ZXsSvk8TmRZWYdpalydxd5bc8eUkt1wlEbtqTVLr8XQLFpKMb+dpr9SbSOt4ozTgXUq8+Ihm8cTt0shtCvT6dwao6sxPf5ydmU208/Z0yH8IZtlvZi3e5fG12yn3PLSdPvnQ7vsK9rxyKpqevzFZGVfu3YHezvbnbvit9Xdm5fGbf/MZ7PuuNrTjLJnaofH7gm0h+VKU/g/tdUocrer3cO4yOcuycGoyLrba6Ta+lrlnkZ5ntvWCrfV39wLTuNg9QvsvHb37P8BAGCP0eNTOH5szf154JmnNQIcn7b+FziyAfX4eWnn+C6Lm4M0mj31ubkViiDV4WLvs56qN54xGS3HWER5su6nQtZubl9tcY/4atbr9e5kWewew/g2a8fdy2Yaa97+pgQAAAAAAIBHtt+dYmWwaN/byI5g/9PYVfMvb4YvvDpOLJxvFgueP9VbPXh8/yCZViZxNYATaejmDQAAAACgfjJ/3QUA4JD3Px1InT+5PtQCAAAAAAAAAKD2xP8BAAAAAAAAoP7E/wEAAAAAAACg/sT/AQAAAAAAAKD+xP8BAAAAAAAAoP7E/wEAAAAAAACg/sT/AQAAAAAAAKD+xP8BAAAAAAAAoP7E/wEAAAAAAACg/sT/AQAAAAAAAKD+xP8BAAAAAAAAoP6G6+khVCgSAAAAAAAAAKidYQjLYVfNcPSyAE+dhQsnvAAq59/VHAAAAAAAAOCJmv8E/w4HiLqf3nWuWCB1pe0esg/pT3sKd+m4XjhpFpZH3/1THTcU6cfRLnrHf3ZNPZs+bf9rwPuIUPYAWb+j/Zy0EaAxAAAAAADwrPJ1IMBenu6ea99M+0W/17wCAAAAAAAAnGRLm8oA4JnQUAQAAAAAAAAAUHvi/wAAAAAAAABQf+L/AAAAAAAAAFB/4v8AAAAAAAAAUH/i/wAAAAAAAABQf+L/AAAAAAAAAFB/4v8AAAAAAAAAUH/i/wAAAAAAAABQf+L/AAAAAAAAAFB/4v8AAAAAAAAAUH/i/wAAAAAAAABQf+L/AAAAAAAAAFB/jdX0ECsUCQAAAAAAAADUTiMCAAAAAAAAAHU3VAQAAAAAAAAAUH8hLNf1uwsWbhT/uWBzUEx/ei1Nxc001VqrnN2wuRjCK3G4HuNgtuJoSVj17Q9QyBQBAAAAAAAAHMKpuJ4/+Otc5L2XZi8dJlQ/LCPXhc4keJ9UI9uFre3rDfY9uoXZPQBFHL34HSWWm8sx5rH83d967IfZMRZHHG/2Qi8MFnbscXnhnzHei5NND8P2bW2OT3G8vFeebBHbz9dGEf5jDt+fK4/mTve1bnwndsNL92+mE/75xhs/yz65Ed/ZbP29SP96oxvCDxrxcjj333R262/d6X6tG66lYy/z/+rtMn83nHvv9nfOv/dw4+pvspCl4v7+1npa/nHvtbSvjSJ/mf79/VuLC7N03LiW8o/SMU8ldO+jPOul1OVQ3vVwK+TZqBLCt3/RXvveS7eaD0L8YyhrJeV/cC0WGTdD1hzlCo2H98vzK9a+963V7qRVTeaNa+ZGpWp+N62jSmOetJD8dn67fB4n8nzchG7n4+os2tcgzLWUQVg70rta8lE7nqW7IW710v7eDsV1F7e6433njYfd9j9Gl2KIveptMePVamOXQuhXO5tUk6Pv+kiPX43T7/3YevDy4MN+HLw8CHPX6OqOOwKe73z0+pnf3rvT6pX76j/SUU7/3UjqX5r7ZW7PdZU8Vq2id+29Pphdh3n1Tqp/t0aXaWVOPnsFGre+waRdpKf/TK+7fiX3bOWluVeJg77AAPNDwr37fwAA2GP0+BSOHwcn6/231ghwfPr6X+DIBtTj582d47s8LD3xMeYktt+YHXHe6XQuH9P4Nu+H3ctmGmve/qYEAAAAAACAR7bfnWJlsGgSNNoM54tPZ23EI4vYzPY1/fzq1ud/GP/01jjx8P2tYsG7DzrrB4/vHySTz5YB+n8AAAAAgJrJ/XEXAIDHEf/2yXUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgGdABAAAAAAAAADqbqgIAAAAAAAAAKD2hv8DWK79UBhoBgA=","base64"))});var aT=z((WG,sT)=>{var y5=function(F,A){return Y71.default(E71,F,A)},nT=WG&&WG.__importDefault||function(F){return F&&F.__esModule?F:{default:F}},Y71=nT(yT()),$71=lT(),G71=nT(iT()),E71=$71.createMemoryCodePoints(G71.default);y5.saslprep=y5;y5.default=y5;sT.exports=y5});var Xj=z((Jj)=>{var oT=function(F){return F.replace("=","=3D").replace(",","=2C")},eT=function(F,A){return Buffer.concat([Buffer.from("n=","utf8"),Buffer.from(F,"utf8"),Buffer.from(",r=","utf8"),Buffer.from(A.toString("base64"),"utf8")])},Fj=function(F,A,B){const D=oT(A.username);return{saslStart:1,mechanism:F==="sha1"?rT.AuthMechanism.MONGODB_SCRAM_SHA1:rT.AuthMechanism.MONGODB_SCRAM_SHA256,payload:new CG.Binary(Buffer.concat([Buffer.from("n,,","utf8"),eT(D,B)])),autoAuthorize:1,options:{skipEmptyExchange:!0}}};async function H71(F,A){const{connection:B,credentials:D}=A;if(!D)throw new f6.MongoMissingCredentialsError("AuthContext must provide credentials.");if(!A.nonce)throw new f6.MongoInvalidArgumentError("AuthContext must contain a valid nonce property");const J=A.nonce,Z=D.source,X=Fj(F,D,J),Y=await B.command(_B.ns(`${Z}.\$cmd`),X,void 0);await Aj(F,Y,A)}async function Aj(F,A,B){const{connection:D,credentials:J}=B;if(!J)throw new f6.MongoMissingCredentialsError("AuthContext must provide credentials.");if(!B.nonce)throw new f6.MongoInvalidArgumentError("Unable to continue SCRAM without valid nonce");const Z=B.nonce,X=J.source,Y=oT(J.username),$=J.password,G=F==="sha256"?W71.saslprep($):q71(Y,$),E=Buffer.isBuffer(A.payload)?new CG.Binary(A.payload):A.payload,W=tT(E),C=parseInt(W.i,10);if(C&&C<4096)throw new f6.MongoRuntimeError(`Server returned an invalid iteration count ${C}`);const{s:H,r:q}=W;if(q.startsWith("nonce"))throw new f6.MongoRuntimeError(`Server returned an invalid nonce: ${q}`);const K=`c=biws,r=${q}`,U=L71(G,Buffer.from(H,"base64"),C,F),Q=xB(F,U,"Client Key"),V=xB(F,U,"Server Key"),L=z71(F,Q),N=[eT(Y,Z),E.toString("utf8"),K].join(","),h=xB(F,L,N),T=`p=${K71(Q,h)}`,P=[K,T].join(","),x=xB(F,V,N),c={saslContinue:1,conversationId:A.conversationId,payload:new CG.Binary(Buffer.from(P))},u=await D.command(_B.ns(`${X}.\$cmd`),c,void 0),O=tT(u.payload);if(!V71(Buffer.from(O.v,"base64"),x))throw new f6.MongoRuntimeError("Server returned an invalid signature");if(u.done!==!1)return;const j={saslContinue:1,conversationId:u.conversationId,payload:Buffer.alloc(0)};await D.command(_B.ns(`${X}.\$cmd`),j,void 0)}var tT=function(F){const A=F.toString("utf8"),B={},D=A.split(",");for(let J=0;J<D.length;J++){const Z=(D[J].match(/^([^=]*)=(.*)$/)??[]).slice(1);B[Z[0]]=Z[1]}return B},q71=function(F,A){if(typeof F!=="string")throw new f6.MongoInvalidArgumentError("Username must be a string");if(typeof A!=="string")throw new f6.MongoInvalidArgumentError("Password must be a string");if(A.length===0)throw new f6.MongoInvalidArgumentError("Password cannot be empty");let B;try{B=Y9.createHash("md5")}catch(D){if(Y9.getFips())throw new Error("Auth mechanism SCRAM-SHA-1 is not supported in FIPS mode");throw D}return B.update(`${F}:mongo:${A}`,"utf8"),B.digest("hex")},K71=function(F,A){if(!Buffer.isBuffer(F))F=Buffer.from(F);if(!Buffer.isBuffer(A))A=Buffer.from(A);const B=Math.max(F.length,A.length),D=[];for(let J=0;J<B;J+=1)D.push(F[J]^A[J]);return Buffer.from(D).toString("base64")},z71=function(F,A){return Y9.createHash(F).update(A).digest()},xB=function(F,A,B){return Y9.createHmac(F,A).update(B).digest()},U71=function(){fB={},HG=0},L71=function(F,A,B,D){const J=[F,A.toString("base64"),B].join("_");if(fB[J]!=null)return fB[J];const Z=Y9.pbkdf2Sync(F,A,B,Q71[D],D);if(HG>=200)U71();return fB[J]=Z,HG+=1,Z},V71=function(F,A){if(F.length!==A.length)return!1;if(typeof Y9.timingSafeEqual==="function")return Y9.timingSafeEqual(F,A);let B=0;for(let D=0;D<F.length;D++)B|=F[D]^A[D];return B===0};Object.defineProperty(Jj,"__esModule",{value:!0});Jj.ScramSHA256=Jj.ScramSHA1=void 0;var W71=aT(),Y9=import.meta.require("crypto"),CG=S1(),f6=p(),_B=r(),C71=V3(),rT=M6();class qG extends C71.AuthProvider{constructor(F){super();this.cryptoMethod=F||"sha1"}async prepare(F,A){const B=this.cryptoMethod,D=A.credentials;if(!D)throw new f6.MongoMissingCredentialsError("AuthContext must provide credentials.");const J=await _B.randomBytes(24);return A.nonce=J,{...F,speculativeAuthenticate:{...Fj(B,D,J),db:D.source}}}async auth(F){const{reauthenticating:A,response:B}=F;if(B?.speculativeAuthenticate&&!A)return await Aj(this.cryptoMethod,B.speculativeAuthenticate,F);return await H71(this.cryptoMethod,F)}}var fB={},HG=0,Q71={sha256:32,sha1:20};class Bj extends qG{constructor(){super("sha1")}}Jj.ScramSHA1=Bj;class Dj extends qG{constructor(){super("sha256")}}Jj.ScramSHA256=Dj});var Cj=z((Ej)=>{var $j=function(F){const A={authenticate:1,mechanism:"MONGODB-X509"};if(F.username)A.user=F.username;return A};Object.defineProperty(Ej,"__esModule",{value:!0});Ej.X509=void 0;var Yj=p(),R71=r(),I71=V3();class Gj extends I71.AuthProvider{async prepare(F,A){const{credentials:B}=A;if(!B)throw new Yj.MongoMissingCredentialsError("AuthContext must provide credentials.");return{...F,speculativeAuthenticate:$j(B)}}async auth(F){const{connection:A,credentials:B}=F;if(!B)throw new Yj.MongoMissingCredentialsError("AuthContext must provide credentials.");if(F.response?.speculativeAuthenticate)return;await A.command(R71.ns("$external.$cmd"),$j(B),void 0)}}Ej.X509=Gj});var KG=z((Kj)=>{Object.defineProperty(Kj,"__esModule",{value:!0});Kj.MongoClientAuthProviders=void 0;var N71=yA(),P71=fM(),M71=yM(),T71=OT(),j71=fT(),z4=M6(),Hj=Xj(),u71=Cj(),O71=p(),S71=new Map([[z4.AuthMechanism.MONGODB_AWS,()=>new M71.MongoDBAWS],[z4.AuthMechanism.MONGODB_CR,()=>new P71.MongoCR],[z4.AuthMechanism.MONGODB_GSSAPI,()=>new N71.GSSAPI],[z4.AuthMechanism.MONGODB_OIDC,()=>new T71.MongoDBOIDC],[z4.AuthMechanism.MONGODB_PLAIN,()=>new j71.Plain],[z4.AuthMechanism.MONGODB_SCRAM_SHA1,()=>new Hj.ScramSHA1],[z4.AuthMechanism.MONGODB_SCRAM_SHA256,()=>new Hj.ScramSHA256],[z4.AuthMechanism.MONGODB_X509,()=>new u71.X509]]);class qj{constructor(){this.existingProviders=new Map}getOrCreateProvider(F){const A=this.existingProviders.get(F);if(A)return A;const B=S71.get(F)?.();if(!B)throw new O71.MongoInvalidArgumentError(`authMechanism ${F} not supported`);return this.existingProviders.set(F,B),B}}Kj.MongoClientAuthProviders=qj});var zG=z((wj)=>{Object.defineProperty(wj,"__esModule",{value:!0});wj.WaitingForSuitableServerEvent=wj.ServerSelectionSucceededEvent=wj.ServerSelectionFailedEvent=wj.ServerSelectionStartedEvent=wj.ServerSelectionEvent=void 0;var k71=r(),gB=L0();class _7{constructor(F,A,B){this.selector=F,this.operation=B,this.topologyDescription=A}}wj.ServerSelectionEvent=_7;class Uj extends _7{constructor(F,A,B){super(F,A,B);this.name=gB.SERVER_SELECTION_STARTED,this.message="Server selection started"}}wj.ServerSelectionStartedEvent=Uj;class Qj extends _7{constructor(F,A,B,D){super(F,A,D);this.name=gB.SERVER_SELECTION_FAILED,this.message="Server selection failed",this.failure=B}}wj.ServerSelectionFailedEvent=Qj;class Lj extends _7{constructor(F,A,B,D){super(F,A,D);this.name=gB.SERVER_SELECTION_SUCCEEDED,this.message="Server selection succeeded";const{host:J,port:Z}=k71.HostAddress.fromString(B).toHostPort();this.serverHost=J,this.serverPort=Z}}wj.ServerSelectionSucceededEvent=Lj;class Vj extends _7{constructor(F,A,B,D){super(F,A,D);this.name=gB.WAITING_FOR_SUITABLE_SERVER,this.message="Waiting for suitable server to become available",this.remainingTimeMS=B}}wj.WaitingForSuitableServerEvent=Vj});var VG=z((Ij)=>{Object.defineProperty(Ij,"__esModule",{value:!0});Ij.SrvPoller=Ij.SrvPollingEvent=void 0;var b71=import.meta.require("dns"),UG=import.meta.require("timers"),y71=p(),v71=d2(),QG=r();class LG{constructor(F){this.srvRecords=F}hostnames(){return new Set(this.srvRecords.map((F)=>QG.HostAddress.fromSrvRecord(F).toString()))}}Ij.SrvPollingEvent=LG;class bB extends v71.TypedEventEmitter{constructor(F){super();if(!F||!F.srvHost)throw new y71.MongoRuntimeError("Options for SrvPoller must exist and include srvHost");this.srvHost=F.srvHost,this.srvMaxHosts=F.srvMaxHosts??0,this.srvServiceName=F.srvServiceName??"mongodb",this.rescanSrvIntervalMS=60000,this.heartbeatFrequencyMS=F.heartbeatFrequencyMS??1e4,this.haMode=!1,this.generation=0,this._timeout=void 0}get srvAddress(){return`_${this.srvServiceName}._tcp.${this.srvHost}`}get intervalMS(){return this.haMode?this.heartbeatFrequencyMS:this.rescanSrvIntervalMS}start(){if(!this._timeout)this.schedule()}stop(){if(this._timeout)UG.clearTimeout(this._timeout),this.generation+=1,this._timeout=void 0}schedule(){if(this._timeout)UG.clearTimeout(this._timeout);this._timeout=UG.setTimeout(()=>{this._poll().then(void 0,QG.squashError)},this.intervalMS)}success(F){this.haMode=!1,this.schedule(),this.emit(bB.SRV_RECORD_DISCOVERY,new LG(F))}failure(){this.haMode=!0,this.schedule()}async _poll(){const F=this.generation;let A;try{A=await b71.promises.resolveSrv(this.srvAddress)}catch(D){this.failure();return}if(F!==this.generation)return;const B=[];for(let D of A)if(QG.matchesParentDomain(D.name,this.srvHost))B.push(D);if(!B.length){this.failure();return}this.success(B)}}bB.SRV_RECORD_DISCOVERY="srvRecordDiscovery";Ij.SrvPoller=bB});var gj=z((fj)=>{var Sj=function(F,A){for(let B of P2.LOCAL_SERVER_EVENTS)F.removeAllListeners(B);F.destroy(),A.emitAndLog(h1.SERVER_CLOSED,new U4.ServerClosedEvent(A.s.id,F.description.address));for(let B of P2.SERVER_RELAY_EVENTS)F.removeAllListeners(B)},c71=function(F){if(F?.directConnection)return G1.TopologyType.Single;if(F?.replicaSet)return G1.TopologyType.ReplicaSetNoPrimary;if(F?.loadBalanced)return G1.TopologyType.LoadBalanced;return G1.TopologyType.Unknown},kj=function(F,A){F.emitAndLog(h1.SERVER_OPENING,new U4.ServerOpeningEvent(F.s.id,A.address));const B=new Tj.Server(F,A,F.s.options);for(let D of P2.SERVER_RELAY_EVENTS)B.on(D,(J)=>F.emit(D,J));return B.on(Tj.Server.DESCRIPTION_RECEIVED,(D)=>F.serverUpdateHandler(D)),B.connect(),B},uj=function(F,A){if(A&&F.s.servers.has(A.address)){const B=F.s.servers.get(A.address);if(B){if(B.s.description=A,A.error instanceof k3.MongoError&&A.error.hasErrorLabel(k3.MongoErrorLabel.ResetPool)){const D=A.error.hasErrorLabel(k3.MongoErrorLabel.InterruptInUseConnections);B.pool.clear({interruptInUseConnections:D})}else if(A.error==null){const D=F.s.description.type;if(A.isDataBearing||A.type!==G1.ServerType.Unknown&&D===G1.TopologyType.Single)B.pool.ready()}}}for(let B of F.description.servers.values())if(!F.s.servers.has(B.address)){const D=kj(F,B);F.s.servers.set(B.address,D)}for(let B of F.s.servers){const D=B[0];if(F.description.hasServer(D))continue;if(!F.s.servers.has(D))continue;const J=F.s.servers.get(D);if(F.s.servers.delete(D),J)Sj(J,F)}},xj=function(F,A){while(F.length){const B=F.shift();if(!B)continue;if(B.timeout.clear(),!B[IG]){if(B.mongoLogger?.willLog(e1.MongoLoggableComponent.SERVER_SELECTION,e1.SeverityLevel.DEBUG))B.mongoLogger?.debug(e1.MongoLoggableComponent.SERVER_SELECTION,new Q4.ServerSelectionFailedEvent(B.serverSelector,B.topologyDescription,A,B.operationName));B.reject(A)}}},Oj=function(F){if(F.s.state===G1.STATE_CLOSED){xj(F[S3],new k3.MongoTopologyClosedError);return}const A=F.description.type===G1.TopologyType.Sharded,B=Array.from(F.description.servers.values()),D=F[S3].length;for(let J=0;J<D;++J){const Z=F[S3].shift();if(!Z)continue;if(Z[IG])continue;let X;try{const{serverSelector:G,previousServer:E}=Z;X=G?G(F.description,B,E?[E]:[]):B}catch(G){if(Z.timeout.clear(),F.client.mongoLogger?.willLog(e1.MongoLoggableComponent.SERVER_SELECTION,e1.SeverityLevel.DEBUG))F.client.mongoLogger?.debug(e1.MongoLoggableComponent.SERVER_SELECTION,new Q4.ServerSelectionFailedEvent(Z.serverSelector,F.description,G,Z.operationName));Z.reject(G);continue}let Y;if(X.length===0){if(!Z.waitingLogged){if(F.client.mongoLogger?.willLog(e1.MongoLoggableComponent.SERVER_SELECTION,e1.SeverityLevel.INFORMATIONAL))F.client.mongoLogger?.info(e1.MongoLoggableComponent.SERVER_SELECTION,new Q4.WaitingForSuitableServerEvent(Z.serverSelector,F.description,F.s.serverSelectionTimeoutMS!==0?F.s.serverSelectionTimeoutMS-(W6.now()-Z.startTime):-1,Z.operationName));Z.waitingLogged=!0}F[S3].push(Z);continue}else if(X.length===1)Y=F.s.servers.get(X[0].address);else{const G=W6.shuffle(X,2),E=F.s.servers.get(G[0].address),W=F.s.servers.get(G[1].address);Y=E&&W&&E.s.operationCount<W.s.operationCount?E:W}if(!Y){const G=new k3.MongoServerSelectionError("server selection returned a server description but the server was not found in the topology",F.description);if(F.client.mongoLogger?.willLog(e1.MongoLoggableComponent.SERVER_SELECTION,e1.SeverityLevel.DEBUG))F.client.mongoLogger?.debug(e1.MongoLoggableComponent.SERVER_SELECTION,new Q4.ServerSelectionFailedEvent(Z.serverSelector,F.description,G,Z.operationName));Z.reject(G);return}const $=Z.transaction;if(A&&$&&$.isActive&&Y)$.pinServer(Y);if(Z.timeout.clear(),F.client.mongoLogger?.willLog(e1.MongoLoggableComponent.SERVER_SELECTION,e1.SeverityLevel.DEBUG))F.client.mongoLogger?.debug(e1.MongoLoggableComponent.SERVER_SELECTION,new Q4.ServerSelectionSucceededEvent(Z.serverSelector,Z.topologyDescription,Y.pool.address,Z.operationName));Z.resolve(Y)}if(F[S3].length>0)for(let[,J]of F.s.servers)process.nextTick(function Z(){return J.requestCheck()})},l71=function(F,A){const D=F.servers.get(A.address)?.topologyVersion;return RG.compareTopologyVersion(D,A.topologyVersion)>0};Object.defineProperty(fj,"__esModule",{value:!0});fj.ServerCapabilities=fj.Topology=void 0;var Pj=AG(),P2=L0(),k3=p(),e1=p4(),m71=d2(),v5=T0(),Mj=x$(),W6=r(),G1=v2(),U4=UB(),Tj=m$(),RG=e8(),wG=b8(),Q4=zG(),yB=VG(),jj=hX(),d71=0,h5=W6.makeStateMachine({[G1.STATE_CLOSED]:[G1.STATE_CLOSED,G1.STATE_CONNECTING],[G1.STATE_CONNECTING]:[G1.STATE_CONNECTING,G1.STATE_CLOSING,G1.STATE_CONNECTED,G1.STATE_CLOSED],[G1.STATE_CONNECTED]:[G1.STATE_CONNECTED,G1.STATE_CLOSING,G1.STATE_CLOSED],[G1.STATE_CLOSING]:[G1.STATE_CLOSING,G1.STATE_CLOSED]}),IG=Symbol("cancelled"),S3=Symbol("waitQueue");class h1 extends m71.TypedEventEmitter{constructor(F,A,B){super();if(this.client=F,B=B??{hosts:[W6.HostAddress.fromString("localhost:27017")],...Object.fromEntries(Pj.DEFAULT_OPTIONS.entries()),...Object.fromEntries(Pj.FEATURE_FLAGS.entries())},typeof A==="string")A=[W6.HostAddress.fromString(A)];else if(!Array.isArray(A))A=[A];const D=[];for(let $ of A)if(typeof $==="string")D.push(W6.HostAddress.fromString($));else if($ instanceof W6.HostAddress)D.push($);else throw new k3.MongoRuntimeError(`Topology cannot be constructed from ${JSON.stringify($)}`);const J=c71(B),Z=d71++,X=B.srvMaxHosts==null||B.srvMaxHosts===0||B.srvMaxHosts>=D.length?D:W6.shuffle(D,B.srvMaxHosts),Y=new Map;for(let $ of X)Y.set($.toString(),new RG.ServerDescription($));if(this[S3]=new W6.List,this.s={id:Z,options:B,seedlist:D,state:G1.STATE_CLOSED,description:new jj.TopologyDescription(J,Y,B.replicaSet,void 0,void 0,void 0,B),serverSelectionTimeoutMS:B.serverSelectionTimeoutMS,heartbeatFrequencyMS:B.heartbeatFrequencyMS,minHeartbeatFrequencyMS:B.minHeartbeatFrequencyMS,servers:new Map,credentials:B?.credentials,clusterTime:void 0,connectionTimers:new Set,detectShardedTopology:($)=>this.detectShardedTopology($),detectSrvRecords:($)=>this.detectSrvRecords($)},this.mongoLogger=F.mongoLogger,this.component="topology",B.srvHost&&!B.loadBalanced)this.s.srvPoller=B.srvPoller??new yB.SrvPoller({heartbeatFrequencyMS:this.s.heartbeatFrequencyMS,srvHost:B.srvHost,srvMaxHosts:B.srvMaxHosts,srvServiceName:B.srvServiceName}),this.on(h1.TOPOLOGY_DESCRIPTION_CHANGED,this.s.detectShardedTopology);this.connectionLock=void 0}detectShardedTopology(F){const A=F.previousDescription.type,B=F.newDescription.type,D=A!==G1.TopologyType.Sharded&&B===G1.TopologyType.Sharded,Z=!!this.s.srvPoller?.listeners(yB.SrvPoller.SRV_RECORD_DISCOVERY)?.includes(this.s.detectSrvRecords);if(D&&!Z)this.s.srvPoller?.on(yB.SrvPoller.SRV_RECORD_DISCOVERY,this.s.detectSrvRecords),this.s.srvPoller?.start()}detectSrvRecords(F){const A=this.s.description;if(this.s.description=this.s.description.updateFromSrvPollingEvent(F,this.s.options.srvMaxHosts),this.s.description===A)return;uj(this),this.emitAndLog(h1.TOPOLOGY_DESCRIPTION_CHANGED,new U4.TopologyDescriptionChangedEvent(this.s.id,A,this.s.description))}get description(){return this.s.description}get loadBalanced(){return this.s.options.loadBalanced}get serverApi(){return this.s.options.serverApi}get capabilities(){return new NG(this.lastHello())}async connect(F){this.connectionLock??=this._connect(F);try{return await this.connectionLock,this}finally{this.connectionLock=void 0}return this}async _connect(F){if(F=F??{},this.s.state===G1.STATE_CONNECTED)return this;h5(this,G1.STATE_CONNECTING),this.emitAndLog(h1.TOPOLOGY_OPENING,new U4.TopologyOpeningEvent(this.s.id)),this.emitAndLog(h1.TOPOLOGY_DESCRIPTION_CHANGED,new U4.TopologyDescriptionChangedEvent(this.s.id,new jj.TopologyDescription(G1.TopologyType.Unknown),this.s.description));const A=Array.from(this.s.description.servers.values());if(this.s.servers=new Map(A.map((J)=>[J.address,kj(this,J)])),this.s.options.loadBalanced)for(let J of A){const Z=new RG.ServerDescription(J.hostAddress,void 0,{loadBalanced:this.s.options.loadBalanced});this.serverUpdateHandler(Z)}const B=F.readPreference??v5.ReadPreference.primary,D={operationName:"ping",...F};try{const J=await this.selectServer(wG.readPreferenceServerSelector(B),D);if(this.s.options[Symbol.for("@@mdb.skipPingOnConnect")]!==!0&&J&&this.s.credentials)return await J.command(W6.ns("admin.$cmd"),{ping:1},{}),h5(this,G1.STATE_CONNECTED),this.emit(h1.OPEN,this),this.emit(h1.CONNECT,this),this;return h5(this,G1.STATE_CONNECTED),this.emit(h1.OPEN,this),this.emit(h1.CONNECT,this),this}catch(J){throw this.close(),J}}close(){if(this.s.state===G1.STATE_CLOSED||this.s.state===G1.STATE_CLOSING)return;for(let F of this.s.servers.values())Sj(F,this);if(this.s.servers.clear(),h5(this,G1.STATE_CLOSING),xj(this[S3],new k3.MongoTopologyClosedError),G1.drainTimerQueue(this.s.connectionTimers),this.s.srvPoller)this.s.srvPoller.stop(),this.s.srvPoller.removeListener(yB.SrvPoller.SRV_RECORD_DISCOVERY,this.s.detectSrvRecords);this.removeListener(h1.TOPOLOGY_DESCRIPTION_CHANGED,this.s.detectShardedTopology),h5(this,G1.STATE_CLOSED),this.emitAndLog(h1.TOPOLOGY_CLOSED,new U4.TopologyClosedEvent(this.s.id))}async selectServer(F,A){let B;if(typeof F!=="function")if(typeof F==="string")B=wG.readPreferenceServerSelector(v5.ReadPreference.fromString(F));else{let W;if(F instanceof v5.ReadPreference)W=F;else v5.ReadPreference.translate(A),W=A.readPreference||v5.ReadPreference.primary;B=wG.readPreferenceServerSelector(W)}else B=F;if(A={serverSelectionTimeoutMS:this.s.serverSelectionTimeoutMS,...A},this.client.mongoLogger?.willLog(e1.MongoLoggableComponent.SERVER_SELECTION,e1.SeverityLevel.DEBUG))this.client.mongoLogger?.debug(e1.MongoLoggableComponent.SERVER_SELECTION,new Q4.ServerSelectionStartedEvent(F,this.description,A.operationName));const D=this.description.type===G1.TopologyType.Sharded,J=A.session,Z=J&&J.transaction;if(D&&Z&&Z.server){if(this.client.mongoLogger?.willLog(e1.MongoLoggableComponent.SERVER_SELECTION,e1.SeverityLevel.DEBUG))this.client.mongoLogger?.debug(e1.MongoLoggableComponent.SERVER_SELECTION,new Q4.ServerSelectionSucceededEvent(F,this.description,Z.server.pool.address,A.operationName));return Z.server}const{promise:X,resolve:Y,reject:$}=W6.promiseWithResolvers(),G=Mj.Timeout.expires(A.serverSelectionTimeoutMS??0),E={serverSelector:B,topologyDescription:this.description,mongoLogger:this.client.mongoLogger,transaction:Z,resolve:Y,reject:$,timeout:G,startTime:W6.now(),operationName:A.operationName,waitingLogged:!1,previousServer:A.previousServer};this[S3].push(E),Oj(this);try{return await Promise.race([X,E.timeout])}catch(W){if(Mj.TimeoutError.is(W)){E[IG]=!0,G.clear();const C=new k3.MongoServerSelectionError(`Server selection timed out after ${A.serverSelectionTimeoutMS} ms`,this.description);if(this.client.mongoLogger?.willLog(e1.MongoLoggableComponent.SERVER_SELECTION,e1.SeverityLevel.DEBUG))this.client.mongoLogger?.debug(e1.MongoLoggableComponent.SERVER_SELECTION,new Q4.ServerSelectionFailedEvent(F,this.description,C,A.operationName));throw C}throw W}}serverUpdateHandler(F){if(!this.s.description.hasServer(F.address))return;if(l71(this.s.description,F))return;const A=this.s.description,B=this.s.description.servers.get(F.address);if(!B)return;const D=F.$clusterTime;if(D)G1._advanceClusterTime(this,D);const J=B&&B.equals(F);if(this.s.description=this.s.description.update(F),this.s.description.compatibilityError){this.emit(h1.ERROR,new k3.MongoCompatibilityError(this.s.description.compatibilityError));return}if(!J){const Z=this.s.description.servers.get(F.address);if(Z)this.emit(h1.SERVER_DESCRIPTION_CHANGED,new U4.ServerDescriptionChangedEvent(this.s.id,F.address,B,Z))}if(uj(this,F),this[S3].length>0)Oj(this);if(!J)this.emitAndLog(h1.TOPOLOGY_DESCRIPTION_CHANGED,new U4.TopologyDescriptionChangedEvent(this.s.id,A,this.s.description))}auth(F,A){if(typeof F==="function")A=F,F=void 0;if(typeof A==="function")A(void 0,!0)}get clientMetadata(){return this.s.options.metadata}isConnected(){return this.s.state===G1.STATE_CONNECTED}isDestroyed(){return this.s.state===G1.STATE_CLOSED}lastHello(){const F=Array.from(this.description.servers.values());if(F.length===0)return{};return F.filter((D)=>D.type!==G1.ServerType.Unknown)[0]||{maxWireVersion:this.description.commonWireVersion}}get commonWireVersion(){return this.description.commonWireVersion}get logicalSessionTimeoutMinutes(){return this.description.logicalSessionTimeoutMinutes}get clusterTime(){return this.s.clusterTime}set clusterTime(F){this.s.clusterTime=F}}h1.SERVER_OPENING=P2.SERVER_OPENING;h1.SERVER_CLOSED=P2.SERVER_CLOSED;h1.SERVER_DESCRIPTION_CHANGED=P2.SERVER_DESCRIPTION_CHANGED;h1.TOPOLOGY_OPENING=P2.TOPOLOGY_OPENING;h1.TOPOLOGY_CLOSED=P2.TOPOLOGY_CLOSED;h1.TOPOLOGY_DESCRIPTION_CHANGED=P2.TOPOLOGY_DESCRIPTION_CHANGED;h1.ERROR=P2.ERROR;h1.OPEN=P2.OPEN;h1.CONNECT=P2.CONNECT;h1.CLOSE=P2.CLOSE;h1.TIMEOUT=P2.TIMEOUT;fj.Topology=h1;class NG{constructor(F){this.minWireVersion=F.minWireVersion||0,this.maxWireVersion=F.maxWireVersion||0}get hasAggregationCursor(){return this.maxWireVersion>=1}get hasWriteCommands(){return this.maxWireVersion>=2}get hasTextSearch(){return this.minWireVersion>=0}get hasAuthCommands(){return this.maxWireVersion>=1}get hasListCollectionsCommand(){return this.maxWireVersion>=3}get hasListIndexesCommand(){return this.maxWireVersion>=3}get supportsSnapshotReads(){return this.maxWireVersion>=13}get commandsTakeWriteConcern(){return this.maxWireVersion>=5}get commandsTakeCollation(){return this.maxWireVersion>=5}}fj.ServerCapabilities=NG});var A9=z((lj)=>{Object.defineProperty(lj,"__esModule",{value:!0});lj.MongoClient=lj.ServerApiVersion=void 0;var PG=import.meta.require("fs"),i71=S1(),n71=Y7(),s71=hA(),a71=M6(),bj=AG(),r71=L0(),t71=gA(),yj=p(),o71=KG(),vj=p4(),e71=d2(),F81=w2(),A81=c9(),hj=T0(),B81=b8(),mj=gj(),dj=B5(),$2=r();lj.ServerApiVersion=Object.freeze({v1:"1"});var G0=Symbol("options");class cj extends e71.TypedEventEmitter{constructor(F,A){super();this[G0]=bj.parseOptions(F,this,A);const B=Object.values(this[G0].mongoLoggerOptions.componentSeverities).some((J)=>J!==vj.SeverityLevel.OFF);this.mongoLogger=B?new vj.MongoLogger(this[G0].mongoLoggerOptions):void 0;const D=this;this.s={url:F,bsonOptions:i71.resolveBSONOptions(this[G0]),namespace:$2.ns("admin"),hasBeenClosed:!1,sessionPool:new dj.ServerSessionPool(this),activeSessions:new Set,authProviders:new o71.MongoClientAuthProviders,get options(){return D[G0]},get readConcern(){return D[G0].readConcern},get writeConcern(){return D[G0].writeConcern},get readPreference(){return D[G0].readPreference},get isMongoClient(){return!0}},this.checkForNonGenuineHosts()}checkForNonGenuineHosts(){const F=this[G0].hosts.filter((J)=>$2.isHostMatch($2.DOCUMENT_DB_CHECK,J.host)),A=$2.isHostMatch($2.DOCUMENT_DB_CHECK,this[G0].srvHost),B=this[G0].hosts.filter((J)=>$2.isHostMatch($2.COSMOS_DB_CHECK,J.host)),D=$2.isHostMatch($2.COSMOS_DB_CHECK,this[G0].srvHost);if(F.length!==0||A)this.mongoLogger?.info("client",$2.DOCUMENT_DB_MSG);else if(B.length!==0||D)this.mongoLogger?.info("client",$2.COSMOS_DB_MSG)}get options(){return Object.freeze({...this[G0]})}get serverApi(){return this[G0].serverApi&&Object.freeze({...this[G0].serverApi})}get monitorCommands(){return this[G0].monitorCommands}set monitorCommands(F){this[G0].monitorCommands=F}get autoEncrypter(){return this[G0].autoEncrypter}get readConcern(){return this.s.readConcern}get writeConcern(){return this.s.writeConcern}get readPreference(){return this.s.readPreference}get bsonOptions(){return this.s.bsonOptions}async connect(){if(this.connectionLock)return await this.connectionLock;try{this.connectionLock=this._connect(),await this.connectionLock}finally{this.connectionLock=void 0}return this}async _connect(){if(this.topology&&this.topology.isConnected())return this;const F=this[G0];if(F.tls){if(typeof F.tlsCAFile==="string")F.ca??=await PG.promises.readFile(F.tlsCAFile);if(typeof F.tlsCRLFile==="string")F.crl??=await PG.promises.readFile(F.tlsCRLFile);if(typeof F.tlsCertificateKeyFile==="string"){if(!F.key||!F.cert){const B=await PG.promises.readFile(F.tlsCertificateKeyFile);F.key??=B,F.cert??=B}}}if(typeof F.srvHost==="string"){const B=await bj.resolveSRVRecord(F);for(let[D,J]of B.entries())F.hosts[D]=J}if(F.credentials?.mechanism===a71.AuthMechanism.MONGODB_OIDC){const B=F.credentials?.mechanismProperties?.ALLOWED_HOSTS||s71.DEFAULT_ALLOWED_HOSTS;if(!F.credentials?.mechanismProperties?.PROVIDER_NAME){for(let J of F.hosts)if(!$2.hostMatchesWildcards(J.toHostPort().host,B))throw new yj.MongoInvalidArgumentError(`Host '${J}' is not valid for OIDC authentication with ALLOWED_HOSTS of '${B.join(",")}'`)}}this.topology=new mj.Topology(this,F.hosts,F),this.topology.once(mj.Topology.OPEN,()=>this.emit("open",this));for(let B of r71.MONGO_CLIENT_EVENTS)this.topology.on(B,(...D)=>this.emit(B,...D));const A=async()=>{try{await this.topology?.connect(F)}catch(B){throw this.topology?.close(),B}};if(this.autoEncrypter)await this.autoEncrypter?.init(),await A(),await F.encrypter.connectInternalClient();else await A();return this}async close(F=!1){Object.defineProperty(this.s,"hasBeenClosed",{value:!0,enumerable:!0,configurable:!1,writable:!1});const A=Array.from(this.s.activeSessions,($)=>$.endSession());if(this.s.activeSessions.clear(),await Promise.all(A),this.topology==null)return;const B=B81.readPreferenceServerSelector(hj.ReadPreference.primaryPreferred),D=this.topology.description,J=Array.from(D.servers.values());if(B(D,J).length!==0){const $=Array.from(this.s.sessionPool.sessions,({id:G})=>G);if($.length!==0)try{await F81.executeOperation(this,new A81.RunAdminCommandOperation({endSessions:$},{readPreference:hj.ReadPreference.primaryPreferred,noResponse:!0}))}catch(G){$2.squashError(G)}}const X=this.topology;this.topology=void 0,X.close();const{encrypter:Y}=this[G0];if(Y)await Y.close(this,F)}db(F,A){if(A=A??{},!F)F=this.options.dbName;const B=Object.assign({},this[G0],A);return new t71.Db(this,F,B)}static async connect(F,A){return await new this(F,A).connect()}startSession(F){const A=new dj.ClientSession(this,this.s.sessionPool,{explicit:!0,...F},this[G0]);return this.s.activeSessions.add(A),A.once("ended",()=>{this.s.activeSessions.delete(A)}),A}async withSession(F,A){const B={owner:Symbol(),...typeof F==="object"?F:{}},D=typeof F==="function"?F:A;if(D==null)throw new yj.MongoInvalidArgumentError("Missing required callback parameter");const J=this.startSession(B);try{return await D(J)}finally{try{await J.endSession()}catch(Z){$2.squashError(Z)}}}watch(F=[],A={}){if(!Array.isArray(F))A=F,F=[];return new n71.ChangeStream(this,F,$2.resolveOptions(this,A))}}lj.MongoClient=cj});var Y7=z((ij)=>{Object.defineProperty(ij,"__esModule",{value:!0});ij.ChangeStream=void 0;var J81=r4(),b6=L0(),Z81=TY(),X81=gA(),_6=p(),Y81=A9(),$81=d2(),g6=r(),g7=Symbol("cursorStream"),b7=Symbol("closed"),m5=Symbol("mode"),G81=["resumeAfter","startAfter","startAtOperationTime","fullDocument","fullDocumentBeforeChange","showExpandedEvents"],$9={COLLECTION:Symbol("Collection"),DATABASE:Symbol("Database"),CLUSTER:Symbol("Cluster")},E81=[b6.RESUME_TOKEN_CHANGED,b6.END,b6.CLOSE],W81="A change stream document has been received that lacks a resume token (_id).",vB="ChangeStream is closed";class M2 extends $81.TypedEventEmitter{constructor(F,A=[],B={}){super();if(this.pipeline=A,this.options={...B},delete this.options.writeConcern,F instanceof J81.Collection)this.type=$9.COLLECTION;else if(F instanceof X81.Db)this.type=$9.DATABASE;else if(F instanceof Y81.MongoClient)this.type=$9.CLUSTER;else throw new _6.MongoChangeStreamError("Parent provided to ChangeStream constructor must be an instance of Collection, Db, or MongoClient");if(this.parent=F,this.namespace=F.s.namespace,!this.options.readPreference&&F.readPreference)this.options.readPreference=F.readPreference;this.cursor=this._createChangeStreamCursor(B),this[b7]=!1,this[m5]=!1,this.on("newListener",(D)=>{if(D==="change"&&this.cursor&&this.listenerCount("change")===0)this._streamEvents(this.cursor)}),this.on("removeListener",(D)=>{if(D==="change"&&this.listenerCount("change")===0&&this.cursor)this[g7]?.removeAllListeners("data")})}get cursorStream(){return this[g7]}get resumeToken(){return this.cursor?.resumeToken}async hasNext(){this._setIsIterator();while(!0)try{return await this.cursor.hasNext()}catch(F){try{await this._processErrorIteratorMode(F)}catch(A){try{await this.close()}catch(B){g6.squashError(B)}throw A}}}async next(){this._setIsIterator();while(!0)try{const F=await this.cursor.next();return this._processChange(F??null)}catch(F){try{await this._processErrorIteratorMode(F)}catch(A){try{await this.close()}catch(B){g6.squashError(B)}throw A}}}async tryNext(){this._setIsIterator();while(!0)try{return await this.cursor.tryNext()??null}catch(F){try{await this._processErrorIteratorMode(F)}catch(A){try{await this.close()}catch(B){g6.squashError(B)}throw A}}}async*[Symbol.asyncIterator](){if(this.closed)return;try{while(!0)yield await this.next()}finally{try{await this.close()}catch(F){g6.squashError(F)}}}get closed(){return this[b7]||this.cursor.closed}async close(){this[b7]=!0;const F=this.cursor;try{await F.close()}finally{this._endStream()}}stream(F){if(this.closed)throw new _6.MongoChangeStreamError(vB);return this.streamOptions=F,this.cursor.stream(F)}_setIsEmitter(){if(this[m5]==="iterator")throw new _6.MongoAPIError("ChangeStream cannot be used as an EventEmitter after being used as an iterator");this[m5]="emitter"}_setIsIterator(){if(this[m5]==="emitter")throw new _6.MongoAPIError("ChangeStream cannot be used as an iterator after being used as an EventEmitter");this[m5]="iterator"}_createChangeStreamCursor(F){const A=g6.filterOptions(F,G81);if(this.type===$9.CLUSTER)A.allChangesForCluster=!0;const B=[{$changeStream:A},...this.pipeline],D=this.type===$9.CLUSTER?this.parent:this.type===$9.DATABASE?this.parent.client:this.type===$9.COLLECTION?this.parent.client:null;if(D==null)throw new _6.MongoRuntimeError(`Changestream type should only be one of cluster, database, collection. Found ${this.type.toString()}`);const J=new Z81.ChangeStreamCursor(D,this.namespace,B,F);for(let Z of E81)J.on(Z,(X)=>this.emit(Z,X));if(this.listenerCount(M2.CHANGE)>0)this._streamEvents(J);return J}_closeEmitterModeWithError(F){this.emit(M2.ERROR,F),this.close().then(void 0,g6.squashError)}_streamEvents(F){this._setIsEmitter();const A=this[g7]??F.stream();this[g7]=A,A.on("data",(B)=>{try{const D=this._processChange(B);this.emit(M2.CHANGE,D)}catch(D){this.emit(M2.ERROR,D)}}),A.on("error",(B)=>this._processErrorStreamMode(B))}_endStream(){const F=this[g7];if(F)["data","close","end","error"].forEach((A)=>F.removeAllListeners(A)),F.destroy();this[g7]=void 0}_processChange(F){if(this[b7])throw new _6.MongoAPIError(vB);if(F==null)throw new _6.MongoRuntimeError(vB);if(F&&!F._id)throw new _6.MongoChangeStreamError(W81);return this.cursor.cacheResumeToken(F._id),this.options.startAtOperationTime=void 0,F}_processErrorStreamMode(F){if(this[b7])return;if(_6.isResumableError(F,this.cursor.maxWireVersion))this._endStream(),this.cursor.close().then(void 0,g6.squashError),g6.getTopology(this.parent).selectServer(this.cursor.readPreference,{operationName:"reconnect topology in change stream"}).then(()=>{this.cursor=this._createChangeStreamCursor(this.cursor.resumeOptions)},()=>this._closeEmitterModeWithError(F));else this._closeEmitterModeWithError(F)}async _processErrorIteratorMode(F){if(this[b7])throw new _6.MongoAPIError(vB);if(!_6.isResumableError(F,this.cursor.maxWireVersion)){try{await this.close()}catch(B){g6.squashError(B)}throw F}try{await this.cursor.close()}catch(B){g6.squashError(B)}const A=g6.getTopology(this.parent);try{await A.selectServer(this.cursor.readPreference,{operationName:"reconnect topology in change stream"}),this.cursor=this._createChangeStreamCursor(this.cursor.resumeOptions)}catch{throw await this.close(),F}}}M2.RESPONSE=b6.RESPONSE;M2.MORE=b6.MORE;M2.INIT=b6.INIT;M2.CLOSE=b6.CLOSE;M2.CHANGE=b6.CHANGE;M2.END=b6.END;M2.ERROR=b6.ERROR;M2.RESUME_TOKEN_CHANGED=b6.RESUME_TOKEN_CHANGED;ij.ChangeStream=M2});var MG=z((aj)=>{var sj=function(F){if(F.s.init)throw new n2.MongoGridFSStreamError("Options cannot be changed after the stream is initialized")},H81=function(F){if(F.destroyed)return;if(!F.s.cursor)return;if(!F.s.file)return;const A=(B)=>{if(F.destroyed)return;if(!B){F.push(null),F.s.cursor?.close().then(void 0,(W)=>F.destroy(W));return}if(!F.s.file)return;const D=F.s.file.length-F.s.bytesRead,J=F.s.expected++,Z=Math.min(F.s.file.chunkSize,D);if(B.n>J)return F.destroy(new n2.MongoGridFSChunkError(`ChunkIsMissing: Got unexpected n: ${B.n}, expected: ${J}`));if(B.n<J)return F.destroy(new n2.MongoGridFSChunkError(`ExtraChunk: Got unexpected n: ${B.n}, expected: ${J}`));let X=Buffer.isBuffer(B.data)?B.data:B.data.buffer;if(X.byteLength!==Z){if(D<=0)return F.destroy(new n2.MongoGridFSChunkError(`ExtraChunk: Got unexpected n: ${B.n}, expected file length ${F.s.file.length} bytes but already read ${F.s.bytesRead} bytes`));return F.destroy(new n2.MongoGridFSChunkError(`ChunkIsWrongSize: Got unexpected length: ${X.byteLength}, expected: ${Z}`))}if(F.s.bytesRead+=X.byteLength,X.byteLength===0)return F.push(null);let Y=null,$=null;if(F.s.bytesToSkip!=null)Y=F.s.bytesToSkip,F.s.bytesToSkip=0;const G=J===F.s.expectedEnd-1,E=F.s.options.end-F.s.bytesToSkip;if(G&&F.s.bytesToTrim!=null)$=F.s.file.chunkSize-F.s.bytesToTrim;else if(F.s.options.end&&E<B.data.byteLength)$=E;if(Y!=null||$!=null)X=X.slice(Y||0,$||X.byteLength);F.push(X);return};F.s.cursor.next().then(A,(B)=>{if(F.destroyed)return;F.destroy(B)})},q81=function(F){const A={};if(F.s.readPreference)A.readPreference=F.s.readPreference;if(F.s.options&&F.s.options.sort)A.sort=F.s.options.sort;if(F.s.options&&F.s.options.skip)A.skip=F.s.options.skip;const B=(D)=>{if(F.destroyed)return;if(!D){const X=`FileNotFound: file ${F.s.filter._id?F.s.filter._id.toString():F.s.filter.filename} was not found`,Y=new n2.MongoRuntimeError(X);return Y.code="ENOENT",F.destroy(Y)}if(D.length<=0){F.push(null);return}if(F.destroyed){F.destroy();return}try{F.s.bytesToSkip=z81(F,D,F.s.options)}catch(Z){return F.destroy(Z)}const J={files_id:D._id};if(F.s.options&&F.s.options.start!=null){const Z=Math.floor(F.s.options.start/D.chunkSize);if(Z>0)J.n={$gte:Z}}if(F.s.cursor=F.s.chunks.find(J).sort({n:1}),F.s.readPreference)F.s.cursor.withReadPreference(F.s.readPreference);F.s.expectedEnd=Math.ceil(D.length/D.chunkSize),F.s.file=D;try{F.s.bytesToTrim=U81(F,D,F.s.cursor,F.s.options)}catch(Z){return F.destroy(Z)}F.emit(hB.FILE,D);return};F.s.files.findOne(F.s.filter,A).then(B,(D)=>{if(F.destroyed)return;F.destroy(D)})},K81=function(F,A){if(F.s.file)return A();if(!F.s.init)q81(F),F.s.init=!0;F.once("file",()=>{A()})},z81=function(F,A,B){if(B&&B.start!=null){if(B.start>A.length)throw new n2.MongoInvalidArgumentError(`Stream start (${B.start}) must not be more than the length of the file (${A.length})`);if(B.start<0)throw new n2.MongoInvalidArgumentError(`Stream start (${B.start}) must not be negative`);if(B.end!=null&&B.end<B.start)throw new n2.MongoInvalidArgumentError(`Stream start (${B.start}) must not be greater than stream end (${B.end})`);return F.s.bytesRead=Math.floor(B.start/A.chunkSize)*A.chunkSize,F.s.expected=Math.floor(B.start/A.chunkSize),B.start-F.s.bytesRead}throw new n2.MongoInvalidArgumentError("Start option must be defined")},U81=function(F,A,B,D){if(D&&D.end!=null){if(D.end>A.length)throw new n2.MongoInvalidArgumentError(`Stream end (${D.end}) must not be more than the length of the file (${A.length})`);if(D.start==null||D.start<0)throw new n2.MongoInvalidArgumentError(`Stream end (${D.end}) must not be negative`);const J=D.start!=null?Math.floor(D.start/A.chunkSize):0;return B.limit(Math.ceil(D.end/A.chunkSize)-J),F.s.expectedEnd=Math.ceil(D.end/A.chunkSize),Math.ceil(D.end/A.chunkSize)*A.chunkSize-D.end}throw new n2.MongoInvalidArgumentError("End option must be defined")};Object.defineProperty(aj,"__esModule",{value:!0});aj.GridFSBucketReadStream=void 0;var C81=import.meta.require("stream"),n2=p();class hB extends C81.Readable{constructor(F,A,B,D,J){super({emitClose:!0});this.s={bytesToTrim:0,bytesToSkip:0,bytesRead:0,chunks:F,expected:0,files:A,filter:D,init:!1,expectedEnd:0,options:{start:0,end:0,...J},readPreference:B}}_read(){if(this.destroyed)return;K81(this,()=>H81(this))}start(F=0){return sj(this),this.s.options.start=F,this}end(F=0){return sj(this),this.s.options.end=F,this}async abort(){this.push(null),this.destroy(),await this.s.cursor?.close()}}hB.FILE="file";aj.GridFSBucketReadStream=hB});var uG=z((Fu)=>{var jG=function(F,A,B){if(F.state.errored){process.nextTick(B);return}F.state.errored=!0,process.nextTick(B,A)},ej=function(F,A,B){return{_id:new tj.ObjectId,files_id:F,n:A,data:B}};async function w81(F){const A={files_id:1,n:1};let B;try{B=await F.chunks.listIndexes().toArray()}catch(J){if(J instanceof G9.MongoError&&J.code===G9.MONGODB_ERROR_CODES.NamespaceNotFound)B=[];else throw J}if(!B.find((J)=>{if(Object.keys(J.key).length===2&&J.key.files_id===1&&J.key.n===1)return!0;return!1}))await F.chunks.createIndex(A,{...F.writeConcern,background:!0,unique:!0})}var TG=function(F,A){if(F.done)return process.nextTick(A);if(F.state.streamEnd&&F.state.outstandingRequests===0&&!F.state.errored){F.done=!0;const B=I81(F.id,F.length,F.chunkSizeBytes,F.filename,F.options.contentType,F.options.aliases,F.options.metadata);if(mB(F,A))return;F.files.insertOne(B,{writeConcern:F.writeConcern}).then(()=>{F.gridFSFile=B,A()},(D)=>jG(F,D,A));return}process.nextTick(A)};async function R81(F){if(await F.files.findOne({},{projection:{_id:1}})!=null)return;const B={filename:1,uploadDate:1};let D;try{D=await F.files.listIndexes().toArray()}catch(Z){if(Z instanceof G9.MongoError&&Z.code===G9.MONGODB_ERROR_CODES.NamespaceNotFound)D=[];else throw Z}if(!D.find((Z)=>{if(Object.keys(Z.key).length===2&&Z.key.filename===1&&Z.key.uploadDate===1)return!0;return!1}))await F.files.createIndex(B,{background:!1});await w81(F)}var I81=function(F,A,B,D,J,Z,X){const Y={_id:F,length:A,chunkSize:B,uploadDate:new Date,filename:D};if(J)Y.contentType=J;if(Z)Y.aliases=Z;if(X)Y.metadata=X;return Y},N81=function(F,A,B,D){if(mB(F,D))return;const J=Buffer.isBuffer(A)?A:Buffer.from(A,B);if(F.length+=J.length,F.pos+J.length<F.chunkSizeBytes){J.copy(F.bufToStore,F.pos),F.pos+=J.length,process.nextTick(D);return}let Z=J.length,X=F.chunkSizeBytes-F.pos,Y=Math.min(X,J.length),$=0;while(Z>0){const G=J.length-Z;J.copy(F.bufToStore,F.pos,G,G+Y),F.pos+=Y,X-=Y;let E;if(X===0){if(E=ej(F.id,F.n,Buffer.from(F.bufToStore)),++F.state.outstandingRequests,++$,mB(F,D))return;F.chunks.insertOne(E,{writeConcern:F.writeConcern}).then(()=>{if(--F.state.outstandingRequests,--$,!$)TG(F,D)},(W)=>jG(F,W,D)),X=F.chunkSizeBytes,F.pos=0,++F.n}Z-=Y,Y=Math.min(X,Z)}},P81=function(F,A){if(F.pos===0)return TG(F,A);++F.state.outstandingRequests;const B=Buffer.alloc(F.pos);F.bufToStore.copy(B,0,0,F.pos);const D=ej(F.id,F.n,B);if(mB(F,A))return;F.chunks.insertOne(D,{writeConcern:F.writeConcern}).then(()=>{--F.state.outstandingRequests,TG(F,A)},(J)=>jG(F,J,A))},mB=function(F,A){if(F.state.aborted)return process.nextTick(A,new G9.MongoAPIError("Stream has been aborted")),!0;return!1};Object.defineProperty(Fu,"__esModule",{value:!0});Fu.GridFSBucketWriteStream=void 0;var Q81=import.meta.require("stream"),tj=S1(),G9=p(),L81=r(),V81=V2();class oj extends Q81.Writable{constructor(F,A,B){super();if(this.gridFSFile=null,B=B??{},this.bucket=F,this.chunks=F.s._chunksCollection,this.filename=A,this.files=F.s._filesCollection,this.options=B,this.writeConcern=V81.WriteConcern.fromOptions(B)||F.s.options.writeConcern,this.done=!1,this.id=B.id?B.id:new tj.ObjectId,this.chunkSizeBytes=B.chunkSizeBytes||this.bucket.s.options.chunkSizeBytes,this.bufToStore=Buffer.alloc(this.chunkSizeBytes),this.length=0,this.n=0,this.pos=0,this.state={streamEnd:!1,outstandingRequests:0,errored:!1,aborted:!1},!this.bucket.s.calledOpenUploadStream)this.bucket.s.calledOpenUploadStream=!0,R81(this).then(()=>{this.bucket.s.checkedIndexes=!0,this.bucket.emit("index")},L81.squashError)}_construct(F){if(this.bucket.s.checkedIndexes)return process.nextTick(F);this.bucket.once("index",F)}_write(F,A,B){N81(this,F,A,B)}_final(F){if(this.state.streamEnd)return process.nextTick(F);this.state.streamEnd=!0,P81(this,F)}async abort(){if(this.state.streamEnd)throw new G9.MongoAPIError("Cannot abort a stream that has already completed");if(this.state.aborted)throw new G9.MongoAPIError("Cannot call abort() on a stream twice");this.state.aborted=!0,await this.chunks.deleteMany({files_id:this.id})}}Fu.GridFSBucketWriteStream=oj});var Yu=z((Zu)=>{Object.defineProperty(Zu,"__esModule",{value:!0});Zu.GridFSBucket=void 0;var Bu=p(),M81=d2(),T81=V2(),Du=MG(),Ju=uG(),j81={bucketName:"fs",chunkSizeBytes:261120};class OG extends M81.TypedEventEmitter{constructor(F,A){super();this.setMaxListeners(0);const B={...j81,...A,writeConcern:T81.WriteConcern.fromOptions(A)};this.s={db:F,options:B,_chunksCollection:F.collection(B.bucketName+".chunks"),_filesCollection:F.collection(B.bucketName+".files"),checkedIndexes:!1,calledOpenUploadStream:!1}}openUploadStream(F,A){return new Ju.GridFSBucketWriteStream(this,F,A)}openUploadStreamWithId(F,A,B){return new Ju.GridFSBucketWriteStream(this,A,{...B,id:F})}openDownloadStream(F,A){return new Du.GridFSBucketReadStream(this.s._chunksCollection,this.s._filesCollection,this.s.options.readPreference,{_id:F},A)}async delete(F){const{deletedCount:A}=await this.s._filesCollection.deleteOne({_id:F});if(await this.s._chunksCollection.deleteMany({files_id:F}),A===0)throw new Bu.MongoRuntimeError(`File not found for id ${F}`)}find(F={},A={}){return this.s._filesCollection.find(F,A)}openDownloadStreamByName(F,A){let B={uploadDate:-1},D=void 0;if(A&&A.revision!=null)if(A.revision>=0)B={uploadDate:1},D=A.revision;else D=-A.revision-1;return new Du.GridFSBucketReadStream(this.s._chunksCollection,this.s._filesCollection,this.s.options.readPreference,{filename:F},{...A,sort:B,skip:D})}async rename(F,A){const B={_id:F},D={$set:{filename:A}},{matchedCount:J}=await this.s._filesCollection.updateOne(B,D);if(J===0)throw new Bu.MongoRuntimeError(`File with id ${F} not found`)}async drop(){await this.s._filesCollection.drop(),await this.s._chunksCollection.drop()}}OG.INDEX="index";Zu.GridFSBucket=OG});var Eu=z(($u)=>{Object.defineProperty($u,"__esModule",{value:!0});$u.ClientEncryption=void 0;var D3=S1(),u81=P6(),L4=r(),O81=W$(),E9=e4(),S81=z$(),dB=U$();class cB{static getMongoCrypt(){const F=u81.getMongoDBClientEncryption();if("kModuleError"in F)throw F.kModuleError;return F.MongoCrypt}constructor(F,A){if(this._client=F,this._proxyOptions=A.proxyOptions??{},this._tlsOptions=A.tlsOptions??{},this._kmsProviders=A.kmsProviders||{},A.keyVaultNamespace==null)throw new E9.MongoCryptInvalidArgumentError("Missing required option `keyVaultNamespace`");const B={...A,cryptoCallbacks:O81,kmsProviders:!Buffer.isBuffer(this._kmsProviders)?D3.serialize(this._kmsProviders):this._kmsProviders};this._keyVaultNamespace=A.keyVaultNamespace,this._keyVaultClient=A.keyVaultClient||F;const D=cB.getMongoCrypt();this._mongoCrypt=new D(B)}async createDataKey(F,A={}){if(A.keyAltNames&&!Array.isArray(A.keyAltNames))throw new E9.MongoCryptInvalidArgumentError(`Option "keyAltNames" must be an array of strings, but was of type ${typeof A.keyAltNames}.`);let B=void 0;if(A.keyAltNames&&A.keyAltNames.length>0)B=A.keyAltNames.map((W,C)=>{if(typeof W!=="string")throw new E9.MongoCryptInvalidArgumentError(`Option "keyAltNames" must be an array of strings, but item at index ${C} was of type ${typeof W}`);return D3.serialize({keyAltName:W})});let D=void 0;if(A.keyMaterial)D=D3.serialize({keyMaterial:A.keyMaterial});const J=D3.serialize({provider:F,...A.masterKey}),Z=this._mongoCrypt.makeDataKeyContext(J,{keyAltNames:B,keyMaterial:D}),Y=await new dB.StateMachine({proxyOptions:this._proxyOptions,tlsOptions:this._tlsOptions}).execute(this,Z),{db:$,collection:G}=L4.MongoDBCollectionNamespace.fromString(this._keyVaultNamespace),{insertedId:E}=await this._keyVaultClient.db($).collection(G).insertOne(Y,{writeConcern:{w:"majority"}});return E}async rewrapManyDataKey(F,A){let B=void 0;if(A){const W=Object.assign({provider:A.provider},A.masterKey);B=D3.serialize(W)}const D=D3.serialize(F),J=this._mongoCrypt.makeRewrapManyDataKeyContext(D,B),Z=new dB.StateMachine({proxyOptions:this._proxyOptions,tlsOptions:this._tlsOptions}),{v:X}=await Z.execute(this,J);if(X.length===0)return{};const{db:Y,collection:$}=L4.MongoDBCollectionNamespace.fromString(this._keyVaultNamespace),G=X.map((W)=>({updateOne:{filter:{_id:W._id},update:{$set:{masterKey:W.masterKey,keyMaterial:W.keyMaterial},$currentDate:{updateDate:!0}}}}));return{bulkWriteResult:await this._keyVaultClient.db(Y).collection($).bulkWrite(G,{writeConcern:{w:"majority"}})}}async deleteKey(F){const{db:A,collection:B}=L4.MongoDBCollectionNamespace.fromString(this._keyVaultNamespace);return await this._keyVaultClient.db(A).collection(B).deleteOne({_id:F},{writeConcern:{w:"majority"}})}getKeys(){const{db:F,collection:A}=L4.MongoDBCollectionNamespace.fromString(this._keyVaultNamespace);return this._keyVaultClient.db(F).collection(A).find({},{readConcern:{level:"majority"}})}async getKey(F){const{db:A,collection:B}=L4.MongoDBCollectionNamespace.fromString(this._keyVaultNamespace);return await this._keyVaultClient.db(A).collection(B).findOne({_id:F},{readConcern:{level:"majority"}})}async getKeyByAltName(F){const{db:A,collection:B}=L4.MongoDBCollectionNamespace.fromString(this._keyVaultNamespace);return await this._keyVaultClient.db(A).collection(B).findOne({keyAltNames:F},{readConcern:{level:"majority"}})}async addKeyAltName(F,A){const{db:B,collection:D}=L4.MongoDBCollectionNamespace.fromString(this._keyVaultNamespace);return await this._keyVaultClient.db(B).collection(D).findOneAndUpdate({_id:F},{$addToSet:{keyAltNames:A}},{writeConcern:{w:"majority"},returnDocument:"before"})}async removeKeyAltName(F,A){const{db:B,collection:D}=L4.MongoDBCollectionNamespace.fromString(this._keyVaultNamespace),J=[{$set:{keyAltNames:{$cond:[{$eq:["$keyAltNames",[A]]},"$$REMOVE",{$filter:{input:"$keyAltNames",cond:{$ne:["$$this",A]}}}]}}}];return await this._keyVaultClient.db(B).collection(D).findOneAndUpdate({_id:F},J,{writeConcern:{w:"majority"},returnDocument:"before"})}async createEncryptedCollection(F,A,B){const{provider:D,masterKey:J,createCollectionOptions:{encryptedFields:{...Z},...X}}=B;if(Array.isArray(Z.fields)){const Y=Z.fields.map(async(E)=>E==null||typeof E!=="object"||E.keyId!=null?E:{...E,keyId:await this.createDataKey(D,{masterKey:J})}),$=await Promise.allSettled(Y);Z.fields=$.map((E,W)=>E.status==="fulfilled"?E.value:Z.fields[W]);const G=$.find((E)=>E.status==="rejected");if(G!=null)throw new E9.MongoCryptCreateDataKeyError(Z,{cause:G.reason})}try{return{collection:await F.createCollection(A,{...X,encryptedFields:Z}),encryptedFields:Z}}catch(Y){throw new E9.MongoCryptCreateEncryptedCollectionError(Z,{cause:Y})}}async encrypt(F,A){return await this._encrypt(F,!1,A)}async encryptExpression(F,A){return await this._encrypt(F,!0,A)}async decrypt(F){const A=D3.serialize({v:F}),B=this._mongoCrypt.makeExplicitDecryptionContext(A),D=new dB.StateMachine({proxyOptions:this._proxyOptions,tlsOptions:this._tlsOptions}),{v:J}=await D.execute(this,B);return J}async askForKMSCredentials(){return await S81.refreshKMSCredentials(this._kmsProviders)}static get libmongocryptVersion(){return cB.getMongoCrypt().libmongocryptVersion}async _encrypt(F,A,B){const{algorithm:D,keyId:J,keyAltName:Z,contentionFactor:X,queryType:Y,rangeOptions:$}=B,G={expressionMode:A,algorithm:D};if(J)G.keyId=J.buffer;if(Z){if(J)throw new E9.MongoCryptInvalidArgumentError('"options" cannot contain both "keyId" and "keyAltName"');if(typeof Z!=="string")throw new E9.MongoCryptInvalidArgumentError(`"options.keyAltName" must be of type string, but was of type ${typeof Z}`);G.keyAltName=D3.serialize({keyAltName:Z})}if(typeof X==="number"||typeof X==="bigint")G.contentionFactor=X;if(typeof Y==="string")G.queryType=Y;if(typeof $==="object")G.rangeOptions=D3.serialize($);const E=D3.serialize({v:F}),W=new dB.StateMachine({proxyOptions:this._proxyOptions,tlsOptions:this._tlsOptions}),C=this._mongoCrypt.makeExplicitEncryptionContext(E,G);return(await W.execute(this,C)).v}}$u.ClientEncryption=cB});var lB=z((f)=>{Object.defineProperty(f,"__esModule",{value:!0});f.MongoUnexpectedServerResponseError=f.MongoTransactionError=f.MongoTopologyClosedError=f.MongoTailableCursorError=f.MongoSystemError=f.MongoServerSelectionError=f.MongoServerError=f.MongoServerClosedError=f.MongoRuntimeError=f.MongoParseError=f.MongoNotConnectedError=f.MongoNetworkTimeoutError=f.MongoNetworkError=f.MongoMissingDependencyError=f.MongoMissingCredentialsError=f.MongoKerberosError=f.MongoInvalidArgumentError=f.MongoGridFSStreamError=f.MongoGridFSChunkError=f.MongoExpiredSessionError=f.MongoError=f.MongoDriverError=f.MongoDecompressionError=f.MongoCursorInUseError=f.MongoCursorExhaustedError=f.MongoCompatibilityError=f.MongoChangeStreamError=f.MongoBatchReExecutionError=f.MongoAzureError=f.MongoAWSError=f.MongoAPIError=f.ChangeStreamCursor=f.ClientEncryption=f.MongoBulkWriteError=f.UUID=f.Timestamp=f.ObjectId=f.MinKey=f.MaxKey=f.Long=f.Int32=f.Double=f.Decimal128=f.DBRef=f.Code=f.BSONType=f.BSONSymbol=f.BSONRegExp=f.Binary=f.BSON=void 0;f.ConnectionPoolReadyEvent=f.ConnectionPoolMonitoringEvent=f.ConnectionPoolCreatedEvent=f.ConnectionPoolClosedEvent=f.ConnectionPoolClearedEvent=f.ConnectionCreatedEvent=f.ConnectionClosedEvent=f.ConnectionCheckOutStartedEvent=f.ConnectionCheckOutFailedEvent=f.ConnectionCheckedOutEvent=f.ConnectionCheckedInEvent=f.CommandSucceededEvent=f.CommandStartedEvent=f.CommandFailedEvent=f.WriteConcern=f.ReadPreference=f.ReadConcern=f.TopologyType=f.ServerType=f.ReadPreferenceMode=f.ReadConcernLevel=f.ProfilingLevel=f.ReturnDocument=f.ServerApiVersion=f.ExplainVerbosity=f.MongoErrorLabel=f.CURSOR_FLAGS=f.Compressor=f.AuthMechanism=f.GSSAPICanonicalizationValue=f.AutoEncryptionLoggerLevel=f.BatchType=f.UnorderedBulkOperation=f.OrderedBulkOperation=f.MongoClient=f.ListIndexesCursor=f.ListCollectionsCursor=f.GridFSBucketWriteStream=f.GridFSBucketReadStream=f.GridFSBucket=f.FindCursor=f.Db=f.Collection=f.ClientSession=f.ChangeStream=f.CancellationToken=f.AggregationCursor=f.Admin=f.AbstractCursor=f.MongoWriteConcernError=void 0;f.MongoClientAuthProviders=f.MongoCryptKMSRequestNetworkTimeoutError=f.MongoCryptInvalidArgumentError=f.MongoCryptError=f.MongoCryptCreateEncryptedCollectionError=f.MongoCryptCreateDataKeyError=f.MongoCryptAzureKMSRequestError=f.SrvPollingEvent=f.WaitingForSuitableServerEvent=f.ServerSelectionSucceededEvent=f.ServerSelectionStartedEvent=f.ServerSelectionFailedEvent=f.ServerSelectionEvent=f.TopologyOpeningEvent=f.TopologyDescriptionChangedEvent=f.TopologyClosedEvent=f.ServerOpeningEvent=f.ServerHeartbeatSucceededEvent=f.ServerHeartbeatStartedEvent=f.ServerHeartbeatFailedEvent=f.ServerDescriptionChangedEvent=f.ServerClosedEvent=f.ConnectionReadyEvent=void 0;var k81=DX();Object.defineProperty(f,"Admin",{enumerable:!0,get:function(){return k81.Admin}});var x81=NX();Object.defineProperty(f,"OrderedBulkOperation",{enumerable:!0,get:function(){return x81.OrderedBulkOperation}});var f81=PX();Object.defineProperty(f,"UnorderedBulkOperation",{enumerable:!0,get:function(){return f81.UnorderedBulkOperation}});var _81=Y7();Object.defineProperty(f,"ChangeStream",{enumerable:!0,get:function(){return _81.ChangeStream}});var g81=r4();Object.defineProperty(f,"Collection",{enumerable:!0,get:function(){return g81.Collection}});var b81=Q3();Object.defineProperty(f,"AbstractCursor",{enumerable:!0,get:function(){return b81.AbstractCursor}});var y81=Z5();Object.defineProperty(f,"AggregationCursor",{enumerable:!0,get:function(){return y81.AggregationCursor}});var v81=YY();Object.defineProperty(f,"FindCursor",{enumerable:!0,get:function(){return v81.FindCursor}});var h81=OY();Object.defineProperty(f,"ListCollectionsCursor",{enumerable:!0,get:function(){return h81.ListCollectionsCursor}});var m81=HY();Object.defineProperty(f,"ListIndexesCursor",{enumerable:!0,get:function(){return m81.ListIndexesCursor}});var d81=gA();Object.defineProperty(f,"Db",{enumerable:!0,get:function(){return d81.Db}});var c81=Yu();Object.defineProperty(f,"GridFSBucket",{enumerable:!0,get:function(){return c81.GridFSBucket}});var l81=MG();Object.defineProperty(f,"GridFSBucketReadStream",{enumerable:!0,get:function(){return l81.GridFSBucketReadStream}});var p81=uG();Object.defineProperty(f,"GridFSBucketWriteStream",{enumerable:!0,get:function(){return p81.GridFSBucketWriteStream}});var i81=A9();Object.defineProperty(f,"MongoClient",{enumerable:!0,get:function(){return i81.MongoClient}});var n81=d2();Object.defineProperty(f,"CancellationToken",{enumerable:!0,get:function(){return n81.CancellationToken}});var s81=B5();Object.defineProperty(f,"ClientSession",{enumerable:!0,get:function(){return s81.ClientSession}});var a81=S1();Object.defineProperty(f,"BSON",{enumerable:!0,get:function(){return a81.BSON}});var G2=S1();Object.defineProperty(f,"Binary",{enumerable:!0,get:function(){return G2.Binary}});Object.defineProperty(f,"BSONRegExp",{enumerable:!0,get:function(){return G2.BSONRegExp}});Object.defineProperty(f,"BSONSymbol",{enumerable:!0,get:function(){return G2.BSONSymbol}});Object.defineProperty(f,"BSONType",{enumerable:!0,get:function(){return G2.BSONType}});Object.defineProperty(f,"Code",{enumerable:!0,get:function(){return G2.Code}});Object.defineProperty(f,"DBRef",{enumerable:!0,get:function(){return G2.DBRef}});Object.defineProperty(f,"Decimal128",{enumerable:!0,get:function(){return G2.Decimal128}});Object.defineProperty(f,"Double",{enumerable:!0,get:function(){return G2.Double}});Object.defineProperty(f,"Int32",{enumerable:!0,get:function(){return G2.Int32}});Object.defineProperty(f,"Long",{enumerable:!0,get:function(){return G2.Long}});Object.defineProperty(f,"MaxKey",{enumerable:!0,get:function(){return G2.MaxKey}});Object.defineProperty(f,"MinKey",{enumerable:!0,get:function(){return G2.MinKey}});Object.defineProperty(f,"ObjectId",{enumerable:!0,get:function(){return G2.ObjectId}});Object.defineProperty(f,"Timestamp",{enumerable:!0,get:function(){return G2.Timestamp}});Object.defineProperty(f,"UUID",{enumerable:!0,get:function(){return G2.UUID}});var r81=a8();Object.defineProperty(f,"MongoBulkWriteError",{enumerable:!0,get:function(){return r81.MongoBulkWriteError}});var t81=Eu();Object.defineProperty(f,"ClientEncryption",{enumerable:!0,get:function(){return t81.ClientEncryption}});var o81=TY();Object.defineProperty(f,"ChangeStreamCursor",{enumerable:!0,get:function(){return o81.ChangeStreamCursor}});var M1=p();Object.defineProperty(f,"MongoAPIError",{enumerable:!0,get:function(){return M1.MongoAPIError}});Object.defineProperty(f,"MongoAWSError",{enumerable:!0,get:function(){return M1.MongoAWSError}});Object.defineProperty(f,"MongoAzureError",{enumerable:!0,get:function(){return M1.MongoAzureError}});Object.defineProperty(f,"MongoBatchReExecutionError",{enumerable:!0,get:function(){return M1.MongoBatchReExecutionError}});Object.defineProperty(f,"MongoChangeStreamError",{enumerable:!0,get:function(){return M1.MongoChangeStreamError}});Object.defineProperty(f,"MongoCompatibilityError",{enumerable:!0,get:function(){return M1.MongoCompatibilityError}});Object.defineProperty(f,"MongoCursorExhaustedError",{enumerable:!0,get:function(){return M1.MongoCursorExhaustedError}});Object.defineProperty(f,"MongoCursorInUseError",{enumerable:!0,get:function(){return M1.MongoCursorInUseError}});Object.defineProperty(f,"MongoDecompressionError",{enumerable:!0,get:function(){return M1.MongoDecompressionError}});Object.defineProperty(f,"MongoDriverError",{enumerable:!0,get:function(){return M1.MongoDriverError}});Object.defineProperty(f,"MongoError",{enumerable:!0,get:function(){return M1.MongoError}});Object.defineProperty(f,"MongoExpiredSessionError",{enumerable:!0,get:function(){return M1.MongoExpiredSessionError}});Object.defineProperty(f,"MongoGridFSChunkError",{enumerable:!0,get:function(){return M1.MongoGridFSChunkError}});Object.defineProperty(f,"MongoGridFSStreamError",{enumerable:!0,get:function(){return M1.MongoGridFSStreamError}});Object.defineProperty(f,"MongoInvalidArgumentError",{enumerable:!0,get:function(){return M1.MongoInvalidArgumentError}});Object.defineProperty(f,"MongoKerberosError",{enumerable:!0,get:function(){return M1.MongoKerberosError}});Object.defineProperty(f,"MongoMissingCredentialsError",{enumerable:!0,get:function(){return M1.MongoMissingCredentialsError}});Object.defineProperty(f,"MongoMissingDependencyError",{enumerable:!0,get:function(){return M1.MongoMissingDependencyError}});Object.defineProperty(f,"MongoNetworkError",{enumerable:!0,get:function(){return M1.MongoNetworkError}});Object.defineProperty(f,"MongoNetworkTimeoutError",{enumerable:!0,get:function(){return M1.MongoNetworkTimeoutError}});Object.defineProperty(f,"MongoNotConnectedError",{enumerable:!0,get:function(){return M1.MongoNotConnectedError}});Object.defineProperty(f,"MongoParseError",{enumerable:!0,get:function(){return M1.MongoParseError}});Object.defineProperty(f,"MongoRuntimeError",{enumerable:!0,get:function(){return M1.MongoRuntimeError}});Object.defineProperty(f,"MongoServerClosedError",{enumerable:!0,get:function(){return M1.MongoServerClosedError}});Object.defineProperty(f,"MongoServerError",{enumerable:!0,get:function(){return M1.MongoServerError}});Object.defineProperty(f,"MongoServerSelectionError",{enumerable:!0,get:function(){return M1.MongoServerSelectionError}});Object.defineProperty(f,"MongoSystemError",{enumerable:!0,get:function(){return M1.MongoSystemError}});Object.defineProperty(f,"MongoTailableCursorError",{enumerable:!0,get:function(){return M1.MongoTailableCursorError}});Object.defineProperty(f,"MongoTopologyClosedError",{enumerable:!0,get:function(){return M1.MongoTopologyClosedError}});Object.defineProperty(f,"MongoTransactionError",{enumerable:!0,get:function(){return M1.MongoTransactionError}});Object.defineProperty(f,"MongoUnexpectedServerResponseError",{enumerable:!0,get:function(){return M1.MongoUnexpectedServerResponseError}});Object.defineProperty(f,"MongoWriteConcernError",{enumerable:!0,get:function(){return M1.MongoWriteConcernError}});var e81=a8();Object.defineProperty(f,"BatchType",{enumerable:!0,get:function(){return e81.BatchType}});var F51=L$();Object.defineProperty(f,"AutoEncryptionLoggerLevel",{enumerable:!0,get:function(){return F51.AutoEncryptionLoggerLevel}});var A51=yA();Object.defineProperty(f,"GSSAPICanonicalizationValue",{enumerable:!0,get:function(){return A51.GSSAPICanonicalizationValue}});var B51=M6();Object.defineProperty(f,"AuthMechanism",{enumerable:!0,get:function(){return B51.AuthMechanism}});var D51=V5();Object.defineProperty(f,"Compressor",{enumerable:!0,get:function(){return D51.Compressor}});var J51=Q3();Object.defineProperty(f,"CURSOR_FLAGS",{enumerable:!0,get:function(){return J51.CURSOR_FLAGS}});var Z51=p();Object.defineProperty(f,"MongoErrorLabel",{enumerable:!0,get:function(){return Z51.MongoErrorLabel}});var X51=tZ();Object.defineProperty(f,"ExplainVerbosity",{enumerable:!0,get:function(){return X51.ExplainVerbosity}});var Y51=A9();Object.defineProperty(f,"ServerApiVersion",{enumerable:!0,get:function(){return Y51.ServerApiVersion}});var $51=QY();Object.defineProperty(f,"ReturnDocument",{enumerable:!0,get:function(){return $51.ReturnDocument}});var G51=SY();Object.defineProperty(f,"ProfilingLevel",{enumerable:!0,get:function(){return G51.ProfilingLevel}});var E51=D6();Object.defineProperty(f,"ReadConcernLevel",{enumerable:!0,get:function(){return E51.ReadConcernLevel}});var W51=T0();Object.defineProperty(f,"ReadPreferenceMode",{enumerable:!0,get:function(){return W51.ReadPreferenceMode}});var Wu=v2();Object.defineProperty(f,"ServerType",{enumerable:!0,get:function(){return Wu.ServerType}});Object.defineProperty(f,"TopologyType",{enumerable:!0,get:function(){return Wu.TopologyType}});var C51=D6();Object.defineProperty(f,"ReadConcern",{enumerable:!0,get:function(){return C51.ReadConcern}});var H51=T0();Object.defineProperty(f,"ReadPreference",{enumerable:!0,get:function(){return H51.ReadPreference}});var q51=V2();Object.defineProperty(f,"WriteConcern",{enumerable:!0,get:function(){return q51.WriteConcern}});var SG=N$();Object.defineProperty(f,"CommandFailedEvent",{enumerable:!0,get:function(){return SG.CommandFailedEvent}});Object.defineProperty(f,"CommandStartedEvent",{enumerable:!0,get:function(){return SG.CommandStartedEvent}});Object.defineProperty(f,"CommandSucceededEvent",{enumerable:!0,get:function(){return SG.CommandSucceededEvent}});var C6=f$();Object.defineProperty(f,"ConnectionCheckedInEvent",{enumerable:!0,get:function(){return C6.ConnectionCheckedInEvent}});Object.defineProperty(f,"ConnectionCheckedOutEvent",{enumerable:!0,get:function(){return C6.ConnectionCheckedOutEvent}});Object.defineProperty(f,"ConnectionCheckOutFailedEvent",{enumerable:!0,get:function(){return C6.ConnectionCheckOutFailedEvent}});Object.defineProperty(f,"ConnectionCheckOutStartedEvent",{enumerable:!0,get:function(){return C6.ConnectionCheckOutStartedEvent}});Object.defineProperty(f,"ConnectionClosedEvent",{enumerable:!0,get:function(){return C6.ConnectionClosedEvent}});Object.defineProperty(f,"ConnectionCreatedEvent",{enumerable:!0,get:function(){return C6.ConnectionCreatedEvent}});Object.defineProperty(f,"ConnectionPoolClearedEvent",{enumerable:!0,get:function(){return C6.ConnectionPoolClearedEvent}});Object.defineProperty(f,"ConnectionPoolClosedEvent",{enumerable:!0,get:function(){return C6.ConnectionPoolClosedEvent}});Object.defineProperty(f,"ConnectionPoolCreatedEvent",{enumerable:!0,get:function(){return C6.ConnectionPoolCreatedEvent}});Object.defineProperty(f,"ConnectionPoolMonitoringEvent",{enumerable:!0,get:function(){return C6.ConnectionPoolMonitoringEvent}});Object.defineProperty(f,"ConnectionPoolReadyEvent",{enumerable:!0,get:function(){return C6.ConnectionPoolReadyEvent}});Object.defineProperty(f,"ConnectionReadyEvent",{enumerable:!0,get:function(){return C6.ConnectionReadyEvent}});var x3=UB();Object.defineProperty(f,"ServerClosedEvent",{enumerable:!0,get:function(){return x3.ServerClosedEvent}});Object.defineProperty(f,"ServerDescriptionChangedEvent",{enumerable:!0,get:function(){return x3.ServerDescriptionChangedEvent}});Object.defineProperty(f,"ServerHeartbeatFailedEvent",{enumerable:!0,get:function(){return x3.ServerHeartbeatFailedEvent}});Object.defineProperty(f,"ServerHeartbeatStartedEvent",{enumerable:!0,get:function(){return x3.ServerHeartbeatStartedEvent}});Object.defineProperty(f,"ServerHeartbeatSucceededEvent",{enumerable:!0,get:function(){return x3.ServerHeartbeatSucceededEvent}});Object.defineProperty(f,"ServerOpeningEvent",{enumerable:!0,get:function(){return x3.ServerOpeningEvent}});Object.defineProperty(f,"TopologyClosedEvent",{enumerable:!0,get:function(){return x3.TopologyClosedEvent}});Object.defineProperty(f,"TopologyDescriptionChangedEvent",{enumerable:!0,get:function(){return x3.TopologyDescriptionChangedEvent}});Object.defineProperty(f,"TopologyOpeningEvent",{enumerable:!0,get:function(){return x3.TopologyOpeningEvent}});var d5=zG();Object.defineProperty(f,"ServerSelectionEvent",{enumerable:!0,get:function(){return d5.ServerSelectionEvent}});Object.defineProperty(f,"ServerSelectionFailedEvent",{enumerable:!0,get:function(){return d5.ServerSelectionFailedEvent}});Object.defineProperty(f,"ServerSelectionStartedEvent",{enumerable:!0,get:function(){return d5.ServerSelectionStartedEvent}});Object.defineProperty(f,"ServerSelectionSucceededEvent",{enumerable:!0,get:function(){return d5.ServerSelectionSucceededEvent}});Object.defineProperty(f,"WaitingForSuitableServerEvent",{enumerable:!0,get:function(){return d5.WaitingForSuitableServerEvent}});var K51=VG();Object.defineProperty(f,"SrvPollingEvent",{enumerable:!0,get:function(){return K51.SrvPollingEvent}});var y7=e4();Object.defineProperty(f,"MongoCryptAzureKMSRequestError",{enumerable:!0,get:function(){return y7.MongoCryptAzureKMSRequestError}});Object.defineProperty(f,"MongoCryptCreateDataKeyError",{enumerable:!0,get:function(){return y7.MongoCryptCreateDataKeyError}});Object.defineProperty(f,"MongoCryptCreateEncryptedCollectionError",{enumerable:!0,get:function(){return y7.MongoCryptCreateEncryptedCollectionError}});Object.defineProperty(f,"MongoCryptError",{enumerable:!0,get:function(){return y7.MongoCryptError}});Object.defineProperty(f,"MongoCryptInvalidArgumentError",{enumerable:!0,get:function(){return y7.MongoCryptInvalidArgumentError}});Object.defineProperty(f,"MongoCryptKMSRequestNetworkTimeoutError",{enumerable:!0,get:function(){return y7.MongoCryptKMSRequestNetworkTimeoutError}});var z51=KG();Object.defineProperty(f,"MongoClientAuthProviders",{enumerable:!0,get:function(){return z51.MongoClientAuthProviders}})});var T2=z((NQ1,Cu)=>{Cu.exports=function F(A){if(A==null)return;if(typeof A.constructor!=="function")return;return A.constructor.name}});var y6=z((V51)=>{/*!
 * ignore
 */V51.internalToObjectOptions={transform:!1,virtuals:!1,getters:!1,_skipDepopulateTopLevel:!0,depopulate:!0,flattenDecimals:!1,useProjection:!1,versionKey:!0}});var Ku=z((MQ1,qu)=>{var v6=function(F,A,B){this.collection=null,this.Promise=B.Promise||Promise,this.modelName=B.modelName,delete B.modelName,this._closed=!1,pB.apply(this,arguments)},P51=function(F){v6.prototype[F]=function(){const A=this._getCollection(),B=Array.from(arguments),D=this,J=D&&D.conn&&D.conn.base&&D.conn.base.options&&D.conn.base.options.debug,Z=D&&D.conn&&D.conn.options&&D.conn.options.debug,X=Z==null?J:Z,Y=arguments[arguments.length-1],$=new R51;if(this.conn.$wasForceClosed){const W=new kG("Connection was force closed");if(B.length>0&&typeof B[B.length-1]==="function"){B[B.length-1](W);return}else throw W}let G=B,E=null;if(this._shouldBufferCommands()&&this.buffer){this.conn.emit("buffer",{_id:$,modelName:D.modelName,collectionName:D.name,method:F,args:B});let W,C=B,H=null,q=null;if(c5[F]&&typeof Y==="function")this.addQueue(F,C),W=Y;else if(c5[F])H=new this.Promise((U,Q)=>{W=function V(L,N){if(q!=null)clearTimeout(q);if(L!=null)return Q(L);U(N)},C=B.concat([W]),this.addQueue(F,C)});else if(typeof Y==="function")W=function U(){if(q!=null)clearTimeout(q);return Y.apply(this,arguments)},C=B.slice(0,B.length-1).concat([W]);else H=new Promise((U,Q)=>{W=function V(L,N){if(q!=null)clearTimeout(q);if(L!=null)return Q(L);U(N)},C=B.concat([W]),this.addQueue(F,C)});const K=this._getBufferTimeoutMS();if(q=setTimeout(()=>{if(this.removeQueue(F,C)){const Q="Operation `"+this.name+"."+F+"()` buffering timed out after "+K+"ms",V=new kG(Q);this.conn.emit("buffer-end",{_id:$,modelName:D.modelName,collectionName:D.name,method:F,error:V}),W(V)}},K),!c5[F]&&typeof Y==="function"){this.addQueue(F,C);return}return H}else if(!c5[F]&&typeof Y==="function")E=function W(C,H){if(C!=null)D.conn.emit("operation-end",{_id:$,modelName:D.modelName,collectionName:D.name,method:F,error:C});else D.conn.emit("operation-end",{_id:$,modelName:D.modelName,collectionName:D.name,method:F,result:H});return Y.apply(this,arguments)},G=B.slice(0,B.length-1).concat([E]);if(X)if(typeof X==="function"){let W=null;if(typeof B[B.length-1]=="function")W=B.slice(0,B.length-1);else W=B;X.apply(D,[D.name,F].concat(W))}else if(X instanceof N51.Writable)this.$printToStream(D.name,F,B,X);else{const W=X.color==null?!0:X.color,C=X.shell==null?!1:X.shell;this.$print(D.name,F,B,W,C)}this.conn.emit("operation-start",{_id:$,modelName:D.modelName,collectionName:this.name,method:F,params:G});try{if(A==null){const C="Cannot call `"+this.name+"."+F+"()` before initial connection is complete if `bufferCommands = false`. Make sure you `await mongoose.connect()` if you have `bufferCommands = false`.";throw new kG(C)}if(c5[F]&&typeof Y==="function"){const C=A[F].apply(A,G.slice(0,G.length-1));return this.conn.emit("operation-end",{_id:$,modelName:D.modelName,collectionName:this.name,method:F,result:C}),Y.call(this,null,C)}const W=A[F].apply(A,G);if(W!=null&&typeof W.then==="function")return W.then((C)=>{if(typeof Y==="function")Y(null,C);else this.conn.emit("operation-end",{_id:$,modelName:D.modelName,collectionName:this.name,method:F,result:C});return C},(C)=>{if(typeof Y==="function"){Y(C);return}else this.conn.emit("operation-end",{_id:$,modelName:D.modelName,collectionName:this.name,method:F,error:C});throw C});return W}catch(W){if(typeof Y==="function")return Y(W);else throw this.conn.emit("operation-end",{_id:$,modelName:D.modelName,collectionName:this.name,method:F,error:W}),W}}},v7=function(F){const A={inspect:function(){return F}};if(fG.inspect.custom)A[fG.inspect.custom]=A.inspect;return A},M51=function(F){return _G(F,!0)},T51=function(F,A){F[A]=v7('ObjectId("'+F[A].toHexString()+'")')},j51=function(F,A,B){if(B)F[A]=v7('ISODate("'+F[A].toUTCString()+'")');else F[A]=v7('new Date("'+F[A].toUTCString()+'")')},_G=function(F,A,B,D){if(F&&typeof F.toBSON==="function")F=F.toBSON();if(F==null)return F;let Z=J0()(F,I51);const X=Hu(Z);if(X==="Binary")Z="BinData("+Z.sub_type+', "'+Z.toString("base64")+'")';else if(X==="ObjectId")Z=v7('ObjectId("'+Z.toHexString()+'")');else if(X==="Date")Z=v7('new Date("'+Z.toUTCString()+'")');else if(X==="Object"){const Y=Object.keys(Z),$=Y.length;let G;for(let E=0;E<$;++E)if(G=Y[E],Z[G]){let W;if(typeof Z[G].toBSON==="function")try{Z[G]=Z[G].toBSON()}catch(H){W=H}const C=Hu(Z[G]);if(C==="Binary")Z[G]="BinData("+Z[G].sub_type+', "'+Z[G].buffer.toString("base64")+'")';else if(C==="Object")Z[G]=_G(Z[G],!0);else if(C==="ObjectId")T51(Z,G);else if(C==="Date")j51(Z,G,D);else if(C==="ClientSession")Z[G]=v7('ClientSession("'+(Z[G]&&Z[G].id&&Z[G].id.id&&Z[G].id.id.buffer||"").toString("hex")+'")');else if(Array.isArray(Z[G]))Z[G]=Z[G].map(M51);else if(W!=null)throw W}}if(A)return Z;return fG.inspect(Z,!1,10,B).replace(/\n/g,"").replace(/\s{2,}/g," ")};/*!
 * Module dependencies.
 */var pB=QK(),kG=H1(),xG=lB().Collection,R51=H3(),Hu=T2(),I51=y6().internalToObjectOptions,N51=import.meta.require("stream"),fG=import.meta.require("util");/*!
 * Inherit from abstract Collection.
 */Object.setPrototypeOf(v6.prototype,pB.prototype);v6.prototype.onOpen=function(){return this.collection=this.conn.db.collection(this.name),pB.prototype.onOpen.call(this),this.collection};v6.prototype.onClose=function(F){pB.prototype.onClose.call(this,F)};v6.prototype._getCollection=function F(){if(this.collection)return this.collection;if(this.conn.db!=null)return this.collection=this.conn.db.collection(this.name),this.collection;return null};/*!
 * ignore
 */var c5={watch:!0,find:!0,aggregate:!0};for(let F of Object.getOwnPropertyNames(xG.prototype)){if(Object.getOwnPropertyDescriptor(xG.prototype,F).get!==void 0)continue;if(typeof xG.prototype[F]!=="function")continue;P51(F)}v6.prototype.$print=function(F,A,B,D,J){const Z=D?"\x1B[0;36mMongoose:\x1B[0m ":"Mongoose: ",X=[F,A].join("."),Y=[];for(let G=B.length-1;G>=0;--G)if(this.$format(B[G])||Y.length)Y.unshift(this.$format(B[G],D,J));const $="("+Y.join(", ")+")";console.info(Z+X+$)};v6.prototype.$printToStream=function(F,A,B,D){const J=[F,A].join("."),Z=[];for(let Y=B.length-1;Y>=0;--Y)if(this.$format(B[Y])||Z.length)Z.unshift(this.$format(B[Y]));const X="("+Z.join(", ")+")";D.write(J+X,"utf8")};v6.prototype.$format=function(F,A,B){const D=typeof F;if(D==="function"||D==="undefined")return"";return _G(F,!1,A,B)};v6.prototype.getIndexes=v6.prototype.indexInformation;/*!
 * Module exports.
 */qu.exports=v6});var gG=z((TQ1,Qu)=>{/*!
 * Module dependencies.
 */var u51=import.meta.require("events").EventEmitter;/*!
 * ignore
 */var zu=["close","change","end","error","resumeTokenChanged"];/*!
 * ignore
 */class Uu extends u51{constructor(F,A,B){super();if(this.driverChangeStream=null,this.closed=!1,this.bindedEvents=!1,this.pipeline=A,this.options=B,B&&B.hydrate&&!B.model)throw new Error("Cannot create change stream with `hydrate: true` unless calling `Model.watch()`");F((D,J)=>{if(D!=null){this.emit("error",D);return}this.driverChangeStream=J,this.emit("ready")})}_bindEvents(){if(this.bindedEvents)return;if(this.bindedEvents=!0,this.driverChangeStream==null){this.once("ready",()=>{this.driverChangeStream.on("close",()=>{this.closed=!0}),zu.forEach((F)=>{this.driverChangeStream.on(F,(A)=>{if(A!=null&&A.fullDocument!=null&&this.options&&this.options.hydrate)A.fullDocument=this.options.model.hydrate(A.fullDocument);this.emit(F,A)})})});return}this.driverChangeStream.on("close",()=>{this.closed=!0}),zu.forEach((F)=>{this.driverChangeStream.on(F,(A)=>{if(A!=null&&A.fullDocument!=null&&this.options&&this.options.hydrate)A.fullDocument=this.options.model.hydrate(A.fullDocument);this.emit(F,A)})})}hasNext(F){return this.driverChangeStream.hasNext(F)}next(F){if(this.options&&this.options.hydrate){if(F!=null){const B=F;F=(D,J)=>{if(D!=null)return B(D);if(J.fullDocument!=null)J.fullDocument=this.options.model.hydrate(J.fullDocument);return B(null,J)}}let A=this.driverChangeStream.next(F);if(A&&typeof A.then==="function")A=A.then((B)=>{if(B.fullDocument!=null)B.fullDocument=this.options.model.hydrate(B.fullDocument);return B});return A}return this.driverChangeStream.next(F)}addListener(F,A){return this._bindEvents(),super.addListener(F,A)}on(F,A){return this._bindEvents(),super.on(F,A)}once(F,A){return this._bindEvents(),super.once(F,A)}_queue(F){this.once("ready",()=>F())}close(){if(this.closed=!0,this.driverChangeStream)this.driverChangeStream.close()}}/*!
 * ignore
 */Qu.exports=Uu});var h7=z((jQ1,wu)=>{var f1=function(){this._pres=new Map,this._posts=new Map},Lu=function(F,A,B,D,J,Z,X){if(Z.useErrorHandlers)return F.execPost(B,D,J,{error:A},function(Y){return typeof X==="function"&&X(Y)});else return typeof X==="function"&&X(A)},iB=function(F,A,B,D){let J;try{J=F.apply(A,B)}catch(Z){return D(Z)}if(nB(J))J.then(()=>D(),(Z)=>D(Z))},nB=function(F){return typeof F==="object"&&F!==null&&typeof F.then==="function"},l5=function(F){let A=!1;const B=this;return function(){if(A)return;return A=!0,p5(()=>F.apply(B,arguments))}},Vu=function(F,A){if(F.errorHandler)return!0;return F.fn.length===A+2};f1.skipWrappedFunction=function F(){if(!(this instanceof f1.skipWrappedFunction))return new f1.skipWrappedFunction(...arguments);this.args=[...arguments]};f1.overwriteResult=function F(){if(!(this instanceof f1.overwriteResult))return new f1.overwriteResult(...arguments);this.args=[...arguments]};f1.prototype.execPre=function(F,A,B,D){if(arguments.length===3)D=B,B=[];const J=this._pres.get(F)||[],Z=J.length,X=J.numAsync||0;let Y=0,$=X,G=!1;const E=B;let W=null;if(!Z)return p5(function(){D(null)});function C(){if(Y>=Z)return;const q=J[Y];if(q.isAsync){const K=[l5(H),l5(function(U){if(U){if(G)return;if(U instanceof f1.skipWrappedFunction)W=U;else return G=!0,D(U)}if(--$===0&&Y>=Z)return D(W)})];iB(q.fn,A,K,K[0])}else if(q.fn.length>0){const K=[l5(H)],U=arguments.length>=2?arguments:[null].concat(E);for(let Q=1;Q<U.length;++Q){if(Q===U.length-1&&typeof U[Q]==="function")continue;K.push(U[Q])}iB(q.fn,A,K,K[0])}else{let K=null;try{K=q.fn.call(A)}catch(U){if(U!=null)return D(U)}if(nB(K))K.then(()=>H(),(U)=>H(U));else{if(++Y>=Z)if($>0)return;else return p5(function(){D(W)});C()}}}C.apply(null,[null].concat(B));function H(q){if(q){if(G)return;if(q instanceof f1.skipWrappedFunction)W=q;else return G=!0,D(q)}if(++Y>=Z)if($>0)return;else return D(W);C.apply(A,arguments)}};f1.prototype.execPreSync=function(F,A,B){const D=this._pres.get(F)||[],J=D.length;for(let Z=0;Z<J;++Z)D[Z].fn.apply(A,B||[])};f1.prototype.execPost=function(F,A,B,D,J){if(arguments.length<5)J=D,D=null;const Z=this._posts.get(F)||[],X=Z.length;let Y=0,$=null;if(D&&D.error)$=D.error;if(!X)return p5(function(){J.apply(null,[$].concat(B))});function G(){const E=Z[Y].fn;let W=0;const C=B.length,H=[];for(let q=0;q<C;++q)if(W+=B[q]&&B[q]._kareemIgnore?0:1,!B[q]||!B[q]._kareemIgnore)H.push(B[q]);if($)if(Vu(Z[Y],W)){const q=l5(function(K){if(K){if(K instanceof f1.overwriteResult){if(B=K.args,++Y>=X)return J.call(null,$);return G()}$=K}if(++Y>=X)return J.call(null,$);G()});iB(E,A,[$].concat(H).concat([q]),q)}else{if(++Y>=X)return J.call(null,$);G()}else{const q=l5(function(K){if(K){if(K instanceof f1.overwriteResult){if(B=K.args,++Y>=X)return J.apply(null,[null].concat(B));return G()}return $=K,G()}if(++Y>=X)return J.apply(null,[null].concat(B));G()});if(Vu(Z[Y],W)){if(++Y>=X)return J.apply(null,[null].concat(B));return G()}if(E.length===W+1)iB(E,A,H.concat([q]),q);else{let K,U;try{U=E.apply(A,H)}catch(Q){K=Q,$=Q}if(nB(U))return U.then((Q)=>{q(Q instanceof f1.overwriteResult?Q:null)},(Q)=>q(Q));if(U instanceof f1.overwriteResult)B=U.args;if(++Y>=X)return J.apply(null,[K].concat(B));G()}}}G()};f1.prototype.execPostSync=function(F,A,B){const D=this._posts.get(F)||[],J=D.length;for(let Z=0;Z<J;++Z){const X=D[Z].fn.apply(A,B||[]);if(X instanceof f1.overwriteResult)B=X.args}return B};f1.prototype.createWrapperSync=function(F,A){const B=this;return function D(){B.execPreSync(F,this,arguments);const J=A.apply(this,arguments);return B.execPostSync(F,this,[J])[0]}};f1.prototype.wrap=function(F,A,B,D,J){const Z=D.length>0?D[D.length-1]:null,X=Array.from(D);typeof Z==="function"&&X.pop();const Y=this;J=J||{};const $=J.checkForPromise;this.execPre(F,B,D,function(G){if(G&&!(G instanceof f1.skipWrappedFunction)){const H=J.numCallbackParams||0,q=J.contextParameter?[B]:[];for(let K=q.length;K<H;++K)q.push(null);return Lu(Y,G,F,B,q,J,Z)}const E=A.length;let W;if(G instanceof f1.skipWrappedFunction)return W=G.args[0],C(null,...G.args);else try{W=A.apply(B,X.concat(C))}catch(H){return C(H)}if($){if(nB(W))return W.then((H)=>C(null,H),(H)=>C(H));if(E<X.length+1)return C(null,W)}function C(){const H=Array.from(arguments);if(H.shift(),J.nullResultByDefault&&H.length===0)H.push(null);if(arguments[0])return Lu(Y,arguments[0],F,B,H,J,Z);else Y.execPost(F,B,H,function(){if(Z===null)return;arguments[0]?Z(arguments[0]):Z.apply(B,arguments)})}})};f1.prototype.filter=function(F){const A=this.clone(),B=Array.from(A._pres.keys());for(let J of B){const Z=this._pres.get(J).map((X)=>Object.assign({},X,{name:J})).filter(F);if(Z.length===0){A._pres.delete(J);continue}Z.numAsync=Z.filter((X)=>X.isAsync).length,A._pres.set(J,Z)}const D=Array.from(A._posts.keys());for(let J of D){const Z=this._posts.get(J).map((X)=>Object.assign({},X,{name:J})).filter(F);if(Z.length===0){A._posts.delete(J);continue}A._posts.set(J,Z)}return A};f1.prototype.hasHooks=function(F){return this._pres.has(F)||this._posts.has(F)};f1.prototype.createWrapper=function(F,A,B,D){const J=this;if(!this.hasHooks(F))return function(){p5(()=>A.apply(this,arguments))};return function(){const Z=B||this;J.wrap(F,A,Z,Array.from(arguments),D)}};f1.prototype.pre=function(F,A,B,D,J){let Z={};if(typeof A==="object"&&A!==null)Z=A,A=Z.isAsync;else if(typeof arguments[1]!=="boolean")B=A,A=!1;const X=this._pres.get(F)||[];if(this._pres.set(F,X),A)X.numAsync=X.numAsync||0,++X.numAsync;if(typeof B!=="function")throw new Error('pre() requires a function, got "'+typeof B+'"');if(J)X.unshift(Object.assign({},Z,{fn:B,isAsync:A}));else X.push(Object.assign({},Z,{fn:B,isAsync:A}));return this};f1.prototype.post=function(F,A,B,D){const J=this._posts.get(F)||[];if(typeof A==="function")D=!!B,B=A,A={};if(typeof B!=="function")throw new Error('post() requires a function, got "'+typeof B+'"');if(D)J.unshift(Object.assign({},A,{fn:B}));else J.push(Object.assign({},A,{fn:B}));return this._posts.set(F,J),this};f1.prototype.clone=function(){const F=new f1;for(let A of this._pres.keys()){const B=this._pres.get(A).slice();B.numAsync=this._pres.get(A).numAsync,F._pres.set(A,B)}for(let A of this._posts.keys())F._posts.set(A,this._posts.get(A).slice());return F};f1.prototype.merge=function(F,A){A=arguments.length===1?!0:A;const B=A?this.clone():this;for(let D of F._pres.keys()){const J=B._pres.get(D)||[],Z=F._pres.get(D).filter((Y)=>J.map(($)=>$.fn).indexOf(Y.fn)===-1),X=J.concat(Z);X.numAsync=J.numAsync||0,X.numAsync+=Z.filter((Y)=>Y.isAsync).length,B._pres.set(D,X)}for(let D of F._posts.keys()){const J=B._posts.get(D)||[],Z=F._posts.get(D).filter((X)=>J.indexOf(X)===-1);B._posts.set(D,J.concat(Z))}return B};var p5=typeof process==="object"&&process!==null&&process.nextTick||function F(A){setTimeout(A,0)};wu.exports=f1});var Nu=z((Ru,Iu)=>{var o0=Iu.exports=Ru={};o0.DocumentNotFoundError=null;o0.general={};o0.general.default="Validator failed for path `{PATH}` with value `{VALUE}`";o0.general.required="Path `{PATH}` is required.";o0.Number={};o0.Number.min="Path `{PATH}` ({VALUE}) is less than minimum allowed value ({MIN}).";o0.Number.max="Path `{PATH}` ({VALUE}) is more than maximum allowed value ({MAX}).";o0.Number.enum="`{VALUE}` is not a valid enum value for path `{PATH}`.";o0.Date={};o0.Date.min="Path `{PATH}` ({VALUE}) is before minimum allowed value ({MIN}).";o0.Date.max="Path `{PATH}` ({VALUE}) is after maximum allowed value ({MAX}).";o0.String={};o0.String.enum="`{VALUE}` is not a valid enum value for path `{PATH}`.";o0.String.match="Path `{PATH}` is invalid ({VALUE}).";o0.String.minlength="Path `{PATH}` (`{VALUE}`) is shorter than the minimum allowed length ({MINLENGTH}).";o0.String.maxlength="Path `{PATH}` (`{VALUE}`) is longer than the maximum allowed length ({MAXLENGTH})."});var sB=z((uQ1,Mu)=>{/*!
 * Module dependencies.
 */var Pu=H1(),O51=import.meta.require("util");class bG extends Pu{constructor(F,A,B,D){let J;const Z=Pu.messages;if(Z.DocumentNotFoundError!=null)J=typeof Z.DocumentNotFoundError==="function"?Z.DocumentNotFoundError(F,A):Z.DocumentNotFoundError;else J='No document found for query "'+O51.inspect(F)+'" on model "'+A+'"';super(J);this.result=D,this.numAffected=B,this.filter=F,this.query=F}}Object.defineProperty(bG.prototype,"name",{value:"DocumentNotFoundError"});/*!
 * exports
 */Mu.exports=bG});var E2=z((OQ1,uu)=>{var vG=function(F){let A=k51.inspect(F);if(A=A.replace(/^'|'$/g,'"'),!A.startsWith('"'))A='"'+A+'"';return A},Tu=function(F){if(F==null)return""+F;const A=typeof F;if(A!=="object")return A;if(typeof F.constructor!=="function")return A;return F.constructor.name},ju=function(F){const A=F&&F._castErrorMessage||null;if(typeof A==="string"||typeof A==="function")return A},yG=function(F,A,B,D,J,Z,X){if(typeof J==="string"){const Y=vG(B);let $=J.replace("{KIND}",A).replace("{VALUE}",Y).replace("{PATH}",D);if(F!=null)$=$.replace("{MODEL}",F.modelName);return $}else if(typeof J==="function")return J(B,D,F,A);else{const Y=vG(B),$=Z?" (type "+Z+")":"";let G="Cast to "+A+" failed for value "+Y+$+' at path "'+D+'"';if(F!=null)G+=' for model "'+F.modelName+'"';if(X!=null&&typeof X.constructor==="function"&&X.constructor.name!=="AssertionError"&&X.constructor.name!=="Error")G+=' because of "'+X.constructor.name+'"';return G}};/*!
 * Module dependencies.
 */var S51=H1(),k51=import.meta.require("util");class hG extends S51{constructor(F,A,B,D,J){if(arguments.length>0){const Z=Tu(A),X=ju(J),Y=yG(null,F,A,B,X,Z,D);super(Y);this.init(F,A,B,D,J)}else super(yG())}toJSON(){return{stringValue:this.stringValue,valueType:this.valueType,kind:this.kind,value:this.value,path:this.path,reason:this.reason,name:this.name,message:this.message}}init(F,A,B,D,J){/*!
   * ignore
   */this.stringValue=vG(A),this.messageFormat=ju(J),this.kind=F,this.value=A,this.path=B,this.reason=D,this.valueType=Tu(A)}copy(F){this.messageFormat=F.messageFormat,this.stringValue=F.stringValue,this.kind=F.kind,this.value=F.value,this.path=F.path,this.reason=F.reason,this.message=F.message,this.valueType=F.valueType}setModel(F){/*!
   * ignore
   */this.message=yG(F,this.kind,this.value,this.path,this.messageFormat,this.valueType)}}Object.defineProperty(hG.prototype,"name",{value:"CastError"});/*!
 * ignore
 *//*!
 * exports
 */uu.exports=hG});var mG=z((SQ1,Ou)=>{/*!
 * ignore
 */Ou.exports=function F(A){const B=Object.keys(A.errors||{}),D=B.length,J=[];let Z;for(let X=0;X<D;++X){if(Z=B[X],A===A.errors[Z])continue;J.push(Z+": "+A.errors[Z].message)}return J.join(", ")}});var C9=z((kQ1,xu)=>{/*!
 * Module requirements
 */var x51=H1(),f51=T2(),Su=import.meta.require("util"),ku=mG();class W9 extends x51{constructor(F){let A;if(f51(F)==="model")A=F.constructor.modelName+" validation failed";else A="Validation failed";super(A);if(this.errors={},this._message=A,F)F.$errors=this.errors}toString(){return this.name+": "+ku(this)}inspect(){return Object.assign(new Error(this.message),this)}addError(F,A){if(A instanceof W9){const{errors:B}=A;for(let D of Object.keys(B))this.addError(`${F}.${D}`,B[D]);return}this.errors[F]=A,this.message=this._message+": "+ku(this)}}if(Su.inspect.custom)W9.prototype[Su.inspect.custom]=W9.prototype.inspect;Object.defineProperty(W9.prototype,"toJSON",{enumerable:!1,writable:!1,configurable:!0,value:function(){return Object.assign({},this,{name:this.name,message:this.message})}});Object.defineProperty(W9.prototype,"name",{value:"ValidationError"});/*!
 * Module exports
 */xu.exports=W9});var dG=z((xQ1,gu)=>{var _u=function(F,A,B){if(typeof F==="function")return F(A,B);const D=Object.keys(A);for(let J of D){if(J==="message")continue;F=F.replace("{"+J.toUpperCase()+"}",A[J])}return F};/*!
 * Module dependencies.
 */var fu=H1();class i5 extends fu{constructor(F,A){let B=F.message;if(!B)B=fu.messages.general.default;const D=_u(B,F,A);super(D);F=Object.assign({},F,{message:D}),this.properties=F,this.kind=F.type,this.path=F.path,this.value=F.value,this.reason=F.reason}toString(){return this.message}toJSON(){return Object.assign({name:this.name,message:this.message},this)}}Object.defineProperty(i5.prototype,"name",{value:"ValidatorError"});Object.defineProperty(i5.prototype,"properties",{enumerable:!1,writable:!0,value:null});i5.prototype.formatMessage=_u;/*!
 * exports
 */gu.exports=i5});var lG=z((fQ1,bu)=>{/*!
 * Module dependencies.
 */var _51=H1();class cG extends _51{constructor(F,A,B){const D=B.join(", ");super('No matching document found for id "'+F._id+'" version '+A+' modifiedPaths "'+D+'"');this.version=A,this.modifiedPaths=B}}Object.defineProperty(cG.prototype,"name",{value:"VersionError"});/*!
 * exports
 */bu.exports=cG});var iG=z((_Q1,yu)=>{/*!
 * Module dependencies.
 */var g51=H1();class pG extends g51{constructor(F){super("Can\'t save() the same doc multiple times in parallel. Document: "+F._id)}}Object.defineProperty(pG.prototype,"name",{value:"ParallelSaveError"});/*!
 * exports
 */yu.exports=pG});var sG=z((gQ1,vu)=>{/*!
 * Module dependencies.
 */var b51=H1();class nG extends b51{constructor(F){super("Cannot overwrite `"+F+"` model once compiled.")}}Object.defineProperty(nG.prototype,"name",{value:"OverwriteModelError"});/*!
 * exports
 */vu.exports=nG});var mu=z((bQ1,hu)=>{/*!
 * Module dependencies.
 */var y51=H1();class aG extends y51{constructor(F){const A='Schema hasn\'t been registered for model "'+F+'".\nUse mongoose.model(name, schema)';super(A)}}Object.defineProperty(aG.prototype,"name",{value:"MissingSchemaError"});/*!
 * exports
 */hu.exports=aG});var cu=z((yQ1,du)=>{var v51=T2();du.exports=function F(A){if(v51(A)!=="TopologyDescription")return!1;const B=Array.from(A.servers.values());return B.length>0&&B.every((D)=>D.type==="Unknown")}});var pu=z((vQ1,lu)=>{var h51=T2();lu.exports=function F(A){if(h51(A)!=="TopologyDescription")return!1;if(A.servers.size===0)return!1;for(let B of A.servers.values())if(B.host.endsWith(".mongodb.net")===!1||B.port!==27017)return!1;return!0}});var nu=z((hQ1,iu)=>{var m51=T2(),d51="Client network socket disconnected before secure TLS connection was established";iu.exports=function F(A){if(m51(A)!=="TopologyDescription")return!1;const B=Array.from(A.servers.values());return B.length>0&&B.every((D)=>D.error&&D.error.message.indexOf(d51)!==-1)}});var tG=z((mQ1,su)=>{/*!
 * Module dependencies.
 */var c51=H1(),l51=cu(),p51=pu(),i51=nu();/*!
 * ignore
 */var n51="Could not connect to any servers in your MongoDB Atlas cluster. One common reason is that you\'re trying to access the database from an IP that isn\'t whitelisted. Make sure your current IP address is on your Atlas cluster\'s IP whitelist: https://www.mongodb.com/docs/atlas/security-whitelist/",s51="Mongoose is connecting with SSL enabled, but the server is not accepting SSL connections. Please ensure that the MongoDB server you are connecting to is configured to accept SSL connections. Learn more: https://mongoosejs.com/docs/tutorials/ssl.html";class rG extends c51{assimilateError(F){const A=F.reason;if(p51(A)&&l51(A)&&F.message.indexOf("bad auth")===-1&&F.message.indexOf("Authentication failed")===-1)this.message=n51;else if(i51(A))this.message=s51;else this.message=F.message;for(let D in F)if(D!=="name")this[D]=F[D];return this}}Object.defineProperty(rG.prototype,"name",{value:"MongooseServerSelectionError"});su.exports=rG});var eG=z((dQ1,au)=>{/*!
 * Module dependencies.
 */var a51=H1();class oG extends a51{constructor(F){const A="For your own good, using `document.save()` to update an array which was selected using an $elemMatch projection OR populated using skip, limit, query conditions, or exclusion of the _id field when the operation results in a $pop or $set of the entire array is not supported. The following path(s) would have been modified unsafely:\n  "+F.join("\n  ")+"\nUse Model.updateOne() to update these arrays instead.";super(A)}}Object.defineProperty(oG.prototype,"name",{value:"DivergentArrayError"});/*!
 * exports
 */au.exports=oG});var V4=z((cQ1,ru)=>{/*!
 * Module dependencies.
 */var r51=H1();class FE extends r51{constructor(F,A,B){A=A||"Field `"+F+"` is not in schema and strict mode is set to throw.";super(A);this.isImmutableError=!!B,this.path=F}}Object.defineProperty(FE.prototype,"name",{value:"StrictModeError"});ru.exports=FE});var BE=z((lQ1,tu)=>{/*!
 * Module dependencies.
 */var t51=H1();class AE extends t51{constructor(F,A){A=A||"Cannot populate path `"+F+"` because it is not in your schema. Set the `strictPopulate` option to false to override.";super(A);this.path=F}}Object.defineProperty(AE.prototype,"name",{value:"StrictPopulateError"});tu.exports=AE});var W2=z((ou,eu)=>{var e0=H1();/*!
 * Module exports.
 */eu.exports=ou=e0;e0.messages=Nu();e0.Messages=e0.messages;e0.DocumentNotFoundError=sB();e0.CastError=E2();e0.ValidationError=C9();e0.ValidatorError=dG();e0.VersionError=lG();e0.ParallelSaveError=iG();e0.OverwriteModelError=sG();e0.MissingSchemaError=mu();e0.MongooseServerSelectionError=tG();e0.DivergentArrayError=eG();e0.StrictModeError=V4();e0.StrictPopulateError=BE()});var H6=z((pQ1,FO)=>{FO.exports=Object.freeze({enumerable:!0,configurable:!0,writable:!0,value:void 0})});var s2=z((iQ1,AO)=>{var o51=J0();class F2{constructor(F){if(F==null)return this;Object.assign(this,o51(F))}}var j2=H6();Object.defineProperty(F2.prototype,"type",j2);Object.defineProperty(F2.prototype,"validate",j2);Object.defineProperty(F2.prototype,"cast",j2);Object.defineProperty(F2.prototype,"required",j2);Object.defineProperty(F2.prototype,"default",j2);Object.defineProperty(F2.prototype,"ref",j2);Object.defineProperty(F2.prototype,"refPath",j2);Object.defineProperty(F2.prototype,"select",j2);Object.defineProperty(F2.prototype,"index",j2);Object.defineProperty(F2.prototype,"unique",j2);Object.defineProperty(F2.prototype,"immutable",j2);Object.defineProperty(F2.prototype,"sparse",j2);Object.defineProperty(F2.prototype,"text",j2);Object.defineProperty(F2.prototype,"transform",j2);AO.exports=F2});var aB=z((nQ1,m7)=>{var e51=E2();m7.exports=function F(A,B){if(m7.exports.convertToTrue.has(A))return!0;if(m7.exports.convertToFalse.has(A))return!1;if(A==null)return A;throw new e51("boolean",A,B)};m7.exports.convertToTrue=new Set([!0,"true",1,"1","yes"]);m7.exports.convertToFalse=new Set([!1,"false",0,"0","no"])});var rB=z((sQ1,BO)=>{var FF1=aB();/*!
 * ignore
 */BO.exports=function(F){const A=this!=null?this.path:null;return FF1(F,A)}});var DE=z((aQ1,DO)=>{/*!
 * ignore
 */DO.exports=function(F){if(Array.isArray(F)){if(!F.every((A)=>typeof A==="number"||typeof A==="string"))throw new Error("$type array values must be strings or numbers");return F}if(typeof F!=="number"&&typeof F!=="string")throw new Error("$type parameter must be number, string, or array of numbers and strings");return F}});var ZO=z((rQ1,JO)=>{var BF1=function(F,A){return function B(D,J,Z,X){if(this==null||this.$__==null)return D;if(this.isNew)return D;if(X&&X.overwriteImmutable)return D;if(!(typeof A==="function"?A.call(this,this):A))return D;const $=this.$__.priorDoc!=null?this.$__.priorDoc.$__getValue(F):this.$__getValue(F);if(this.$__.strictMode==="throw"&&D!==$)throw new AF1(F,"Path `"+F+"` is immutable and strict mode is set to throw.",!0);return $}},AF1=V4();/*!
 * ignore
 */JO.exports=function(F){if(F.$immutable)F.$immutableSetter=BF1(F.path,F.options.immutable),F.set(F.$immutableSetter);else if(F.$immutableSetter)F.setters=F.setters.filter((A)=>A!==F.$immutableSetter),delete F.$immutableSetter}});var YO=z((tQ1,XO)=>{XO.exports=function F(A){return typeof A==="function"&&A.constructor&&A.constructor.name==="AsyncFunction"}});var GO=z((oQ1,$O)=>{$O.exports=function F(A){const B=Object.keys(A);let D=!0;for(let J=0,Z=B.length;J<Z;++J)if(typeof A[B[J]]==="object"&&A[B[J]]!==null){D=!1;break}return D}});var WO=z((eQ1,EO)=>{var ZF1=function(F){if(F=String(F),F.length>100)return;var A=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(F);if(!A)return;var B=parseFloat(A[1]),D=(A[2]||"ms").toLowerCase();switch(D){case"years":case"year":case"yrs":case"yr":case"y":return B*JF1;case"weeks":case"week":case"w":return B*DF1;case"days":case"day":case"d":return B*H9;case"hours":case"hour":case"hrs":case"hr":case"h":return B*l7;case"minutes":case"minute":case"mins":case"min":case"m":return B*c7;case"seconds":case"second":case"secs":case"sec":case"s":return B*d7;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return B;default:return}},XF1=function(F){var A=Math.abs(F);if(A>=H9)return Math.round(F/H9)+"d";if(A>=l7)return Math.round(F/l7)+"h";if(A>=c7)return Math.round(F/c7)+"m";if(A>=d7)return Math.round(F/d7)+"s";return F+"ms"},YF1=function(F){var A=Math.abs(F);if(A>=H9)return tB(F,A,H9,"day");if(A>=l7)return tB(F,A,l7,"hour");if(A>=c7)return tB(F,A,c7,"minute");if(A>=d7)return tB(F,A,d7,"second");return F+" ms"},tB=function(F,A,B,D){var J=A>=B*1.5;return Math.round(F/B)+" "+D+(J?"s":"")},d7=1000,c7=d7*60,l7=c7*60,H9=l7*24,DF1=H9*7,JF1=H9*365.25;EO.exports=function(F,A){A=A||{};var B=typeof F;if(B==="string"&&F.length>0)return ZF1(F);else if(B==="number"&&isFinite(F))return A.long?YF1(F):XF1(F);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(F))}});var HO=z((FL1,CO)=>{CO.exports=function F(A){const B=[];let D="",J="DEFAULT";for(let Z=0;Z<A.length;++Z){if(J==="IN_SQUARE_BRACKETS"&&!/\d/.test(A[Z])&&A[Z]!=="]")J="DEFAULT",D=B[B.length-1]+"["+D,B.splice(B.length-1,1);if(A[Z]==="["){if(J!=="IMMEDIATELY_AFTER_SQUARE_BRACKETS")B.push(D),D="";J="IN_SQUARE_BRACKETS"}else if(A[Z]==="]")if(J==="IN_SQUARE_BRACKETS")J="IMMEDIATELY_AFTER_SQUARE_BRACKETS",B.push(D),D="";else J="DEFAULT",D+=A[Z];else if(A[Z]==="."){if(J!=="IMMEDIATELY_AFTER_SQUARE_BRACKETS")B.push(D),D="";J="DEFAULT"}else D+=A[Z]}if(J!=="IMMEDIATELY_AFTER_SQUARE_BRACKETS")B.push(D);return B}});var QO=z(($F1)=>{var zO=function(F,A,B,D,J,Z){for(var X,Y=0;Y<F.length&&Y<A.length;++Y)if(X=F[Y],Array.isArray(X)&&Array.isArray(A[Y]))zO(X,A[Y],B,D,J,Z);else if(X)if(D)D(X,B,Z(A[Y]));else{if(X[J])X=X[J];X[B]=Z(A[Y])}},UO=function(F){return F},n5=HO(),KO=["__proto__","constructor","prototype"];$F1.get=function(F,A,B,D){var J;if(typeof B=="function")if(B.length<2)D=B,B=void 0;else J=B,B=void 0;D||(D=UO);var Z=typeof F=="string"?n5(F):F;if(!Array.isArray(Z))throw new TypeError("Invalid `path`. Must be either string or array");var X=A,Y;for(var $=0;$<Z.length;++$){if(Y=Z[$],typeof Z[$]!=="string"&&typeof Z[$]!=="number")throw new TypeError("Each segment of path to `get()` must be a string or number, got "+typeof Z[$]);if(Array.isArray(X)&&!/^\d+$/.test(Y)){var G=Z.slice($);return[].concat(X).map(function(W){return W?$F1.get(G,W,B||J,D):D(void 0)})}if(J)X=J(X,Y);else{var E=B&&X[B]?X[B]:X;X=E instanceof Map?E.get(Y):E[Y]}if(!X)return D(X)}return D(X)};$F1.has=function(F,A){var B=typeof F==="string"?n5(F):F;if(!Array.isArray(B))throw new TypeError("Invalid `path`. Must be either string or array");var D=B.length,J=A;for(var Z=0;Z<D;++Z){if(typeof B[Z]!=="string"&&typeof B[Z]!=="number")throw new TypeError("Each segment of path to `has()` must be a string or number, got "+typeof B[Z]);if(J==null||typeof J!=="object"||!(B[Z]in J))return!1;J=J[B[Z]]}return!0};$F1.unset=function(F,A){var B=typeof F==="string"?n5(F):F;if(!Array.isArray(B))throw new TypeError("Invalid `path`. Must be either string or array");var D=B.length,J=A;for(var Z=0;Z<D;++Z){if(J==null||typeof J!=="object"||!(B[Z]in J))return!1;if(typeof B[Z]!=="string"&&typeof B[Z]!=="number")throw new TypeError("Each segment of path to `unset()` must be a string or number, got "+typeof B[Z]);if(KO.indexOf(B[Z])!==-1)return!1;if(Z===D-1)return delete J[B[Z]],!0;J=J instanceof Map?J.get(B[Z]):J[B[Z]]}return!0};$F1.set=function(F,A,B,D,J,Z){var X;if(typeof D=="function")if(D.length<2)J=D,D=void 0;else X=D,D=void 0;J||(J=UO);var Y=typeof F=="string"?n5(F):F;if(!Array.isArray(Y))throw new TypeError("Invalid `path`. Must be either string or array");if(B==null)return;for(var $=0;$<Y.length;++$){if(typeof Y[$]!=="string"&&typeof Y[$]!=="number")throw new TypeError("Each segment of path to `set()` must be a string or number, got "+typeof Y[$]);if(KO.indexOf(Y[$])!==-1)return}var G=Z||/\$/.test(F)&&Z!==!1,E=B,W;for(var $=0,C=Y.length-1;$<C;++$){if(W=Y[$],W=="$")if($==C-1)break;else continue;if(Array.isArray(E)&&!/^\d+$/.test(W)){var H=Y.slice($);if(!G&&Array.isArray(A))for(var q=0;q<E.length&&q<A.length;++q)$F1.set(H,A[q],E[q],D||X,J,G);else for(var q=0;q<E.length;++q)$F1.set(H,A,E[q],D||X,J,G);return}if(X)E=X(E,W);else{var K=D&&E[D]?E[D]:E;E=K instanceof Map?K.get(W):K[W]}if(!E)return}if(W=Y[C],D&&E[D])E=E[D];if(Array.isArray(E)&&!/^\d+$/.test(W))if(!G&&Array.isArray(A))zO(E,A,W,X,D,J);else for(var q=0;q<E.length;++q){var U=E[q];if(U)if(X)X(U,W,J(A));else{if(U[D])U=U[D];U[W]=J(A)}}else if(X)X(E,W,J(A));else if(E instanceof Map)E.set(W,J(A));else E[W]=J(A)};/*!
 * Split a string path into components delimited by '.' or
 * '[\d+]'
 *
 * #### Example:
 *     stringToParts('foo[0].bar.1'); // ['foo', '0', 'bar', '1']
 */$F1.stringToParts=n5;/*!
 * Recursively set nested arrays
 *//*!
 * Returns the value passed to it.
 */});var h6=z((LO,VO)=>{VO.exports=LO=QO()});var IO=z((BL1,RO)=>{var CF1=J0();class wO{constructor(F){if(this._docs={},this._childDocs=[],F==null)return;if(F=CF1(F),Object.assign(this,F),typeof F.subPopulate==="object")this.populate=F.subPopulate;if(F.perDocumentLimit!=null&&F.limit!=null)throw new Error("Can not use `limit` and `perDocumentLimit` at the same time. Path: `"+F.path+"`.")}}RO.exports=wO});var NO=z((HF1)=>{HF1.isMongooseDocumentArray=function(F){return Array.isArray(F)&&F.isMongooseDocumentArray}});var oB=z((JL1,PO)=>{var KF1=y2(),p7=Symbol("mongoose#emitted");PO.exports=function F(A,B,D,J){if(typeof A==="function")try{return B(function(Z){if(Z!=null){if(D!=null&&D.listeners!=null&&D.listeners("error").length>0&&!Z[p7])Z[p7]=!0,D.emit("error",Z);try{A(Z)}catch(X){return KF1(()=>{throw X})}return}A.apply(this,arguments)})}catch(Z){if(D!=null&&D.listeners!=null&&D.listeners("error").length>0&&!Z[p7])Z[p7]=!0,D.emit("error",Z);return A(Z)}return J=J||global.Promise,new J((Z,X)=>{B(function(Y,$){if(Y!=null){if(D!=null&&D.listeners!=null&&D.listeners("error").length>0&&!Y[p7])Y[p7]=!0,D.emit("error",Y);return X(Y)}if(arguments.length>2)return Z(Array.prototype.slice.call(arguments,1));Z($)})})}});var eB=z((ZL1,MO)=>{MO.exports=function F(A,B,D){const J=Object.keys(B.tree),Z={};for(let X of J){if(D&&(A.paths[X]||A.nested[X]||A.singleNestedPaths[X]))continue;Z[X]=B.tree[X]}A.options._isMerging=!0,A.add(Z,null),delete A.options._isMerging,A.callQueue=A.callQueue.concat(B.callQueue),A.method(B.methods),A.static(B.statics);for(let[X,Y]of Object.entries(B._userProvidedOptions))if(!(X in A._userProvidedOptions))A.set(X,Y);for(let X in B.query)A.query[X]=B.query[X];for(let X in B.virtuals)A.virtuals[X]=B.virtuals[X].clone();A._indexes=A._indexes.concat(B._indexes||[]),A.s.hooks.merge(B.s.hooks,!1)}});var uO=z((TO,jO)=>{/*!
 * Module dependencies.
 */var XL1=D1(),m6=jO.exports=TO=function F(){};m6.ctor=function(){const F=[...arguments],A=function(){m6.apply(this,arguments),this.paths={},this.states={}};return A.prototype=new m6,A.prototype.stateNames=F,F.forEach(function(B){A.prototype[B]=function(D){this._changeState(D,B)}}),A};m6.prototype._changeState=function F(A,B){const D=this.paths[A];if(D===B)return;const J=this.states[D];if(J)delete J[A];this.paths[A]=B,this.states[B]=this.states[B]||{},this.states[B][A]=!0};/*!
 * ignore
 */m6.prototype.clear=function F(A){if(this.states[A]==null)return;const B=Object.keys(this.states[A]);let D=B.length,J;while(D--)J=B[D],delete this.states[A][J],delete this.paths[J]};/*!
 * ignore
 */m6.prototype.clearPath=function F(A){const B=this.paths[A];if(!B)return;delete this.paths[A],delete this.states[B][A]};m6.prototype.getStatePaths=function F(A){if(this.states[A]!=null)return this.states[A];return{}};m6.prototype.some=function F(){const A=this,B=arguments.length?arguments:this.stateNames;return Array.prototype.some.call(B,function(D){if(A.states[D]==null)return!1;return Object.keys(A.states[D]).length})};m6.prototype._iter=function F(A){return function(){let B=[...arguments];const D=B.pop();if(!B.length)B=this.stateNames;const J=this;return B.reduce(function(X,Y){if(J.states[Y]==null)return X;return X.concat(Object.keys(J.states[Y]))},[])[A](function(X,Y,$){return D(X,Y,$)})}};m6.prototype.forEach=function F(){return this.forEach=this._iter("forEach"),this.forEach.apply(this,arguments)};m6.prototype.map=function F(){return this.map=this._iter("map"),this.map.apply(this,arguments)}});var kO=z((OO,SO)=>{var E0=function(){this.activePaths=new UF1};/*!
 * Dependencies
 */var zF1=uO(),UF1=zF1.ctor("require","modify","init","default","ignore");SO.exports=OO=E0;E0.prototype.strictMode=!0;E0.prototype.fullPath=void 0;E0.prototype.selected=void 0;E0.prototype.shardval=void 0;E0.prototype.saveError=void 0;E0.prototype.validationError=void 0;E0.prototype.adhocPaths=void 0;E0.prototype.removing=void 0;E0.prototype.inserting=void 0;E0.prototype.saving=void 0;E0.prototype.version=void 0;E0.prototype._id=void 0;E0.prototype.ownerDocument=void 0;E0.prototype.populate=void 0;E0.prototype.populated=void 0;E0.prototype.primitiveAtomics=void 0;E0.prototype.wasPopulated=!1;E0.prototype.scope=void 0;E0.prototype.session=null;E0.prototype.pathsToScopes=null;E0.prototype.cachedRequired=null});var q9=z((QF1)=>{QF1.schemaMixedSymbol=Symbol.for("mongoose:schema_mixed");QF1.builtInMiddleware=Symbol.for("mongoose:built-in-middleware")});var K9=z(($L1,xO)=>{var d6=function(F,A){if(A&&A.default){const B=A.default;if(Array.isArray(B)&&B.length===0)A.default=Array;else if(!A.shared&&RF1(B)&&Object.keys(B).length===0)A.default=function(){return{}}}FD.call(this,F,A,"Mixed"),this[wF1.schemaMixedSymbol]=!0};/*!
 * Module dependencies.
 */var FD=O0(),wF1=q9(),RF1=r3(),IF1=D1();d6.schemaName="Mixed";d6.defaultOptions={};/*!
 * Inherits from SchemaType.
 */d6.prototype=Object.create(FD.prototype);d6.prototype.constructor=d6;d6.get=FD.get;d6.set=FD.set;d6.setters=[];d6.prototype.cast=function(F){if(F instanceof Error)return IF1.errorToPOJO(F);return F};d6.prototype.castForQuery=function(F,A){return A};/*!
 * Module exports.
 */xO.exports=d6});var XE=z((GL1,fO)=>{/*!
 * Module dependencies.
 */var NF1=H1();class ZE extends NF1{constructor(F,A){const B=Array.isArray(A)?"array":"primitive value";super("Tried to set nested object field `"+F+`\` to ${B} \``+A+"`");this.path=F}}Object.defineProperty(ZE.prototype,"name",{value:"ObjectExpectedError"});fO.exports=ZE});var AD=z((EL1,_O)=>{/*!
 * Module dependencies.
 */var PF1=H1();class YE extends PF1{constructor(F,A,B){super('Parameter "'+A+'" to '+B+'() must be an object, got "'+F.toString()+'" (type '+typeof F+")")}}Object.defineProperty(YE.prototype,"name",{value:"ObjectParameterError"});_O.exports=YE});var bO=z((WL1,gO)=>{/*!
 * Module dependencies.
 */var MF1=H1();class $E extends MF1{constructor(F){super("Can\'t validate() the same doc multiple times in parallel. Document: "+F._id)}}Object.defineProperty($E.prototype,"name",{value:"ParallelValidateError"});/*!
 * exports
 */gO.exports=$E});var GE=z((CL1,yO)=>{yO.exports=function F(A){const B={},D=Object.keys(A);for(let J of D){if(J.indexOf(".")===-1){B[J]=1;continue}const Z=J.split(".");let X=Z[0];for(let Y=0;Y<Z.length;++Y)if(B[X]=1,Y+1<Z.length)X=X+"."+Z[Y+1]}return B}});var hO=z((HL1,vO)=>{vO.exports=function F(A){if(A==null||typeof A!=="object")return!1;return A.$slice==null&&A.$elemMatch==null&&A.$meta==null&&A.$==null}});var BD=z((qL1,mO)=>{var EE=function(F,A){if(F.$__.activePaths.default(A),F.$isSubdocument&&F.$isSingleNested&&F.$parent()!=null)F.$parent().$__.activePaths.default(F.$__pathRelativeToParent(A))},TF1=hO();mO.exports=function F(A,B,D,J,Z,X){const Y=Object.keys(A.$__schema.paths),$=Y.length;for(let G=0;G<$;++G){let E,W="";const C=Y[G];if(C==="_id"&&A.$__.skipId)continue;const H=A.$__schema.paths[C],q=H.splitPath(),K=q.length;let U=!1,Q=A._doc;for(let V=0;V<K;++V){if(Q==null)break;const L=q[V];if(W+=(!W.length?"":".")+L,D===!0){if(W in B)break}else if(D===!1&&B&&!U){const N=H.$isSingleNested||H.$isMongooseDocumentArray;if(W in B&&!TF1(B[W])||V===K-1&&N&&J!=null&&J[W])U=!0;else if(J!=null&&!J[W])break}if(V===K-1){if(Q[L]!==void 0)break;if(Z!=null){if(typeof H.defaultValue==="function"){if(!H.defaultValue.$runBeforeSetters&&Z)break;if(H.defaultValue.$runBeforeSetters&&!Z)break}else if(!Z)continue}if(X&&X[W])break;if(B&&D!==null){if(D===!0){if(C in B)continue;try{E=H.getDefault(A,!1)}catch(N){A.invalidate(C,N);break}if(typeof E!=="undefined")Q[L]=E,EE(A,C)}else if(U){try{E=H.getDefault(A,!1)}catch(N){A.invalidate(C,N);break}if(typeof E!=="undefined")Q[L]=E,EE(A,C)}}else{try{E=H.getDefault(A,!1)}catch(N){A.invalidate(C,N);break}if(typeof E!=="undefined")Q[L]=E,EE(A,C)}}else Q=Q[L]}}};/*!
 * ignore
 */});var WE=z((KL1,dO)=>{/*!
 * ignore
 */dO.exports=function F(A,B,D){D=D||{};const J=D.skipDocArrays;let Z=0;if(!A)return Z;for(let X of Object.keys(A.$__.activePaths.getStatePaths("modify"))){if(J){const Y=A.$__schema.path(X);if(Y&&Y.$isMongooseDocumentArray)continue}if(X.startsWith(B+".")){if(A.$__.activePaths.clearPath(X),++Z,A.$isSubdocument){const Y=A.ownerDocument(),$=A.$__fullPath(X);Y.$__.activePaths.clearPath($)}}}return Z}});var JD=z((gF1)=>{var lO=function(F,A,B,D){i7=i7||u2();const J=D.typeKey;for(let Z of Object.keys(F)){const X=F[Z],$=cO(X)&&Object.keys(X).length>0&&(!X[J]||J==="type"&&cO(X.type)&&X.type.type)?X:null;pO({prop:Z,subprops:$,prototype:A,prefix:B,options:D})}},pO=function({prop:F,subprops:A,prototype:B,prefix:D,options:J}){i7=i7||u2();const Z=(D?D+".":"")+F;D=D||"";const X=D?Object.freeze({}):fF1;if(A)Object.defineProperty(B,F,{enumerable:!0,configurable:!0,get:function(){const Y=this;if(!this.$__.getters)this.$__.getters={};if(!this.$__.getters[Z]){const $=Object.create(i7.prototype,_F1(this));if(!D)$.$__[DD]=this;$.$__.nestedPath=Z,Object.defineProperty($,"schema",{enumerable:!1,configurable:!0,writable:!1,value:B.schema}),Object.defineProperty($,"$__schema",{enumerable:!1,configurable:!0,writable:!1,value:B.schema}),Object.defineProperty($,uF1,{enumerable:!1,configurable:!0,writable:!1,value:B.schema}),Object.defineProperty($,"toObject",{enumerable:!1,configurable:!0,writable:!1,value:function(){return jF1(Y.get(Z,null,{virtuals:this&&this.schema&&this.schema.options&&this.schema.options.toObject&&this.schema.options.toObject.virtuals||null}))}}),Object.defineProperty($,"$__get",{enumerable:!1,configurable:!0,writable:!1,value:function(){return Y.get(Z,null,{virtuals:this&&this.schema&&this.schema.options&&this.schema.options.toObject&&this.schema.options.toObject.virtuals||null})}}),Object.defineProperty($,"toJSON",{enumerable:!1,configurable:!0,writable:!1,value:function(){return Y.get(Z,null,{virtuals:this&&this.schema&&this.schema.options&&this.schema.options.toJSON&&this.schema.options.toJSON.virtuals||null})}}),Object.defineProperty($,"$__isNested",{enumerable:!1,configurable:!0,writable:!1,value:!0}),Object.defineProperty($,"$isEmpty",{enumerable:!1,configurable:!0,writable:!1,value:function(){return Object.keys(this.get(Z,null,xF1)||{}).length===0}}),Object.defineProperty($,"$__parent",{enumerable:!1,configurable:!0,writable:!1,value:this}),lO(A,$,Z,J),this.$__.getters[Z]=$}return this.$__.getters[Z]},set:function(Y){if(Y!=null&&Y.$__isNested)Y=Y.$__get();else if(Y instanceof i7&&!Y.$__isNested)Y=Y.$toObject(OF1);(this.$__[DD]||this).$set(Z,Y)}});else Object.defineProperty(B,F,{enumerable:!0,configurable:!0,get:function(){return this[kF1].call(this.$__[DD]||this,Z,null,X)},set:function(Y){this.$set.call(this.$__[DD]||this,Z,Y)}})},_F1=function(F){const A={};return Object.getOwnPropertyNames(F).forEach(function(B){if(["isNew","$__","$errors","errors","_doc","$locals","$op","__parentArray","__index","$isDocumentArrayElement"].indexOf(B)===-1)return;A[B]=Object.getOwnPropertyDescriptor(F,B),A[B].enumerable=!1}),A},jF1=J0(),uF1=t().documentSchemaSymbol,OF1=y6().internalToObjectOptions,SF1=D1(),i7,kF1=t().getSymbol,DD=t().scopeSymbol,cO=SF1.isPOJO;/*!
 * exports
 */gF1.compile=lO;gF1.defineKey=pO;var xF1=Object.freeze({minimize:!0,virtuals:!1,getters:!1,transform:!1}),fF1=Object.freeze({noDottedPath:!0})});var n7=z((dF1)=>{var sO=function(F,A,B,D){let J;if(F&&nO(F)&&!Buffer.isBuffer(F))J=Object.keys(F.toObject({transform:!1,virtuals:!1})||{});else J=Object.keys(F||{});const Z=J.length,X={};A=A?A+".":"";for(let Y=0;Y<Z;++Y){const $=J[Y],G=F[$];X[A+$]=G;const E=D&&D.path&&D.path(A+$),W=D&&D.nested&&D.nested[A+$];if(E&&E.instance==="Mixed")continue;if(rO(G)){if(B&&B.skipArrays&&Array.isArray(G))continue;const C=sO(G,A+$,B,D);for(let H in C)X[H]=C[H];if(Array.isArray(G))X[A+$]=G}if(W){const C=Object.keys(D.paths);for(let H of C)if(H.startsWith(A+$+".")&&!X.hasOwnProperty(H))X[H]=void 0}}return X},aO=function(F,A,B,D=null){if(F==null||typeof F!=="object")return;if(D==null)D={raw:{update:F,path:A},trace:new WeakSet};if(D.trace.has(F))throw new hF1(`a circular reference in the update value, updateValue:
${mF1.inspect(D.raw.update,{showHidden:!1,depth:1})}
updatePath: '${D.raw.path}'`);D.trace.add(F);const J=Object.keys(F||{}),Z=J.length;B=B||{},A=A?A+".":"";for(let X=0;X<Z;++X){const Y=J[X];let $=F[Y];const G=A+Y;if(B[G]=!0,!Buffer.isBuffer($)&&nO($))$=$.toObject({transform:!1,virtuals:!1});if(rO($))aO($,A+Y,B,D)}return D.trace.delete(F),B},rO=function(F){return F&&typeof F==="object"&&!(F instanceof Date)&&!iO(F,"ObjectId")&&(!Array.isArray(F)||F.length!==0)&&!(F instanceof Buffer)&&!iO(F,"Decimal128")&&!(F instanceof vF1)};/*!
 * Module dependencies.
 */var vF1=B6().Binary,iO=L2(),nO=S8(),hF1=W2(),mF1=import.meta.require("util");dF1.flatten=sO;dF1.modifiedPaths=aO;/*!
 * ignore
 *//*!
 * ignore
 *//*!
 * ignore
 */});var t1=z((QL1,tO)=>{var CE=function(F,A){if(F==null)return F;if(F instanceof Map)return F.get(A);return F[A]};tO.exports=function F(A,B,D){let J,Z=!1;if(typeof B==="string"){if(B.indexOf(".")===-1){const $=CE(A,B);if($==null)return D;return $}J=B.split(".")}else if(Z=!0,J=B,J.length===1){const $=CE(A,J[0]);if($==null)return D;return $}let X=B,Y=A;for(let $ of J){if(Y==null)return D;if(!Z&&Y[X]!=null)return Y[X];if(Y=CE(Y,$),!Z)X=X.substr($.length+1)}return Y==null?D:Y}});var HE=z((LL1,eO)=>{var oO=L2();eO.exports=function F(A,B){if(typeof A==="string"&&typeof B==="string")return A===B;if(typeof A==="number"&&typeof B==="number")return A===B;if(oO(A,"ObjectId")&&oO(B,"ObjectId"))return A.toString()===B.toString();return!1}});var ZD=z((VL1,FS)=>{var pF1=HE();FS.exports=function F(A,B){if(A==null||A.discriminators==null)return null;for(let D of Object.keys(A.discriminators)){const J=A.discriminators[D];if(J.discriminatorMapping==null)continue;if(pF1(J.discriminatorMapping.value,B))return J}return null}});var BS=z((wL1,AS)=>{var iF1=t1(),nF1=ZD();AS.exports=function F(A,B,D){D=D||{};const J=D.typeOnly,Z=Array.isArray(B)?B:B.indexOf(".")===-1?[B]:B.split(".");let X=null,Y="adhocOrUndefined";const $=nF1(A.schema,A.get(A.schema.options.discriminatorKey))||A.schema;for(let G=0;G<Z.length;++G){const E=Z.slice(0,G+1).join(".");if(X=$.path(E),X==null){Y="adhocOrUndefined";continue}if(X.instance==="Mixed")return J?"real":X;if(Y=$.pathType(E),(X.$isSingleNested||X.$isMongooseDocumentArrayElement)&&X.schema.discriminators!=null){const W=X.schema.discriminators,C=A.get(E+"."+iF1(X,"schema.options.discriminatorKey"));if(C==null||W[C]==null)continue;const H=Z.slice(G+1).join(".");return F(A.get(E),H,D)}}return J?Y:X}});var JS=z((RL1,DS)=>{var sF1=t1();DS.exports=function F(A,B,D){const J=D!=null?Object.keys(sF1(A.tree,D,{})):Object.keys(A.tree),Z=new Set(Object.keys(B));let X;if(Z.size>1){X=new Set;for(let Y of J)if(Z.has(Y))X.add(Y);for(let Y of Z)if(!X.has(Y))X.add(Y);X=Array.from(X)}else X=Array.from(Z);return X}});var XS=z((IL1,ZS)=>{ZS.exports=function F(A,B){if(B.length===1)return;let D=B[0],J=void 0;for(let Z=0;Z<B.length-1;++Z){const X=A.path(D);if(X&&X.schema)J=X.schema.options.strict,A=X.schema,D=X.$isMongooseDocumentArray&&!isNaN(B[Z+1])?"":B[Z+1];else D+=D.length?"."+B[Z+1]:B[Z+1]}return J}});var XD=z((NL1,YS)=>{var aF1=D1(),rF1=new Set(["__index","__parentArray","_doc"]);YS.exports=function F(A,B){if(aF1.isPOJO(A)&&A.$__!=null&&A._doc!=null){if(B){const D={};for(let J of Object.keys(A)){if(typeof J==="symbol")continue;if(J[0]==="$")continue;if(rF1.has(J))continue;D[J]=A[J]}return{...A._doc,...D}}return A._doc}return A}});var s7=z((PL1,$S)=>{/*!
 * ignore
 */$S.exports=function F(A){if(A==null)return!0;if(typeof A==="object")return!("$meta"in A)&&!("$slice"in A);return!0}});var a7=z((ML1,GS)=>{var tF1=s7();/*!
 * ignore
 */GS.exports=function F(A){if(A==null)return null;const B=Object.keys(A);let D=null;if(B.length===1&&B[0]==="_id")D=!A._id;else for(let J=0;J<B.length;++J){const Z=B[J];if(Z!=="_id"&&tF1(A[Z])){D=A[Z]!=null&&typeof A[Z]==="object"?F(A[Z]):!A[Z];break}}return D}});var qE=z((TL1,ES)=>{var oF1=D1();ES.exports=function F(A,B){if(A._id==null||B==null||B.length===0)return;const D=String(A._id);for(let J of B){if(J.isVirtual)continue;const X=J.path.split(".");for(let Y=0;Y<X.length-1;++Y){const $=X.slice(0,Y+1).join("."),G=X.slice(Y+1).join("."),E=A.get($);if(E==null)continue;if(oF1.isMongooseDocumentArray(E)){for(let W=0;W<E.length;++W)if(E[W])E[W].populated(G,J._docs[D]==null?void 0:J._docs[D][W],J);break}}}}});var KE=z((jL1,CS)=>{var WS=function(F){const A=Object.keys(F);let B=A.length,D,J,Z;while(B--){if(J=A[B],Z=F[J],eF1(Z))F[J]=WS(Z);if(F[J]===void 0){delete F[J];continue}D=!0}return D?F:void 0},{isPOJO:eF1}=D1();CS.exports=WS});var qS=z((uL1,HS)=>{HS.exports=function F(A,B,D,J,Z){const X=Object.keys(A).reduce(($,G)=>$||G.startsWith(B+"."),!1),Y=B+"."+D.options.discriminatorKey;if(!X&&Z.length===1&&Z[0]===Y)J.splice(J.indexOf(Y),1)}});var c6=z((OL1,KS)=>{var FA1=HE();KS.exports=function F(A,B){if(A==null)return null;for(let D of Object.keys(A)){const J=A[D];if(J.schema&&J.schema.discriminatorMapping&&FA1(J.schema.discriminatorMapping.value,B))return J}return null}});var YD=z((SL1,zS)=>{/*!
 * ignore
 */zS.exports=function F(A,B){const D=B.split(".");let J="",Z,X,Y;for(let $=0;$<D.length;++$)if(J+=J.length?".":""+D[$],A[J]){X=Object.keys(A),Y=X.length;for(Z=0;Z<Y;++Z)if(X[$].indexOf(J+".")===0&&X[$].indexOf(B)!==0)continue;return!0}return!1}});var s5=z((XA1)=>{var QS=function(F){return function(A){if(A.options||(A.options={}),F!=null&&Array.isArray(F.virtuals))F=Object.assign({},F),F.virtuals=F.virtuals.filter((B)=>typeof B==="string"&&B.startsWith(A.path+".")).map((B)=>B.slice(A.path.length+1));A.options.lean=F}};/*!
 * Module dependencies
 */var AA1=qS(),US=t1(),BA1=c6(),DA1=s7(),JA1=J0(),ZA1=YD();XA1.preparePopulationOptions=function F(A,B){const D=A.options.populate,J=Object.keys(D).reduce((Z,X)=>Z.concat([D[X]]),[]);if(B.lean!=null)J.filter((Z)=>(Z&&Z.options&&Z.options.lean)==null).forEach(QS(B.lean));return J.forEach((Z)=>{Z._localModel=A.model}),J};XA1.preparePopulationOptionsMQ=function F(A,B){const D=A._mongooseOptions.populate,J=Object.keys(D).reduce((Y,$)=>Y.concat([D[$]]),[]);if(B.lean!=null)J.filter((Y)=>(Y&&Y.options&&Y.options.lean)==null).forEach(QS(B.lean));const Z=A&&A.options&&A.options.session||null;if(Z!=null)J.forEach((Y)=>{if(Y.options==null){Y.options={session:Z};return}if(!("session"in Y.options))Y.options.session=Z});const X=A._fieldsForExec();return J.forEach((Y)=>{Y._queryProjection=X}),J.forEach((Y)=>{Y._localModel=A.model}),J};XA1.createModel=function F(A,B,D,J,Z){A.hooks.execPreSync("createModel",B);const X=A.schema?A.schema.discriminatorMapping:null,Y=X&&X.isRoot?X.key:null,$=B[Y];if(Y&&$&&A.discriminators){const E=A.discriminators[$]||BA1(A.discriminators,$);if(E){const W=JA1(J);return XA1.applyPaths(W,E.schema),new E(void 0,W,!0)}}const G={skipId:!0,isNew:!1,willInit:!0};if(Z!=null&&"defaults"in Z)G.defaults=Z.defaults;return new A(void 0,D,G)};/*!
 * ignore
 */XA1.createModelAndInit=function F(A,B,D,J,Z,X,Y){const $=X?{populated:X}:void 0,G=XA1.createModel(A,B,D,J,Z);try{G.$init(B,$,Y)}catch(E){Y(E,G)}};/*!
 * ignore
 */XA1.applyPaths=function F(A,B){let D,J;const Z=new Set;if(A){J=Object.keys(A);const W=[];for(let C=0;C<J.length;++C){const H=J[C];if(J[C][0]!=="-")continue;if(delete A[H],H==="-_id")A._id=0;else W.push(H.slice(1))}J=Object.keys(A);for(let C=0;C<J.length;++C){if(J[C][0]==="+")continue;const H=A[J[C]];if(!DA1(H))continue;if(J[C]==="_id"&&J.length>1)continue;if(J[C]===B.options.discriminatorKey&&J.length>1&&H!=null&&!H)continue;D=!H;break}for(let C of W){const H=B.path(C);if(!H||!H.selected||D!==!1)A[C]=0,D=!0;else if(H&&H.selected&&D===!1)Z.add(C)}}const X=[],Y=[],$=[];switch(G(B),D){case!0:for(let W of Y)A[W]=0;break;case!1:if(B&&B.paths._id&&B.paths._id.options&&B.paths._id.options.select===!1)A._id=0;for(let W of X){if(Z.has(W))continue;if(ZA1(A,W))continue;A[W]=A[W]||1}break;case void 0:if(A==null)break;for(let W of Object.keys(A||{}))if(W.startsWith("+"))delete A[W];for(let W of Y){if(A[W]!=null)continue;A[W]=0}break}function G(W,C){if(C||(C=""),$.indexOf(W)!==-1)return[];$.push(W);const H=[];return W.eachPath(function(q,K){if(C)q=C+"."+q;if(K.$isSchemaMap||q.endsWith(".$*")){const Q="+"+q,V=A&&Q in A;if(K.options&&K.options.select===!1&&!V)Y.push(q);return}let U=E(q,K);if(U==null&&!Array.isArray(K)&&K.$isMongooseArray&&!K.$isMongooseDocumentArray)U=E(q,K.caster);if(U!=null)H.push(U);if(K.schema){const Q=G(K.schema,q);if(D===!1)AA1(A,q,K.schema,X,Q)}}),$.pop(),H}function E(W,C){if(A==null)return;if(typeof C.selected!=="boolean")return;if(C.selected===!1&&A[W])return;if(!D&&C.selected&&W===B.options.discriminatorKey&&A[W]!=null&&!A[W]){delete A[W];return}if(D===!1&&C.selected&&A[W]!=null&&!A[W]){delete A[W];return}const H="+"+W;if(A&&H in A){if(delete A[H],D===!1&&J.length>1&&!~J.indexOf(W))A[W]=1;return}const K=W.split(".");let U="";for(let Q=0;Q<K.length;++Q)if(U+=U.length?"."+K[Q]:K[Q],Y.indexOf(U)!==-1)return;if(!D&&(C&&C.options&&C.options.$skipDiscriminatorCheck||!1)){let Q="";for(let V=0;V<K.length;++V){Q+=(Q.length===0?"":".")+K[V];const L=US(A,Q,!1)||US(A,Q+".$",!1);if(L&&typeof L!=="object")return}}return(C.selected?X:Y).push(W),W}}});var wS=z((xL1,VS)=>{var WA1=function(F){return!!F&&(typeof F==="object"||typeof F==="function")&&typeof F.then==="function"};VS.exports=WA1});var $D=z((fL1,RS)=>{var CA1=/\./g;RS.exports=function F(A){if(A.indexOf(".")===-1)return[A];const B=A.split(CA1),D=B.length,J=new Array(D);let Z="";for(let X=0;X<D;++X)Z+=Z.length!==0?"."+B[X]:B[X],J[X]=Z;return J}});var NS=z((_L1,IS)=>{IS.exports=function F(A,B,D){let J=B[0],Z=D,X=A;for(let Y=0;Y<B.length-1;++Y){const $=Z.path(J);if($&&$.schema){let G=X.get(J);if(Z=$.schema,J=B[Y+1],Array.isArray(G)&&!isNaN(J))G=G[J],J="";if(G==null)break;X=G}else J+=J.length?"."+B[Y+1]:B[Y+1]}return X}});var GD=z((gL1,MS)=>{var c1=function(F,A,B,D,J){if(typeof D==="object"&&D!=null&&J==null)J=D,D=void 0;if(B!=null){const Z={isNew:B.isNew};if("defaults"in B.$__)Z.defaults=B.$__.defaults;J=Object.assign(Z,J)}if(J!=null&&J.path!=null)this.$basePath=J.path;w4.call(this,F,A,D,J),delete this.$__.priorDoc},zA1=function(F){let A=F.ownerDocument();function B(){A.$removeListener("save",B),A.$removeListener("deleteOne",B),F.emit("deleteOne",F),F.constructor.emit("deleteOne",F),A=F=null}A.$on("save",B),A.$on("deleteOne",B)},w4=u2(),HA1=y2(),qA1=y6().internalToObjectOptions,PS=import.meta.require("util"),KA1=D1();MS.exports=c1;c1.prototype=Object.create(w4.prototype);Object.defineProperty(c1.prototype,"$isSubdocument",{configurable:!1,writable:!1,value:!0});Object.defineProperty(c1.prototype,"$isSingleNested",{configurable:!1,writable:!1,value:!0});/*!
 * ignore
 */c1.prototype.toBSON=function(){return this.toObject(qA1)};c1.prototype.save=async function F(A){if(A=A||{},!A.suppressWarning)KA1.warn("mongoose: calling `save()` on a subdoc does **not** save the document to MongoDB, it only runs save middleware. Use `subdoc.save({ suppressWarning: true })` to hide this warning if you\'re sure this behavior is right for your app.");return new Promise((B,D)=>{this.$__save((J)=>{if(J!=null)return D(J);B(this)})})};c1.prototype.$__fullPath=function(F){if(!this.$__.fullPath)this.ownerDocument();return F?this.$__.fullPath+"."+F:this.$__.fullPath};c1.prototype.$__pathRelativeToParent=function(F){if(F==null)return this.$basePath;return[this.$basePath,F].join(".")};c1.prototype.$__save=function(F){return HA1(()=>F(null,this))};/*!
 * ignore
 */c1.prototype.$isValid=function(F){const A=this.$parent(),B=this.$__pathRelativeToParent(F);if(A!=null&&B!=null)return A.$isValid(B);return w4.prototype.$isValid.call(this,F)};/*!
 * ignore
 */c1.prototype.markModified=function(F){w4.prototype.markModified.call(this,F);const A=this.$parent(),B=this.$__pathRelativeToParent(F);if(A==null||B==null)return;const D=this.$__pathRelativeToParent().replace(/\.$/,"");if(A.isDirectModified(D)||this.isNew)return;this.$__parent.markModified(B,this)};/*!
 * ignore
 */c1.prototype.isModified=function(F,A,B){const D=this.$parent();if(D!=null){if(Array.isArray(F)||typeof F==="string")F=Array.isArray(F)?F:F.split(" "),F=F.map((J)=>this.$__pathRelativeToParent(J)).filter((J)=>J!=null);else if(!F)F=this.$__pathRelativeToParent();return D.$isModified(F,A,B)}return w4.prototype.isModified.call(this,F,A,B)};c1.prototype.$markValid=function(F){w4.prototype.$markValid.call(this,F);const A=this.$parent(),B=this.$__pathRelativeToParent(F);if(A!=null&&B!=null)A.$markValid(B)};/*!
 * ignore
 */c1.prototype.invalidate=function(F,A,B){w4.prototype.invalidate.call(this,F,A,B);const D=this.$parent(),J=this.$__pathRelativeToParent(F);if(D!=null&&J!=null)D.invalidate(J,A,B);else if(A.kind==="cast"||A.name==="CastError"||J==null)throw A;return this.ownerDocument().$__.validationError};/*!
 * ignore
 */c1.prototype.$ignore=function(F){w4.prototype.$ignore.call(this,F);const A=this.$parent(),B=this.$__pathRelativeToParent(F);if(A!=null&&B!=null)A.$ignore(B)};c1.prototype.ownerDocument=function(){if(this.$__.ownerDocument)return this.$__.ownerDocument;let F=this;const A=[],B=new Set([F]);while(!0){if(typeof F.$__pathRelativeToParent!=="function")break;A.unshift(F.$__pathRelativeToParent(void 0,!0));const D=F.$parent();if(D==null)break;if(F=D,B.has(F))throw new Error("Infinite subdocument loop: subdoc with _id "+F._id+" is a parent of itself");B.add(F)}return this.$__.fullPath=A.join("."),this.$__.ownerDocument=F,this.$__.ownerDocument};/*!
 * ignore
 */c1.prototype.$__fullPathWithIndexes=function(){let F=this;const A=[],B=new Set([F]);while(!0){if(typeof F.$__pathRelativeToParent!=="function")break;A.unshift(F.$__pathRelativeToParent(void 0,!1));const D=F.$parent();if(D==null)break;if(F=D,B.has(F))throw new Error("Infinite subdocument loop: subdoc with _id "+F._id+" is a parent of itself");B.add(F)}return A.join(".")};c1.prototype.parent=function(){return this.$__parent};c1.prototype.$parent=c1.prototype.parent;c1.prototype.$__deleteOne=function(F){if(F==null)return;return F(null,this)};c1.prototype.$__removeFromParent=function(){this.$__parent.set(this.$basePath,null)};c1.prototype.deleteOne=function(F,A){if(typeof F==="function")A=F,F=null;if(zA1(this),!F||!F.noop)this.$__removeFromParent();return this.$__deleteOne(A)};/*!
 * ignore
 */c1.prototype.populate=function(){throw new Error('Mongoose does not support calling populate() on nested docs. Instead of `doc.nested.populate("path")`, use `doc.populate("nested.path")`')};c1.prototype.inspect=function(){return this.toObject()};if(PS.inspect.custom)c1.prototype[PS.inspect.custom]=c1.prototype.inspect});var r7=z((bL1,uS)=>{var O2=function(F,A,B,D,J){if(UA1.isMongooseDocumentArray(A))this.__parentArray=A,this[a5]=A.$parent();else this.__parentArray=void 0,this[a5]=void 0;this.$setIndex(J),this.$__parent=this[a5];let Z;if(typeof B==="object"&&B!=null)Z={isNew:!0,...B},B=void 0;else Z={isNew:!0};jS.call(this,F,D,this[a5],B,Z)};/*!
 * Module dependencies.
 */var TS=import.meta.require("events").EventEmitter,jS=GD(),UA1=D1(),a5=t().documentArrayParent;/*!
 * Inherit from Subdocument
 */O2.prototype=Object.create(jS.prototype);O2.prototype.constructor=O2;Object.defineProperty(O2.prototype,"$isSingleNested",{configurable:!1,writable:!1,value:!1});Object.defineProperty(O2.prototype,"$isDocumentArrayElement",{configurable:!1,writable:!1,value:!0});for(let F in TS.prototype)O2[F]=TS.prototype[F];/*!
 * ignore
 */O2.prototype.$setIndex=function(F){if(this.__index=F,this.$__!=null&&this.$__.validationError!=null){const A=Object.keys(this.$__.validationError.errors);for(let B of A)this.invalidate(B,this.$__.validationError.errors[B])}};/*!
 * ignore
 */O2.prototype.populate=function(){throw new Error('Mongoose does not support calling populate() on nested docs. Instead of `doc.arr[0].populate("path")`, use `doc.populate("arr.0.path")`')};/*!
 * ignore
 */O2.prototype.$__removeFromParent=function(){const F=this._doc._id;if(!F)throw new Error("For your own good, Mongoose does not know how to remove an ArraySubdocument that has no _id");this.__parentArray.pull({_id:F})};O2.prototype.$__fullPath=function(F,A){if(this.__index==null)return null;if(!this.$__.fullPath)this.ownerDocument();if(A)return F?this.$__.fullPath+"."+F:this.$__.fullPath;return F?this.$__.fullPath+"."+this.__index+"."+F:this.$__.fullPath+"."+this.__index};O2.prototype.$__pathRelativeToParent=function(F,A){if(this.__index==null||(!this.__parentArray||!this.__parentArray.$path))return null;if(A)return F==null?this.__parentArray.$path():this.__parentArray.$path()+"."+F;if(F==null)return this.__parentArray.$path()+"."+this.__index;return this.__parentArray.$path()+"."+this.__index+"."+F};O2.prototype.$parent=function(){return this[a5]};O2.prototype.parentArray=function(){return this.__parentArray};/*!
 * Module exports.
 */uS.exports=O2});var CD=z((yL1,gS)=>{var wA1=function(F,A){if(!A)return!1;for(let B of F){if(B==null)return!1;const D=B.constructor;if(!(B instanceof QE)||D.modelName!==A&&D.baseModelName!==A)return!1}return!0},_S=function(F,A,B){if(typeof A==="string"){if(A.indexOf(".")===-1)return;A=xS.stringToParts(A)}if(B=B||0,B>=A.length)return;if(F==null||typeof F!=="object")return;if(_S(F[A[0]],A,B+1),F[A[0]]!=null&&typeof F[A[0]]==="object"&&Object.keys(F[A[0]]).length===0)delete F[A[0]]},ED=function(F,A){const B=F==null?null:F[J3]&&F[J3].caster&&F[J3].caster.options&&F[J3].caster.options.ref||null;if(F.length===0&&A.length!==0){if(wA1(A,B))F[R4].$populated(F[I4],[],{[fS]:A[0].constructor})}},QE=u2(),zE=r7(),QA1=H1(),OS=WE(),LA1=J0(),SS=y6().internalToObjectOptions,xS=h6(),C2=D1(),UE=L2(),f3=t().arrayAtomicsSymbol,R4=t().arrayParentSymbol,I4=t().arrayPathSymbol,J3=t().arraySchemaSymbol,fS=t().populateModelSymbol,VA1=Symbol("mongoose#Array#sliced"),kS=Array.prototype.push;/*!
 * ignore
 */var WD={$__getAtomics(){const F=[],A=Object.keys(this[f3]||{});let B=A.length;const D=Object.assign({},SS,{_isNested:!0});if(B===0)return F[0]=["$set",this.toObject(D)],F;while(B--){const J=A[B];let Z=this[f3][J];if(C2.isMongooseObject(Z))Z=Z.toObject(D);else if(Array.isArray(Z))Z=this.toObject.call(Z,D);else if(Z!=null&&Array.isArray(Z.$each))Z.$each=this.toObject.call(Z.$each,D);else if(Z!=null&&typeof Z.valueOf==="function")Z=Z.valueOf();if(J==="$addToSet")Z={$each:Z};F.push([J,Z])}return F},$atomics(){/*!
   * ignore
   */return this[f3]},$parent(){/*!
   * ignore
   */return this[R4]},$path(){/*!
   * ignore
   */return this[I4]},$shift(){this._registerAtomic("$pop",-1),this._markModified();const F=this.__array;if(F._shifted)return;return F._shifted=!0,[].shift.call(F)},$pop(){if(this._registerAtomic("$pop",1),this._markModified(),this._popped)return;return this._popped=!0,[].pop.call(this)},$schema(){/*!
   * ignore
   */return this[J3]},_cast(F){let A=!1,B;const D=this[R4];if(D)A=D.$populated(this[I4],!0);if(A&&F!==null&&F!==void 0){if(B=A.options[fS],B==null)throw new QA1("No populated model found for path `"+this[I4]+"`. This is likely a bug in Mongoose, please report an issue on github.com/Automattic/mongoose.");if(Buffer.isBuffer(F)||UE(F,"ObjectId")||!C2.isObject(F))F={_id:F};if(!(F.schema&&F.schema.discriminatorMapping&&F.schema.discriminatorMapping.key!==void 0))F=new B(F);return this[J3].caster.applySetters(F,D,!0)}return this[J3].caster.applySetters(F,D,!1)},_mapCast(F,A){return this._cast(F,this.length+A)},_markModified(F){const A=this[R4];let B;if(A){if(B=this[I4],arguments.length)B=B+"."+F;if(B!=null&&B.endsWith(".$"))return this;A.markModified(B,arguments.length!==0?F:A)}return this},_registerAtomic(F,A){if(this[VA1])return;if(F==="$set")return this[f3]={$set:A},OS(this[R4],this[I4]),this._markModified(),this;const B=this[f3];if(F==="$pop"&&!("$pop"in B)){const J=this;this[R4].once("save",function(){J._popped=J._shifted=null})}if(B.$set||Object.keys(B).length&&!(F in B))return this[f3]={$set:this},this;let D;if(F==="$pullAll"||F==="$addToSet")B[F]||(B[F]=[]),B[F]=B[F].concat(A);else if(F==="$pullDocs"){const J=B.$pull||(B.$pull={});if(A[0]instanceof zE)D=J.$or||(J.$or=[]),Array.prototype.push.apply(D,A.map((Z)=>{return Z.toObject({transform:(X,Y)=>{if(Z==null||Z.$__==null)return Y;return Object.keys(Z.$__.activePaths.getStatePaths("default")).forEach(($)=>{xS.unset($,Y),_S(Y,$)}),Y},virtuals:!1})}));else D=J._id||(J._id={$in:[]}),D.$in=D.$in.concat(A)}else if(F==="$push")if(B.$push=B.$push||{$each:[]},A!=null&&C2.hasUserDefinedProperty(A,"$each"))B.$push=A;else if(A.length===1)B.$push.$each.push(A[0]);else if(A.length<1e4)B.$push.$each.push(...A);else for(let J of A)B.$push.$each.push(J);else B[F]=A;return this},addToSet(){ED(this,arguments);const F=[].map.call(arguments,this._mapCast,this),A=[];let B="";if(F[0]instanceof zE)B="doc";else if(F[0]instanceof Date)B="date";else if(UE(F[0],"ObjectId"))B="ObjectId";const D=C2.isMongooseArray(F)?F.__array:F,J=C2.isMongooseArray(this)?this.__array:this;return D.forEach(function(Z){let X;const Y=+Z;switch(B){case"doc":X=this.some(function($){return $.equals(Z)});break;case"date":X=this.some(function($){return+$===Y});break;case"ObjectId":X=this.find(($)=>$.toString()===Z.toString());break;default:X=~this.indexOf(Z);break}if(!X)this._markModified(),J.push(Z),this._registerAtomic("$addToSet",Z),[].push.call(A,Z)},this),A},hasAtomics(){if(!C2.isPOJO(this[f3]))return 0;return Object.keys(this[f3]).length},includes(F,A){return this.indexOf(F,A)!==-1},indexOf(F,A){if(UE(F,"ObjectId"))F=F.toString();A=A==null?0:A;const B=this.length;for(let D=A;D<B;++D)if(F==this[D])return D;return-1},inspect(){return JSON.stringify(this)},nonAtomicPush(){const F=[].map.call(arguments,this._mapCast,this);this._markModified();const A=[].push.apply(this,F);return this._registerAtomic("$set",this),A},pop(){this._markModified();const F=[].pop.call(this);return this._registerAtomic("$set",this),F},pull(){const F=[].map.call(arguments,(J,Z)=>this._cast(J,Z,{defaults:!1}),this);let A=this[R4].get(this[I4]);if(C2.isMongooseArray(A))A=A.__array;let B=A.length,D;this._markModified();while(B--)if(D=A[B],D instanceof QE){if(F.some(function(Z){return D.equals(Z)}))A.splice(B,1)}else if(~this.indexOf.call(F,D))A.splice(B,1);if(F[0]instanceof zE)this._registerAtomic("$pullDocs",F.map(function(J){const Z=J.$__getValue("_id");if(Z===void 0||J.$isDefault("_id"))return J;return Z}));else this._registerAtomic("$pullAll",F);if(OS(this[R4],this[I4])>0)this._registerAtomic("$set",this);return this},push(){let F=arguments,A=F;const B=F[0]!=null&&C2.hasUserDefinedProperty(F[0],"$each"),D=C2.isMongooseArray(this)?this.__array:this;if(B)A=F[0],F=F[0].$each;if(this[J3]==null)return kS.apply(this,F);ED(this,F),F=[].map.call(F,this._mapCast,this);let J;const Z=this[f3];if(this._markModified(),B)if(A.$each=F,(Z.$push&&Z.$push.$each&&Z.$push.$each.length||0)!==0&&Z.$push.$position!=A.$position){if(A.$position!=null)[].splice.apply(D,[A.$position,0].concat(F)),J=D.length;else J=[].push.apply(D,F);this._registerAtomic("$set",this)}else if(A.$position!=null)[].splice.apply(D,[A.$position,0].concat(F)),J=this.length;else J=[].push.apply(D,F);else A=F,J=kS.apply(D,F);return this._registerAtomic("$push",A),J},remove(){return this.pull.apply(this,arguments)},set(F,A,B){const D=this.__array;if(B)return D[F]=A,this;const J=WD._cast.call(this,A,F);return WD._markModified.call(this,F),D[F]=J,this},shift(){const F=C2.isMongooseArray(this)?this.__array:this;this._markModified();const A=[].shift.call(F);return this._registerAtomic("$set",this),A},sort(){const F=C2.isMongooseArray(this)?this.__array:this,A=[].sort.apply(F,arguments);return this._registerAtomic("$set",this),A},splice(){let F;const A=C2.isMongooseArray(this)?this.__array:this;if(this._markModified(),ED(this,Array.prototype.slice.call(arguments,2)),arguments.length){let B;if(this[J3]==null)B=arguments;else{B=[];for(let D=0;D<arguments.length;++D)B[D]=D<2?arguments[D]:this._cast(arguments[D],arguments[0]+(D-2))}F=[].splice.apply(A,B),this._registerAtomic("$set",this)}return F},toBSON(){/*!
   * ignore
   */return this.toObject(SS)},toObject(F){const A=C2.isMongooseArray(this)?this.__array:this;if(F&&F.depopulate)return F=LA1(F),F._isNested=!0,[].concat(A).map(function(B){return B instanceof QE?B.toObject(F):B});return[].concat(A)},$toObject(){return this.constructor.prototype.toObject.apply(this,arguments)},unshift(){ED(this,arguments);let F;if(this[J3]==null)F=arguments;else F=[].map.call(arguments,this._cast,this);const A=C2.isMongooseArray(this)?this.__array:this;return this._markModified(),[].unshift.apply(A,F),this._registerAtomic("$set",this),this.length}};/*!
 * ignore
 *//*!
 * Minimize _just_ empty objects along the path chain specified
 * by `parts`, ignoring all other paths. Useful in cases where
 * you want to minimize after unsetting a path.
 *
 * #### Example:
 *
 *     const obj = { foo: { bar: { baz: {} } }, a: {} };
 *     _minimizePath(obj, 'foo.bar.baz');
 *     obj; // { a: {} }
 *//*!
 * ignore
 */var RA1=["filter","flat","flatMap","map","slice"];for(let F of RA1){if(Array.prototype[F]==null)continue;WD[F]=function(){const A=C2.isMongooseArray(this)?this.__array:this,B=[].concat(A);return B[F].apply(B,arguments)}}gS.exports=WD});var VE=z((mS,dS)=>{var MA1=function(F,A,B,D){let J;if(Array.isArray(F)){const Y=F.length;if(Y===0)J=new Array;else if(Y===1)J=new Array(1),J[0]=F[0];else if(Y<1e4)J=new Array,vS.apply(J,F);else{J=new Array;for(let $=0;$<Y;++$)vS.call(J,F[$])}}else J=[];const Z={[HD]:{},[NA1]:void 0,[PA1]:A,[yS]:D,[bS]:void 0,isMongooseArray:!0,isMongooseArrayProxy:!0,__array:J};if(F&&F[HD]!=null)Z[HD]=F[HD];if(B!=null&&B instanceof IA1)Z[bS]=B,Z[yS]=D||B.schema.path(A);const X=new Proxy(J,{get:function(Y,$){if(Z.hasOwnProperty($))return Z[$];if(LE.hasOwnProperty($))return LE[$];if(typeof $==="string"&&hS.test($)&&D?.$embeddedSchemaType!=null)return D.$embeddedSchemaType.applyGetters(J[$],B);return J[$]},set:function(Y,$,G){if(typeof $==="string"&&hS.test($))LE.set.call(X,$,G,!1);else if(Z.hasOwnProperty($))Z[$]=G;else J[$]=G;return!0}});return X};/*!
 * Module dependencies.
 */var IA1=u2(),LE=CD(),HD=t().arrayAtomicsSymbol,NA1=t().arrayAtomicsBackupSymbol,bS=t().arrayParentSymbol,PA1=t().arrayPathSymbol,yS=t().arraySchemaSymbol,vS=Array.prototype.push,hS=/^\d+$/;/*!
 * Module exports.
 */dS.exports=mS=MA1});var RE=z((vL1,lS)=>{var cS=L2(),wE=H3();lS.exports=function F(A){if(A==null)return A;if(cS(A,"ObjectId"))return A;if(A._id){if(cS(A._id,"ObjectId"))return A._id;if(A._id.toString instanceof Function)return new wE(A._id.toString())}if(A.toString instanceof Function)return new wE(A.toString());return new wE(A)}});var sS=z((hL1,nS)=>{var zD=function(F){const A=F[UD];if(!A||A.$__.populated==null)return;const B=Object.keys(A.$__.populated).filter((D)=>D.startsWith(F[PE]+"."));for(let D of B){const J=D.slice((F[PE]+".").length);if(!Array.isArray(A.$__.populated[D].value))continue;A.$__.populated[D].value=F.map((Z)=>Z.$populated(J))}},qD=CD(),TA1=u2(),jA1=RE(),pS=c6(),uA1=y6().internalToObjectOptions,KD=D1(),IE=L2(),UD=t().arrayParentSymbol,PE=t().arrayPathSymbol,NE=t().arraySchemaSymbol,iS=t().documentArrayParent,OA1=Array.prototype.toString,ME={toBSON(){/*!
   * ignore
   */return this.toObject(uA1)},toString(){return OA1.call(this.__array.map((F)=>{if(F!=null&&F.$__!=null)return F.toString();return F}))},getArrayParent(){/*!
   * ignore
   */return this[UD]},_cast(F,A,B){if(this[NE]==null)return F;let D=this[NE].casterConstructor;if((D.$isMongooseDocumentArray?KD.isMongooseDocumentArray(F):F instanceof D)||F&&F.constructor&&F.constructor.baseCasterConstructor===D){if(!(F[iS]&&F.__parentArray))F[iS]=this[UD],F.__parentArray=this;return F.$setIndex(A),F}if(F===void 0||F===null)return null;if(Buffer.isBuffer(F)||IE(F,"ObjectId")||!KD.isObject(F))F={_id:F};if(F&&D.discriminators&&D.schema&&D.schema.options&&D.schema.options.discriminatorKey)if(typeof F[D.schema.options.discriminatorKey]==="string"&&D.discriminators[F[D.schema.options.discriminatorKey]])D=D.discriminators[F[D.schema.options.discriminatorKey]];else{const X=pS(D.discriminators,F[D.schema.options.discriminatorKey]);if(X)D=X}if(D.$isMongooseDocumentArray)return D.cast(F,this,void 0,void 0,A);const Z=new D(F,this,B,void 0,A);return Z.isNew=!0,Z},id(F){let A,B,D;try{A=jA1(F).toString()}catch(J){A=null}for(let J of this){if(!J)continue;if(D=J.get("_id"),D===null||typeof D==="undefined")continue;else if(D instanceof TA1){if(B||(B=String(F)),B==D._id)return J}else if(!IE(F,"ObjectId")&&!IE(D,"ObjectId")){if(F==D||KD.deepEqual(F,D))return J}else if(A==D)return J}return null},toObject(F){return[].concat(this.map(function(A){if(A==null)return null;if(typeof A.toObject!=="function")return A;return A.toObject(F)}))},$toObject(){return this.constructor.prototype.toObject.apply(this,arguments)},push(){const F=qD.push.apply(this,arguments);return zD(this),F},pull(){const F=qD.pull.apply(this,arguments);return zD(this),F},shift(){const F=qD.shift.apply(this,arguments);return zD(this),F},splice(){const F=qD.splice.apply(this,arguments);return zD(this),F},inspect(){return this.toObject()},create(F){let A=this[NE].casterConstructor;if(F&&A.discriminators&&A.schema&&A.schema.options&&A.schema.options.discriminatorKey)if(typeof F[A.schema.options.discriminatorKey]==="string"&&A.discriminators[F[A.schema.options.discriminatorKey]])A=A.discriminators[F[A.schema.options.discriminatorKey]];else{const B=pS(A.discriminators,F[A.schema.options.discriminatorKey]);if(B)A=B}return new A(F,this)},notify(F){/*!
   * ignore
   */const A=this;return function B(D,J){J=J||A;let Z=J.length;while(Z--){if(J[Z]==null)continue;switch(F){case"save":D=A[Z];break;default:break}if(KD.isMongooseArray(J[Z]))B(D,J[Z]);else if(J[Z])J[Z].emit(F,D)}}},set(F,A,B){const D=this.__array;if(B)return D[F]=A,this;const J=ME._cast.call(this,A,F);return ME._markModified.call(this,F),D[F]=J,this},_markModified(F,A){const B=this[UD];let D;if(B){if(D=this[PE],arguments.length)if(A!=null){const J=F.__index;D=D+"."+J+"."+A}else D=D+"."+F;if(D!=null&&D.endsWith(".$"))return this;B.markModified(D,arguments.length!==0?F:B)}return this}};nS.exports=ME});var U9=z((mL1,rS)=>{var _A1=function(F,A,B){const D=[],J={[jE]:{},[kA1]:void 0,[OE]:A,[z9]:void 0,[uE]:void 0};if(Array.isArray(F)){if(F[OE]===A&&F[uE]===B)J[jE]=Object.assign({},F[jE]);F.forEach((X)=>{xA1.call(D,X)})}if(J[OE]=A,J.__array=D,B&&B instanceof SA1){J[uE]=B,J[z9]=B.$__schema.path(A);while(J[z9]!=null&&J[z9].$isMongooseArray&&!J[z9].$isMongooseDocumentArray)J[z9]=J[z9].casterConstructor}const Z=new Proxy(D,{get:function(X,Y){if(Y==="isMongooseArray"||Y==="isMongooseArrayProxy"||Y==="isMongooseDocumentArray"||Y==="isMongooseDocumentArrayProxy")return!0;if(J.hasOwnProperty(Y))return J[Y];if(TE.hasOwnProperty(Y))return TE[Y];if(aS.hasOwnProperty(Y))return aS[Y];return D[Y]},set:function(X,Y,$){if(typeof Y==="string"&&fA1.test(Y))TE.set.call(Z,Y,$,!1);else if(J.hasOwnProperty(Y))J[Y]=$;else D[Y]=$;return!0}});return Z};/*!
 * Module dependencies.
 */var aS=CD(),TE=sS(),SA1=u2(),jE=t().arrayAtomicsSymbol,kA1=t().arrayAtomicsBackupSymbol,uE=t().arrayParentSymbol,OE=t().arrayPathSymbol,z9=t().arraySchemaSymbol,xA1=Array.prototype.push,fA1=/^\d+$/;/*!
 * Module exports.
 */rS.exports=_A1});var u2=z((Hk,qk)=>{var b=function(F,A,B,D){if(typeof B==="object"&&B!=null)D=B,B=D.skipId;if(D=Object.assign({},D),this.$__schema==null){const G=N1.isObject(A)&&!A.instanceOfSchema?new vA1(A):A;this.$__setSchema(G),A=B,B=D,D=arguments[4]||{}}if(this.$__=new gA1,D.isNew!=null&&D.isNew!==!0)this.$isNew=D.isNew;if(D.priorDoc!=null)this.$__.priorDoc=D.priorDoc;if(B)this.$__.skipId=B;if(F!=null&&typeof F!=="object")throw new yA1(F,"obj","Document");let J=!0;if(D.defaults!==void 0)this.$__.defaults=D.defaults,J=D.defaults;const Z=this.$__schema;if(typeof A==="boolean"||A==="throw"){if(A!==!0)this.$__.strictMode=A;A=void 0}else if(Z.options.strict!==!0)this.$__.strictMode=Z.options.strict;const X=Z.requiredPaths(!0);for(let G of X)this.$__.activePaths.require(G);let Y=null;if(N1.isPOJO(A)&&Object.keys(A).length>0)Y=iA1(A),this.$__.selected=A,this.$__.exclude=Y;const $=Y===!1&&A?Zk(A):null;if(this._doc==null){if(this.$__buildDoc(F,A,B,Y,$,!1),J)_E(this,A,Y,$,!0,null)}if(F){if(this.$__original_set)this.$__original_set(F,void 0,!0,D);else this.$set(F,void 0,!0,D);if(F instanceof b)this.$isNew=F.$isNew}if(D.willInit&&J){if(D.skipDefaults)this.$__.skipDefaults=D.skipDefaults}else if(J)_E(this,A,Y,$,!1,D.skipDefaults);if(!this.$__.strictMode&&F){const G=this;Object.keys(this._doc).forEach(function(W){if(!(W in Z.tree)&&!(W in Z.methods)&&!(W in Z.virtuals)&&!W.startsWith("$"))mA1({prop:W,subprops:null,prototype:G})})}qB1(this)},XB1=function(F,A,B){if(F==null)return;const D=Object.keys(B.$__schema.paths),J=D.length,Z=A.indexOf(".")===-1?[A]:A.split(".");for(let X=0;X<J;++X){let Y="";const $=D[X];if(!$.startsWith(A+"."))continue;const G=B.$__schema.paths[$],E=G.splitPath().slice(Z.length),W=E.length;if(G.defaultValue===void 0)continue;let C=F;for(let H=0;H<W;++H){if(C==null)break;const q=E[H];if(H===W-1){if(C[q]!==void 0)break;try{const K=G.getDefault(B,!1);if(K!==void 0)C[q]=K}catch(K){B.invalidate(A+"."+Y,K);break}break}Y+=(!Y.length?"":".")+q,C[q]=C[q]||{},C=C[q]}}},Ek=function(F,A,B,D,J){if(J=J||"",A.$__!=null)A=A._doc;const Z=Object.keys(A),X=Z.length;let Y,$,G,E=0;const W=F.$__.strictMode,C=F.$__schema;while(E<X)H(E++);function H(q){if(G=Z[q],G==="__proto__"||G==="constructor")return;if($=J?J+G:G,Y=C.path($),C.$isRootDiscriminator&&!F.$__isSelected($))return;const K=A[G];if(!Y&&N1.isPOJO(K)){if(!B[G]){if(B[G]={},!W&&!(G in C.tree)&&!(G in C.methods)&&!(G in C.virtuals))F[G]=B[G]}Ek(F,K,B[G],D,$+".")}else if(!Y){if(B[G]=K,!W&&!J)F[G]=K}else{if(B.hasOwnProperty(G)&&K!==void 0&&!D.hydratedPopulatedDocs)delete B[G];if(K===null)B[G]=Y._castNullish(null);else if(K!==void 0){const U=K.$__==null?null:K.$__.wasPopulated;if(Y&&!U&&!D.hydratedPopulatedDocs)try{if(D&&D.setters)B[G]=Y.applySetters(K,F,!1);else B[G]=Y.cast(K,F,!0)}catch(Q){F.invalidate(Q.path,new Jk({path:Q.path,message:Q.message,type:"cast",value:Q.value,reason:Q}))}else B[G]=K}if(!F.$isModified($))F.$__.activePaths.init($)}}},YB1=function(F,A){if(!Array.isArray(F))return!1;if(F.length===0)return!1;for(let B of F){if(!(B instanceof b))return!1;if(B.constructor.modelName==null)return!1;if(B.constructor.modelName!=A&&B.constructor.baseModelName!=A)return!1}return!0},Wk=function(F){if(F==null)return!0;if(typeof F!=="object"||Array.isArray(F))return!1;for(let A of Object.keys(F))if(!Wk(F[A]))return!1;return!0},$B1=function(F){const A=Object.keys(F.$__.activePaths.getStatePaths("require"));let B=0;const D=A.length;for(B=0;B<D;++B){const J=A[B],Z=F.$__schema.path(J);if(Z!=null&&typeof Z.originalRequiredValue==="function"){F.$__.cachedRequired=F.$__.cachedRequired||{};try{F.$__.cachedRequired[J]=Z.originalRequiredValue.call(F,F)}catch(X){F.invalidate(J,X)}}}},Ck=function(F,A,B){const D={};$B1(F);let J=new Set(Object.keys(F.$__.activePaths.getStatePaths("require")).filter(function(G){if(!F.$__isSelected(G)&&!F.$isModified(G))return!1;if(F.$__.cachedRequired!=null&&G in F.$__.cachedRequired)return F.$__.cachedRequired[G];return!0}));Object.keys(F.$__.activePaths.getStatePaths("init")).forEach(Z),Object.keys(F.$__.activePaths.getStatePaths("modify")).forEach(Z),Object.keys(F.$__.activePaths.getStatePaths("default")).forEach(Z);function Z(G){J.add(G)}const X=F.$getAllSubdocs(),Y=F.modifiedPaths();for(let G of X)if(G.$basePath){const E=G.$isSingleNested?G.$__pathRelativeToParent():G.$__fullPathWithIndexes();for(let W of G.modifiedPaths())J.delete(E+"."+W);if(F.$isModified(E,null,Y)&&!F.isDirectModified(E)&&!F.$isDefault(E)){if(J.add(E),F.$__.pathsToScopes==null)F.$__.pathsToScopes={};if(F.$__.pathsToScopes[E]=G.$isDocumentArrayElement?G.__parentArray:G.$parent(),D[E]={skipSchemaValidators:!0},G.$isDocumentArrayElement&&G.__index!=null)D[E].index=G.__index}}for(let G of J){const E=F.$__schema.path(G);if(!E)continue;if(E.$isMongooseDocumentArray){for(let W of J)if(W==null||W.startsWith(E.path+"."))J.delete(W)}if(!E.caster&&E.validators.length===0&&!E.$parentSchemaDocArray)J.delete(G);else if(E.$isMongooseArray&&!E.$isMongooseDocumentArray&&!E.$embeddedSchemaType.$isMongooseArray&&E.validators.length===0&&E.$embeddedSchemaType.validators.length===0)J.delete(G)}for(let G of J)if(F.$__schema.singleNestedPaths.hasOwnProperty(G)){J.delete(G);continue}if(Array.isArray(A))J=EB1(J,A);else if(Array.isArray(B))J=WB1(J,B);GB1(F,J);const $={skipArrays:!0};for(let G of J)if(F.$__schema.nested[G]){let E=F.$__getValue(G);if(oA1(E))E=E.toObject({transform:!1});const W=dA1(E,G,$,F.$__schema);Object.keys(W).forEach(Z)}for(let G of J){const E=F.$__schema.path(G);if(!E)continue;if(E.$parentSchemaDocArray&&typeof E.$parentSchemaDocArray.path==="string")J.add(E.$parentSchemaDocArray.path);if(!E.$isSchemaMap)continue;const W=F.$__getValue(G);if(W==null)continue;for(let C of W.keys())J.add(G+"."+C)}return J=Array.from(J),[J,D]},GB1=function(F,A){for(let B of A){const D=F.$__schema.path(B);if(!D)continue;if(!D.$isMongooseArray||!Array.isArray(D)&&D.$isMongooseDocumentArray&&!(D&&D.schemaOptions&&D.schemaOptions.required))continue;if(D.$isMongooseArray&&!D.$isMongooseDocumentArray&&!D.$embeddedSchemaType.$isMongooseArray&&D.$embeddedSchemaType.validators.length===0)continue;const J=F.$__getValue(B);RD(J,A,B)}},RD=function(F,A,B){if(F!=null){const D=F.length;for(let J=0;J<D;++J)if(Array.isArray(F[J]))RD(F[J],A,B+"."+J);else A.add(B+"."+J)}},EB1=function(F,A){const B=new Set(A),D=new Map([]);for(let Z of A){if(Z.indexOf(".")===-1)continue;const X=Z.split(".");let Y=X[0];for(let $=1;$<X.length;++$)D.set(Y,Z),Y=Y+"."+X[$]}const J=new Set;for(let Z of F)if(B.has(Z))J.add(Z);else if(D.has(Z))J.add(D.get(Z));return J},WB1=function(F,A){return A=new Set(A),F=Array.from(F).filter((B)=>!A.has(B)),new Set(F)},CB1=function(F,A){if(!F.$__.validationError)return;const B=Object.keys(F.$__.validationError.errors);for(let D of B)if(D.startsWith(A+"."))delete F.$__.validationError.errors[D];if(Object.keys(F.$__.validationError.errors).length===0)F.$__.validationError=null},HB1=function(F,A,B){const D=A.schema;if(D==null)return;for(let J of Object.keys(D.paths)){const Z=D.paths[J];if(Z.$immutableSetter==null)continue;const X=B==null?void 0:B.$__getValue(J);Z.$immutableSetter.call(F,X)}},qB1=function(F){const A=F.$__schema&&F.$__schema.callQueue;if(!A.length)return;for(let B of A)if(B[0]!=="pre"&&B[0]!=="post"&&B[0]!=="on")F[B[0]].apply(F,B[1])},yE=function(F,A,B,D){const J=F.$__schema,Z=J.virtuals,X=Object.keys(Z);let Y=X.length;const $=Y;let G,E,W=F._doc,C;const H=typeof(D&&D.aliases)==="boolean"?D.aliases:!0;B=B||{};let q=null;if(Array.isArray(B.virtuals))q=new Set(B.virtuals);else if(B.virtuals&&B.virtuals.pathsToSkip){q=new Set(X);for(let K=0;K<B.virtuals.pathsToSkip.length;K++)if(q.has(B.virtuals.pathsToSkip[K]))q.delete(B.virtuals.pathsToSkip[K])}if(!W)return A;for(Y=0;Y<$;++Y){if(G=X[Y],q!=null&&!q.has(G))continue;if(!H&&J.aliases.hasOwnProperty(G))continue;if(E=G,B.path!=null){if(!G.startsWith(B.path+"."))continue;E=G.substring(B.path.length+1)}if(E.indexOf(".")===-1&&E===G){if(C=Z[G].applyGetters(void 0,F),C=Z3(C,B),C===void 0)continue;A[E]=C;continue}const K=E.split(".");if(C=Z3(F.get(G),B),C===void 0)continue;const U=K.length;W=A;for(let Q=0;Q<U-1;++Q)W[K[Q]]=W[K[Q]]||{},W=W[K[Q]];W[K[U-1]]=C}return A},KB1=function(F,A,B){const D=F.$__schema,J=Object.keys(D.paths);let Z=J.length,X,Y=F._doc,$;if(!Y)return A;while(Z--){X=J[Z];const G=X.split("."),E=G.length,W=E-1;let C=A,H;if(Y=F._doc,!F.$__isSelected(X))continue;for(let q=0;q<E;++q){if(H=G[q],$=Y[H],C!=null&&typeof C!=="object")break;else if(q===W){const K=F.$get(X);if(C[H]=Z3(K,B),Array.isArray(C[H])&&D.paths[X].$embeddedSchemaType)for(let U=0;U<C[H].length;++U)C[H][U]=D.paths[X].$embeddedSchemaType.applyGetters(C[H][U],F)}else if($==null){if(H in Y)C[H]=$;break}else C=C[H]||(C[H]={});Y=$}}return A},zB1=function(F,A){const B=F.$__schema,D=Object.keys(B.paths||{});if(!F._doc)return A;for(let Z of D){const X=B.paths[Z];if(typeof X.options.transform==="function"){const Y=F.$get(Z);if(Y===void 0)continue;const $=X.options.transform.call(F,Y);Dk(Z,$),N1.setValue(Z,$,A)}else if(X.$embeddedSchemaType!=null&&typeof X.$embeddedSchemaType.options.transform==="function"){const Y=F.$get(Z);if(Y===void 0)continue;const $=[].concat(Y),G=X.$embeddedSchemaType.options.transform;for(let E=0;E<$.length;++E){const W=G.call(F,$[E]);$[E]=W,Dk(Z,W)}A[Z]=$}}return A},Dk=function(F,A){if(tA1(A))throw new Error("`transform` function must be synchronous, but the transform on path `"+F+"` returned a promise.")},UB1=function(F,A){const B=F.$__schema,D=Object.keys(B.paths||{});if(!F._doc)return A;let Z=F.$__.selected;if(Z===void 0)Z={},rA1.applyPaths(Z,B);if(Z==null||Object.keys(Z).length===0)return A;for(let X of D)if(Z[X]!=null&&!Z[X])delete A[X];return A};/*!
 * Module dependencies.
 */var xE=import.meta.require("events").EventEmitter,gA1=kO(),S2=W2(),tS=K9(),bA1=XE(),yA1=AD(),oS=bO(),vA1=o7(),fE=V4(),wD=C9(),Jk=dG(),Zk=GE(),_E=BD(),SE=WE(),Z3=J0(),hA1=JD().compile,mA1=JD().defineKey,dA1=n7().flatten,cA1=t1(),kE=BS(),eS=JS(),lA1=XS(),pA1=XD(),Fk=y2(),Xk=s7(),iA1=a7(),gE=import.meta.require("util").inspect,Yk=y6().internalToObjectOptions,nA1=qE(),sA1=KE(),aA1=h6(),rA1=s5(),N1=D1(),tA1=wS(),LD=N1.deepEqual,oA1=N1.isMongooseObject,t7=t().arrayAtomicsBackupSymbol,k2=t().arrayAtomicsSymbol,eA1=t().documentArrayParent,FB1=t().documentIsModified,$k=t().documentModifiedPaths,bE=t().documentSchemaSymbol,AB1=t().getSymbol,Ak=t().populateModelSymbol,BB1=t().scopeSymbol,DB1=q9().schemaMixedSymbol,Gk=$D(),JB1=NS(),QD=t().sessionNewDocuments,VD,Bk,Q9,ZB1=N1.specialProperties;b.prototype.$isMongooseDocumentPrototype=!0;Object.defineProperty(b.prototype,"isNew",{get:function(){return this.$isNew},set:function(F){this.$isNew=F}});Object.defineProperty(b.prototype,"errors",{get:function(){return this.$errors},set:function(F){this.$errors=F}});/*!
 * ignore
 */b.prototype.$isNew=!0;/*!
 * Document exposes the NodeJS event emitter API, so you can use
 * `on`, `once`, etc.
 */N1.each(["on","once","emit","listeners","removeListener","setMaxListeners","removeAllListeners","addListener"],function(F){b.prototype[F]=function(){if(!this.$__.emitter){if(F==="emit")return;this.$__.emitter=new xE,this.$__.emitter.setMaxListeners(0)}return this.$__.emitter[F].apply(this.$__.emitter,arguments)},b.prototype[`\$${F}`]=b.prototype[F]});b.prototype.constructor=b;for(let F in xE.prototype)b[F]=xE.prototype[F];b.prototype.$__schema;b.prototype.schema;Object.defineProperty(b.prototype,"$locals",{configurable:!1,enumerable:!1,get:function(){if(this.$__.locals==null)this.$__.locals={};return this.$__.locals},set:function(F){this.$__.locals=F}});b.prototype.isNew;Object.defineProperty(b.prototype,"$where",{configurable:!1,enumerable:!1,writable:!0});b.prototype.id;b.prototype.$errors;Object.defineProperty(b.prototype,"$op",{get:function(){return this.$__.op||null},set:function(F){this.$__.op=F}});/*!
 * ignore
 */b.prototype.$__buildDoc=function(F,A,B,D,J){const Z={},X=Object.keys(this.$__schema.paths).filter((G)=>!G.includes("$*")),Y=X.length;let $=0;for(;$<Y;++$){const G=X[$];if(G==="_id"){if(B)continue;if(F&&"_id"in F)continue}const E=this.$__schema.paths[G].splitPath(),W=E.length,C=W-1;let H="",q=Z,K=!1;for(let U=0;U<W;++U){const Q=E[U];if(!H.length)H=Q;else H+="."+Q;if(D===!0){if(H in A)break}else if(D===!1&&A&&!K){if(H in A)K=!0;else if(!J[H])break}if(U<C)q=q[Q]||(q[Q]={})}}this._doc=Z};/*!
 * Converts to POJO when you use the document for querying
 */b.prototype.toBSON=function(){return this.toObject(Yk)};b.prototype.init=function(F,A,B){if(typeof A==="function")B=A,A=null;if(this.$__init(F,A),B)B(null,this);return this};b.prototype.$init=function(){return this.constructor.prototype.init.apply(this,arguments)};b.prototype.$__init=function(F,A){if(this.$isNew=!1,A=A||{},F._id!=null&&A.populated&&A.populated.length){const D=String(F._id);for(let J of A.populated){if(J.isVirtual)this.$populated(J.path,N1.getValue(J.path,F),J);else this.$populated(J.path,J._docs[D],J);if(J._childDocs==null)continue;for(let Z of J._childDocs){if(Z==null||Z.$__==null)continue;Z.$__.parent=this}J._childDocs=[]}}Ek(this,F,this._doc,A),nA1(this,A.populated),this.$emit("init",this),this.constructor.emit("init",this);const B=this.$__.exclude===!1&&this.$__.selected?Zk(this.$__.selected):null;return _E(this,this.$__.selected,this.$__.exclude,B,!1,this.$__.skipDefaults),this};b.prototype.updateOne=function F(A,B,D){const J=this.constructor.updateOne({_id:this._id},A,B),Z=this;if(J.pre(function X(Y){Z.constructor._middleware.execPre("updateOne",Z,[Z],Y)}),J.post(function X(Y){Z.constructor._middleware.execPost("updateOne",Z,[Z],{},Y)}),this.$session()!=null){if(!("session"in J.options))J.options.session=this.$session()}if(D!=null)return J.exec(D);return J};b.prototype.replaceOne=function F(){const A=[...arguments];return A.unshift({_id:this._id}),this.constructor.replaceOne.apply(this.constructor,A)};b.prototype.$session=function F(A){if(arguments.length===0){if(this.$__.session!=null&&this.$__.session.hasEnded)return this.$__.session=null,null;return this.$__.session}if(A!=null&&A.hasEnded)throw new S2("Cannot set a document\'s session to a session that has ended. Make sure you haven\'t called `endSession()` on the session you are passing to `$session()`.");if(A==null&&this.$__.session==null)return;if(this.$__.session=A,!this.$isSubdocument){const B=this.$getAllSubdocs();for(let D of B)D.$session(A)}return A};b.prototype.$timestamps=function F(A){if(arguments.length===0){if(this.$__.timestamps!=null)return this.$__.timestamps;if(this.$__schema)return this.$__schema.options.timestamps;return}const B=this.$timestamps();if(A!==B)this.$__.timestamps=A;return this};b.prototype.overwrite=function F(A){const B=Array.from(new Set(Object.keys(this._doc).concat(Object.keys(A))));for(let D of B){if(D==="_id")continue;if(this.$__schema.options.versionKey&&D===this.$__schema.options.versionKey)continue;if(this.$__schema.options.discriminatorKey&&D===this.$__schema.options.discriminatorKey)continue;this.$set(D,A[D])}return this};b.prototype.$set=function F(A,B,D,J){if(N1.isPOJO(D))J=D,D=void 0;const Z=J&&J.merge,X=D&&D!==!0,Y=D===!0;let $,G,E=0,W,C,H;const q=J&&"strict"in J;let K=q?J.strict:this.$__.strictMode;if(X)$=this.$__.adhocPaths||(this.$__.adhocPaths={}),$[A]=this.$__schema.interpretAsType(A,D,this.$__schema.options);if(A==null)[A,B]=[B,A];else if(typeof A!=="string"){if(A instanceof b)if(A.$__isNested)A=A.toObject();else A=A.$__schema===this.$__schema?yE(A,{...A._doc}):A._doc;if(A==null)[A,B]=[B,A];H=B?B+".":"",G=eS(this.$__schema,A);const x=G.length,c=J&&J._skipMinimizeTopLevel||!1;if(x===0&&c){if(delete J._skipMinimizeTopLevel,B)this.$set(B,{});return this}J=Object.assign({},J,{_skipMinimizeTopLevel:!1});for(let j=0;j<x;++j){C=G[j];const _=H?H+C:C;W=this.$__schema.pathType(_);const s=A[C];if(D===!0&&!H&&s!=null&&W==="nested"&&this._doc[C]!=null)delete this._doc[C];if(N1.isNonBuiltinObject(s)&&W==="nested"){this.$set(_,s,Y,Object.assign({},J,{_skipMarkModified:!0})),XB1(this.$get(_),_,this);continue}else if(K){if(Y&&s===void 0&&this.$get(_)!==void 0)continue;if(W==="adhocOrUndefined")W=kE(this,_,{typeOnly:!0});if(W==="real"||W==="virtual")this.$set(_,s,Y,J);else if(W==="nested"&&s instanceof b)this.$set(_,s.toObject({transform:!1}),Y,J);else if(K==="throw")if(W==="nested")throw new bA1(C,s);else throw new fE(C);else if(W==="nested"&&s==null)this.$set(_,s,Y,J)}else if(s!==void 0)this.$set(_,s,Y,J)}const u={},O=Object.keys(this.$__schema.tree);for(let j=0,_=O.length;j<_;++j)(C=O[j])&&this._doc.hasOwnProperty(C)&&(u[C]=void 0);return this._doc=Object.assign(u,this._doc),this}let U=this.$__schema.pathType(A),Q=null;if(U==="adhocOrUndefined")Q=A.indexOf(".")===-1?[A]:A.split("."),U=kE(this,Q,{typeOnly:!0});if(U==="adhocOrUndefined"&&!q){if(Q==null)Q=A.indexOf(".")===-1?[A]:A.split(".");const x=lA1(this.$__schema,Q);if(x!==void 0)K=x}B=pA1(B,!0);const V=(()=>{if(this.$__.priorDoc!=null)return this.$__.priorDoc.$__getValue(A);if(Y)return;return this.$__getValue(A)})();if(U==="nested"&&B){if(typeof B==="object"&&B!=null){if(B.$__!=null)B=B.toObject(Yk);if(B==null)return this.invalidate(A,new S2.CastError("Object",B,A)),this;const x=this.$isModified(A),c=this.$__.savedState!=null&&this.$__.savedState.hasOwnProperty(A);if(this.$__.savedState!=null&&!this.$isNew&&!this.$__.savedState.hasOwnProperty(A)){const O=this.$__getValue(A);this.$__.savedState[A]=O;const j=Object.keys(O||{});for(let _ of j)this.$__.savedState[A+"."+_]=O[_]}if(!Z)this.$__setValue(A,null),SE(this,A);else return this.$set(B,A,Y);const u=eS(this.$__schema,B,A);this.$__setValue(A,{});for(let O of u)this.$set(A+"."+O,B[O],Y,{...J,_skipMarkModified:!0});if(V!=null&&(!x||c)&&N1.deepEqual(c?this.$__.savedState[A]:V,B))this.unmarkModified(A);else this.markModified(A);return this}return this.invalidate(A,new S2.CastError("Object",B,A)),this}let L;if(Q==null)Q=A.indexOf(".")===-1?[A]:A.split(".");if(typeof this.$__schema.aliases[Q[0]]==="string")Q[0]=this.$__schema.aliases[Q[0]];if(U==="adhocOrUndefined"&&K){let x;for(E=0;E<Q.length;++E){const c=Q.slice(0,E+1).join(".");if(E+1<Q.length&&this.$__schema.pathType(c)==="virtual")return aA1.set(A,B,this),this;if(L=this.$__schema.path(c),L==null)continue;if(L instanceof tS){x=!0;break}else if(L.$isSchemaMap&&L.$__schemaType instanceof tS&&E<Q.length-1){x=!0,L=L.$__schemaType;break}}if(L==null)L=kE(this,A);if(!x&&!L){if(K==="throw")throw new fE(A);return this}}else if(U==="virtual")return L=this.$__schema.virtualpath(A),L.applySetters(B,this),this;else L=this.$__path(A);let N=this._doc,h="";for(E=0;E<Q.length-1;++E)if(N=N[Q[E]],h+=(h.length!==0?".":"")+Q[E],!N){if(this.$set(h,{}),!this.$__isSelected(h))this.unmarkModified(h);N=this.$__getValue(h)}let T;if(Q.length<=1)T=A;else{const x=Q.length;for(E=0;E<x;++E){const c=Q.slice(0,E+1).join(".");if(this.$get(c,null,{getters:!1})===null){T=c;break}}if(!T)T=A}if(!L){if(this.$__set(T,A,J,Y,Q,L,B,V),U==="nested"&&B==null)SE(this,A);return this}if(L.$isSingleNested||L.$isMongooseArray)CB1(this,A);if(B!=null&&Z&&L.$isSingleNested){if(B instanceof b)B=B.toObject({virtuals:!1,transform:!1});const x=Object.keys(B);for(let c of x)this.$set(A+"."+c,B[c],Y,J);return this}let P=!0;try{const x=(()=>{if(L.options==null)return!1;if(!(B instanceof b))return!1;const j=B.constructor,_=L.options.ref;if(_!=null&&(_===j.modelName||_===j.baseModelName))return!0;const s=L.options.refPath;if(s==null)return!1;const _1=B.get(s);return _1===j.modelName||_1===j.baseModelName})();let c=!1;if(x&&B instanceof b&&(!B.$__.wasPopulated||N1.deepEqual(B.$__.wasPopulated.value,B._id))){const j=L&&L.$isSingleNested?L.cast(B,this):B._id;this.$populated(A,j,{[Ak]:B.constructor}),B.$__.wasPopulated={value:j},c=!0}let u;const O=this.$__schema.options.typeKey;if(L.options&&Array.isArray(L.options[O])&&L.options[O].length&&L.options[O][0]&&L.options[O][0].ref&&YB1(B,L.options[O][0].ref)){u={[Ak]:B[0].constructor},this.$populated(A,B.map(function(j){return j._id}),u);for(let j of B)j.$__.wasPopulated={value:j._id};c=!0}if(!x||!L.$isSingleNested||!B.$__){let j=this;if(this.$__schema.singleNestedPaths[A]!=null&&Q.length>1)j=JB1(this,Q,this.schema);if(J!=null&&J.overwriteImmutable)B=L.applySetters(B,j,!1,V,{overwriteImmutable:!0});else B=L.applySetters(B,j,!1,V)}if(Array.isArray(B)&&!Array.isArray(L)&&L.$isMongooseDocumentArray&&B.length!==0&&B[0]!=null&&B[0].$__!=null&&B[0].$__.populated!=null){const j=Object.keys(B[0].$__.populated);for(let _ of j)this.$populated(A+"."+_,B.map((s)=>s.$populated(_)),B[0].$__.populated[_].options);c=!0}if(!c&&this.$__.populated){if(Array.isArray(B)&&this.$__.populated[A]){for(let j=0;j<B.length;++j)if(B[j]instanceof b)B.set(j,B[j]._id,!0)}delete this.$__.populated[A]}if(B!=null&&L.$isSingleNested)HB1(B,L,V);this.$markValid(A)}catch(x){if(x instanceof S2.StrictModeError&&x.isImmutableError)this.invalidate(A,x);else if(x instanceof S2.CastError){if(this.invalidate(x.path,x),x.$originalErrorPath)this.invalidate(A,new S2.CastError(L.instance,B,A,x.$originalErrorPath))}else this.invalidate(A,new S2.CastError(L.instance,B,A,x));P=!1}if(P){let x=null,c=null;if(!Y){const j=this.$isSubdocument?this.ownerDocument():this;x=j.$__.savedState,c=this.$isSubdocument?this.$__.fullPath+"."+A:A,j.$__saveInitialState(c)}this.$__set(T,A,J,Y,Q,L,B,V);const u=!!this.$__.session?.transaction,O=this.$__.session&&this.$__.session[QD]&&this.$__.session[QD].has(this)&&this.$__.session[QD].get(this).modifiedPaths&&!this.$__.session[QD].get(this).modifiedPaths.has(c);if(x!=null&&x.hasOwnProperty(c)&&(!u||O)&&N1.deepEqual(B,x[c]))this.unmarkModified(A)}if(L.$isSingleNested&&(this.isDirectModified(A)||B==null))SE(this,A);return this};/*!
 * ignore
 */b.prototype.set=b.prototype.$set;b.prototype.$__shouldModify=function(F,A,B,D,J,Z,X,Y){if(B&&B._skipMarkModified)return!1;if(this.$isNew)return!0;if(A in this.$__.activePaths.getStatePaths("modify"))return!0;if(X===void 0&&!this.$__isSelected(A))return!0;if(X===void 0&&A in this.$__.activePaths.getStatePaths("default"))return!1;if(this.$populated(A)&&X instanceof b&&LD(X._id,Y))return!1;if(!LD(X,Y!==void 0?Y:N1.getValue(A,this)))return!0;if(!D&&X!==null&&X!==void 0&&A in this.$__.activePaths.getStatePaths("default")&&LD(X,Z.getDefault(this,D)))return!0;return!1};b.prototype.$__set=function(F,A,B,D,J,Z,X,Y){Q9=Q9||r7();const $=this.$__shouldModify(F,A,B,D,J,Z,X,Y);if($){if(this.$__.primitiveAtomics&&this.$__.primitiveAtomics[A]){if(delete this.$__.primitiveAtomics[A],Object.keys(this.$__.primitiveAtomics).length===0)delete this.$__.primitiveAtomics}if(this.markModified(F),Bk||(Bk=VE()),X&&N1.isMongooseArray(X)){if(X._registerAtomic("$set",X),N1.isMongooseDocumentArray(X))X.forEach(function(H){H&&H.__parentArray&&(H.__parentArray=X)})}}else if(Array.isArray(X)&&Array.isArray(Y)&&N1.isMongooseArray(X)&&N1.isMongooseArray(Y)){if(X[k2]=Y[k2],X[t7]=Y[t7],N1.isMongooseDocumentArray(X))X.forEach((H)=>{if(H!=null)H.$isNew=!1})}let G=this._doc,E=0;const W=J.length;let C="";for(;E<W;E++){const q=E+1===W;if(C+=C?"."+J[E]:J[E],ZB1.has(J[E]))return;if(q)if(G instanceof Map)G.set(J[E],X);else if(G.$isSingleNested){if(!(J[E]in G))G[J[E]]=X,G._doc[J[E]]=X;else G._doc[J[E]]=X;if($)G.markModified(J[E])}else G[J[E]]=X;else{const K=G instanceof Map;let U=K?G.get(J[E]):G[J[E]];if(N1.isPOJO(U))G=U;else if(U&&U instanceof Q9)G=U;else if(U&&!Array.isArray(U)&&U.$isSingleNested)G=U;else if(U&&Array.isArray(U))G=U;else if(U==null){if(U={},K)G.set(J[E],U);else G[J[E]]=U;G=U}else G=U}}};b.prototype.$__getValue=function(F){return N1.getValue(F,this._doc)};b.prototype.$inc=function F(A,B){if(B==null)B=1;if(Array.isArray(A))return A.forEach(($)=>this.$inc($,B)),this;const D=this.$__path(A);if(D==null){if(this.$__.strictMode==="throw")throw new fE(A);else if(this.$__.strictMode===!0)return this}else if(D.instance!=="Number")return this.invalidate(A,new S2.CastError(D.instance,B,A)),this;const J=this.$__getValue(A)||0;let Z=!1,X=null,Y=B;try{B=D.cast(B),X=D.applySetters(J+B,this),Y=X-J,Z=!0}catch($){this.invalidate(A,new S2.CastError("number",B,A,$))}if(Z){if(this.$__.primitiveAtomics=this.$__.primitiveAtomics||{},this.$__.primitiveAtomics[A]==null)this.$__.primitiveAtomics[A]={$inc:Y};else this.$__.primitiveAtomics[A].$inc+=Y;this.markModified(A),this.$__setValue(A,X)}return this};b.prototype.$__setValue=function(F,A){return N1.setValue(F,A,this._doc),this};b.prototype.get=function(F,A,B){let D;if(B==null)B={};if(A)D=this.$__schema.interpretAsType(F,A,this.$__schema.options);const J=B.noDottedPath;let Z=J?this.$__schema.paths[F]:this.$__path(F);if(Z==null){if(Z=this.$__schema.virtualpath(F),Z!=null)return Z.applyGetters(void 0,this)}if(J){let G=this._doc[F];if(D)G=D.cast(G);if(Z!=null&&B.getters!==!1)return Z.applyGetters(G,this);return G}if(Z!=null&&Z.instance==="Mixed"){const G=this.$__schema.virtualpath(F);if(G!=null)Z=G}const X=F.indexOf(".")!==-1;let Y=this._doc;const $=X?F.split("."):[F];if(typeof this.$__schema.aliases[$[0]]==="string")$[0]=this.$__schema.aliases[$[0]];for(let G=0,E=$.length;G<E;G++){if(Y&&Y._doc)Y=Y._doc;if(Y==null)Y=void 0;else if(Y instanceof Map)Y=Y.get($[G],{getters:!1});else if(G===E-1)Y=N1.getValue($[G],Y);else Y=Y[$[G]]}if(D)Y=D.cast(Y);if(Z!=null&&B.getters!==!1)Y=Z.applyGetters(Y,this);else if(this.$__schema.nested[F]&&B.virtuals)return yE(this,Z3(Y)||{},{path:F});return Y};/*!
 * ignore
 */b.prototype[AB1]=b.prototype.get;b.prototype.$get=b.prototype.get;b.prototype.$__path=function(F){const A=this.$__.adhocPaths,B=A&&A.hasOwnProperty(F)?A[F]:null;if(B)return B;return this.$__schema.path(F)};b.prototype.markModified=function(F,A){if(this.$__saveInitialState(F),this.$__.activePaths.modify(F),A!=null&&!this.$isSubdocument)this.$__.pathsToScopes=this.$__pathsToScopes||{},this.$__.pathsToScopes[F]=A};/*!
 * ignore
 */b.prototype.$__saveInitialState=function F(A){const B=this.$__.savedState,D=A;if(B!=null){const J=D.indexOf("."),Z=J===-1?D:D.slice(0,J);if(!B.hasOwnProperty(Z))B[Z]=Z3(this.$__getValue(Z))}};b.prototype.unmarkModified=function(F){if(this.$__.activePaths.init(F),this.$__.pathsToScopes!=null)delete this.$__.pathsToScopes[F]};b.prototype.$ignore=function(F){this.$__.activePaths.ignore(F)};b.prototype.directModifiedPaths=function(){return Object.keys(this.$__.activePaths.getStatePaths("modify"))};b.prototype.$isEmpty=function(F){const A={minimize:!0,virtuals:!1,getters:!1,transform:!1};if(arguments.length!==0){const B=this.$get(F);if(B==null)return!0;if(typeof B!=="object")return!1;if(N1.isPOJO(B))return Wk(B);return Object.keys(B.toObject(A)).length===0}return Object.keys(this.toObject(A)).length===0};/*!
 * ignore
 */b.prototype.modifiedPaths=function(F){F=F||{};const A=Object.keys(this.$__.activePaths.getStatePaths("modify")),B=new Set;let D=0,J=0;const Z=A.length;for(D=0;D<Z;++D){const X=A[D],Y=Gk(X),$=Y.length;for(J=0;J<$;++J)B.add(Y[J]);if(!F.includeChildren)continue;let G=0,E=this.$get(X);if(typeof E==="object"&&E!==null){if(E._doc)E=E._doc;const W=E.length;if(Array.isArray(E))for(G=0;G<W;++G){const C=X+"."+G;if(!B.has(C)){if(B.add(C),E[G]!=null&&E[G].$__){const H=E[G].modifiedPaths();let q=0;const K=H.length;for(q=0;q<K;++q)B.add(C+"."+H[q])}}}else{const C=Object.keys(E);let H=0;const q=C.length;for(H=0;H<q;++H)B.add(X+"."+C[H])}}}return Array.from(B)};b.prototype[$k]=b.prototype.modifiedPaths;b.prototype.isModified=function(F,A,B){if(F){const D=A&&A.ignoreAtomics,J=this.$__.activePaths.states.modify;if(J==null)return!1;if(typeof F==="string")F=F.indexOf(" ")===-1?[F]:F.split(" ");for(let $ of F)if(J[$]!=null)return!0;const Z=B||this[$k](),X=F.some(function($){return!!~Z.indexOf($)});let Y=Object.keys(J);if(D)Y=Y.filter(($)=>{const G=this.$__getValue($);if(G!=null&&G[k2]!=null&&G[k2].$set===void 0)return!1;return!0});return X||F.some(function($){return Y.some(function(G){return G===$||$.startsWith(G+".")})})}return this.$__.activePaths.some("modify")};b.prototype.$isModified=b.prototype.isModified;b.prototype[FB1]=b.prototype.isModified;b.prototype.$isDefault=function(F){if(F==null)return this.$__.activePaths.some("default");if(typeof F==="string"&&F.indexOf(" ")===-1)return this.$__.activePaths.getStatePaths("default").hasOwnProperty(F);let A=F;if(!Array.isArray(A))A=A.split(" ");return A.some((B)=>this.$__.activePaths.getStatePaths("default").hasOwnProperty(B))};b.prototype.$isDeleted=function(F){if(arguments.length===0)return!!this.$__.isDeleted;return this.$__.isDeleted=!!F,this};b.prototype.isDirectModified=function(F){if(F==null)return this.$__.activePaths.some("modify");if(typeof F==="string"&&F.indexOf(" ")===-1){const B=this.$__.activePaths.getStatePaths("modify").hasOwnProperty(F);if(B||F.indexOf(".")===-1)return B;const D=F.split(".");for(let J=0;J<D.length-1;++J){const Z=D.slice(0,J+1).join("."),X=this.$get(Z);if(X!=null&&X.$__!=null&&X.isDirectModified(D.slice(J+1).join(".")))return!0}return!1}let A=F;if(typeof A==="string")A=A.split(" ");return A.some((B)=>this.isDirectModified(B))};b.prototype.isInit=function(F){if(F==null)return this.$__.activePaths.some("init");if(typeof F==="string"&&F.indexOf(" ")===-1)return this.$__.activePaths.getStatePaths("init").hasOwnProperty(F);let A=F;if(!Array.isArray(A))A=A.split(" ");return A.some((B)=>this.$__.activePaths.getStatePaths("init").hasOwnProperty(B))};b.prototype.isSelected=function F(A){if(this.$__.selected==null)return!0;if(!A)return!1;if(A==="_id")return this.$__.selected._id!==0;if(A.indexOf(" ")!==-1)A=A.split(" ");if(Array.isArray(A))return A.some((Z)=>this.$__isSelected(Z));const B=Object.keys(this.$__.selected);let D=null;if(B.length===1&&B[0]==="_id")return this.$__.selected._id===0;for(let Z of B){if(Z==="_id")continue;if(!Xk(this.$__.selected[Z]))continue;D=!!this.$__.selected[Z];break}if(D===null)return!0;if(A in this.$__.selected)return D;const J=A+".";for(let Z of B){if(Z==="_id")continue;if(Z.startsWith(J))return D||Z!==J;if(J.startsWith(Z+"."))return D}return!D};b.prototype.$__isSelected=b.prototype.isSelected;b.prototype.isDirectSelected=function F(A){if(this.$__.selected==null)return!0;if(A==="_id")return this.$__.selected._id!==0;if(A.indexOf(" ")!==-1)A=A.split(" ");if(Array.isArray(A))return A.some((J)=>this.isDirectSelected(J));const B=Object.keys(this.$__.selected);let D=null;if(B.length===1&&B[0]==="_id")return this.$__.selected._id===0;for(let J of B){if(J==="_id")continue;if(!Xk(this.$__.selected[J]))continue;D=!!this.$__.selected[J];break}if(D===null)return!0;if(this.$__.selected.hasOwnProperty(A))return D;return!D};b.prototype.validate=async function F(A,B){if(typeof A==="function"||typeof B==="function"||typeof arguments[2]==="function")throw new S2("Document.prototype.validate() no longer accepts a callback");let D;if(this.$op="validate",this.$isSubdocument!=null);else if(this.$__.validating)D=new oS(this,{parentStack:B&&B.parentStack,conflictStack:this.$__.validating.stack});else this.$__.validating=new oS(this,{parentStack:B&&B.parentStack});if(arguments.length===1){if(typeof arguments[0]==="object"&&!Array.isArray(arguments[0]))B=arguments[0],A=null}if(B&&typeof B.pathsToSkip==="string"){const J=B.pathsToSkip.indexOf(" ")===-1;B.pathsToSkip=J?[B.pathsToSkip]:B.pathsToSkip.split(" ")}if(D!=null)throw D;return new Promise((J,Z)=>{this.$__validate(A,B,(X)=>{if(this.$op=null,this.$__.validating=null,X!=null)return Z(X);J()})})};b.prototype.$validate=b.prototype.validate;/*!
 * ignore
 *//*!
 * ignore
 *//*!
 * ignore
 */b.prototype.$__validate=function(F,A,B){if(this.$__.saveOptions&&this.$__.saveOptions.pathsToSave&&!F)F=[...this.$__.saveOptions.pathsToSave];else if(typeof F==="function")B=F,A=null,F=null;else if(typeof A==="function")B=A,A=null;const D=A&&typeof A==="object"&&"validateModifiedOnly"in A,J=A&&A.pathsToSkip||null;let Z;if(D)Z=!!A.validateModifiedOnly;else Z=this.$__schema.options.validateModifiedOnly;const X=A&&A.validateAllPaths;if(X){if(J)throw new TypeError("Cannot set both `validateAllPaths` and `pathsToSkip`");if(F)throw new TypeError("Cannot set both `validateAllPaths` and `pathsToValidate`");if(D&&Z)throw new TypeError("Cannot set both `validateAllPaths` and `validateModifiedOnly`")}const Y=this,$=()=>{let U=this.$__.validationError;if(this.$__.validationError=null,this.$__.validating=null,Z&&U!=null){const Q=Object.keys(U.errors);for(let V of Q)if(!this.$isModified(V))delete U.errors[V];if(Object.keys(U.errors).length===0)U=void 0}if(this.$__.cachedRequired={},this.$emit("validate",Y),this.constructor.emit("validate",Y),U){for(let Q in U.errors)if(!this[eA1]&&U.errors[Q]instanceof S2.CastError)this.invalidate(Q,U.errors[Q]);return U}};let G,E;if(X){G=new Set(Object.keys(this.$__schema.paths));for(let U of G){const Q=this.$__schema.path(U);if(!Q||!Q.$isMongooseArray)continue;const V=this.$__getValue(U);if(!V)continue;RD(V,G,U)}G=[...G],E={}}else{const U=Ck(this,F,J);G=Z?U[0].filter((Q)=>this.$isModified(Q)):U[0],E=U[1]}if(typeof F==="string")F=F.split(" ");if(G.length===0)return Fk(function(){const U=$();if(U)return Y.$__schema.s.hooks.execPost("validate:error",Y,[Y],{error:U},function(Q){B(Q)});B(null,Y)});const W={};let C=0,H=this.$__.saveOptions?.pathsToSave;if(Array.isArray(H)){H=new Set(H);for(let U of G){if(!H.has(U))continue;q(U)}}else for(let U of G)q(U);function q(U){if(U==null||W[U])return;W[U]=!0,C++,Fk(function(){const Q=Y.$__schema.path(U);if(!Q)return--C||K();if(!Y.$isValid(U)){--C||K();return}if(Q[DB1]!=null&&U!==Q.path)return--C||K();let V=Y.$__getValue(U),L;if(L=Y.$populated(U))V=L;else if(V!=null&&V.$__!=null&&V.$__.wasPopulated)V=V._id;const N=Y.$__.pathsToScopes!=null&&U in Y.$__.pathsToScopes?Y.$__.pathsToScopes[U]:Y,h={...E[U],path:U,validateAllPaths:X};Q.doValidate(V,function(T){if(T){if((Q.$isSingleNested||Q.$isArraySubdocument||Q.$isMongooseDocumentArray)&&T instanceof wD)return--C||K();Y.invalidate(U,T,void 0,!0)}--C||K()},N,h)})}function K(){const U=$();if(U)return Y.$__schema.s.hooks.execPost("validate:error",Y,[Y],{error:U},function(Q){B(Q)});B(null,Y)}};/*!
 * ignore
 *//*!
 * ignore
 */b.prototype.validateSync=function(F,A){const B=this;if(arguments.length===1&&typeof arguments[0]==="object"&&!Array.isArray(arguments[0]))A=arguments[0],F=null;const D=A&&typeof A==="object"&&"validateModifiedOnly"in A;let J;if(D)J=!!A.validateModifiedOnly;else J=this.$__schema.options.validateModifiedOnly;let Z=A&&A.pathsToSkip;const X=A&&A.validateAllPaths;if(X){if(Z)throw new TypeError("Cannot set both `validateAllPaths` and `pathsToSkip`");if(F)throw new TypeError("Cannot set both `validateAllPaths` and `pathsToValidate`")}if(typeof F==="string")F=F.indexOf(" ")===-1?[F]:F.split(" ");else if(typeof Z==="string"&&Z.indexOf(" ")!==-1)Z=Z.split(" ");let Y,$;if(X){Y=new Set(Object.keys(this.$__schema.paths));for(let W of Y){const C=this.$__schema.path(W);if(!C||!C.$isMongooseArray)continue;const H=this.$__getValue(W);if(!H)continue;RD(H,Y,W)}Y=[...Y],$={}}else{const W=Ck(this,F,Z);Y=J?W[0].filter((C)=>this.$isModified(C)):W[0],$=W[1]}const G={};for(let W=0,C=Y.length;W<C;++W){const H=Y[W];if(G[H])continue;G[H]=!0;const q=B.$__schema.path(H);if(!q)continue;if(!B.$isValid(H))continue;const K=B.$__getValue(H),U=q.doValidateSync(K,B,{skipSchemaValidators:$[H],path:H,validateModifiedOnly:J,validateAllPaths:X});if(U){if((q.$isSingleNested||q.$isArraySubdocument||q.$isMongooseDocumentArray)&&U instanceof wD)continue;B.invalidate(H,U,void 0,!0)}}const E=B.$__.validationError;if(B.$__.validationError=void 0,B.$emit("validate",B),B.constructor.emit("validate",B),E){for(let W in E.errors)if(E.errors[W]instanceof S2.CastError)B.invalidate(W,E.errors[W])}return E};b.prototype.invalidate=function(F,A,B,D){if(!this.$__.validationError)this.$__.validationError=new wD(this);if(this.$__.validationError.errors[F])return;if(!A||typeof A==="string")A=new Jk({path:F,message:A,type:D||"user defined",value:B});if(this.$__.validationError===A)return this.$__.validationError;return this.$__.validationError.addError(F,A),this.$__.validationError};b.prototype.$markValid=function(F){if(!this.$__.validationError||!this.$__.validationError.errors[F])return;if(delete this.$__.validationError.errors[F],Object.keys(this.$__.validationError.errors).length===0)this.$__.validationError=null};/*!
 * ignore
 *//*!
 * ignore
 */b.prototype.$isValid=function(F){if(this.$__.validationError==null||Object.keys(this.$__.validationError.errors).length===0)return!0;if(F==null)return!1;if(F.indexOf(" ")!==-1)F=F.split(" ");if(Array.isArray(F))return F.some((A)=>this.$__.validationError.errors[A]==null);return this.$__.validationError.errors[F]==null};b.prototype.$__reset=function F(){let A=this;const B=this.$parent()===this?this.$getAllSubdocs():[],D=new Set;for(let Z of B){const X=Z.$__fullPathWithIndexes();if(Z.$__reset(),this.isModified(X)||J(X))if(Z.$isDocumentArrayElement)D.add(Z.parentArray());else{const Y=Z.$parent();if(Y===this)this.$__.activePaths.clearPath(Z.$basePath);else if(Y!=null&&Y.$isSubdocument)Y.$__reset()}}for(let Z of D)this.$__.activePaths.clearPath(Z.$path()),Z[t7]=Z[k2],Z[k2]={};function J(Z){Z=Z.indexOf(".")===-1?[Z]:Z.split(".");let X="";for(let Y=0;Y<Z.length;++Y)if(X+=(X.length?".":"")+Z[Y],A.$__.activePaths[X]==="init")return!0;return!1}return this.$__dirty().forEach(function(Z){const X=Z.value;if(X&&X[k2])X[t7]=X[k2],X[k2]={}}),this.$__.backup={},this.$__.backup.activePaths={modify:Object.assign({},this.$__.activePaths.getStatePaths("modify")),default:Object.assign({},this.$__.activePaths.getStatePaths("default"))},this.$__.backup.validationError=this.$__.validationError,this.$__.backup.errors=this.$errors,this.$__.activePaths.clear("modify"),this.$__.activePaths.clear("default"),this.$__.validationError=void 0,this.$errors=void 0,A=this,this.$__schema.requiredPaths().forEach(function(Z){A.$__.activePaths.require(Z)}),this};/*!
 * ignore
 */b.prototype.$__undoReset=function F(){if(this.$__.backup==null||this.$__.backup.activePaths==null)return;this.$__.activePaths.states.modify=this.$__.backup.activePaths.modify,this.$__.activePaths.states.default=this.$__.backup.activePaths.default,this.$__.validationError=this.$__.backup.validationError,this.$errors=this.$__.backup.errors;for(let A of this.$__dirty()){const B=A.value;if(B&&B[k2]&&B[t7])B[k2]=B[t7]}for(let A of this.$getAllSubdocs())A.$__undoReset()};b.prototype.$__dirty=function(){const F=this;let A=this.$__.activePaths.map("modify",function(J){return{path:J,value:F.$__getValue(J),schema:F.$__path(J)}});A=A.concat(this.$__.activePaths.map("default",function(J){if(J==="_id"||F.$__getValue(J)==null)return;return{path:J,value:F.$__getValue(J),schema:F.$__path(J)}}));const B=new Map(A.filter((J)=>J!=null).map((J)=>[J.path,J.value])),D=[];return A.forEach(function(J){if(!J)return;let Z=null;const X=Gk(J.path);for(let Y=0;Y<X.length-1;Y++)if(B.has(X[Y])){Z=B.get(X[Y]);break}if(Z==null)D.push(J);else if(Z!=null&&Z[k2]!=null&&Z.hasAtomics())Z[k2]={},Z[k2].$set=Z}),D};b.prototype.$__setSchema=function(F){hA1(F.tree,this,void 0,F.options);for(let A of Object.keys(F.virtuals))F.virtuals[A]._applyDefaultGetters();if(F.path("schema")==null)this.schema=F;this.$__schema=F,this[bE]=F};b.prototype.$__getArrayPathsToValidate=function(){return VD||(VD=U9()),this.$__.activePaths.map("init","modify",function(F){return this.$__getValue(F)}.bind(this)).filter(function(F){return F&&Array.isArray(F)&&N1.isMongooseDocumentArray(F)&&F.length}).reduce(function(F,A){return F.concat(A)},[]).filter(function(F){return F})};b.prototype.$getAllSubdocs=function(){VD||(VD=U9()),Q9=Q9||r7();function F(B,D,J){let Z=B,X=!1;if(J)if(B instanceof b&&B[bE].paths[J])Z=B._doc[J];else if(B instanceof b&&B[bE].nested[J])Z=B._doc[J],X=!0;else Z=B[J];if(Z instanceof Q9)D.push(Z);else if(Z instanceof Map)D=Array.from(Z.keys()).reduce(function(Y,$){return F(Z.get($),Y,null)},D);else if(Z&&!Array.isArray(Z)&&Z.$isSingleNested)D=Object.keys(Z._doc).reduce(function(Y,$){return F(Z,Y,$)},D),D.push(Z);else if(Z&&N1.isMongooseDocumentArray(Z))Z.forEach(function Y($){if(!$||!$._doc)return;if(D=Object.keys($._doc).reduce(function(G,E){return F($._doc,G,E)},D),$ instanceof Q9)D.push($)});else if(X&&Z!=null)for(let Y of Object.keys(Z))F(Z,D,Y);return D}const A=[];for(let B of Object.keys(this._doc))F(this,A,B);return A};/*!
 * Runs queued functions
 *//*!
 * ignore
 */b.prototype.$__handleReject=function F(A){if(this.$listeners("error").length)this.$emit("error",A);else if(this.constructor.listeners&&this.constructor.listeners("error").length)this.constructor.emit("error",A)};b.prototype.$toObject=function(F,A){const B=A?"toJSON":"toObject",D=this.constructor&&this.constructor.base&&this.constructor.base.options&&cA1(this.constructor.base.options,B)||{},J=this.$__schema&&this.$__schema.options||{},Z=Object.assign({},D,J[B]);F=N1.isPOJO(F)?{...F}:{},F._calledWithOptions=F._calledWithOptions||{...F};let X;if(F._calledWithOptions.minimize!=null)X=F.minimize;else if(Z.minimize!=null)X=Z.minimize;else X=J.minimize;if(F.minimize=X,F._seen=F._seen||new Map,(F._calledWithOptions.depopulate??F._parentOptions?.depopulate??Z.depopulate??!1)&&F._isNested&&this.$__.wasPopulated)return Z3(this.$__.wasPopulated.value||this._id,F);for(let H of Object.keys(Z))if(F[H]==null)F[H]=Z[H];F._isNested=!0,F.json=A,F.minimize=X,F._parentOptions=F,F._skipSingleNestedGetters=!1;let $=Z3(this._doc,F)||{};F._skipSingleNestedGetters=!0;const G=F._calledWithOptions.getters??F.getters??Z.getters??!1;if(G){if(KB1(this,$,F),F.minimize)$=sA1($)||{}}const E=F._calledWithOptions.virtuals??Z.virtuals??void 0;if(E||G&&E!==!1)yE(this,$,F,F);if(F.versionKey===!1&&this.$__schema.options.versionKey)delete $[this.$__schema.options.versionKey];const W=F._calledWithOptions.transform??!0;let C=void 0;if(W===!0)C=Z.transform;else if(typeof W==="function")C=W;if(W)zB1(this,$);if(F.useProjection)UB1(this,$);if(typeof C==="function"){const H=C(this,$,F);if(typeof H!=="undefined")$=H}return $};b.prototype.toObject=function(F){return this.$toObject(F)};/*!
 * Applies virtuals properties to `json`.
 *//*!
 * ignore
 */b.prototype.toJSON=function(F){return this.$toObject(F,!0)};/*!
 * ignore
 */b.prototype.ownerDocument=function(){return this};b.prototype.parent=function(){if(this.$isSubdocument||this.$__.wasPopulated)return this.$__.parent;return this};b.prototype.$parent=b.prototype.parent;b.prototype.inspect=function(F){const A=N1.isPOJO(F);let B;if(A)B=F,B.minimize=!1;const D=arguments.length>0?this.toObject(B):this.toObject();if(D==null)return"MongooseDocument { "+D+" }";return D};if(gE.custom)b.prototype[gE.custom]=b.prototype.inspect;b.prototype.toString=function(){const F=this.inspect();if(typeof F==="string")return F;return gE(F)};b.prototype.equals=function(F){if(!F)return!1;const A=this.$__getValue("_id"),B=F.$__!=null?F.$__getValue("_id"):F;if(!A&&!B)return LD(this,F);return A&&A.equals?A.equals(B):A===B};b.prototype.populate=async function F(){const A={},B=[...arguments];if(typeof B[B.length-1]==="function")throw new S2("Document.prototype.populate() no longer accepts a callback");if(B.length!==0){const Z=N1.populate.apply(null,B);for(let X of Z)A[X.path]=X}const D=N1.object.vals(A);let J=this.constructor;if(this.$__isNested){J=this.$__[BB1].constructor;const Z=this.$__.nestedPath;D.forEach(function(X){X.path=Z+"."+X.path})}if(this.$session()!=null){const Z=this.$session();D.forEach((X)=>{if(X.options==null){X.options={session:Z};return}if(!("session"in X.options))X.options.session=Z})}return D.forEach((Z)=>{Z._localModel=J}),J.populate(this,D)};b.prototype.$getPopulatedDocs=function F(){let A=[];if(this.$__.populated!=null)A=A.concat(Object.keys(this.$__.populated));let B=[];for(let D of A){const J=this.$get(D);if(Array.isArray(J))B=B.concat(J);else if(J instanceof b)B.push(J)}return B};b.prototype.populated=function(F,A,B){if(A==null||A===!0){if(!this.$__.populated)return;if(typeof F!=="string")return;const J=F.endsWith(".$*")?F.replace(/\.\$\*$/,""):F,Z=this.$__.populated[J];if(Z)return A===!0?Z:Z.value;return}this.$__.populated||(this.$__.populated={}),this.$__.populated[F]={value:A,options:B};const D=F.split(".");for(let J=0;J<D.length-1;++J){const Z=D.slice(0,J+1).join("."),X=this.$get(Z);if(X!=null&&X.$__!=null&&this.$populated(Z)){const Y=D.slice(J+1).join(".");X.$populated(Y,A,B);break}}return A};b.prototype.$populated=b.prototype.populated;b.prototype.$assertPopulated=function F(A,B){if(Array.isArray(A))return A.forEach((D)=>this.$assertPopulated(D,B)),this;if(arguments.length>1)this.$set(B);if(!this.$populated(A))throw new S2(`Expected path "${A}" to be populated`);return this};b.prototype.depopulate=function(F){if(typeof F==="string")F=F.indexOf(" ")===-1?[F]:F.split(" ");let A;const B=this.$$populatedVirtuals?Object.keys(this.$$populatedVirtuals):[],D=this.$__&&this.$__.populated||{};if(arguments.length===0){for(let Z of B)delete this.$$populatedVirtuals[Z],delete this._doc[Z],delete D[Z];const J=Object.keys(D);for(let Z of J){if(A=this.$populated(Z),!A)continue;delete D[Z],N1.setValue(Z,A,this._doc)}return this}for(let J of F)if(A=this.$populated(J),delete D[J],B.indexOf(J)!==-1)delete this.$$populatedVirtuals[J],delete this._doc[J];else if(A)N1.setValue(J,A,this._doc);return this};b.prototype.$__fullPath=function(F){return F||""};b.prototype.getChanges=function(){const F=this.$__delta();return F?F[1]:{}};b.prototype.$clone=function(){const A=new this.constructor;if(A.$isNew=this.$isNew,this._doc)A._doc=Z3(this._doc,{retainDocuments:!0});if(this.$__){const D=new this.$__.constructor;for(let J of Object.getOwnPropertyNames(this.$__)){if(J==="activePaths")continue;D[J]=Z3(this.$__[J])}Object.assign(D.activePaths,Z3({...this.$__.activePaths})),A.$__=D}return A};/*!
 * Module exports.
 */b.ValidationError=wD;qk.exports=Hk=b});var D1=z((kB1)=>{var TB1=function(F){if(Array.isArray(F.populate)){const D=[];F.populate.forEach(function(J){if(mE.test(J.path)){const Z=Object.assign({},J);Z.path.split(dE).forEach(function(Y){Z.path=Y,D.push(kB1.populate(Z)[0])})}else D.push(kB1.populate(J)[0])}),F.populate=kB1.populate(D)}else if(F.populate!=null&&typeof F.populate==="object")F.populate=kB1.populate(F.populate);const A=[],B=mE.test(F.path)?F.path.split(dE):[F.path];if(F.options!=null)F.options=hE(F.options);for(let D of B)A.push(new wk(Object.assign({},F,{path:D})));return A},uB1=function(F,A){let B=F?._doc||F;if(B!=null&&B.isMongooseArrayProxy)B=B.__array;return B instanceof Map?B.get(A,jB1):B[A]};/*!
 * Module dependencies.
 */var QB1=B6().UUID,LB1=WO(),Vk=h6(),VB1=H3(),wk=IO(),hE=J0(),wB1=y2(),RB1=r3(),Rk=aF(),Ik=NO(),N4=L2(),IB1=rF(),NB1=MZ(),r5=S8(),PB1=oB(),MB1=eB(),t5=v4(),{trustedSymbol:F8}=y9(),vE;kB1.specialProperties=t5;kB1.isMongooseArray=Rk.isMongooseArray;kB1.isMongooseDocumentArray=Ik.isMongooseDocumentArray;kB1.registerMongooseArray=Rk.registerMongooseArray;kB1.registerMongooseDocumentArray=Ik.registerMongooseDocumentArray;var mE=/\s/,dE=/\s+/;kB1.toCollectionName=function(F,A){if(F==="system.profile")return F;if(F==="system.indexes")return F;if(typeof A==="function")return A(F);return F};kB1.deepEqual=function F(A,B){if(A===B)return!0;if(typeof A!=="object"||typeof B!=="object")return A===B;if(A instanceof Date&&B instanceof Date)return A.getTime()===B.getTime();if(N4(A,"ObjectId")&&N4(B,"ObjectId")||N4(A,"Decimal128")&&N4(B,"Decimal128"))return A.toString()===B.toString();if(A instanceof RegExp&&B instanceof RegExp)return A.source===B.source&&A.ignoreCase===B.ignoreCase&&A.multiline===B.multiline&&A.global===B.global&&A.dotAll===B.dotAll&&A.unicode===B.unicode&&A.sticky===B.sticky&&A.hasIndices===B.hasIndices;if(A==null||B==null)return!1;if(A.prototype!==B.prototype)return!1;if(A instanceof Map||B instanceof Map){if(!(A instanceof Map)||!(B instanceof Map))return!1;return F(Array.from(A.keys()),Array.from(B.keys()))&&F(Array.from(A.values()),Array.from(B.values()))}if(A instanceof Number&&B instanceof Number)return A.valueOf()===B.valueOf();if(Buffer.isBuffer(A))return kB1.buffer.areEqual(A,B);if(Array.isArray(A)||Array.isArray(B)){if(!Array.isArray(A)||!Array.isArray(B))return!1;const X=A.length;if(X!==B.length)return!1;for(let Y=0;Y<X;++Y)if(!F(A[Y],B[Y]))return!1;return!0}if(A.$__!=null)A=A._doc;else if(r5(A))A=A.toObject();if(B.$__!=null)B=B._doc;else if(r5(B))B=B.toObject();const D=Object.keys(A),J=Object.keys(B),Z=D.length;if(Z!==J.length)return!1;for(let X=Z-1;X>=0;X--)if(D[X]!==J[X])return!1;for(let X of D)if(!F(A[X],B[X]))return!1;return!0};kB1.last=function(F){if(F.length>0)return F[F.length-1];return};/*!
 * ignore
 */kB1.promiseOrCallback=PB1;/*!
 * ignore
 */kB1.cloneArrays=function F(A){if(!Array.isArray(A))return A;return A.map((B)=>kB1.cloneArrays(B))};/*!
 * ignore
 */kB1.omit=function F(A,B){if(B==null)return Object.assign({},A);if(!Array.isArray(B))B=[B];const D=Object.assign({},A);for(let J of B)delete D[J];return D};kB1.merge=function F(A,B,D,J){D=D||{};const Z=Object.keys(B);let X=0;const Y=Z.length;let $;if(B[F8])A[F8]=B[F8];J=J||"";const G=D.omitNested||{};while(X<Y){if($=Z[X++],D.omit&&D.omit[$])continue;if(G[J])continue;if(t5.has($))continue;if(A[$]==null)if(IB1(B[$]))A[$]={...B[$]};else if(Array.isArray(B[$]))A[$]=[...B[$]];else A[$]=B[$];else if(kB1.isObject(B[$])){if(!kB1.isObject(A[$]))A[$]={};if(B[$]!=null){if(D.isDiscriminatorSchemaMerge&&(B[$].$isSingleNested&&A[$].$isMongooseDocumentArray)||B[$].$isMongooseDocumentArray&&A[$].$isSingleNested)continue;else if(B[$].instanceOfSchema){if(A[$].instanceOfSchema)MB1(A[$],B[$].clone(),D.isDiscriminatorSchemaMerge);else A[$]=B[$].clone();continue}else if(N4(B[$],"ObjectId")){A[$]=new VB1(B[$]);continue}}F(A[$],B[$],D,J?J+"."+$:$)}else if(D.overwrite)A[$]=B[$]}};kB1.toObject=function F(A){vE||(vE=u2());let B;if(A==null)return A;if(A instanceof vE)return A.toObject();if(Array.isArray(A)){B=[];for(let D of A)B.push(F(D));return B}if(kB1.isPOJO(A)){if(B={},A[F8])B[F8]=A[F8];for(let D of Object.keys(A)){if(t5.has(D))continue;B[D]=F(A[D])}return B}return A};kB1.isObject=RB1;kB1.isPOJO=rF();kB1.isNonBuiltinObject=function F(A){return typeof A==="object"&&!kB1.isNativeObject(A)&&!kB1.isMongooseType(A)&&!(A instanceof QB1)&&A!=null};kB1.isNativeObject=function(F){return Array.isArray(F)||F instanceof Date||F instanceof Boolean||F instanceof Number||F instanceof String};kB1.isEmptyObject=function(F){return F!=null&&typeof F==="object"&&Object.keys(F).length===0};kB1.hasKey=function F(A,B){const D=Object.keys(A);for(let J of D){if(J===B)return!0;if(kB1.isPOJO(A[J])&&kB1.hasKey(A[J],B))return!0}return!1};kB1.tick=function F(A){if(typeof A!=="function")return;return function(){try{A.apply(this,arguments)}catch(B){wB1(function(){throw B})}}};kB1.isMongooseType=function(F){return N4(F,"ObjectId")||N4(F,"Decimal128")||F instanceof Buffer};kB1.isMongooseObject=r5;kB1.expires=function F(A){if(!(A&&A.constructor.name==="Object"))return;if(!("expires"in A))return;A.expireAfterSeconds=typeof A.expires!=="string"?A.expires:Math.round(LB1(A.expires)/1000),delete A.expires};kB1.populate=function F(A,B,D,J,Z,X,Y,$){let G=null;if(arguments.length===1){if(A instanceof wk)return A._docs={},A._childDocs=[],[A];if(Array.isArray(A))return E(A).map((C)=>kB1.populate(C)[0]);if(kB1.isObject(A))G=Object.assign({},A);else G={path:A}}else if(typeof D==="object")G={path:A,select:B,match:D,options:J};else G={path:A,select:B,model:D,match:J,options:Z,populate:X,justOne:Y,count:$};if(typeof G.path!=="string")throw new TypeError("utils.populate: invalid path. Expected string. Got typeof `"+typeof A+"`");return TB1(G);function E(W){const C=[];return W.forEach(function(H){if(mE.test(H.path))H.path.split(dE).forEach(function(K){const U=Object.assign({},H);U.path=K,C.push(U)});else C.push(H)}),C}};kB1.getValue=function(F,A,B){return Vk.get(F,A,uB1,B)};/*!
 * ignore
 */var jB1=Object.freeze({getters:!1});kB1.setValue=function(F,A,B,D,J){Vk.set(F,A,B,"_doc",D,J)};kB1.object={};kB1.object.vals=function F(A){const B=Object.keys(A);let D=B.length;const J=[];while(D--)J.push(A[B[D]]);return J};var OB1=Object.prototype.hasOwnProperty;kB1.object.hasOwnProperty=function(F,A){return OB1.call(F,A)};kB1.isNullOrUndefined=function(F){return F===null||F===void 0};/*!
 * ignore
 */kB1.array={};kB1.array.flatten=function F(A,B,D){return D||(D=[]),A.forEach(function(J){if(Array.isArray(J))F(J,B,D);else if(!B||B(J))D.push(J)}),D};/*!
 * ignore
 */var SB1=Object.prototype.hasOwnProperty;kB1.hasUserDefinedProperty=function(F,A){if(F==null)return!1;if(Array.isArray(A)){for(let B of A)if(kB1.hasUserDefinedProperty(F,B))return!0;return!1}if(SB1.call(F,A))return!0;if(typeof F==="object"&&A in F){const B=F[A];return B!==Object.prototype[A]&&B!==Array.prototype[A]}return!1};/*!
 * ignore
 */var Kk=Math.pow(2,32)-1;kB1.isArrayIndex=function(F){if(typeof F==="number")return F>=0&&F<=Kk;if(typeof F==="string"){if(!/^\d+$/.test(F))return!1;return F=+F,F>=0&&F<=Kk}return!1};kB1.array.unique=function(F){const A=new Set,B=new Set,D=[];for(let J of F)if(typeof J==="number"||typeof J==="string"||J==null){if(A.has(J))continue;D.push(J),A.add(J)}else if(N4(J,"ObjectId")){if(B.has(J.toString()))continue;D.push(J),B.add(J.toString())}else D.push(J);return D};kB1.buffer={};kB1.buffer.areEqual=function(F,A){if(!Buffer.isBuffer(F))return!1;if(!Buffer.isBuffer(A))return!1;if(F.length!==A.length)return!1;for(let B=0,D=F.length;B<D;++B)if(F[B]!==A[B])return!1;return!0};kB1.getFunctionName=NB1;kB1.decorate=function(F,A){for(let B in A){if(t5.has(B))continue;F[B]=A[B]}};kB1.mergeClone=function(F,A){if(r5(A))A=A.toObject({transform:!1,virtuals:!1,depopulate:!0,getters:!1,flattenDecimals:!1});const B=Object.keys(A),D=B.length;let J=0,Z;while(J<D){if(Z=B[J++],t5.has(Z))continue;if(typeof F[Z]==="undefined")F[Z]=hE(A[Z],{transform:!1,virtuals:!1,depopulate:!0,getters:!1,flattenDecimals:!1});else{let X=A[Z];if(X!=null&&X.valueOf&&!(X instanceof Date))X=X.valueOf();if(kB1.isObject(X)){let Y=X;if(r5(X)&&!X.isMongooseBuffer)Y=Y.toObject({transform:!1,virtuals:!1,depopulate:!0,getters:!1,flattenDecimals:!1});if(X.isMongooseBuffer)Y=Buffer.from(Y);kB1.mergeClone(F[Z],Y)}else F[Z]=hE(X,{flattenDecimals:!1})}}};kB1.each=function(F,A){for(let B of F)A(B)};kB1.renameObjKey=function(F,A,B){return Object.keys(F).reduce((J,Z)=>{if(Z===A)J[B]=F[A];else J[Z]=F[Z];return J},{})};/*!
 * ignore
 */kB1.getOption=function(F){const A=Array.prototype.slice.call(arguments,1);for(let B of A){if(B==null)continue;if(B[F]!=null)return B[F]}return null};/*!
 * ignore
 */kB1.noop=function(){};kB1.errorToPOJO=function F(A){if(!(A instanceof Error))throw new Error("`error` must be `instanceof Error`.");const D={};for(let J of Object.getOwnPropertyNames(A))D[J]=A[J];return D};/*!
 * ignore
 */kB1.warn=function F(A){return process.emitWarning(A,{code:"MONGOOSE"})};kB1.injectTimestampsOption=function F(A,B){if(B==null)return;A.timestamps=B}});var O0=z((PD,kk)=>{var C1=function(F,A,B){this[qD1]=!0,this.path=F,this.instance=B,this.validators=[],this.getters=this.constructor.hasOwnProperty("getters")?this.constructor.getters.slice():[],this.setters=this.constructor.hasOwnProperty("setters")?this.constructor.setters.slice():[],this.splitPath(),A=A||{};const D=this.constructor.defaultOptions||{},J=Object.keys(D);for(let Y of J)if(Y==="validate")this.validate(D.validate);else if(D.hasOwnProperty(Y)&&!Object.prototype.hasOwnProperty.call(A,Y))A[Y]=D[Y];if(A.select==null)delete A.select;const Z=this.OptionsConstructor||Ok;if(this.options=new Z(A),this._index=null,L9.hasUserDefinedProperty(this.options,"immutable"))this.$immutable=this.options.immutable,pE(this);const X=Object.keys(this.options);for(let Y of X){if(Y==="cast"){if(Array.isArray(this.options[Y]))this.castFunction.apply(this,this.options[Y]);else this.castFunction(this.options[Y]);continue}if(L9.hasUserDefinedProperty(this.options,Y)&&typeof this[Y]==="function"){if(Y==="index"&&this._index){if(A.index===!1){const E=this._index;if(typeof E==="object"&&E!=null){if(E.unique)throw new Error('Path "'+this.path+'" may not have `index` set to false and `unique` set to true');if(E.sparse)throw new Error('Path "'+this.path+'" may not have `index` set to false and `sparse` set to true')}this._index=!1}continue}const $=A[Y];if(Y==="default"){this.default($);continue}const G=Array.isArray($)?$:[$];this[Y].apply(this,G)}}Object.defineProperty(this,"$$context",{enumerable:!1,configurable:!1,writable:!0,value:null})},Tk=function(F,A){if(F!==void 0&&!F){const D=new(A.ErrorConstructor||sE)(A);return D[Sk]=!0,D}},jk=function(F,A){return this.castForQuery(null,F,A)},QD1=function(F,A){const B=this;if(!Array.isArray(F))return[this.castForQuery(null,F,A)];return F.map(function(D){return B.castForQuery(null,D,A)})},uk=function(F,A){const B=this;if(!Array.isArray(F))return[this.castForQuery(null,F,A)];return F.map(function(D){if(Array.isArray(D)&&D.length===0)return D;return B.castForQuery(null,D,A)})};/*!
 * Module dependencies.
 */var o5=W2(),Ok=s2(),WD1=rB(),CD1=DE(),ND=J0(),pE=ZO(),HD1=YO(),iE=GO(),Mk=y2(),qD1=t().schemaTypeSymbol,L9=D1(),Sk=t().validatorErrorSymbol,KD1=t().documentIsModified,zD1=t().populateModelSymbol,nE=o5.CastError,sE=o5.ValidatorError,UD1={_skipMarkModified:!0};C1.prototype.OptionsConstructor=Ok;C1.prototype.path;C1.prototype.validators;C1.prototype.isRequired;C1.prototype.splitPath=function(){if(this._presplitPath!=null)return this._presplitPath;if(this.path==null)return;return this._presplitPath=this.path.indexOf(".")===-1?[this.path]:this.path.split("."),this._presplitPath};C1.cast=function F(A){if(arguments.length===0)return this._cast;if(A===!1)A=(B)=>B;return this._cast=A,this._cast};C1.prototype.castFunction=function F(A,B){if(arguments.length===0)return this._castFunction;if(A===!1)A=this.constructor._defaultCaster||((D)=>D);if(typeof A==="string")return this._castErrorMessage=A,this._castFunction;if(A!=null)this._castFunction=A;if(B!=null)this._castErrorMessage=B;return this._castFunction};C1.prototype.cast=function F(){throw new Error("Base SchemaType class does not implement a `cast()` function")};C1.set=function F(A,B){if(!this.hasOwnProperty("defaultOptions"))this.defaultOptions=Object.assign({},this.defaultOptions);this.defaultOptions[A]=B};C1.get=function(F){this.getters=this.hasOwnProperty("getters")?this.getters:[],this.getters.push(F)};C1.prototype.default=function(F){if(arguments.length===1){if(F===void 0){this.defaultValue=void 0;return}if(F!=null&&F.instanceOfSchema)throw new o5("Cannot set default value of path `"+this.path+"` to a mongoose Schema instance.");return this.defaultValue=F,this.defaultValue}else if(arguments.length>1)this.defaultValue=[...arguments];return this.defaultValue};C1.prototype.index=function(F){return this._index=F,L9.expires(this._index),this};C1.prototype.unique=function(F){if(this._index===!1){if(!F)return;throw new Error('Path "'+this.path+'" may not have `index` set to false and `unique` set to true')}if(!this.options.hasOwnProperty("index")&&F===!1)return this;if(this._index==null||this._index===!0)this._index={};else if(typeof this._index==="string")this._index={type:this._index};return this._index.unique=F,this};C1.prototype.text=function(F){if(this._index===!1){if(!F)return this;throw new Error('Path "'+this.path+'" may not have `index` set to false and `text` set to true')}if(!this.options.hasOwnProperty("index")&&F===!1)return this;if(this._index===null||this._index===void 0||typeof this._index==="boolean")this._index={};else if(typeof this._index==="string")this._index={type:this._index};return this._index.text=F,this};C1.prototype.sparse=function(F){if(this._index===!1){if(!F)return this;throw new Error('Path "'+this.path+'" may not have `index` set to false and `sparse` set to true')}if(!this.options.hasOwnProperty("index")&&F===!1)return this;if(this._index==null||typeof this._index==="boolean")this._index={};else if(typeof this._index==="string")this._index={type:this._index};return this._index.sparse=F,this};C1.prototype.immutable=function(F){return this.$immutable=F,pE(this),this};C1.prototype.transform=function(F){return this.options.transform=F,this};C1.prototype.set=function(F){if(typeof F!=="function")throw new TypeError("A setter must be a function.");return this.setters.push(F),this};C1.prototype.get=function(F){if(typeof F!=="function")throw new TypeError("A getter must be a function.");return this.getters.push(F),this};C1.prototype.validateAll=function(F){for(let A=0;A<F.length;A++)this.validate(F[A]);return this};C1.prototype.validate=function(F,A,B){if(typeof F==="function"||F&&L9.getFunctionName(F.constructor)==="RegExp"){let X;if(typeof A==="function")X={validator:F,message:A},X.type=B||"user defined";else if(A instanceof Object&&!B){if(X=iE(A)?Object.assign({},A):ND(A),!X.message)X.message=X.msg;X.validator=F,X.type=X.type||"user defined"}else{if(A==null)A=o5.messages.general.default;if(!B)B="user defined";X={message:A,type:B,validator:F}}return this.validators.push(X),this}let D,J,Z;for(D=0,J=arguments.length;D<J;D++){if(Z=arguments[D],!L9.isPOJO(Z)){const X="Invalid validator. Received ("+typeof Z+") "+Z+". See https://mongoosejs.com/docs/api/schematype.html#SchemaType.prototype.validate()";throw new Error(X)}this.validate(Z.validator,Z)}return this};C1.prototype.required=function(F,A){let B={};if(arguments.length>0&&F==null)return this.validators=this.validators.filter(function(Z){return Z.validator!==this.requiredValidator},this),this.isRequired=!1,delete this.originalRequiredValue,this;if(typeof F==="object")B=F,A=B.message||A,F=F.isRequired;if(F===!1)return this.validators=this.validators.filter(function(Z){return Z.validator!==this.requiredValidator},this),this.isRequired=!1,delete this.originalRequiredValue,this;const D=this;if(this.isRequired=!0,this.requiredValidator=function(Z){const X=this&&this.$__&&this.$__.cachedRequired;if(X!=null&&!this.$__isSelected(D.path)&&!this[KD1](D.path))return!0;if(X!=null&&D.path in X){const Y=X[D.path]?D.checkRequired(Z,this):!0;return delete X[D.path],Y}else if(typeof F==="function")return F.apply(this)?D.checkRequired(Z,this):!0;return D.checkRequired(Z,this)},this.originalRequiredValue=F,typeof F==="string")A=F,F=void 0;const J=A||o5.messages.general.required;return this.validators.unshift(Object.assign({},B,{validator:this.requiredValidator,message:J,type:"required"})),this};C1.prototype.ref=function(F){return this.options.ref=F,this};C1.prototype.getDefault=function(F,A,B){let D;if(typeof this.defaultValue==="function")if(this.defaultValue===Date.now||this.defaultValue===Array||this.defaultValue.name.toLowerCase()==="objectid")D=this.defaultValue.call(F);else D=this.defaultValue.call(F,F);else D=this.defaultValue;if(D!==null&&D!==void 0){if(typeof D==="object"&&(!this.options||!this.options.shared))D=ND(D);if(B&&B.skipCast)return this._applySetters(D,F);const J=this.applySetters(D,F,A,void 0,UD1);if(J&&!Array.isArray(J)&&J.$isSingleNested)J.$__parent=F;return J}return D};C1.prototype._applySetters=function(F,A,B,D,J){let Z=F;if(B)return Z;const X=this.setters;for(let Y=X.length-1;Y>=0;Y--)Z=X[Y].call(A,Z,D,this,J);return Z};/*!
 * ignore
 */C1.prototype._castNullish=function F(A){return A};C1.prototype.applySetters=function(F,A,B,D,J){let Z=this._applySetters(F,A,B,D,J);if(Z==null)return this._castNullish(Z);return Z=this.cast(Z,A,B,D,J),Z};C1.prototype.applyGetters=function(F,A){let B=F;const D=this.getters,J=D.length;if(J===0)return B;for(let Z=0;Z<J;++Z)B=D[Z].call(A,B,this);return B};C1.prototype.select=function F(A){return this.selected=!!A,this};C1.prototype.doValidate=function(F,A,B,D){let J=!1;const Z=this.path;if(typeof A!=="function")throw new TypeError(`Must pass callback function to doValidate(), got ${typeof A}`);const X=this.validators.filter((G)=>typeof G==="object"&&G!==null);let Y=X.length;if(!Y)return A(null);for(let G=0,E=X.length;G<E;++G){if(J)break;const W=X[G],C=W.validator;let H;const q=iE(W)?Object.assign({},W):ND(W);if(q.path=D&&D.path?D.path:Z,q.fullPath=this.$fullPath,q.value=F,C instanceof RegExp){$(C.test(F),q,B);continue}if(typeof C!=="function")continue;if(F===void 0&&C!==this.requiredValidator){$(!0,q,B);continue}try{if(q.propsParameter)H=C.call(B,F,q);else H=C.call(B,F)}catch(K){if(H=!1,q.reason=K,K.message)q.message=K.message}if(H!=null&&typeof H.then==="function")H.then(function(K){$(K,q,B)},function(K){q.reason=K,q.message=K.message,H=!1,$(H,q,B)});else $(H,q,B)}function $(G,E,W){if(J)return;if(G===void 0||G){if(--Y<=0)Mk(function(){A(null)})}else J=new(E.ErrorConstructor||sE)(E,W),J[Sk]=!0,Mk(function(){A(J)})}};C1.prototype.doValidateSync=function(F,A,B){const D=this.path;if(!this.validators.length)return null;let Z=this.validators;if(F===void 0)if(this.validators.length!==0&&this.validators[0].type==="required")Z=[this.validators[0]];else return null;let X=null,Y=0;const $=Z.length;for(Y=0;Y<$;++Y){const G=Z[Y];if(G===null||typeof G!=="object")continue;const E=G.validator,W=iE(G)?Object.assign({},G):ND(G);W.path=B&&B.path?B.path:D,W.fullPath=this.$fullPath,W.value=F;let C=!1;if(HD1(E))continue;if(E instanceof RegExp){X=Tk(E.test(F),W);continue}if(typeof E!=="function")continue;try{if(W.propsParameter)C=E.call(A,F,W);else C=E.call(A,F)}catch(H){C=!1,W.reason=H}if(C!=null&&typeof C.then==="function")continue;if(X=Tk(C,W),X)break}return X};C1._isRef=function(F,A,B,D){let J=D&&F.options&&(F.options.ref||F.options.refPath);if(!J&&B&&B.$__!=null){const Z=B.$__fullPath(F.path,!0),X=B.ownerDocument();J=Z!=null&&X.$populated(Z)||B.$populated(F.path)}if(J){if(A==null)return!0;if(!Buffer.isBuffer(A)&&A._bsontype!=="Binary"&&L9.isObject(A))return!0;return D}return!1};/*!
 * ignore
 */C1.prototype._castRef=function F(A,B,D){if(A==null)return A;if(A.$__!=null)return A.$__.wasPopulated=A.$__.wasPopulated||{value:A._id},A;if(Buffer.isBuffer(A)||!L9.isObject(A)){if(D)return A;throw new nE(this.instance,A,this.path,null,this)}const J=B.$__fullPath(this.path,!0),X=B.ownerDocument().$populated(J,!0);let Y=A;if(!B.$__.populated||!B.$__.populated[J]||!B.$__.populated[J].options||!B.$__.populated[J].options.options||!B.$__.populated[J].options.options.lean)Y=new X.options[zD1](A),Y.$__.wasPopulated={value:Y._id};return Y};/*!
 * ignore
 *//*!
 * ignore
 *//*!
 * ignore
 */C1.prototype.$conditionalHandlers={$all:QD1,$eq:jk,$in:uk,$ne:jk,$nin:uk,$exists:WD1,$type:CD1};C1.prototype.castForQuery=function(F,A,B){let D;if(F!=null){if(D=this.$conditionalHandlers[F],!D)throw new Error("Can\'t use "+F);return D.call(this,A,B)}try{return this.applySetters(A,B)}catch(J){if(J instanceof nE&&J.path===this.path&&this.$fullPath!=null)J.path=this.$fullPath;throw J}};C1.checkRequired=function(F){if(arguments.length!==0)this._checkRequired=F;return this._checkRequired};C1.prototype.checkRequired=function(F){return F!=null};C1.prototype.clone=function(){const F=Object.assign({},this.options),A=new this.constructor(this.path,F,this.instance);if(A.validators=this.validators.slice(),this.requiredValidator!==void 0)A.requiredValidator=this.requiredValidator;if(this.defaultValue!==void 0)A.defaultValue=this.defaultValue;if(this.$immutable!==void 0&&this.options.immutable===void 0)A.$immutable=this.$immutable,pE(A);if(this._index!==void 0)A._index=this._index;if(this.selected!==void 0)A.selected=this.selected;if(this.isRequired!==void 0)A.isRequired=this.isRequired;if(this.originalRequiredValue!==void 0)A.originalRequiredValue=this.originalRequiredValue;return A.getters=this.getters.slice(),A.setters=this.setters.slice(),A};/*!
 * Module exports.
 */kk.exports=PD=C1;PD.CastError=nE;PD.ValidatorError=sE});var fk=z((cL1,xk)=>{var l6=H6();class a2{constructor(F){if(Object.assign(this,F),F!=null&&F.options!=null)this.options=Object.assign({},F.options)}}Object.defineProperty(a2.prototype,"ref",l6);Object.defineProperty(a2.prototype,"refPath",l6);Object.defineProperty(a2.prototype,"localField",l6);Object.defineProperty(a2.prototype,"foreignField",l6);Object.defineProperty(a2.prototype,"justOne",l6);Object.defineProperty(a2.prototype,"count",l6);Object.defineProperty(a2.prototype,"match",l6);Object.defineProperty(a2.prototype,"options",l6);Object.defineProperty(a2.prototype,"skip",l6);Object.defineProperty(a2.prototype,"limit",l6);Object.defineProperty(a2.prototype,"perDocumentLimit",l6);xk.exports=a2});var aE=z((lL1,_k)=>{var LD1=s7();_k.exports=function F(A,B){if(A==null)return!1;if(B==="_id")return A._id===0;const D=Object.keys(A);let J=null;for(let Z of D)if(LD1(A[Z])){J=A[B]===1?"inclusive":"exclusive";break}if(J==="inclusive")return A[B]!==1;if(J==="exclusive")return A[B]===0;return!1}});var MD=z((pL1,gk)=>{gk.exports=function F(A,B,D){if(A==null)return A;if(A._doc!=null)A=A._doc;if(arguments.length>=3){if(typeof A!=="object")return;if(D===void 0)return;if(A instanceof Map)A.set(B,D);else A[B]=D;return D}if(B==="$*")return A instanceof Map?Array.from(A.values()):Object.keys(A).map((J)=>A[J]);if(A instanceof Map)return A.get(B);return A[B]}});var rE=z((iL1,mk)=>{var VD1=H1(),wD1=aE(),bk=MD(),yk=h6(),RD1=import.meta.require("util"),vk=D1(),hk=/(\.\d+$|\.\d+\.)/g;mk.exports=function F(A,B,D,J,Z){if(A==null)return[];if(typeof A==="string"&&Z!=null&&wD1(Z,A))throw new VD1("refPath `"+A+"` must not be excluded in projection, got "+RD1.inspect(Z));if(hk.test(D)){const $=D.split(hk);if($[$.length-1]==="")throw new Error("Can\'t populate individual element in an array");let G="",E=A;for(let H=0;H<$.length;H+=2){const q=$[H];if(E.startsWith(q+"."))G+=E.substring(0,q.length)+$[H+1],E=E.substring(q.length+1);else if(H===$.length-1){G+=E,E="";break}else throw new Error("Could not normalize ref path, chunk "+q+" not in populated path")}const W=yk.get(G,B,bk);let C=Array.isArray(W)?W:[W];return C=vk.array.flatten(C),C}const X=yk.get(A,B,bk);let Y;if(J!=null&&J.virtuals.hasOwnProperty(A))Y=[J.virtuals[A].applyGetters(void 0,B)];else Y=Array.isArray(X)?X:[X];return Y=vk.array.flatten(Y),Y}});var tE=z((nL1,dk)=>{var _3=function(F,A){this.path=A,this.getters=[],this.setters=[],this.options=Object.assign({},F)},ID1=rE(),ND1=D1(),PD1=t().modelSymbol;_3.prototype._applyDefaultGetters=function(){if(this.getters.length>0||this.setters.length>0)return;const A="$"+this.path;this.getters.push(function(){return this.$locals[A]}),this.setters.push(function(B){this.$locals[A]=B})};/*!
 * ignore
 */_3.prototype.clone=function(){const F=new _3(this.options,this.path);return F.getters=[].concat(this.getters),F.setters=[].concat(this.setters),F};_3.prototype.get=function(F){return this.getters.push(F),this};_3.prototype.set=function(F){return this.setters.push(F),this};_3.prototype.applyGetters=function(F,A){if(ND1.hasUserDefinedProperty(this.options,["ref","refPath"])&&A.$$populatedVirtuals&&A.$$populatedVirtuals.hasOwnProperty(this.path))F=A.$$populatedVirtuals[this.path];let B=F;for(let D of this.getters)B=D.call(A,B,this,A);return B};_3.prototype.applySetters=function(F,A){let B=F;for(let D of this.setters)B=D.call(A,B,this,A);return B};_3.prototype._getModelNamesForPopulate=function F(A){if(this.options.refPath)return ID1(this.options.refPath,A,this.path);let B=null;if(typeof this.options.ref==="function"&&!this.options.ref[PD1])B=this.options.ref.call(A,A);else B=this.options.ref;if(B!=null&&!Array.isArray(B))return[B];return B};/*!
 * exports
 */dk.exports=_3});var oE=z((sL1,ck)=>{ck.exports=function F(A){const B={_id:{auto:!0}};B._id[A.options.typeKey]="ObjectId",A.add(B)}});var eE=z((aL1,lk)=>{lk.exports=function F(A,B){const D=A.discriminatorMapping&&A.discriminatorMapping.value;if(D&&!("sparse"in B)){const J=A.options.discriminatorKey;B.partialFilterExpression=B.partialFilterExpression||{},B.partialFilterExpression[J]=D}return B}});var ik=z((rL1,pk)=>{var FW=t1(),MD1=r3(),TD1=eE();pk.exports=function F(A){let B=[];const D=new WeakMap,J=A.constructor.indexTypes,Z=new Map;return X(A),B;function X($,G,E){if(D.has($))return;D.set($,!0),G=G||"";const W=Object.keys($.paths);for(let C of W){const H=$.paths[C];if(E!=null&&E.paths[C])continue;if(H.$isMongooseDocumentArray||H.$isSingleNested){if(FW(H,"options.excludeIndexes")!==!0&&FW(H,"schemaOptions.excludeIndexes")!==!0&&FW(H,"schema.options.excludeIndexes")!==!0)X(H.schema,G+C+".");if(H.schema.discriminators!=null){const K=H.schema.discriminators,U=Object.keys(K);for(let Q of U)X(K[Q],G+C+".",H.schema)}if(H.$isMongooseDocumentArray)continue}const q=H._index||H.caster&&H.caster._index;if(q!==!1&&q!==null&&q!==void 0){const K={},U=MD1(q),Q=U?q:{},V=typeof q==="string"?q:U?q.type:!1;if(V&&J.indexOf(V)!==-1)K[G+C]=V;else if(Q.text)K[G+C]="text",delete Q.text;else{let N=!1;if(q==="descending"||q==="desc")N=!0;else if(q==="ascending"||q==="asc")N=!1;else N=Number(q)===-1;K[G+C]=N?-1:1}if(delete Q.type,!("background"in Q))Q.background=!0;if($.options.autoIndex!=null)Q._autoIndex=$.options.autoIndex;const L=Q&&Q.name;if(typeof L==="string")if(Z.has(L))Object.assign(Z.get(L),K);else B.push([K,Q]),Z.set(L,K);else B.push([K,Q]),Z.set(L,K)}}if(D.delete($),G)Y($,G);else $._indexes.forEach(function(C){const H=C[1];if(!("background"in H))H.background=!0;TD1($,H)}),B=B.concat($._indexes)}function Y($,G){const E=$._indexes,W=E.length;for(let C=0;C<W;++C){const H=E[C][0],q=E[C][1],K=Object.keys(H),U=K.length,Q={};for(let L=0;L<U;++L){const N=K[L];Q[G+N]=H[N]}const V=Object.assign({},q);if(q!=null&&q.partialFilterExpression!=null){V.partialFilterExpression={};const L=q.partialFilterExpression;for(let N of Object.keys(L))V.partialFilterExpression[G+N]=L[N]}B.push([Q,V])}}}});var AW=z((tL1,nk)=>{nk.exports=function F(A){switch(A){case"p":A="primary";break;case"pp":A="primaryPreferred";break;case"s":A="secondary";break;case"sp":A="secondaryPreferred";break;case"n":A="nearest";break}return A}});var ak=z((oL1,sk)=>{var jD1=function(){if(this._id!=null)return this._id.toString();return null};/*!
 * ignore
 */sk.exports=function F(A){if(!(!A.paths.id&&A.paths._id&&A.options.id))return A;if(A.aliases&&A.aliases.id)return A;return A.virtual("id").get(jD1),A}});var tk=z((eL1,rk)=>{rk.exports=function F(A,B,D,J){if(J.justOne||J.count){if(A[B]=Array.isArray(D)?D[0]:D,typeof A[B]!=="object")A[B]=J.count?D:null}else A[B]=Array.isArray(D)?D:D==null?[]:[D],A[B]=A[B].filter(function(Z){return Z&&typeof Z==="object"});return A[B]}});var e5=z((FV1,ok)=>{ok.exports=function F(A){return A.replace(/\.\$(\[[^\]]*\])?(?=\.)/g,".0").replace(/\.\$(\[[^\]]*\])?$/g,".0")}});var BW=z((AV1,ek)=>{var uD1=function(F,A){if(F==null)return null;if(typeof F==="boolean")return A;if(typeof F[A]==="boolean")return F[A]?A:null;if(!(A in F))return A;return F[A]};ek.exports=uD1;/*!
 * ignore
 */});var JW=z((BV1,Fx)=>{var V9=function(F,A,B){if(A==null)return;if(Object.keys(A).some((Y)=>Y[0]==="$")){if(A.$push)X(A.$push);if(A.$addToSet)X(A.$addToSet);if(A.$set!=null){const Y=Object.keys(A.$set);for(let $ of Y)DW(B,$,A.$set,F)}if(A.$setOnInsert!=null){const Y=Object.keys(A.$setOnInsert);for(let $ of Y)DW(B,$,A.$setOnInsert,F)}}const Z=Object.keys(A).filter((Y)=>Y[0]!=="$");for(let Y of Z)DW(B,Y,A,F);function X(Y){for(let $ of Object.keys(Y)){const G=B.path($.replace(/\.\$\./i,".").replace(/.\$$/,""));if(Y[$]&&G&&G.$isMongooseDocumentArray&&G.schema.options.timestamps){const E=G.schema.options.timestamps,W=g3(E,"createdAt"),C=g3(E,"updatedAt");if(Y[$].$each)Y[$].$each.forEach(function(H){if(C!=null)H[C]=F;if(W!=null)H[W]=F;V9(F,H,G.schema)});else{if(C!=null)Y[$][C]=F;if(W!=null)Y[$][W]=F;V9(F,Y[$],G.schema)}}}}},SD1=function(F,A,B){const D=A.schema.options.timestamps,J=F.length;if(!D){for(let Y=0;Y<J;++Y)V9(B,F[Y],A.schema);return}const Z=g3(D,"createdAt"),X=g3(D,"updatedAt");for(let Y=0;Y<J;++Y){if(X!=null)F[Y][X]=B;if(Z!=null)F[Y][Z]=B;V9(B,F[Y],A.schema)}},kD1=function(F,A,B){const D=A.schema.options.timestamps;if(!D){V9(B,F,A.schema);return}const J=g3(D,"createdAt"),Z=g3(D,"updatedAt");if(Z!=null)F[Z]=B;if(J!=null)F[J]=B;V9(B,F,A.schema)},DW=function(F,A,B,D){const J=OD1(A),Z=F.path(J);if(!Z)return;const X=[],Y=J.split(".");for(let $=Y.length-1;$>0;--$){const G=F.path(Y.slice(0,$).join("."));if(G!=null&&(G.$isMongooseDocumentArray||G.$isSingleNested))X.push({parentPath:A.split(".").slice(0,$).join("."),parentSchemaType:G})}if(Array.isArray(B[A])&&Z.$isMongooseDocumentArray)SD1(B[A],Z,D);else if(B[A]&&Z.$isSingleNested)kD1(B[A],Z,D);else if(X.length>0)for(let $ of X){const{parentPath:G,parentSchemaType:E}=$,W=E.schema.options.timestamps,C=g3(W,"updatedAt");if(!W||C==null)continue;if(E.$isSingleNested)B[G+"."+C]=D;else if(E.$isMongooseDocumentArray){let H=A.substring(G.length+1);if(/^\d+$/.test(H)){B[G+"."+H][C]=D;continue}const q=H.indexOf(".");H=q!==-1?H.substring(0,q):H,B[G+"."+H+"."+C]=D}}else if(Z.schema!=null&&Z.schema!=F&&B[A]){const $=Z.schema.options.timestamps,G=g3($,"createdAt"),E=g3($,"updatedAt");if(!$)return;if(E!=null)B[A][E]=D;if(G!=null)B[A][G]=D}},OD1=e5(),g3=BW();Fx.exports=V9;/*!
 * ignore
 */});var ZW=z((DV1,Ax)=>{var fD1=function(F,A,B,D,J,Z){const X=D;let Y=X;const $=xD1(J,"timestamps",!0);if(!$||X==null)return D;const G=$!=null&&$.createdAt===!1,E=$!=null&&$.updatedAt===!1;if(Z){if(D&&D.$set)D=D.$set,X.$set={},Y=X.$set;if(!E&&B&&!D[B])Y[B]=F;if(!G&&A&&!D[A])Y[A]=F;return X}if(D=D||{},Array.isArray(X)){if(B==null)return X;return X.push({$set:{[B]:F}}),X}if(X.$set=X.$set||{},!E&&B&&(!D.$currentDate||!D.$currentDate[B])){let W=!1;if(B.indexOf(".")!==-1){const C=B.split(".");for(let H=1;H<C.length;++H){const q=C.slice(-H).join("."),K=C.slice(0,-H).join(".");if(D[K]!=null){D[K][q]=F,W=!0;break}else if(D.$set&&D.$set[K]){D.$set[K][q]=F,W=!0;break}}}if(!W)X.$set[B]=F;if(X.hasOwnProperty(B))delete X[B]}if(!G&&A){if(D[A])delete D[A];if(D.$set&&D.$set[A])delete D.$set[A];let W=!1;if(A.indexOf(".")!==-1){const C=A.split(".");for(let H=1;H<C.length;++H){const q=C.slice(-H).join("."),K=C.slice(0,-H).join(".");if(D[K]!=null){D[K][q]=F,W=!0;break}else if(D.$set&&D.$set[K]){D.$set[K][q]=F,W=!0;break}}}if(!W)X.$setOnInsert=X.$setOnInsert||{},X.$setOnInsert[A]=F}if(Object.keys(X.$set).length===0)delete X.$set;return X};/*!
 * ignore
 */var xD1=t1();Ax.exports=fD1;/*!
 * ignore
 */});var Dx=z((JV1,Bx)=>{Bx.exports=function F(A,B,D,J,Z){const X=B!=null&&B.updatedAt===!1,Y=B!=null&&B.createdAt===!1,$=D!=null?D():A.ownerDocument().constructor.base.now();if(!Y&&(A.isNew||A.$isSubdocument)&&J&&!A.$__getValue(J)&&A.$__isSelected(J))A.$set(J,$,void 0,{overwriteImmutable:!0});if(!X&&Z&&(A.isNew||A.$isModified())){let G=$;if(A.isNew&&J!=null)G=A.$__getValue(J);A.$set(Z,G)}}});var Yx=z((ZV1,Xx)=>{var _D1=JW(),gD1=ZW(),bD1=t1(),Jx=BW(),yD1=Dx(),vD1=q9(),Zx=new Set(["replaceOne","findOneAndReplace"]);Xx.exports=function F(A,B){const D=A.childSchemas.find(J);function J(W){return!!W.schema.options.timestamps}if(!B&&!D)return;const Z=Jx(B,"createdAt"),X=Jx(B,"updatedAt"),Y=B!=null&&B.hasOwnProperty("currentTime")?B.currentTime:null,$={};if(A.$timestamps={createdAt:Z,updatedAt:X},Z&&!A.paths[Z]){const W=A.base!=null?A.base.get("timestamps.createdAt.immutable"):null,C=W!=null?W:!0;$[Z]={[A.options.typeKey||"type"]:Date,immutable:C}}if(X&&!A.paths[X])$[X]=Date;A.add($),A.pre("save",function W(C){const H=bD1(this,"$__.saveOptions.timestamps");if(H===!1)return C();yD1(this,H,Y,Z,X),C()}),A.methods.initializeTimestamps=function(){const W=Y!=null?Y():this.constructor.base.now();if(Z&&!this.get(Z))this.$set(Z,W);if(X&&!this.get(X))this.$set(X,W);if(this.$isSubdocument)return this;const C=this.$getAllSubdocs();for(let H of C)if(H.initializeTimestamps)H.initializeTimestamps();return this},E[vD1.builtInMiddleware]=!0;const G={query:!0,model:!1};A.pre("findOneAndReplace",G,E),A.pre("findOneAndUpdate",G,E),A.pre("replaceOne",G,E),A.pre("update",G,E),A.pre("updateOne",G,E),A.pre("updateMany",G,E);function E(W){const C=Y!=null?Y():this.model.base.now();if(Zx.has(this.op)&&this.getUpdate()==null)this.setUpdate({});gD1(C,Z,X,this.getUpdate(),this._mongooseOptions,Zx.has(this.op)),_D1(C,this.getUpdate(),this.model.schema),W()}}});var Gx=z((XV1,$x)=>{var dD1=function(F,A){if(typeof F==="string")return;if(typeof F==="function")return;throw new hD1('Invalid ref at path "'+A+'". Got '+mD1.inspect(F,{depth:0}))},hD1=H1(),mD1=import.meta.require("util");$x.exports=dD1});var TD=z((lD1)=>{/*!
 * ignore
 */var Ex=Object.freeze(["countDocuments","distinct","estimatedDocumentCount","find","findOne","findOneAndReplace","findOneAndUpdate","replaceOne","updateMany","updateOne","deleteMany","deleteOne","findOneAndDelete"]);lD1.queryOperations=Ex;/*!
 * ignore
 */var cD1=Ex.concat(["validate"]);lD1.queryMiddlewareFunctions=cD1});var jD=z(($V1,Wx)=>{var FF=function(F,A,B){B=B||{};const D={useErrorHandlers:!0,numCallbackParams:1,nullResultByDefault:!0,contextParameter:!0},J=B.decorateDoc?F:F.prototype;F.$appliedHooks=!0;for(let G of Object.keys(A.paths)){const E=A.paths[G];let W=null;if(E.$isSingleNested)W=E.caster;else if(E.$isMongooseDocumentArray)W=E.Constructor;else continue;if(W.$appliedHooks)continue;if(FF(W,E.schema,{...B,isChildSchema:!0}),W.discriminators!=null){const C=Object.keys(W.discriminators);for(let H of C)FF(W.discriminators[H],W.discriminators[H].schema,B)}}const Z=A.s.hooks.filter((G)=>{if(G.name==="updateOne"||G.name==="deleteOne")return!!G.document;if(G.name==="remove"||G.name==="init")return G.document==null||!!G.document;if(G.query!=null||G.document!=null)return G.document!==!1;return!0}).filter((G)=>{if(A.methods[G.name])return!G.fn[nD1.builtInMiddleware];return!0});F._middleware=Z,J.$__originalValidate=J.$__originalValidate||J.$__validate;const X=B&&B.isChildSchema?["save","validate","deleteOne"]:["save","validate"];for(let G of X){const E=G==="validate"?"$__originalValidate":`\$__${G}`,W=Z.createWrapper(G,J[E],null,D);J[`\$__${G}`]=W}J.$__init=Z.createWrapperSync("init",J.$__init,null,D);const Y=Object.keys(A.methods),$=Object.assign({},D,{checkForPromise:!0});for(let G of Y){if(aD1.has(G))continue;if(!Z.hasHooks(G))continue;const E=J[G];J[G]=function(){const W=Array.prototype.slice.call(arguments),C=W.slice(-1).pop(),H=typeof C==="function"?W.slice(0,W.length-1):W;return sD1(C,(q)=>{return this[`\$__${G}`].apply(this,H.concat([q]))},F.events)},J[`\$__${G}`]=Z.createWrapper(G,E,null,$)}},nD1=q9(),sD1=oB();/*!
 * ignore
 */Wx.exports=FF;/*!
 * ignore
 */FF.middlewareFunctions=["deleteOne","save","validate","remove","updateOne","init"];/*!
 * ignore
 */var aD1=new Set(FF.middlewareFunctions.flatMap((F)=>[F,`\$__${F}`]))});var AF=z((GV1,qx)=>{var x2=function(F,A,B){let D=F;if(F==null)D=0;let J,Z,X;if(Array.isArray(A))Z=A[0],X=A[1];else J=A;let Y;if(typeof D==="number"||D instanceof Number)Y=Buffer.alloc(D);else Y=Buffer.from(D,J,B);return Cx.decorate(Y,x2.mixin),Y.isMongooseBuffer=!0,Y[x2.pathSymbol]=Z,Y[Hx]=X,Y._subtype=0,Y};/*!
 * Module dependencies.
 */var XW=B6().Binary,Cx=D1(),rD1=Symbol.for("mongoose#Buffer#_path"),Hx=Symbol.for("mongoose#Buffer#_parent");x2.pathSymbol=rD1;/*!
 * Inherit from Buffer.
 */x2.mixin={_subtype:void 0,_markModified:function(){const F=this[Hx];if(F)F.markModified(this[x2.pathSymbol]);return this},write:function(){const F=Buffer.prototype.write.apply(this,arguments);if(F>0)this._markModified();return F},copy:function(F){const A=Buffer.prototype.copy.apply(this,arguments);if(F&&F.isMongooseBuffer)F._markModified();return A}};/*!
 * Compile other Buffer methods marking this buffer as modified.
 */Cx.each(["writeUInt8","writeUInt16","writeUInt32","writeInt8","writeInt16","writeInt32","writeFloat","writeDouble","fill","utf8Write","binaryWrite","asciiWrite","set","writeUInt16LE","writeUInt16BE","writeUInt32LE","writeUInt32BE","writeInt16LE","writeInt16BE","writeInt32LE","writeInt32BE","writeFloatLE","writeFloatBE","writeDoubleLE","writeDoubleBE"],function(F){if(!Buffer.prototype[F])return;x2.mixin[F]=function(){const A=Buffer.prototype[F].apply(this,arguments);return this._markModified(),A}});x2.mixin.toObject=function(F){const A=typeof F==="number"?F:this._subtype||0;return new XW(Buffer.from(this),A)};x2.mixin.$toObject=x2.mixin.toObject;x2.mixin.toBSON=function(){return new XW(this,this._subtype||0)};x2.mixin.equals=function(F){if(!Buffer.isBuffer(F))return!1;if(this.length!==F.length)return!1;for(let A=0;A<this.length;++A)if(this[A]!==F[A])return!1;return!0};x2.mixin.subtype=function(F){if(typeof F!=="number")throw new TypeError("Invalid subtype. Expected a number");if(this._subtype!==F)this._markModified();this._subtype=F};/*!
 * Module exports.
 */x2.Binary=XW;qx.exports=x2});var uD=z((EV1,Lx)=>{var Qx=function(F){const A=typeof F;if(A!=="string")throw new TypeError(`Mongoose maps only support string keys, got ${A}`);if(F.startsWith("$"))throw new Error(`Mongoose maps do not support keys that start with "\$", got "${F}"`);if(F.includes("."))throw new Error(`Mongoose maps do not support keys that contain ".", got "${F}"`);if(BJ1.has(F))throw new Error(`Mongoose maps do not support reserved key name "${F}"`)},tD1=K9(),oD1=H1(),Kx=J0(),eD1=D1().deepEqual,FJ1=T2(),AJ1=XD(),zx=import.meta.require("util"),BJ1=v4(),YW=L2(),Ux=t().populateModelSymbol;/*!
 * ignore
 */class X3 extends Map{constructor(F,A,B,D){if(FJ1(F)==="Object")F=Object.keys(F).reduce((J,Z)=>J.concat([[Z,F[Z]]]),[]);super(F);this.$__parent=B!=null&&B.$__!=null?B:null,this.$__path=A,this.$__schemaType=D==null?new tD1(A):D,this.$__runDeferred()}$init(F,A){if(Qx(F),super.set(F,A),A!=null&&A.$isSingleNested)A.$basePath=this.$__path+"."+F}$__set(F,A){super.set(F,A)}get(F,A){if(YW(F,"ObjectId"))F=F.toString();if(A=A||{},A.getters===!1)return super.get(F);return this.$__schemaType.applyGetters(super.get(F),this.$__parent)}set(F,A){if(YW(F,"ObjectId"))F=F.toString();if(Qx(F),A=AJ1(A),this.$__schemaType==null){this.$__deferred=this.$__deferred||[],this.$__deferred.push({key:F,value:A});return}let B;const D=this.$__parent,J=D!=null&&D.$__&&D.$__.populated?D.$populated(X.call(this),!0)||D.$populated(this.$__path,!0):null,Z=this.get(F);if(J!=null){if(this.$__schemaType.$isSingleNested)throw new oD1(`Cannot manually populate single nested subdoc underneath Map at path "${this.$__path}". Try using an array instead of a Map.`);if(Array.isArray(A)&&this.$__schemaType.$isMongooseArray)A=A.map((Y)=>{if(Y.$__==null)Y=new J.options[Ux](Y);return Y.$__.wasPopulated={value:Y._id},Y});else if(A!=null){if(A.$__==null)A=new J.options[Ux](A);A.$__.wasPopulated={value:A._id}}}else try{const Y=this.$__schemaType.$isMongooseDocumentArray||this.$__schemaType.$isSingleNested?{path:X.call(this)}:null;A=this.$__schemaType.applySetters(A,this.$__parent,!1,this.get(F),Y)}catch(Y){if(this.$__parent!=null&&this.$__parent.$__!=null){this.$__parent.invalidate(X.call(this),Y);return}throw Y}if(super.set(F,A),D!=null&&D.$__!=null&&!eD1(A,Z))D.markModified(X.call(this));function X(){if(B)return B;return B=this.$__path+"."+F,B}}clear(){super.clear();const F=this.$__parent;if(F!=null)F.markModified(this.$__path)}delete(F){if(YW(F,"ObjectId"))F=F.toString();return this.set(F,void 0),super.delete(F)}toBSON(){return new Map(this)}toObject(F){if(F&&F.flattenMaps){const A={},B=this.keys();for(let D of B)A[D]=Kx(this.get(D),F);return A}return new Map(this)}$toObject(){return this.constructor.prototype.toObject.apply(this,arguments)}toJSON(F){if(typeof(F&&F.flattenMaps)==="boolean"?F.flattenMaps:!0){const A={},B=this.keys();for(let D of B)A[D]=Kx(this.get(D),F);return A}return new Map(this)}inspect(){return new Map(this)}$__runDeferred(){if(!this.$__deferred)return;for(let F of this.$__deferred)this.set(F.key,F.value);this.$__deferred=null}}if(zx.inspect.custom)Object.defineProperty(X3.prototype,zx.inspect.custom,{enumerable:!1,writable:!1,configurable:!1,value:X3.prototype.inspect});Object.defineProperty(X3.prototype,"$__set",{enumerable:!1,writable:!0,configurable:!1});Object.defineProperty(X3.prototype,"$__parent",{enumerable:!1,writable:!0,configurable:!1});Object.defineProperty(X3.prototype,"$__path",{enumerable:!1,writable:!0,configurable:!1});Object.defineProperty(X3.prototype,"$__schemaType",{enumerable:!1,writable:!0,configurable:!1});Object.defineProperty(X3.prototype,"$isMongooseMap",{enumerable:!1,writable:!1,configurable:!1,value:!0});Object.defineProperty(X3.prototype,"$__deferredCalls",{enumerable:!1,writable:!1,configurable:!1,value:!0});Lx.exports=X3});var wx=z((WV1,Vx)=>{Vx.exports=B6().UUID});var A8=z((DJ1)=>{/*!
 * Module exports.
 */DJ1.Array=VE();DJ1.Buffer=AF();DJ1.Document=DJ1.Embedded=r7();DJ1.DocumentArray=U9();DJ1.Decimal128=sF();DJ1.ObjectId=H3();DJ1.Map=uD();DJ1.Subdocument=GD();DJ1.UUID=wx()});var Ix=z((qV1,Rx)=>{var HJ1=s2();class BF extends HJ1{}var $W=H6();Object.defineProperty(BF.prototype,"enum",$W);Object.defineProperty(BF.prototype,"of",$W);Object.defineProperty(BF.prototype,"castNonArrays",$W);/*!
 * ignore
 */Rx.exports=BF});var Px=z((KV1,Nx)=>{var GW=function(F){if(!Array.isArray(F))return{min:0,max:0,containsNonArrayItem:!0};if(F.length===0)return{min:1,max:1,containsNonArrayItem:!1};if(F.length===1&&!Array.isArray(F[0]))return{min:1,max:1,containsNonArrayItem:!1};const A=GW(F[0]);for(let B=1;B<F.length;++B){const D=GW(F[B]);if(D.min<A.min)A.min=D.min;if(D.max>A.max)A.max=D.max;A.containsNonArrayItem=A.containsNonArrayItem||D.containsNonArrayItem}return A.min=A.min+1,A.max=A.max+1,A};Nx.exports=GW});var DF=z((zV1,Tx)=>{var Mx=import.meta.require("assert");Tx.exports=function F(A){if(A==null)return A;if(A==="")return null;if(typeof A==="string"||typeof A==="boolean")A=Number(A);if(Mx.ok(!isNaN(A)),A instanceof Number)return A.valueOf();if(typeof A==="number")return A;if(!Array.isArray(A)&&typeof A.valueOf==="function")return Number(A.valueOf());if(A.toString&&!Array.isArray(A)&&A.toString()==Number(A))return Number(A);Mx.ok(!1)}});var EW=z((UV1,jx)=>{jx.exports=function F(A){if(A==null||typeof A!=="object")return A;if(Array.isArray(A)){for(let B=A.length-1;B>=0;--B)if(A[B]===void 0)A.splice(B,1)}for(let B of Object.keys(A))if(A[B]===void 0)delete A[B];return A}});var Sx=z((QV1,Ox)=>{var q6=function(F,A,B){if(JF(F)||F===null)return F;if(F.$cond!=null)if(Array.isArray(F.$cond))F.$cond=F.$cond.map((J)=>q6(J,A,B));else F.$cond.if=q6(F.$cond.if,A,B),F.$cond.then=q6(F.$cond.then,A,B),F.$cond.else=q6(F.$cond.else,A,B);else if(F.$ifNull!=null)F.$ifNull.map((J)=>q6(J,A,B));else if(F.$switch!=null)F.branches.map((J)=>q6(J,A,B)),F.default=q6(F.default,A,B);const D=Object.keys(F);for(let J of D)if(KJ1.has(J))F[J]=F[J].map((Z)=>q6(Z,A,B));else if(zJ1.has(J))F[J]=NJ1(F[J],A,B);else if(UJ1.has(J))F[J]=IJ1(F[J],A,B);else if(QJ1.has(J))F[J]=WW(F[J],A,B);else if(wJ1.has(J))F[J]=q6(F[J],A,B);if(F.$in)F.$in=RJ1(F.$in,A,B);if(F.$size)F.$size=WW(F.$size,A,B);if(F.$round){const J=F.$round;if(!Array.isArray(J)||J.length<1||J.length>2)throw new B8("Array",J,"$round");F.$round=J.map((Z)=>WW(Z,A,B))}return qJ1(F),F},WW=function(F){if(!SD(F))return F;try{return OD(F)}catch(A){throw new B8("Number",F)}},RJ1=function(F,A,B){const D=F[1];if(!JF(D))return F;const J=F[0],Z=A.path(D.slice(1));if(Z===null){if(B===!1)return F;else if(B==="throw")throw new ux("$in");return}if(!Z.$isMongooseArray)throw new Error("Path must be an array for $in");return[Z.$isMongooseDocumentArray?Z.$embeddedSchemaType.cast(J):Z.caster.cast(J),D]},IJ1=function(F){if(!Array.isArray(F)){if(!SD(F))return F;try{return OD(F)}catch(A){throw new B8("Number",F)}}return F.map((A)=>{if(!SD(A))return A;try{return OD(A)}catch(B){throw new B8("Number",A)}})},NJ1=function(F,A,B){if(!Array.isArray(F)||F.length!==2)throw new Error("Comparison operator must be an array of length 2");F[0]=q6(F[0],A,B);const D=F[0];if(SD(F[1])){let J=null,Z=null,X=null;if(JF(D))J=D.slice(1),Z=A.path(J);else if(typeof D==="object"&&D!=null){for(let $ of Object.keys(D))if(VJ1.has($)&&JF(D[$]))J=D[$].slice(1)+"."+$,X=OD;else if(LJ1.has($)&&JF(D[$])){if(J=D[$].slice(1)+"."+$,Z=A.path(D[$].slice(1)),Z!=null){if(Z.$isMongooseDocumentArray)Z=Z.$embeddedSchemaType;else if(Z.$isMongooseArray)Z=Z.caster}}}const Y=typeof F[1]==="object"&&F[1]!=null&&F[1].$literal!=null;if(Z!=null)if(Y)F[1]={$literal:Z.cast(F[1].$literal)};else F[1]=Z.cast(F[1]);else if(X!=null)if(Y)try{F[1]={$literal:X(F[1].$literal)}}catch($){throw new B8(X.name.replace(/^cast/,""),F[1],J+".$literal")}else try{F[1]=X(F[1])}catch($){throw new B8(X.name.replace(/^cast/,""),F[1],J)}else if(J!=null&&B===!0)return;else if(J!=null&&B==="throw")throw new ux(J)}else F[1]=q6(F[1]);return F},JF=function(F){return typeof F==="string"&&F[0]==="$"},SD=function(F){if(typeof F==="string"&&F[0]==="$")return!1;if(typeof F==="object"&&F!==null&&Object.keys(F).find((A)=>A[0]==="$"))return F.$literal!=null;return!0},B8=E2(),ux=V4(),OD=DF(),qJ1=EW(),KJ1=new Set(["$and","$or"]),zJ1=new Set(["$cmp","$eq","$lt","$lte","$gt","$gte"]),UJ1=new Set(["$multiply","$divide","$log","$mod","$trunc","$avg","$max","$min","$stdDevPop","$stdDevSamp","$sum"]),QJ1=new Set(["$abs","$exp","$ceil","$floor","$ln","$log10","$sqrt","$sin","$cos","$tan","$asin","$acos","$atan","$atan2","$asinh","$acosh","$atanh","$sinh","$cosh","$tanh","$degreesToRadians","$radiansToDegrees"]),LJ1=new Set(["$arrayElemAt","$first","$last"]),VJ1=new Set(["$year","$month","$week","$dayOfMonth","$dayOfYear","$hour","$minute","$second","$isoDayOfWeek","$isoWeekYear","$isoWeek","$millisecond"]),wJ1=new Set(["$not"]);Ox.exports=function F(A,B,D){if(typeof A!=="object"||A===null)throw new Error("`$expr` must be an object");return q6(A,B,D)}});var CW=z((LV1,kx)=>{var PJ1=E2();kx.exports=function F(A,B){if(A==null)return A;if(A._id&&typeof A._id==="string")return A._id;if(A.toString&&A.toString!==Object.prototype.toString&&!Array.isArray(A))return A.toString();throw new PJ1("string",A,B)}});var gx=z((VV1,_x)=>{var MJ1=E2(),xx=aB(),fx=CW();_x.exports=function(F,A){if(F==null||typeof F!=="object")throw new MJ1("$text",F,A);if(F.$search!=null)F.$search=fx(F.$search,A+".$search");if(F.$language!=null)F.$language=fx(F.$language,A+".$language");if(F.$caseSensitive!=null)F.$caseSensitive=xx(F.$caseSensitive,A+".$castSensitive");if(F.$diacriticSensitive!=null)F.$diacriticSensitive=xx(F.$diacriticSensitive,A+".$diacriticSensitive");return F}});var ZF=z((wV1,bx)=>{var TJ1=new Set(["$ref","$id","$db"]);bx.exports=function F(A){return A[0]==="$"&&!TJ1.has(A)}});var w9=z((RV1,dx)=>{var zW=function(F,A,B){if(Array.isArray(F))F.forEach(function(D,J){if(Array.isArray(D)||KW(D))return zW(D,A,B);F[J]=A.castForQuery(null,D,B)});else{const D=Object.keys(F);let J=D.length;while(J--){const Z=D[J],X=F[Z];if(Array.isArray(X)||KW(X))zW(X,A,B),F[Z]=X;else F[Z]=A.castForQuery({val:X,context:B})}}},fJ1=function(F,A,B,D){if("strictQuery"in F)return F.strictQuery;if("strictQuery"in A)return A.strictQuery;const J=D&&D.mongooseCollection&&D.mongooseCollection.conn&&D.mongooseCollection.conn.base&&D.mongooseCollection.conn.base.options;if(J){if("strictQuery"in J)return J.strictQuery}return B.strictQuery};/*!
 * Module dependencies.
 */var yx=E2(),HW=V4(),jJ1=XF(),uJ1=Sx(),OJ1=gx(),SJ1=t1(),vx=ZD(),hx=ZF(),kJ1=import.meta.require("util"),KW=r3(),qW=S8(),mx=D1(),xJ1=["Polygon","MultiPolygon"];dx.exports=function F(A,B,D,J){if(Array.isArray(B))throw new Error("Query filter must be an object, got an array ",kJ1.inspect(B));if(B==null)return B;if(A!=null&&A.discriminators!=null&&B[A.options.discriminatorKey]!=null)A=vx(A,B[A.options.discriminatorKey])||A;const Z=Object.keys(B);let X=Z.length,Y,$,G,E,W,C,H;D=D||{};while(X--)if(W=Z[X],H=B[W],W==="$or"||W==="$nor"||W==="$and"){if(!Array.isArray(H))throw new yx("Array",H,W);for(let q=0;q<H.length;++q){if(H[q]==null||typeof H[q]!=="object")throw new yx("Object",H[q],W+"."+q);const K=H[q][A.options.discriminatorKey];if(K==null)H[q]=F(A,H[q],D,J);else{const U=vx(J.schema,K);H[q]=F(U?U:A,H[q],D,J)}}}else if(W==="$where"){if(C=typeof H,C!=="string"&&C!=="function")throw new Error("Must have a string or function for $where");if(C==="function")B[W]=H.toString();continue}else if(W==="$expr"){H=uJ1(H,A);continue}else if(W==="$elemMatch")H=F(A,H,D,J);else if(W==="$text")H=OJ1(H,W);else{if(!A)continue;if(G=A.path(W),!G){const q=W.split(".");let K=q.length;while(K--){const U=q.slice(0,K).join("."),Q=q.slice(K).join("."),V=A.path(U),L=V&&V.schema&&V.schema.options&&V.schema.options.discriminatorKey;if(V!=null&&(V.schema&&V.schema.discriminators)!=null&&L!=null&&Q!==L){const N=SJ1(B,U+"."+L),h=V.schema.discriminators;if(typeof N==="string"&&h[N]!=null)G=h[N].path(Q);else if(N!=null&&Object.keys(N).length===1&&Array.isArray(N.$in)&&N.$in.length===1&&typeof N.$in[0]==="string"&&h[N.$in[0]]!=null)G=h[N.$in[0]].path(Q)}}}if(!G){const q=W.split(".");let K=q.length,U,Q,V;while(K--)if(U=q.slice(0,K).join("."),G=A.path(U),G)break;if(G){if(G.caster&&G.caster.schema){V={},Q=q.slice(K).join("."),V[Q]=H;const h=F(G.caster.schema,V,D,J)[Q];if(h===void 0)delete B[W];else B[W]=h}else B[W]=H;continue}if(KW(H)){let h="";if(H.$near)h="$near";else if(H.$nearSphere)h="$nearSphere";else if(H.$within)h="$within";else if(H.$geoIntersects)h="$geoIntersects";else if(H.$geoWithin)h="$geoWithin";if(h){const T=new jJ1.Number("__QueryCasting__");let P=H[h];if(H.$maxDistance!=null)H.$maxDistance=T.castForQuery(null,H.$maxDistance,J);if(H.$minDistance!=null)H.$minDistance=T.castForQuery(null,H.$minDistance,J);if(h==="$within"){const x=P.$center||P.$centerSphere||P.$box||P.$polygon;if(!x)throw new Error("Bad $within parameter: "+JSON.stringify(H));P=x}else if(h==="$near"&&typeof P.type==="string"&&Array.isArray(P.coordinates))P=P.coordinates;else if((h==="$near"||h==="$nearSphere"||h==="$geoIntersects")&&P.$geometry&&typeof P.$geometry.type==="string"&&Array.isArray(P.$geometry.coordinates)){if(P.$maxDistance!=null)P.$maxDistance=T.castForQuery(null,P.$maxDistance,J);if(P.$minDistance!=null)P.$minDistance=T.castForQuery(null,P.$minDistance,J);if(qW(P.$geometry))P.$geometry=P.$geometry.toObject({transform:!1,virtuals:!1});P=P.$geometry.coordinates}else if(h==="$geoWithin"){if(P.$geometry){if(qW(P.$geometry))P.$geometry=P.$geometry.toObject({virtuals:!1});const x=P.$geometry.type;if(xJ1.indexOf(x)===-1)throw new Error('Invalid geoJSON type for $geoWithin "'+x+'", must be "Polygon" or "MultiPolygon"');P=P.$geometry.coordinates}else if(P=P.$box||P.$polygon||P.$center||P.$centerSphere,qW(P))P=P.toObject({virtuals:!1})}zW(P,T,J);continue}}if(A.nested[W])continue;const L="strict"in D?D.strict:A.options.strict,N=fJ1(D,A._userProvidedOptions,A.options,J);if(D.upsert&&L){if(L==="throw")throw new HW(W);throw new HW(W,'Path "'+W+'" is not in schema, strict mode is `true`, and upsert is `true`.')}if(N==="throw")throw new HW(W,'Path "'+W+'" is not in schema and strictQuery is \'throw\'.');else if(N)delete B[W]}else if(H==null)continue;else if(mx.isPOJO(H))if($=Object.keys(H).some(hx),!$)B[W]=G.castForQuery(null,H,J);else{const q=Object.keys(H);let K,U=q.length;while(U--)if(K=q[U],E=H[K],K==="$elemMatch"){if(E&&G!=null&&G.schema!=null)F(G.schema,E,D,J);else if(E&&G!=null&&G.$isMongooseArray)if(mx.isPOJO(E)&&E.$not!=null)F(A,E,D,J);else H[K]=G.castForQuery(K,E,J)}else if(K==="$not"){if(E&&G){if(Y=Object.keys(E),Y.length&&hx(Y[0]))for(let Q in E)E[Q]=G.castForQuery(Q,E[Q],J);else H[K]=G.castForQuery(K,E,J);continue}}else H[K]=G.castForQuery(K,E,J)}else if(Array.isArray(H)&&["Buffer","Array"].indexOf(G.instance)===-1){const q=[],K=H;for(let U of K)q.push(G.castForQuery(null,U,J));B[W]={$in:q}}else B[W]=G.castForQuery(null,H,J)}return B}});var lx=z((IV1,cx)=>{var _J1=s2();class D8 extends _J1{}var kD=H6();Object.defineProperty(D8.prototype,"min",kD);Object.defineProperty(D8.prototype,"max",kD);Object.defineProperty(D8.prototype,"enum",kD);Object.defineProperty(D8.prototype,"populate",kD);/*!
 * ignore
 */cx.exports=D8});var xD=z((NV1,ix)=>{var bJ1=function(F){const A=this;if(Array.isArray(F))return F.map(function(B){return px(A.path,B)});else if(Buffer.isBuffer(F))return F;return px(A.path,F)},px=function(F,A){const B=Number(A);if(isNaN(B))throw new gJ1("number",A,F);return B};/*!
 * Module requirements.
 */var gJ1=E2();/*!
 * ignore
 *//*!
 * ignore
 */ix.exports=bJ1});var LW=z((PV1,nx)=>{var F0=function(F,A){b3.call(this,F,A,"Number")},_D=function(F){return this.cast(F)},hJ1=function(F){const A=this;if(!Array.isArray(F))return[this.cast(F)];return F.map(function(B){return A.cast(B)})};/*!
 * Module requirements.
 */var gD=W2(),yJ1=lx(),b3=O0(),vJ1=DF(),fD=xD(),UW=D1(),QW=b3.CastError;F0.get=b3.get;F0.set=b3.set;F0.setters=[];/*!
 * ignore
 */F0._cast=vJ1;F0.cast=function F(A){if(arguments.length===0)return this._cast;if(A===!1)A=this._defaultCaster;return this._cast=A,this._cast};/*!
 * ignore
 */F0._defaultCaster=(F)=>{if(typeof F!=="number")throw new Error;return F};F0.schemaName="Number";F0.defaultOptions={};/*!
 * Inherits from SchemaType.
 */F0.prototype=Object.create(b3.prototype);F0.prototype.constructor=F0;F0.prototype.OptionsConstructor=yJ1;/*!
 * ignore
 */F0._checkRequired=(F)=>typeof F==="number"||F instanceof Number;F0.checkRequired=b3.checkRequired;F0.prototype.checkRequired=function F(A,B){if(typeof A==="object"&&b3._isRef(this,A,B,!0))return A!=null;return(typeof this.constructor.checkRequired==="function"?this.constructor.checkRequired():F0.checkRequired())(A)};F0.prototype.min=function(F,A){if(this.minValidator)this.validators=this.validators.filter(function(B){return B.validator!==this.minValidator},this);if(F!==null&&F!==void 0){let B=A||gD.messages.Number.min;B=B.replace(/{MIN}/,F),this.validators.push({validator:this.minValidator=function(D){return D==null||D>=F},message:B,type:"min",min:F})}return this};F0.prototype.max=function(F,A){if(this.maxValidator)this.validators=this.validators.filter(function(B){return B.validator!==this.maxValidator},this);if(F!==null&&F!==void 0){let B=A||gD.messages.Number.max;B=B.replace(/{MAX}/,F),this.validators.push({validator:this.maxValidator=function(D){return D==null||D<=F},message:B,type:"max",max:F})}return this};F0.prototype.enum=function(F,A){if(this.enumValidator)this.validators=this.validators.filter(function(B){return B.validator!==this.enumValidator},this);if(!Array.isArray(F)){if(UW.isPOJO(F)&&F.values!=null)A=F.message,F=F.values;else if(typeof F==="number")F=Array.prototype.slice.call(arguments),A=null;if(UW.isPOJO(F))F=Object.values(F);A=A||gD.messages.Number.enum}return A=A==null?gD.messages.Number.enum:A,this.enumValidator=(B)=>B==null||F.indexOf(B)!==-1,this.validators.push({validator:this.enumValidator,message:A,type:"enum",enumValues:F}),this};F0.prototype.cast=function(F,A,B){if(typeof F!=="number"&&b3._isRef(this,F,A,B)){if(F==null||UW.isNonBuiltinObject(F))return this._castRef(F,A,B)}const D=F&&typeof F._id!=="undefined"?F._id:F;let J;if(typeof this._castFunction==="function")J=this._castFunction;else if(typeof this.constructor.cast==="function")J=this.constructor.cast();else J=F0.cast();try{return J(D)}catch(Z){throw new QW("Number",D,this.path,Z,this)}};/*!
 * ignore
 */F0.prototype.$conditionalHandlers={...b3.prototype.$conditionalHandlers,$bitsAllClear:fD,$bitsAnyClear:fD,$bitsAllSet:fD,$bitsAnySet:fD,$gt:_D,$gte:_D,$lt:_D,$lte:_D,$mod:hJ1};F0.prototype.castForQuery=function(F,A,B){let D;if(F!=null){if(D=this.$conditionalHandlers[F],!D)throw new QW("number",A,this.path,null,this);return D.call(this,A,B)}try{A=this.applySetters(A,B)}catch(J){if(J instanceof QW&&J.path===this.path&&this.$fullPath!=null)J.path=this.$fullPath;throw J}return A};/*!
 * Module exports.
 */nx.exports=F0});var YF=z((dJ1)=>{var sx=function(F){return mJ1.cast()(F)},ax=function(F,A){F.forEach(function(B,D){if(Array.isArray(B))ax(B,A);else F[D]=sx.call(A,B)})};/*!
 * Module requirements.
 */var mJ1=LW();/*!
 * ignore
 */dJ1.castToNumber=sx;dJ1.castArraysOfNumbers=ax;/*!
 * ignore
 */});var RW=z((sJ1)=>{var pJ1=function(F){const A=bD();if(Array.isArray(F))return rx(F,this),F;if(wW(this,F),F&&F.$geometry)return VW(F,this);if(!Array.isArray(F))throw new TypeError("$near must be either an array or an object with a $geometry property");return A.prototype.castForQuery.call(this,null,F)},VW=function(F,A){switch(F.$geometry.type){case"Polygon":case"LineString":case"Point":rx(F.$geometry.coordinates,A);break;default:break}return wW(A,F),F},iJ1=function(F){if(wW(this,F),F.$box||F.$polygon){const A=F.$box?"$box":"$polygon";F[A].forEach((B)=>{if(!Array.isArray(B)){const D="Invalid $within $box argument. Expected an array, received "+B;throw new TypeError(D)}B.forEach((D,J)=>{B[J]=$F.call(this,D)})})}else if(F.$center||F.$centerSphere){const A=F.$center?"$center":"$centerSphere";F[A].forEach((B,D)=>{if(Array.isArray(B))B.forEach((J,Z)=>{B[Z]=$F.call(this,J)});else F[A][D]=$F.call(this,B)})}else if(F.$geometry)VW(F,this);return F},nJ1=function(F){if(!F.$geometry)return;return VW(F,this),F},wW=function(F,A){if(A.$maxDistance)A.$maxDistance=$F.call(F,A.$maxDistance);if(A.$minDistance)A.$minDistance=$F.call(F,A.$minDistance)};/*!
 * Module requirements.
 */var rx=YF().castArraysOfNumbers,$F=YF().castToNumber;/*!
 * ignore
 */sJ1.cast$geoIntersects=nJ1;sJ1.cast$near=pJ1;sJ1.cast$within=iJ1});var bD=z((jV1,ox)=>{var O1=function(F,A,B,D){yD||(yD=A8().Embedded);let J="type";if(D&&D.typeKey)J=D.typeKey;if(this.schemaOptions=D,A){let Y={};if(R9.isPOJO(A))if(A[J])Y=DZ1(A),delete Y[J],A=A[J];else A=hD;if(B!=null&&B.ref!=null&&Y.ref==null)Y.ref=B.ref;if(A===Object)A=hD;const $=typeof A==="string"?A:R9.getFunctionName(A),G=XF(),E=G.hasOwnProperty($)?G[$]:A;if(this.casterConstructor=E,this.casterConstructor instanceof O1)this.casterConstructor[tx]=!0;if(typeof E==="function"&&!E.$isArraySubdocument&&!E.$isSchemaMap){const W=this.caster instanceof yD?null:F;this.caster=new E(W,Y)}else if(this.caster=E,!(this.caster instanceof yD))this.caster.path=F;this.$embeddedSchemaType=this.caster}this.$isMongooseArray=!0,K6.call(this,F,B,"Array");let Z,X;if(this.defaultValue!=null)Z=this.defaultValue,X=typeof Z==="function";if(!("defaultValue"in this)||this.defaultValue!==void 0){const Y=function(){return X?Z.call(this):Z!=null?[].concat(Z):[]};Y.$runBeforeSetters=!X,this.default(Y)}},$Z1=function(F,A){if(!Array.isArray(F))F=[F];return F=F.map((B)=>{if(!R9.isObject(B))return B;if(B.$elemMatch!=null)return{$elemMatch:IW(this.casterConstructor.schema,B.$elemMatch,null,this&&this.$$context)};const D={};return D[this.path]=B,IW(this.casterConstructor.schema,D,null,this&&this.$$context)[this.path]},this),this.castForQuery(null,F,A)},GZ1=function(F,A){const B=Object.keys(F),D=B.length;for(let J=0;J<D;++J){const Z=B[J],X=F[Z];if(JZ1(Z)&&X!=null)F[Z]=this.castForQuery(Z,X,A)}return F},PW=function(F){return function A(B,D){if(!Array.isArray(B))throw new TypeError("conditional "+F+" requires an array");const J=[];for(let Z of B)J.push(IW(this.casterConstructor.schema??D.schema,Z,null,this&&this.$$context));return J}};/*!
 * Module dependencies.
 */var oJ1=rB(),eJ1=DE(),FZ1=H1(),AZ1=Ix(),K6=O0(),vD=K6.CastError,hD=K9(),BZ1=Px(),IW=w9(),DZ1=J0(),JZ1=ZF(),mD=import.meta.require("util"),R9=D1(),ZZ1=YF().castToNumber,NW=RW(),XZ1=c6(),GF,yD,tx=Symbol("mongoose#isNestedArray"),YZ1=Object.freeze({});O1.schemaName="Array";O1.options={castNonArrays:!0};/*!
 * ignore
 */O1.defaultOptions={};O1.set=K6.set;O1.setters=[];O1.get=K6.get;/*!
 * Inherits from SchemaType.
 */O1.prototype=Object.create(K6.prototype);O1.prototype.constructor=O1;O1.prototype.OptionsConstructor=AZ1;/*!
 * ignore
 */O1._checkRequired=K6.prototype.checkRequired;O1.checkRequired=K6.checkRequired;O1.prototype.checkRequired=function F(A,B){if(typeof A==="object"&&K6._isRef(this,A,B,!0))return!!A;return(typeof this.constructor.checkRequired==="function"?this.constructor.checkRequired():O1.checkRequired())(A)};O1.prototype.enum=function(){let F=this;while(!0){const B=F&&F.caster&&F.caster.instance;if(B==="Array"){F=F.caster;continue}if(B!=="String"&&B!=="Number")throw new Error("`enum` can only be set on an array of strings or numbers , not "+B);break}let A=arguments;if(!Array.isArray(arguments)&&R9.isObject(arguments))A=R9.object.vals(A);return F.caster.enum.apply(F.caster,A),this};O1.prototype.applyGetters=function(F,A){if(A!=null&&A.$__!=null&&A.$populated(this.path))return F;return K6.prototype.applyGetters.call(this,F,A)};O1.prototype._applySetters=function(F,A,B,D){if(this.casterConstructor.$isMongooseArray&&O1.options.castNonArrays&&!this[tx]){let J=0,Z=this;while(Z!=null&&Z.$isMongooseArray&&!Z.$isMongooseDocumentArray)++J,Z=Z.casterConstructor;if(F!=null&&F.length!==0){const X=BZ1(F);if(X.min===X.max&&X.max<J&&X.containsNonArrayItem)for(let Y=X.max;Y<J;++Y)F=[F]}}return K6.prototype._applySetters.call(this,F,A,B,D)};O1.prototype.cast=function(F,A,B,D,J){GF||(GF=A8().Array);let Z,X;if(Array.isArray(F)){if(!F.length&&A){const H=A.schema.indexedPaths(),q=this.path;for(Z=0,X=H.length;Z<X;++Z){const U=H[Z][0][q];if(U==="2dsphere"||U==="2d")return}const K=this.path.endsWith(".coordinates")?this.path.substring(0,this.path.lastIndexOf(".")):null;if(K!=null){for(Z=0,X=H.length;Z<X;++Z)if(H[Z][0][K]==="2dsphere")return}}J=J||YZ1;let G=R9.isMongooseArray(F)?F.__array:F,E=J.path||this.path;if(J.arrayPathIndex!=null)E+="."+J.arrayPathIndex;if(F=GF(G,E,A,this),G=F.__array,B&&A!=null&&A.$__!=null&&A.$populated(this.path))return F;const W=this.caster,C=W.$isMongooseArray;if(W&&this.casterConstructor!==hD)try{const H=G.length;for(Z=0;Z<H;Z++){const q={};if(C){if(J.arrayPath!=null)q.arrayPathIndex=Z;else if(W._arrayParentPath!=null)q.arrayPathIndex=Z}G[Z]=W.applySetters(G[Z],A,B,void 0,q)}}catch(H){throw new vD("["+H.kind+"]",mD.inspect(F),this.path+"."+Z,H,this)}return F}const Y=this.options.castNonArrays!=null?this.options.castNonArrays:O1.options.castNonArrays;if(B||Y){if(!!A&&!!B)A.markModified(this.path);return this.cast([F],A,B)}throw new vD("Array",mD.inspect(F),this.path,null,this)};/*!
 * ignore
 */O1.prototype._castForPopulate=function F(A,B){if(GF||(GF=A8().Array),Array.isArray(A)){let D;const J=A.__array?A.__array:A,Z=J.length,X=this.caster;if(X&&this.casterConstructor!==hD)try{for(D=0;D<Z;D++){const Y={};if(X.$isMongooseArray&&X._arrayParentPath!=null)Y.arrayPathIndex=D;J[D]=X.cast(J[D],B,!1,void 0,Y)}}catch(Y){throw new vD("["+Y.kind+"]",mD.inspect(A),this.path+"."+D,Y,this)}return A}throw new vD("Array",mD.inspect(A),this.path,null,this)};O1.prototype.$toObject=O1.prototype.toObject;/*!
 * ignore
 */O1.prototype.discriminator=function(...F){let A=this;while(A.$isMongooseArray&&!A.$isMongooseDocumentArray)if(A=A.casterConstructor,A==null||typeof A==="function")throw new FZ1("You can only add an embedded discriminator on a document array, "+this.path+" is a plain array");return A.discriminator(...F)};/*!
 * ignore
 */O1.prototype.clone=function(){const F=Object.assign({},this.options),A=new this.constructor(this.path,this.caster,F,this.schemaOptions);if(A.validators=this.validators.slice(),this.requiredValidator!==void 0)A.requiredValidator=this.requiredValidator;return A};O1.prototype._castForQuery=function(F,A){let B=this.casterConstructor;if(F&&B.discriminators&&B.schema&&B.schema.options&&B.schema.options.discriminatorKey)if(typeof F[B.schema.options.discriminatorKey]==="string"&&B.discriminators[F[B.schema.options.discriminatorKey]])B=B.discriminators[F[B.schema.options.discriminatorKey]];else{const $=XZ1(B.discriminators,F[B.schema.options.discriminatorKey]);if($)B=$}const D=this.casterConstructor.prototype,J=D&&D.castForQuery,Z=D&&D.cast,X=B.castForQuery,Y=this.caster;if(Array.isArray(F))this.setters.reverse().forEach(($)=>{F=$.call(this,F,this)}),F=F.map(function($){if(R9.isObject($)&&$.$elemMatch)return $;if(J)return $=J.call(Y,null,$,A),$;else if(Z)return $=Z.call(Y,$),$;else if(X)return $=X.call(Y,null,$,A),$;if($!=null)return $=new B($),$;return $});else if(J)F=J.call(Y,null,F,A);else if(Z)F=Z.call(Y,F);else if(X)F=X.call(Y,null,F,A);else if(F!=null)F=new B(F);return F};O1.prototype.castForQuery=function(F,A,B){let D;if(F!=null){if(D=this.$conditionalHandlers[F],!D)throw new Error("Can\'t use "+F+" with Array.");return D.call(this,A,B)}else return this._castForQuery(A,B)};var s1=O1.prototype.$conditionalHandlers={};s1.$all=$Z1;s1.$options=String;s1.$elemMatch=GZ1;s1.$geoIntersects=NW.cast$geoIntersects;s1.$or=PW("$or");s1.$and=PW("$and");s1.$nor=PW("$nor");s1.$near=s1.$nearSphere=NW.cast$near;s1.$within=s1.$geoWithin=NW.cast$within;s1.$size=s1.$minDistance=s1.$maxDistance=ZZ1;s1.$exists=oJ1;s1.$type=eJ1;s1.$eq=s1.$gt=s1.$gte=s1.$lt=s1.$lte=s1.$not=s1.$regex=s1.$ne=O1.prototype._castForQuery;s1.$nin=K6.prototype.$conditionalHandlers.$nin;s1.$in=K6.prototype.$conditionalHandlers.$in;/*!
 * Module exports.
 */ox.exports=O1});var Ff=z((uV1,ex)=>{var EZ1=import.meta.require("assert"),{Long:WZ1}=B6();ex.exports=function F(A){if(A==null)return A;if(A==="")return null;if(typeof A==="bigint")return A;if(A instanceof WZ1)return A.toBigInt();if(typeof A==="string"||typeof A==="number")return BigInt(A);EZ1.ok(!1)}});var Df=z((OV1,Bf)=>{var z0=function(F,A){J8.call(this,F,A,"BigInt")},dD=function(F,A){return this.castForQuery(null,F,A)};/*!
 * Module dependencies.
 */var Af=E2(),J8=O0(),CZ1=Ff();z0.schemaName="BigInt";z0.defaultOptions={};/*!
 * Inherits from SchemaType.
 */z0.prototype=Object.create(J8.prototype);z0.prototype.constructor=z0;/*!
 * ignore
 */z0._cast=CZ1;z0.set=J8.set;z0.setters=[];z0.get=J8.get;z0.cast=function F(A){if(arguments.length===0)return this._cast;if(A===!1)A=this._defaultCaster;return this._cast=A,this._cast};/*!
 * ignore
 */z0._checkRequired=(F)=>F!=null;z0.checkRequired=J8.checkRequired;z0.prototype.checkRequired=function(F){return this.constructor._checkRequired(F)};z0.prototype.cast=function(F){let A;if(typeof this._castFunction==="function")A=this._castFunction;else if(typeof this.constructor.cast==="function")A=this.constructor.cast();else A=z0.cast();try{return A(F)}catch(B){throw new Af("BigInt",F,this.path,B,this)}};/*!
 * ignore
 */z0.$conditionalHandlers={...J8.prototype.$conditionalHandlers,$gt:dD,$gte:dD,$lt:dD,$lte:dD};/*!
 * ignore
 */z0.prototype.castForQuery=function(F,A,B){let D;if(F!=null){if(D=z0.$conditionalHandlers[F],D)return D.call(this,A);return this.applySetters(null,A,B)}try{return this.applySetters(A,B)}catch(J){if(J instanceof Af&&J.path===this.path&&this.$fullPath!=null)J.path=this.$fullPath;throw J}};z0.prototype._castNullish=function F(A){if(typeof A==="undefined")return A;if((typeof this.constructor.cast==="function"?this.constructor.cast():z0.cast())==null)return A;return A};/*!
 * Module exports.
 */Bf.exports=z0});var Xf=z((SV1,Zf)=>{var A0=function(F,A){Z8.call(this,F,A,"Boolean")};/*!
 * Module dependencies.
 */var Jf=E2(),Z8=O0(),EF=aB();A0.schemaName="Boolean";A0.defaultOptions={};/*!
 * Inherits from SchemaType.
 */A0.prototype=Object.create(Z8.prototype);A0.prototype.constructor=A0;/*!
 * ignore
 */A0._cast=EF;A0.set=Z8.set;A0.setters=[];A0.get=Z8.get;A0.cast=function F(A){if(arguments.length===0)return this._cast;if(A===!1)A=this._defaultCaster;return this._cast=A,this._cast};/*!
 * ignore
 */A0._defaultCaster=(F)=>{if(F!=null&&typeof F!=="boolean")throw new Error;return F};/*!
 * ignore
 */A0._checkRequired=(F)=>F===!0||F===!1;A0.checkRequired=Z8.checkRequired;A0.prototype.checkRequired=function(F){return this.constructor._checkRequired(F)};Object.defineProperty(A0,"convertToTrue",{get:()=>EF.convertToTrue,set:(F)=>{EF.convertToTrue=F}});Object.defineProperty(A0,"convertToFalse",{get:()=>EF.convertToFalse,set:(F)=>{EF.convertToFalse=F}});A0.prototype.cast=function(F){let A;if(typeof this._castFunction==="function")A=this._castFunction;else if(typeof this.constructor.cast==="function")A=this.constructor.cast();else A=A0.cast();try{return A(F)}catch(B){throw new Jf("Boolean",F,this.path,B,this)}};A0.$conditionalHandlers={...Z8.prototype.$conditionalHandlers};A0.prototype.castForQuery=function(F,A,B){let D;if(F!=null){if(D=A0.$conditionalHandlers[F],D)return D.call(this,A);return this.applySetters(null,A,B)}try{return this.applySetters(A,B)}catch(J){if(J instanceof Jf&&J.path===this.path&&this.$fullPath!=null)J.path=this.$fullPath;throw J}};A0.prototype._castNullish=function F(A){if(typeof A==="undefined")return A;const B=typeof this.constructor.cast==="function"?this.constructor.cast():A0.cast();if(B==null)return A;if(B.convertToFalse instanceof Set&&B.convertToFalse.has(A))return!1;if(B.convertToTrue instanceof Set&&B.convertToTrue.has(A))return!0;return A};/*!
 * Module exports.
 */Zf.exports=A0});var $f=z((kV1,Yf)=>{var HZ1=s2();class MW extends HZ1{}var qZ1=H6();Object.defineProperty(MW.prototype,"subtype",qZ1);/*!
 * ignore
 */Yf.exports=MW});var Wf=z((xV1,Ef)=>{var c0=function(F,A){y3.call(this,F,A,"Buffer")},lD=function(F,A){return this.castForQuery(null,F,A)};/*!
 * Module dependencies.
 */var X8=AF(),KZ1=$f(),y3=O0(),cD=xD(),zZ1=D1(),Gf=X8.Binary,pD=y3.CastError;c0.schemaName="Buffer";c0.defaultOptions={};/*!
 * Inherits from SchemaType.
 */c0.prototype=Object.create(y3.prototype);c0.prototype.constructor=c0;c0.prototype.OptionsConstructor=KZ1;/*!
 * ignore
 */c0._checkRequired=(F)=>!!(F&&F.length);c0.set=y3.set;c0.setters=[];c0.get=y3.get;c0.checkRequired=y3.checkRequired;c0.prototype.checkRequired=function(F,A){if(y3._isRef(this,F,A,!0))return!!F;return this.constructor._checkRequired(F)};c0.prototype.cast=function(F,A,B){let D;if(y3._isRef(this,F,A,B)){if(F&&F.isMongooseBuffer)return F;if(Buffer.isBuffer(F)){if(!F||!F.isMongooseBuffer){if(F=new X8(F,[this.path,A]),this.options.subtype!=null)F._subtype=this.options.subtype}return F}if(F instanceof Gf){if(D=new X8(F.value(!0),[this.path,A]),typeof F.sub_type!=="number")throw new pD("Buffer",F,this.path,null,this);return D._subtype=F.sub_type,D}if(F==null||zZ1.isNonBuiltinObject(F))return this._castRef(F,A,B)}if(F&&F._id)F=F._id;if(F&&F.isMongooseBuffer)return F;if(Buffer.isBuffer(F)){if(!F||!F.isMongooseBuffer){if(F=new X8(F,[this.path,A]),this.options.subtype!=null)F._subtype=this.options.subtype}return F}if(F instanceof Gf){if(D=new X8(F.value(!0),[this.path,A]),typeof F.sub_type!=="number")throw new pD("Buffer",F,this.path,null,this);return D._subtype=F.sub_type,D}if(F===null)return F;const J=typeof F;if(J==="string"||J==="number"||Array.isArray(F)||J==="object"&&F.type==="Buffer"&&Array.isArray(F.data)){if(J==="number")F=[F];if(D=new X8(F,[this.path,A]),this.options.subtype!=null)D._subtype=this.options.subtype;return D}throw new pD("Buffer",F,this.path,null,this)};c0.prototype.subtype=function(F){return this.options.subtype=F,this};/*!
 * ignore
 */c0.prototype.$conditionalHandlers={...y3.prototype.$conditionalHandlers,$bitsAllClear:cD,$bitsAnyClear:cD,$bitsAllSet:cD,$bitsAnySet:cD,$gt:lD,$gte:lD,$lt:lD,$lte:lD};c0.prototype.castForQuery=function(F,A,B){let D;if(F!=null){if(D=this.$conditionalHandlers[F],!D)throw new Error("Can\'t use "+F+" with Buffer.");return D.call(this,A)}let J;try{J=this.applySetters(A,B)}catch(Z){if(Z instanceof pD&&Z.path===this.path&&this.$fullPath!=null)Z.path=this.$fullPath;throw Z}return J?J.toObject({transform:!1,virtuals:!1}):J};/*!
 * Module exports.
 */Ef.exports=c0});var Hf=z((fV1,Cf)=>{var UZ1=s2();class WF extends UZ1{}var TW=H6();Object.defineProperty(WF.prototype,"min",TW);Object.defineProperty(WF.prototype,"max",TW);Object.defineProperty(WF.prototype,"expires",TW);/*!
 * ignore
 */Cf.exports=WF});var Kf=z((_V1,qf)=>{var jW=import.meta.require("assert");qf.exports=function F(A){if(A==null||A==="")return null;if(A instanceof Date)return jW.ok(!isNaN(A.valueOf())),A;let B;if(jW.ok(typeof A!=="boolean"),A instanceof Number||typeof A==="number")B=new Date(A);else if(typeof A==="string"&&!isNaN(Number(A))&&(Number(A)>=275761||Number(A)<-271820))B=new Date(Number(A));else if(typeof A.valueOf==="function")B=new Date(A.valueOf());else B=new Date(A);if(!isNaN(B.valueOf()))return B;jW.ok(!1)}});var Lf=z((gV1,Qf)=>{var B0=function(F,A){P4.call(this,F,A,"Date")},iD=function(F){return this.cast(F)};/*!
 * Module requirements.
 */var zf=W2(),QZ1=Hf(),P4=O0(),LZ1=Kf(),VZ1=T2(),wZ1=D1(),Uf=P4.CastError;B0.schemaName="Date";B0.defaultOptions={};/*!
 * Inherits from SchemaType.
 */B0.prototype=Object.create(P4.prototype);B0.prototype.constructor=B0;B0.prototype.OptionsConstructor=QZ1;/*!
 * ignore
 */B0._cast=LZ1;B0.set=P4.set;B0.setters=[];B0.get=P4.get;B0.cast=function F(A){if(arguments.length===0)return this._cast;if(A===!1)A=this._defaultCaster;return this._cast=A,this._cast};/*!
 * ignore
 */B0._defaultCaster=(F)=>{if(F!=null&&!(F instanceof Date))throw new Error;return F};B0.prototype.expires=function(F){if(VZ1(this._index)!=="Object")this._index={};return this._index.expires=F,wZ1.expires(this._index),this};/*!
 * ignore
 */B0._checkRequired=(F)=>F instanceof Date;B0.checkRequired=P4.checkRequired;B0.prototype.checkRequired=function(F,A){if(typeof F==="object"&&P4._isRef(this,F,A,!0))return F!=null;return(typeof this.constructor.checkRequired==="function"?this.constructor.checkRequired():B0.checkRequired())(F)};B0.prototype.min=function(F,A){if(this.minValidator)this.validators=this.validators.filter(function(B){return B.validator!==this.minValidator},this);if(F){let B=A||zf.messages.Date.min;if(typeof B==="string")B=B.replace(/{MIN}/,F===Date.now?"Date.now()":F.toString());const D=this;this.validators.push({validator:this.minValidator=function(J){let Z=F;if(typeof F==="function"&&F!==Date.now)Z=Z.call(this);const X=Z===Date.now?Z():D.cast(Z);return J===null||J.valueOf()>=X.valueOf()},message:B,type:"min",min:F})}return this};B0.prototype.max=function(F,A){if(this.maxValidator)this.validators=this.validators.filter(function(B){return B.validator!==this.maxValidator},this);if(F){let B=A||zf.messages.Date.max;if(typeof B==="string")B=B.replace(/{MAX}/,F===Date.now?"Date.now()":F.toString());const D=this;this.validators.push({validator:this.maxValidator=function(J){let Z=F;if(typeof Z==="function"&&Z!==Date.now)Z=Z.call(this);const X=Z===Date.now?Z():D.cast(Z);return J===null||J.valueOf()<=X.valueOf()},message:B,type:"max",max:F})}return this};B0.prototype.cast=function(F){let A;if(typeof this._castFunction==="function")A=this._castFunction;else if(typeof this.constructor.cast==="function")A=this.constructor.cast();else A=B0.cast();try{return A(F)}catch(B){throw new Uf("date",F,this.path,B,this)}};B0.prototype.$conditionalHandlers={...P4.prototype.$conditionalHandlers,$gt:iD,$gte:iD,$lt:iD,$lte:iD};B0.prototype.castForQuery=function(F,A,B){if(F==null)try{return this.applySetters(A,B)}catch(J){if(J instanceof Uf&&J.path===this.path&&this.$fullPath!=null)J.path=this.$fullPath;throw J}const D=this.$conditionalHandlers[F];if(!D)throw new Error("Can\'t use "+F+" with Date.");return D.call(this,A)};/*!
 * Module exports.
 */Qf.exports=B0});var wf=z((bV1,Vf)=>{var I9=sF(),RZ1=import.meta.require("assert");Vf.exports=function F(A){if(A==null)return A;if(typeof A==="object"&&typeof A.$numberDecimal==="string")return I9.fromString(A.$numberDecimal);if(A instanceof I9)return A;if(typeof A==="string")return I9.fromString(A);if(typeof Buffer==="function"&&Buffer.isBuffer(A))return new I9(A);if(typeof Uint8Array==="function"&&A instanceof Uint8Array)return new I9(A);if(typeof A==="number")return I9.fromString(String(A));if(typeof A.valueOf==="function"&&typeof A.valueOf()==="string")return I9.fromString(A.valueOf());RZ1.ok(!1)}});var If=z((yV1,Rf)=>{var N0=function(F,A){v3.call(this,F,A,"Decimal128")},nD=function(F){return this.cast(F)};/*!
 * Module dependencies.
 */var v3=O0(),IZ1=v3.CastError,NZ1=wf(),uW=L2();N0.schemaName="Decimal128";N0.defaultOptions={};/*!
 * Inherits from SchemaType.
 */N0.prototype=Object.create(v3.prototype);N0.prototype.constructor=N0;/*!
 * ignore
 */N0._cast=NZ1;N0.set=v3.set;N0.setters=[];N0.get=v3.get;N0.cast=function F(A){if(arguments.length===0)return this._cast;if(A===!1)A=this._defaultCaster;return this._cast=A,this._cast};/*!
 * ignore
 */N0._defaultCaster=(F)=>{if(F!=null&&!uW(F,"Decimal128"))throw new Error;return F};/*!
 * ignore
 */N0._checkRequired=(F)=>uW(F,"Decimal128");N0.checkRequired=v3.checkRequired;N0.prototype.checkRequired=function F(A,B){if(v3._isRef(this,A,B,!0))return!!A;return(typeof this.constructor.checkRequired==="function"?this.constructor.checkRequired():N0.checkRequired())(A)};N0.prototype.cast=function(F,A,B){if(v3._isRef(this,F,A,B)){if(uW(F,"Decimal128"))return F;return this._castRef(F,A,B)}let D;if(typeof this._castFunction==="function")D=this._castFunction;else if(typeof this.constructor.cast==="function")D=this.constructor.cast();else D=N0.cast();try{return D(F)}catch(J){throw new IZ1("Decimal128",F,this.path,J,this)}};/*!
 * ignore
 */N0.prototype.$conditionalHandlers={...v3.prototype.$conditionalHandlers,$gt:nD,$gte:nD,$lt:nD,$lte:nD};/*!
 * Module exports.
 */Rf.exports=N0});var Pf=z((vV1,Nf)=>{var PZ1=s2();class OW extends PZ1{}var MZ1=H6();Object.defineProperty(OW.prototype,"_id",MZ1);Nf.exports=OW});var SW=z((hV1,Mf)=>{Mf.exports=function F(A,B,D){if(A.length===0)return D();let J=A.length,Z=null;for(let X of A)B(X,function(Y){if(Z!=null)return;if(Y!=null)return Z=Y,D(Z);if(--J<=0)return D()})}});var uf=z((mV1,jf)=>{var Tf=SW();/*!
 * ignore
 */jf.exports=function F(A){A.s.hooks.pre("save",!1,function D(J){if(this.$isSubdocument){J();return}const Z=this,X=this.$getAllSubdocs();if(!X.length){J();return}Tf(X,function(Y,$){Y.$__schema.s.hooks.execPre("save",Y,function(G){$(G)})},function(Y){if(Y)return Z.$__schema.s.hooks.execPost("save:error",Z,[Z],{error:Y},function($){J($)});J()})},null,!0),A.s.hooks.post("save",function D(J,Z){if(this.$isSubdocument){Z();return}const X=this,Y=this.$getAllSubdocs();if(!Y.length){Z();return}Tf(Y,function($,G){$.$__schema.s.hooks.execPost("save",$,[$],function(E){G(E)})},function($){if($)return X.$__schema.s.hooks.execPost("save:error",X,[X],{error:$},function(G){Z(G)});Z()})},null,!0)}});var kf=z((dV1,xW)=>{var Sf=function(){let F,A;if(this.$__.shardval){F=Object.keys(this.$__.shardval),A=F.length,this.$where=this.$where||{};for(let B=0;B<A;++B)this.$where[F[B]]=this.$__.shardval[F[B]]}},kW=function(){const F=this.$__schema.options.shardKey||this.$__schema.options.shardkey;if(!Of.isPOJO(F))return;const A=this.$__.shardval={},B=Object.keys(F),D=B.length;let J;for(let Z=0;Z<D;++Z)if(J=this.$__getValue(B[Z]),J==null)A[B[Z]]=J;else if(Of.isMongooseObject(J))A[B[Z]]=J.toObject({depopulate:!0,_isNested:!0});else if(J instanceof Date||J[TZ1])A[B[Z]]=J;else if(typeof J.valueOf==="function")A[B[Z]]=J.valueOf();else A[B[Z]]=J},TZ1=t().objectIdSymbol,Of=D1();/*!
 * ignore
 */xW.exports=function F(A){A.post("init",function B(){return kW.call(this),this}),A.pre("save",function B(D){Sf.call(this),D()}),A.pre("remove",function B(D){Sf.call(this),D()}),A.post("save",function B(){kW.call(this)})};/*!
 * ignore
 *//*!
 * ignore
 */xW.exports.storeShard=kW;/*!
 * ignore
 */});var gf=z((cV1,_f)=>{var xf=function(F,A){const B=new Map;A=A||new Map;const D=Object.keys(F.$__.activePaths.init).concat(Object.keys(F.$__.activePaths.modify));for(let Z of D){const X=F.$__getValue(Z);if(X!=null&&Array.isArray(X)&&jZ1.isMongooseDocumentArray(X)&&X.length&&X[Y8]!=null&&Object.keys(X[Y8]).length!==0){const Y=A.get(Z)||{};B.set(Z,ff(Y,X[Y8]))}}const J=F.$__dirty();for(let Z of J){const{path:X,value:Y}=Z;if(Y!=null&&Y[Y8]!=null&&Object.keys(Y[Y8]).length!==0){const $=A.get(X)||{};B.set(X,ff($,Y[Y8]))}}return B},ff=function(F,A){if(F=F||{},A.$pullAll!=null)F.$pullAll=(F.$pullAll||[]).concat(A.$pullAll);if(A.$push!=null)F.$push=F.$push||{},F.$push.$each=(F.$push.$each||[]).concat(A.$push.$each);if(A.$addToSet!=null)F.$addToSet=(F.$addToSet||[]).concat(A.$addToSet);if(A.$set!=null)F.$set=Array.isArray(A.$set)?[...A.$set]:Object.assign({},A.$set);return F},Y8=t().arrayAtomicsSymbol,sD=t().sessionNewDocuments,jZ1=D1();_f.exports=function F(A){A.pre("save",function B(){const D=this.$session();if(D==null)return;if(D.transaction==null||D[sD]==null)return;if(!D[sD].has(this)){const J={};if(this.isNew)J.isNew=!0;if(this.$__schema.options.versionKey)J.versionKey=this.get(this.$__schema.options.versionKey);J.modifiedPaths=new Set(Object.keys(this.$__.activePaths.getStatePaths("modify"))),J.atomics=xf(this),D[sD].set(this,J)}else{const J=D[sD].get(this);for(let Z of Object.keys(this.$__.activePaths.getStatePaths("modify")))J.modifiedPaths.add(Z);J.atomics=xf(this,J.atomics)}})}});var yf=z((lV1,bf)=>{/*!
 * ignore
 */bf.exports=function F(A){A.pre("save",!1,function D(J,Z){const X=this;if(this.$isSubdocument)return J();const Y=Z&&typeof Z==="object"&&"validateBeforeSave"in Z;let $;if(Y)$=!!Z.validateBeforeSave;else $=this.$__schema.options.validateBeforeSave;if($){const E=Z&&typeof Z==="object"&&"validateModifiedOnly"in Z?{validateModifiedOnly:Z.validateModifiedOnly}:null;this.$validate(E).then(()=>{this.$op="save",J()},(W)=>{X.$__schema.s.hooks.execPost("save:error",X,[X],{error:W},function(C){X.$op="save",J(C)})})}else J()},null,!0)}});var fW=z((uZ1)=>{uZ1.saveSubdocs=uf();uZ1.sharding=kf();uZ1.trackTransaction=gf();uZ1.validateBeforeSave=yf()});var mf=z((iV1,hf)=>{var vf=fW();hf.exports=function F(A){for(let B of Object.values(vf))B(A,{deduplicate:!0});A.plugins=Object.values(vf).map((B)=>({fn:B,opts:{deduplicate:!0}})).concat(A.plugins)}});var lf=z((nV1,cf)=>{var fZ1=eB(),_Z1=v4(),gZ1=L2(),bZ1=H3(),df=r3();cf.exports=function F(A,B,D,J){const Z=Object.keys(B);let X=0;const Y=Z.length;let $;if(D=D||"",J=J||new WeakSet,J.has(B))return;J.add(B);while(X<Y){if($=Z[X++],!D){if($==="discriminators"||$==="base"||$==="_applyDiscriminators"||$==="_userProvidedOptions"||$==="options"||$==="tree")continue}if(D==="tree"&&B!=null&&B.instanceOfSchema)continue;if(_Z1.has($))continue;if(A[$]==null)A[$]=B[$];else if(df(B[$])){if(!df(A[$]))A[$]={};if(B[$]!=null){if(B[$].$isSingleNested&&A[$].$isMongooseDocumentArray||B[$].$isMongooseDocumentArray&&A[$].$isSingleNested||B[$].$isMongooseDocumentArrayElement&&A[$].$isMongooseDocumentArrayElement)continue;else if(B[$].instanceOfSchema){if(A[$].instanceOfSchema)fZ1(A[$],B[$].clone(),!0);else A[$]=B[$].clone();continue}else if(gZ1(B[$],"ObjectId")){A[$]=new bZ1(B[$]);continue}}F(A[$],B[$],D?D+"."+$:$,J)}}if(B!=null&&B.instanceOfSchema)A.tree=Object.assign({},B.tree,A.tree)}});var aD=z((sV1,sf)=>{var pf=K9(),yZ1=mf(),vZ1=J0(),hZ1=JD().defineKey,mZ1=t1(),_W=D1(),dZ1=lf(),nf={toJSON:!0,toObject:!0,_id:!0,id:!0,virtuals:!0,methods:!0};/*!
 * ignore
 */sf.exports=function F(A,B,D,J,Z,X,Y){if(!(D&&D.instanceOfSchema))throw new Error("You must pass a valid discriminator Schema");if(X=X==null?!0:X,A.schema.discriminatorMapping&&!A.schema.discriminatorMapping.isRoot)throw new Error('Discriminator "'+B+'" can only be a discriminator of the root model');if(Z){const C=mZ1(A.base,"options.applyPluginsToDiscriminators",!1)||!X;A.base._applyPlugins(D,{skipTopLevel:!C})}else if(!X)yZ1(D);const $=A.schema.options.discriminatorKey,G=A.schema.path($);if(G!=null){if(!_W.hasUserDefinedProperty(G.options,"select"))G.options.select=!0;G.options.$skipDiscriminatorCheck=!0}else{const C={};C[$]={default:void 0,select:!0,$skipDiscriminatorCheck:!0},C[$][A.schema.options.typeKey]=String,A.schema.add(C),hZ1({prop:$,prototype:A.prototype,options:A.schema.options})}if(D.path($)&&D.path($).options.$skipDiscriminatorCheck!==!0)throw new Error('Discriminator "'+B+'" cannot have field with name "'+$+'"');let E=B;if(typeof J==="string"&&J.length||J!=null)E=J;function W(C,H){if(C._baseSchema=H,H.paths._id&&H.paths._id.options&&!H.paths._id.options.auto)C.remove("_id");const q=Object.keys(H.paths),K=[];for(let P of q){if(C.nested[P]){K.push(P);continue}if(P.indexOf(".")===-1)continue;const x=P.split(".").slice(0,-1);let c="";for(let u of x)if(c+=(c.length?".":"")+u,C.paths[c]instanceof pf||C.singleNestedPaths[c]instanceof pf)K.push(P)}dZ1(C,H);for(let P of K)delete C.paths[P];C.childSchemas.forEach((P)=>{P.model.prototype.$__setSchema(P.schema)});const U={};if(U[$]={default:E,select:!0,set:function(P){if(P===E||Array.isArray(E)&&_W.deepEqual(P,E))return E;throw new Error('Can\'t set discriminator key "'+$+'"')},$skipDiscriminatorCheck:!0},U[$][C.options.typeKey]=G?G.options[C.options.typeKey]:String,C.add(U),C.discriminatorMapping={key:$,value:E,isRoot:!1},H.options.collection)C.options.collection=H.options.collection;const Q=C.options.toJSON,V=C.options.toObject,L=C.options._id,N=C.options.id,h=Object.keys(C.options);C.options.discriminatorKey=H.options.discriminatorKey;const T=C._userProvidedOptions;for(let P of h)if(!nf[P]){if(P in T&&!_W.deepEqual(C.options[P],H.options[P]))throw new Error("Can\'t customize discriminator option "+P+" (can only modify "+Object.keys(nf).join(", ")+")")}C.options=vZ1(H.options);for(let P of Object.keys(T))C.options[P]=T[P];if(Q)C.options.toJSON=Q;if(V)C.options.toObject=V;if(typeof L!=="undefined")C.options._id=L;if(C.options.id=N,X)C.s.hooks=A.schema.s.hooks.merge(C.s.hooks);if(Z)C.plugins=Array.prototype.slice.call(H.plugins);C.callQueue=H.callQueue.concat(C.callQueue),delete C._requiredpaths}if(W(D,A.schema),!A.discriminators)A.discriminators={};if(!A.schema.discriminatorMapping)A.schema.discriminatorMapping={key:$,value:null,isRoot:!0};if(!A.schema.discriminators)A.schema.discriminators={};if(A.schema.discriminators[B]=D,A.discriminators[B]&&!D.options.overwriteModels&&!Y)throw new Error('Discriminator with name "'+B+'" already exists');return D}});var rD=z((aV1,af)=>{var cZ1=c6();af.exports=function F(A,B,D){const J=A.schema.options.discriminatorKey;let Z=B!=null&&B[J];if(Z==null)Z=D;if(A.discriminators&&Z!=null)if(A.discriminators[Z])A=A.discriminators[Z];else{const X=cZ1(A.discriminators,Z);if(X)A=X}return A}});var gW=z((rV1,rf)=>{var lZ1=oE();rf.exports=function F(A,B){if(B==null||B._id==null)return A;if(A=A.clone(),!B._id)A.remove("_id"),A.options._id=!1;else if(!A.paths._id)lZ1(A),A.options._id=!0;return A}});var yW=z((tV1,tf)=>{/*!
 * Module dependencies.
 */var pZ1=H1();class bW extends pZ1{constructor(F,A){const B=`Cannot create use schema for property "${F}" because the schema has the ${A} option enabled.`;super(B)}}Object.defineProperty(bW.prototype,"name",{value:"InvalidSchemaOptionError"});/*!
 * exports
 */tf.exports=bW});var dW=z((oV1,A_)=>{var l1=function(F,A,B){if(F.options.timeseries)throw new AX1(A,"timeseries");const D=l1.defaultOptions&&l1.defaultOptions._id;if(D!=null)B=B||{},B._id=D;F=tZ1(F,B),this.caster=F_(F,null,B),this.caster.path=A,this.caster.prototype.$basePath=A,this.schema=F,this.$isSingleNested=!0,this.base=F.base,$8.call(this,A,B,"Embedded")},F_=function(F,A,B){tD||(tD=GD());const D=function Z(X,Y,$){if(this.$__parent=$,tD.apply(this,arguments),$==null)return;this.$session($.$session())};F._preCompile();const J=A!=null?A.prototype:tD.prototype;D.prototype=Object.create(J),D.prototype.$__setSchema(F),D.prototype.constructor=D,D.$__required=B?.required,D.base=F.base,D.schema=F,D.$isSingleNested=!0,D.events=new vW,D.prototype.toBSON=function(){return this.toObject(oZ1)};for(let Z in F.methods)D.prototype[Z]=F.methods[Z];for(let Z in F.statics)D[Z]=F.statics[Z];for(let Z in vW.prototype)D[Z]=vW.prototype[Z];return D};/*!
 * Module dependencies.
 */var of=E2(),vW=import.meta.require("events").EventEmitter,iZ1=XE(),nZ1=Pf(),$8=O0(),sZ1=BD(),aZ1=rB(),ef=YF().castToNumber,rZ1=aD(),hW=RW(),mW=rD(),tZ1=gW(),oZ1=y6().internalToObjectOptions,eZ1=a7(),FX1=D1(),AX1=yW(),tD;A_.exports=l1;/*!
 * ignore
 */l1.prototype=Object.create($8.prototype);l1.prototype.constructor=l1;l1.prototype.OptionsConstructor=nZ1;/*!
 * ignore
 */l1.prototype.$conditionalHandlers.$geoWithin=function F(A,B){return{$geometry:this.castForQuery(null,A.$geometry,B)}};/*!
 * ignore
 */l1.prototype.$conditionalHandlers.$near=l1.prototype.$conditionalHandlers.$nearSphere=hW.cast$near;l1.prototype.$conditionalHandlers.$within=l1.prototype.$conditionalHandlers.$geoWithin=hW.cast$within;l1.prototype.$conditionalHandlers.$geoIntersects=hW.cast$geoIntersects;l1.prototype.$conditionalHandlers.$minDistance=ef;l1.prototype.$conditionalHandlers.$maxDistance=ef;l1.prototype.$conditionalHandlers.$exists=aZ1;l1.prototype.cast=function(F,A,B,D,J){if(F&&F.$isSingleNested&&F.parent===A)return F;if(F!=null&&(typeof F!=="object"||Array.isArray(F)))throw new iZ1(this.path,F);const Z=this.schema.path(this.schema.options.discriminatorKey),X=Z==null?null:Z.getDefault(A),Y=mW(this.caster,F,X);let $;const G=A&&A.$__&&A.$__.selected,E=this.path,W=G==null?null:Object.keys(G).reduce((C,H)=>{if(H.startsWith(E+"."))C=C||{},C[H.substring(E.length+1)]=G[H];return C},null);if(B){$=new Y(void 0,W,A,!1,{defaults:!1}),delete $.$__.defaults,$.$init(F);const C=eZ1(W);sZ1($,W,C)}else{if(J=Object.assign({},J,{priorDoc:D}),Object.keys(F).length===0)return new Y({},W,A,void 0,J);return new Y(F,W,A,void 0,J)}return $};l1.prototype.castForQuery=function(F,A,B,D){let J;if(F!=null){if(J=this.$conditionalHandlers[F],!J)throw new Error("Can\'t use "+F);return J.call(this,A)}if(A==null)return A;const Z=mW(this.caster,A);if(A instanceof Z)return A;if(this.options.runSetters)A=this._applySetters(A,B);const X=D!=null&&D.strict!=null?D.strict:void 0;try{A=new Z(A,X)}catch(Y){if(!(Y instanceof of))throw new of("Embedded",A,this.path,Y,this);throw Y}return A};l1.prototype.doValidate=function(F,A,B,D){const J=mW(this.caster,F);if(F&&!(F instanceof J))F=new J(F,null,B!=null&&B.$__!=null?B:null);if(D&&D.skipSchemaValidators){if(!F)return A(null);return F.validate().then(()=>A(null),(Z)=>A(Z))}$8.prototype.doValidate.call(this,F,function(Z){if(Z)return A(Z);if(!F)return A(null);F.validate().then(()=>A(null),(X)=>A(X))},B,D)};l1.prototype.doValidateSync=function(F,A,B){if(!B||!B.skipSchemaValidators){const D=$8.prototype.doValidateSync.call(this,F,A);if(D)return D}if(!F)return;return F.validateSync()};l1.prototype.discriminator=function(F,A,B){B=B||{};const D=FX1.isPOJO(B)?B.value:B,J=typeof B.clone==="boolean"?B.clone:!0;if(A.instanceOfSchema&&J)A=A.clone();return A=rZ1(this.caster,F,A,D,null,null,B.overwriteExisting),this.caster.discriminators[F]=F_(A,this.caster),this.caster.discriminators[F]};/*!
 * ignore
 */l1.defaultOptions={};l1.set=$8.set;l1.setters=[];l1.get=$8.get;/*!
 * ignore
 */l1.prototype.toJSON=function F(){return{path:this.path,options:this.options}};/*!
 * ignore
 */l1.prototype.clone=function(){const F=new this.constructor(this.schema,this.path,{...this.options,_skipApplyDiscriminators:!0});if(F.validators=this.validators.slice(),this.requiredValidator!==void 0)F.requiredValidator=this.requiredValidator;return F.caster.discriminators=Object.assign({},this.caster.discriminators),F}});var D_=z((eV1,B_)=>{var h3=function(F,A){if(this.$parentSchemaType=A&&A.$parentSchemaType,!this.$parentSchemaType)throw new BX1("Cannot create DocumentArrayElement schematype without a parent");delete A.$parentSchemaType,cW.call(this,F,A,"DocumentArrayElement"),this.$isMongooseDocumentArrayElement=!0};/*!
 * Module dependencies.
 */var BX1=H1(),cW=O0(),DX1=dW(),JX1=rD();h3.schemaName="DocumentArrayElement";h3.defaultOptions={};/*!
 * Inherits from SchemaType.
 */h3.prototype=Object.create(cW.prototype);h3.prototype.constructor=h3;h3.prototype.cast=function(...F){return this.$parentSchemaType.cast(...F)[0]};h3.prototype.doValidate=function(F,A,B,D){const J=JX1(this.caster,F);if(F&&!(F instanceof J))F=new J(F,B,null,null,D&&D.index!=null?D.index:null);return DX1.prototype.doValidate.call(this,F,A,B,D)};h3.prototype.clone=function(){this.options.$parentSchemaType=this.$parentSchemaType;const F=cW.prototype.clone.apply(this,arguments);return delete this.options.$parentSchemaType,F.caster=this.caster,F.schema=this.schema,F};/*!
 * Module exports.
 */B_.exports=h3});var X_=z((Fw1,Z_)=>{var ZX1=s2();class oD extends ZX1{}var J_=H6();Object.defineProperty(oD.prototype,"excludeIndexes",J_);Object.defineProperty(oD.prototype,"_id",J_);/*!
 * ignore
 */Z_.exports=oD});var q_=z((Aw1,H_)=>{var X0=function(F,A,B,D){if(A.options&&A.options.timeseries)throw new WX1(F,"timeseries");const J=X0.defaultOptions&&X0.defaultOptions._id;if(J!=null)D=D||{},D._id=J;if(D!=null&&D._id!=null)A=G_(A,D);else if(B!=null&&B._id!=null)A=G_(A,B);const Z=C_(A,B);Z.prototype.$basePath=F,iW.call(this,F,Z,B),this.schema=A,this.schemaOptions=D||{},this.$isMongooseDocumentArray=!0,this.Constructor=Z,Z.base=A.base;const X=this.defaultValue;if(!("defaultValue"in this)||X!==void 0)this.default(function(){let $=X.call(this);if($!=null&&!Array.isArray($))$=[$];return $});const Y=this;this.$embeddedSchemaType=new XX1(F+".$",{required:this&&this.schemaOptions&&this.schemaOptions.required||!1,$parentSchemaType:Y}),this.$embeddedSchemaType.caster=this.Constructor,this.$embeddedSchemaType.schema=this.schema},C_=function(F,A,B){N9||(N9=r7());function D(){if(N9.apply(this,arguments),this.__parentArray==null||this.__parentArray.getArrayParent()==null)return;this.$session(this.__parentArray.getArrayParent().$session())}F._preCompile();const J=B!=null?B.prototype:N9.prototype;D.prototype=Object.create(J),D.prototype.$__setSchema(F),D.schema=F,D.prototype.constructor=D,D.$isArraySubdocument=!0,D.events=new lW,D.base=F.base;for(let Z in F.methods)D.prototype[Z]=F.methods[Z];for(let Z in F.statics)D[Z]=F.statics[Z];for(let Z in lW.prototype)D[Z]=lW.prototype[Z];return D.options=A,D},qX1=function(F,A,B){if(!(B&&A))return;const D=F.path+".",J=Object.keys(A);let Z=J.length;const X={};let Y,$,G;while(Z--)if($=J[Z],$.startsWith(D)){if(G=$.substring(D.length),G==="$")continue;if(G.startsWith("$."))G=G.substring(2);Y||(Y=!0),X[G]=A[$]}return Y&&X||void 0},KX1=function(F,A){const B=Object.keys(F),D=B.length;for(let Y=0;Y<D;++Y){const $=B[Y],G=F[$];if(EX1($)&&G!=null)F[$]=this.castForQuery($,G,A)}const J=this&&this.casterConstructor&&this.casterConstructor.schema&&this.casterConstructor.schema.options&&this.casterConstructor.schema.options.discriminatorKey,Z=this&&this.casterConstructor&&this.casterConstructor.schema&&this.casterConstructor.schema.discriminators||{};if(J!=null&&F[J]!=null&&Z[F[J]]!=null)return $_(Z[F[J]],F,null,this&&this.$$context);const X=this.casterConstructor.schema??A.schema;return $_(X,F,null,this&&this.$$context)};/*!
 * Module dependencies.
 */var Y_=E2(),XX1=D_(),lW=import.meta.require("events").EventEmitter,iW=bD(),YX1=X_(),CF=O0(),$_=w9(),$X1=aD(),G_=gW(),GX1=XD(),EX1=ZF(),G8=D1(),eD=rD(),WX1=yW(),E_=t().arrayAtomicsSymbol,pW=t().arrayPathSymbol,CX1=t().documentArrayParent,m3,N9;X0.schemaName="DocumentArray";X0.options={castNonArrays:!0};/*!
 * Inherits from SchemaArray.
 */X0.prototype=Object.create(iW.prototype);X0.prototype.constructor=X0;X0.prototype.OptionsConstructor=YX1;X0.prototype.$conditionalHandlers={...iW.prototype.$conditionalHandlers};/*!
 * ignore
 */X0.prototype.discriminator=function(F,A,B){if(typeof F==="function")F=G8.getFunctionName(F);B=B||{};const D=G8.isPOJO(B)?B.value:B,J=typeof B.clone==="boolean"?B.clone:!0;if(A.instanceOfSchema&&J)A=A.clone();A=$X1(this.casterConstructor,F,A,D,null,null,B?.overwriteExisting);const Z=C_(A,null,this.casterConstructor);Z.baseCasterConstructor=this.casterConstructor;try{Object.defineProperty(Z,"name",{value:F})}catch(X){}return this.casterConstructor.discriminators[F]=Z,this.casterConstructor.discriminators[F]};X0.prototype.doValidate=function(F,A,B,D){m3||(m3=U9());const J=this;try{CF.prototype.doValidate.call(this,F,Z,B)}catch(X){return A(X)}function Z(X){if(X)return A(X);let Y=F&&F.length,$;if(!Y)return A();if(D&&D.updateValidator)return A();if(!G8.isMongooseDocumentArray(F))F=new m3(F,J.path,B);function G(E){if(E!=null)$=E;--Y||A($)}for(let E=0,W=Y;E<W;++E){let C=F[E];if(C==null){--Y||A($);continue}if(!(C instanceof N9)){const H=eD(J.casterConstructor,F[E]);C=F[E]=new H(C,F,void 0,void 0,E)}if(D!=null&&D.validateModifiedOnly&&!C.$isModified()){--Y||A($);continue}C.$__validate(null,D,G)}}};X0.prototype.doValidateSync=function(F,A,B){const D=CF.prototype.doValidateSync.call(this,F,A);if(D!=null)return D;const J=F&&F.length;let Z=null;if(!J)return;for(let X=0,Y=J;X<Y;++X){let $=F[X];if(!$)continue;if(!($ instanceof N9)){const E=eD(this.casterConstructor,F[X]);$=F[X]=new E($,F,void 0,void 0,X)}if(B!=null&&B.validateModifiedOnly&&!$.$isModified())continue;const G=$.validateSync(B);if(G&&Z==null)Z=G}return Z};/*!
 * ignore
 */X0.prototype.getDefault=function(F,A,B){let D=typeof this.defaultValue==="function"?this.defaultValue.call(F):this.defaultValue;if(D==null)return D;if(B&&B.skipCast)return D;if(m3||(m3=U9()),!Array.isArray(D))D=[D];D=new m3(D,this.path,F);for(let J=0;J<D.length;++J){const X=new(eD(this.casterConstructor,D[J]))({},D,void 0,void 0,J);X.$init(D[J]),X.isNew=!0,Object.assign(X.$__.activePaths.default,X.$__.activePaths.init),X.$__.activePaths.init={},D[J]=X}return D};var HX1=Object.freeze({transform:!1,virtuals:!1}),W_=Object.freeze({skipId:!1,willInit:!0});X0.prototype.cast=function(F,A,B,D,J){if(m3||(m3=U9()),F!=null&&F[pW]!=null&&F===D)return F;let Z,X;J=J||{};const Y=J.path||this.path;if(!Array.isArray(F)){if(!B&&!X0.options.castNonArrays)throw new Y_("DocumentArray",F,this.path,null,this);if(!!A&&B)A.markModified(Y);return this.cast([F],A,B,D,J)}if(!J.skipDocumentArrayCast||G8.isMongooseDocumentArray(F))F=new m3(F,Y,A);if(D!=null)F[E_]=D[E_]||{};if(J.arrayPathIndex!=null)F[pW]=Y+"."+J.arrayPathIndex;const $=G8.isMongooseDocumentArray(F)?F.__array:F,G=$.length;for(let E=0;E<G;++E){if(!$[E])continue;const W=eD(this.casterConstructor,$[E]),C=GX1($[E],!0);if($[E]!==C)$[E]=C;if($[E]instanceof N9){if($[E][CX1]!==A)if(B){const H=new W(null,F,W_,Z,E);$[E]=H.$init($[E])}else{const H=new W($[E],F,void 0,void 0,E);$[E]=H}if($[E].__index==null)$[E].$setIndex(E)}else if($[E]!=null)if(B){if(A)Z||(Z=qX1(this,A.$__.selected,B));else Z=!0;X=new W(null,F,W_,Z,E),$[E]=X.$init($[E])}else{if(D&&typeof D.id==="function")X=D.id($[E]._id);if(D&&X&&G8.deepEqual(X.toObject(HX1),$[E]))X.set($[E]),$[E]=X;else try{X=new W($[E],F,void 0,void 0,E),$[E]=X}catch(H){throw new Y_("embedded",$[E],F[pW],H,this)}}}return F};/*!
 * ignore
 */X0.prototype.clone=function(){const F=Object.assign({},this.options),A=new this.constructor(this.path,this.schema,F,this.schemaOptions);if(A.validators=this.validators.slice(),this.requiredValidator!==void 0)A.requiredValidator=this.requiredValidator;return A.Constructor.discriminators=Object.assign({},this.Constructor.discriminators),A};/*!
 * ignore
 */X0.prototype.applyGetters=function(F,A){return CF.prototype.applyGetters.call(this,F,A)};/*!
 * ignore
 */X0.defaultOptions={};X0.set=CF.set;X0.setters=[];X0.get=CF.get;/*!
 * Handle casting $elemMatch operators
 */X0.prototype.$conditionalHandlers.$elemMatch=KX1;/*!
 * Module exports.
 */H_.exports=X0});var z_=z((Bw1,K_)=>{var zX1=s2();class nW extends zX1{}var UX1=H6();Object.defineProperty(nW.prototype,"of",UX1);K_.exports=nW});var L_=z((Dw1,Q_)=>{/*!
 * ignore
 */var sW=uD(),QX1=z_(),U_=O0();/*!
 * ignore
 */class HF extends U_{constructor(F,A){super(F,A,"Map");this.$isSchemaMap=!0}set(F,A){return U_.set(F,A)}cast(F,A,B){if(F instanceof sW)return F;const D=this.path;if(B){const J=new sW({},D,A,this.$__schemaType);if(F instanceof global.Map)for(let Z of F.keys()){let X=F.get(Z);if(X==null)X=J.$__schemaType._castNullish(X);else X=J.$__schemaType.cast(X,A,!0,null,{path:D+"."+Z});J.$init(Z,X)}else for(let Z of Object.keys(F)){let X=F[Z];if(X==null)X=J.$__schemaType._castNullish(X);else X=J.$__schemaType.cast(X,A,!0,null,{path:D+"."+Z});J.$init(Z,X)}return J}return new sW(F,D,A,this.$__schemaType)}clone(){const F=super.clone();if(this.$__schemaType!=null)F.$__schemaType=this.$__schemaType.clone();return F}}HF.schemaName="Map";HF.prototype.OptionsConstructor=QX1;HF.defaultOptions={};Q_.exports=HF});var R_=z((Jw1,w_)=>{var LX1=s2();class FJ extends LX1{}var V_=H6();Object.defineProperty(FJ.prototype,"auto",V_);Object.defineProperty(FJ.prototype,"populate",V_);/*!
 * ignore
 */w_.exports=FJ});var M_=z((Zw1,P_)=>{var U0=function(F,A){const B=typeof F==="string"&&F.length===24&&/^[a-f0-9]+$/i.test(F),D=A&&A.suppressWarning;if((B||typeof F==="undefined")&&!D)I_.warn("mongoose: To create a new ObjectId please try `Mongoose.Types.ObjectId` instead of using `Mongoose.Schema.ObjectId`. Set the `suppressWarning` option if you\'re trying to create a hex char path in your schema.");d3.call(this,F,A,"ObjectId")},AJ=function(F){return this.cast(F)},N_=function(){return new rW},NX1=function(F){if(aW||(aW=u2()),this instanceof aW){if(F===void 0)return new rW}return F};/*!
 * Module dependencies.
 */var VX1=R_(),d3=O0(),wX1=RE(),RX1=T2(),rW=H3(),tW=L2(),I_=D1(),IX1=d3.CastError,aW;U0.schemaName="ObjectId";U0.defaultOptions={};/*!
 * Inherits from SchemaType.
 */U0.prototype=Object.create(d3.prototype);U0.prototype.constructor=U0;U0.prototype.OptionsConstructor=VX1;U0.get=d3.get;U0.set=d3.set;U0.setters=[];U0.prototype.auto=function(F){if(F)this.default(N_),this.set(NX1);return this};/*!
 * ignore
 */U0._checkRequired=(F)=>tW(F,"ObjectId");/*!
 * ignore
 */U0._cast=wX1;U0.cast=function F(A){if(arguments.length===0)return this._cast;if(A===!1)A=this._defaultCaster;return this._cast=A,this._cast};/*!
 * ignore
 */U0._defaultCaster=(F)=>{if(!tW(F,"ObjectId"))throw new Error(F+" is not an instance of ObjectId");return F};U0.checkRequired=d3.checkRequired;U0.prototype.checkRequired=function F(A,B){if(d3._isRef(this,A,B,!0))return!!A;return(typeof this.constructor.checkRequired==="function"?this.constructor.checkRequired():U0.checkRequired())(A)};U0.prototype.cast=function(F,A,B){if(!tW(F,"ObjectId")&&d3._isRef(this,F,A,B)){if((RX1(F)||"").toLowerCase()==="objectid")return new rW(F.toHexString());if(F==null||I_.isNonBuiltinObject(F))return this._castRef(F,A,B)}let D;if(typeof this._castFunction==="function")D=this._castFunction;else if(typeof this.constructor.cast==="function")D=this.constructor.cast();else D=U0.cast();try{return D(F)}catch(J){throw new IX1("ObjectId",F,this.path,J,this)}};/*!
 * ignore
 */U0.prototype.$conditionalHandlers={...d3.prototype.$conditionalHandlers,$gt:AJ,$gte:AJ,$lt:AJ,$lte:AJ};/*!
 * ignore
 */N_.$runBeforeSetters=!0;/*!
 * Module exports.
 */P_.exports=U0});var j_=z((Xw1,T_)=>{var PX1=s2();class z6 extends PX1{}var Y3=H6();Object.defineProperty(z6.prototype,"enum",Y3);Object.defineProperty(z6.prototype,"match",Y3);Object.defineProperty(z6.prototype,"lowercase",Y3);Object.defineProperty(z6.prototype,"trim",Y3);Object.defineProperty(z6.prototype,"uppercase",Y3);Object.defineProperty(z6.prototype,"minLength",Y3);Object.defineProperty(z6.prototype,"minlength",Y3);Object.defineProperty(z6.prototype,"maxLength",Y3);Object.defineProperty(z6.prototype,"maxlength",Y3);Object.defineProperty(z6.prototype,"populate",Y3);/*!
 * ignore
 */T_.exports=z6});var x_=z((Yw1,k_)=>{var T1=function(F,A){this.enumValues=[],this.regExp=null,c3.call(this,F,A,"String")},qF=function(F,A){return this.castForQuery(null,F,A)},uX1=function(F,A){const B=this;if(!Array.isArray(F))return[this.castForQuery(null,F,A)];return F.map(function(D){return B.castForQuery(null,D,A)})},O_=function(F){if(F==null)return this._castNullish(F);return this.cast(F,this)};/*!
 * Module dependencies.
 */var c3=O0(),KF=W2(),MX1=j_(),TX1=CW(),u_=D1(),jX1=L2(),S_=c3.CastError;T1.schemaName="String";T1.defaultOptions={};/*!
 * Inherits from SchemaType.
 */T1.prototype=Object.create(c3.prototype);T1.prototype.constructor=T1;Object.defineProperty(T1.prototype,"OptionsConstructor",{configurable:!1,enumerable:!1,writable:!1,value:MX1});/*!
 * ignore
 */T1._cast=TX1;T1.cast=function F(A){if(arguments.length===0)return this._cast;if(A===!1)A=this._defaultCaster;return this._cast=A,this._cast};/*!
 * ignore
 */T1._defaultCaster=(F)=>{if(F!=null&&typeof F!=="string")throw new Error;return F};T1.get=c3.get;T1.set=c3.set;T1.setters=[];/*!
 * ignore
 */T1._checkRequired=(F)=>(F instanceof String||typeof F==="string")&&F.length;T1.checkRequired=c3.checkRequired;T1.prototype.enum=function(){if(this.enumValidator)this.validators=this.validators.filter(function(D){return D.validator!==this.enumValidator},this),this.enumValidator=!1;if(arguments[0]===void 0||arguments[0]===!1)return this;let F,A;if(u_.isObject(arguments[0]))if(Array.isArray(arguments[0].values))F=arguments[0].values,A=arguments[0].message;else F=u_.object.vals(arguments[0]),A=KF.messages.String.enum;else F=arguments,A=KF.messages.String.enum;for(let D of F)if(D!==void 0)this.enumValues.push(this.cast(D));const B=this.enumValues;return this.enumValidator=function(D){return D==null||~B.indexOf(D)},this.validators.push({validator:this.enumValidator,message:A,type:"enum",enumValues:B}),this};T1.prototype.lowercase=function(F){if(arguments.length>0&&!F)return this;return this.set((A)=>{if(typeof A!=="string")A=this.cast(A);if(A)return A.toLowerCase();return A})};T1.prototype.uppercase=function(F){if(arguments.length>0&&!F)return this;return this.set((A)=>{if(typeof A!=="string")A=this.cast(A);if(A)return A.toUpperCase();return A})};T1.prototype.trim=function(F){if(arguments.length>0&&!F)return this;return this.set((A)=>{if(typeof A!=="string")A=this.cast(A);if(A)return A.trim();return A})};T1.prototype.minlength=function(F,A){if(this.minlengthValidator)this.validators=this.validators.filter(function(B){return B.validator!==this.minlengthValidator},this);if(F!==null&&F!==void 0){let B=A||KF.messages.String.minlength;B=B.replace(/{MINLENGTH}/,F),this.validators.push({validator:this.minlengthValidator=function(D){return D===null||D.length>=F},message:B,type:"minlength",minlength:F})}return this};T1.prototype.minLength=T1.prototype.minlength;T1.prototype.maxlength=function(F,A){if(this.maxlengthValidator)this.validators=this.validators.filter(function(B){return B.validator!==this.maxlengthValidator},this);if(F!==null&&F!==void 0){let B=A||KF.messages.String.maxlength;B=B.replace(/{MAXLENGTH}/,F),this.validators.push({validator:this.maxlengthValidator=function(D){return D===null||D.length<=F},message:B,type:"maxlength",maxlength:F})}return this};T1.prototype.maxLength=T1.prototype.maxlength;T1.prototype.match=function F(A,B){const D=B||KF.messages.String.match,J=function(Z){if(!A)return!1;return A.lastIndex=0,Z!=null&&Z!==""?A.test(Z):!0};return this.validators.push({validator:J,message:D,type:"regexp",regexp:A}),this};T1.prototype.checkRequired=function F(A,B){if(typeof A==="object"&&c3._isRef(this,A,B,!0))return A!=null;return(typeof this.constructor.checkRequired==="function"?this.constructor.checkRequired():T1.checkRequired())(A)};T1.prototype.cast=function(F,A,B){if(typeof F!=="string"&&c3._isRef(this,F,A,B))return this._castRef(F,A,B);let D;if(typeof this._castFunction==="function")D=this._castFunction;else if(typeof this.constructor.cast==="function")D=this.constructor.cast();else D=T1.cast();try{return D(F)}catch(J){throw new S_("string",F,this.path,null,this)}};/*!
 * ignore
 *//*!
 * ignore
 *//*!
 * ignore
 */var OX1={...c3.prototype.$conditionalHandlers,$all:uX1,$gt:qF,$gte:qF,$lt:qF,$lte:qF,$options:O_,$regex:function F(A){if(Object.prototype.toString.call(A)==="[object RegExp]")return A;return O_.call(this,A)},$not:qF};Object.defineProperty(T1.prototype,"$conditionalHandlers",{configurable:!1,enumerable:!1,writable:!1,value:Object.freeze(OX1)});T1.prototype.castForQuery=function(F,A,B){let D;if(F!=null){if(D=this.$conditionalHandlers[F],!D)throw new Error("Can\'t use "+F+" with String.");return D.call(this,A,B)}if(Object.prototype.toString.call(A)==="[object RegExp]"||jX1(A,"BSONRegExp"))return A;try{return this.applySetters(A,B)}catch(J){if(J instanceof S_&&J.path===this.path&&this.$fullPath!=null)J.path=this.$fullPath;throw J}};/*!
 * Module exports.
 */k_.exports=T1});var b_=z(($w1,g_)=>{var xX1=function(F){return F!=null&&Buffer.from(F,"hex")},fX1=function(F){return F!=null&&F.toString("hex")},f_=function(F){if(typeof F!=="string")F="";const A=F.replace(/[{}-]/g,""),B=xX1(A),D=new FC(B);return D._subtype=4,D},__=function(F){let A;if(typeof F!=="string"&&F!=null)return A=fX1(F),A.substring(0,8)+"-"+A.substring(8,12)+"-"+A.substring(12,16)+"-"+A.substring(16,20)+"-"+A.substring(20,32);return F},Q0=function(F,A){M4.call(this,F,A,"UUID"),this.getters.push(function(B){if(B!=null&&B.$__!=null)return B;return __(B)})},zF=function(F){return this.cast(F)},oW=function(F){return F.map((A)=>{return this.cast(A)})};/*!
 * Module dependencies.
 */var FC=AF(),M4=O0(),DJ=M4.CastError,SX1=D1(),BJ=xD(),eW=/[0-9a-f]{8}-[0-9a-f]{4}-[0-9][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}/i,kX1=FC.Binary;Q0.schemaName="UUID";Q0.defaultOptions={};/*!
 * Inherits from SchemaType.
 */Q0.prototype=Object.create(M4.prototype);Q0.prototype.constructor=Q0;/*!
 * ignore
 */Q0._cast=function(F){if(F==null)return F;function A(B){const D=new FC(B);return D._subtype=4,D}if(typeof F==="string")if(eW.test(F))return f_(F);else throw new DJ(Q0.schemaName,F,this.path);if(Buffer.isBuffer(F))return A(F);if(F instanceof kX1)return A(F.value(!0));if(F.toString&&F.toString!==Object.prototype.toString){if(eW.test(F.toString()))return f_(F.toString())}throw new DJ(Q0.schemaName,F,this.path)};Q0.get=M4.get;Q0.set=M4.set;Q0.setters=[];Q0.cast=function F(A){if(arguments.length===0)return this._cast;if(A===!1)A=this._defaultCaster;return this._cast=A,this._cast};/*!
 * ignore
 */Q0._checkRequired=(F)=>F!=null;Q0.checkRequired=M4.checkRequired;Q0.prototype.checkRequired=function F(A){if(Buffer.isBuffer(A))A=__(A);return A!=null&&eW.test(A)};Q0.prototype.cast=function(F,A,B){if(SX1.isNonBuiltinObject(F)&&M4._isRef(this,F,A,B))return this._castRef(F,A,B);let D;if(typeof this._castFunction==="function")D=this._castFunction;else if(typeof this.constructor.cast==="function")D=this.constructor.cast();else D=Q0.cast();try{return D(F)}catch(J){throw new DJ(Q0.schemaName,F,this.path,J,this)}};/*!
 * ignore
 *//*!
 * ignore
 */Q0.prototype.$conditionalHandlers={...M4.prototype.$conditionalHandlers,$bitsAllClear:BJ,$bitsAnyClear:BJ,$bitsAllSet:BJ,$bitsAnySet:BJ,$all:oW,$gt:zF,$gte:zF,$in:oW,$lt:zF,$lte:zF,$ne:zF,$nin:oW};Q0.prototype.castForQuery=function(F,A,B){let D;if(F!=null){if(D=this.$conditionalHandlers[F],!D)throw new Error("Can\'t use "+F+" with UUID.");return D.call(this,A,B)}try{return this.applySetters(A,B)}catch(J){if(J instanceof DJ&&J.path===this.path&&this.$fullPath!=null)J.path=this.$fullPath;throw J}};/*!
 * Module exports.
 */g_.exports=Q0});var XF=z((_X1)=>{/*!
 * Module exports.
 */_X1.Array=bD();_X1.BigInt=Df();_X1.Boolean=Xf();_X1.Buffer=Wf();_X1.Date=Lf();_X1.Decimal128=_X1.Decimal=If();_X1.DocumentArray=q_();_X1.Map=L_();_X1.Mixed=K9();_X1.Number=LW();_X1.ObjectId=M_();_X1.String=x_();_X1.Subdocument=dW();_X1.UUID=b_();_X1.Oid=_X1.ObjectId;_X1.Object=_X1.Mixed;_X1.Bool=_X1.Boolean;_X1.ObjectID=_X1.ObjectId});var o7=z((ZC,r_)=>{var n=function(F,A){if(!(this instanceof n))return new n(F,A);if(this.obj=F,this.paths={},this.aliases={},this.subpaths={},this.virtuals={},this.singleNestedPaths={},this.nested={},this.inherits={},this.callQueue=[],this._indexes=[],this._searchIndexes=[],this.methods=A&&A.methods||{},this.methodOptions={},this.statics=A&&A.statics||{},this.tree={},this.query=A&&A.query||{},this.childSchemas=[],this.plugins=[],this.$id=++p_,this.mapPaths=[],this.s={hooks:new oX1},this.options=this.defaultOptions(A),Array.isArray(F))for(let J of F)this.add(J);else if(F)this.add(F);if(A&&A.virtuals){const J=A.virtuals,Z=Object.keys(J);for(let X of Z){const Y=J[X].options?J[X].options:void 0,$=this.virtual(X,Y);if(J[X].get)$.get(J[X].get);if(J[X].set)$.set(J[X].set)}}const B=F&&F._id&&a1.isObject(F._id);if(!this.paths._id&&this.options._id&&!B)d_(this);this.setupTimestamp(this.options.timestamps)},i_=function(F,A){for(let B of Object.keys(A)){let D=null;if(A[B]!=null)D=A[B];else{const Z=c_(F.paths[B],"options");if(Z==null)continue;D=Z.alias}if(!D)continue;const J=F.paths[B].path;if(Array.isArray(D)){for(let Z of D){if(typeof Z!=="string")throw new Error("Invalid value for alias option on "+J+", got "+Z);F.aliases[Z]=J,F.virtual(Z).get(function(X){return function(){if(typeof this.get==="function")return this.get(X);return this[X]}}(J)).set(function(X){return function(Y){return this.$set(X,Y)}}(J))}continue}if(typeof D!=="string")throw new Error("Invalid value for alias option on "+J+", got "+D);F.aliases[D]=J,F.virtual(D).get(function(Z){return function(){if(typeof this.get==="function")return this.get(Z);return this[Z]}}(J)).set(function(Z){return function(X){return this.$set(Z,X)}}(J))}},CY1=function(F){const A=[];for(let B of Object.keys(F.paths)){const D=F.paths[B];if(D.$isMongooseDocumentArray||D.$isSingleNested)A.push({schema:D.schema,model:D.caster})}return A},HY1=function(F,A,B){if(F.paths.hasOwnProperty(A))return F.paths[A];if(F.subpaths.hasOwnProperty(B)){const D=F.subpaths[B];if(D==="nested")return;return D}if(F.singleNestedPaths.hasOwnProperty(B)&&typeof F.singleNestedPaths[B]==="object"){const D=F.singleNestedPaths[B];if(D==="nested")return;return D}return null},n_=function(F){if(!/\.\d+/.test(F))return F;return F.replace(/\.\d+\./g,".$.").replace(/\.\d+$/,".$")},s_=function(F,A){if(F.mapPaths.length===0)return null;for(let B of F.mapPaths){const D=B.path;if(new RegExp("^"+D.replace(/\.\$\*/g,"\\.[^.]+")+"$").test(A))return F.paths[D]}return null},qY1=function(F,A,B,D,J){const Z=B+".$*";let X={type:{}};if(a1.hasUserDefinedProperty(D,"of")){if(a1.isPOJO(D.of)&&Object.keys(D.of).length>0&&!a1.hasUserDefinedProperty(D.of,F.options.typeKey))X={[F.options.typeKey]:new n(D.of)};else if(a1.isPOJO(D.of))X=Object.assign({},D.of);else X={[F.options.typeKey]:D.of};if(X[F.options.typeKey]&&X[F.options.typeKey].instanceOfSchema)X[F.options.typeKey].eachPath((G,E)=>{if(E.options.select===!0||E.options.select===!1)throw new P9('Cannot use schema-level projections (`select: true` or `select: false`) within maps at path "'+B+"."+G+'"')});if(a1.hasUserDefinedProperty(D,"ref"))X.ref=D.ref}A.$__schemaType=F.interpretAsType(Z,X,J)},a_=function(F,A,B){const D=A.split(/\.(\d+)\.|\.(\d+)$/).filter(Boolean);if(D.length<2)return F.paths.hasOwnProperty(D[0])?F.paths[D[0]]:"adhocOrUndefined";let J=F.path(D[0]),Z=!1;if(!J)return"adhocOrUndefined";const X=D.length-1;for(let Y=1;Y<D.length;++Y){Z=!1;const $=D[Y];if(Y===X&&J&&!/\D/.test($)){if(J.$isMongooseDocumentArray)J=J.$embeddedSchemaType;else if(J instanceof T4.Array)J=J.caster;else J=void 0;break}if(!/\D/.test($)){if(J instanceof T4.Array&&Y!==X)J=J.caster;continue}if(!(J&&J.schema)){J=void 0;break}Z=J.schema.pathType($)==="nested",J=J.schema.path($)}if(F.subpaths[B]=J,J)return"real";if(Z)return"nested";return"adhocOrUndefined"},KY1=function(F,A,B){return a_(F,A,B),F.subpaths[B]},UF=function(F,A){for(let{schema:B}of F.childSchemas){if(!B.$implicitlyCreated)continue;Object.assign(B.options,A),UF(B,A)}},DC=function(F,A){const B=A.split("."),D=B.pop();let J=F.tree;for(let Z of B)J=J[Z];delete J[D]},ZJ=function(F){return F.startsWith("$[")&&F.endsWith("]")};/*!
 * Module dependencies.
 */var tX1=import.meta.require("events").EventEmitter,oX1=h7(),P9=H1(),h_=O0(),m_=s2(),eX1=fk(),JC=tE(),d_=oE(),H2=J0(),c_=t1(),FY1=T2(),AY1=ik(),XJ=AW(),BY1=ak(),DY1=eB(),JJ=h6(),JY1=tk(),ZY1=Yx(),a1=D1(),XY1=Gx(),YY1=import.meta.require("util"),$Y1=/\.\d+(\.|$)/,T4,GY1=TD().queryMiddlewareFunctions,EY1=jD().middlewareFunctions,l_=GY1.concat(EY1).reduce((F,A)=>F.add(A),new Set),BC=a1.isPOJO,p_=0,WY1=/^\d+$/;/*!
 * Inherit from EventEmitter.
 */n.prototype=Object.create(tX1.prototype);n.prototype.constructor=n;n.prototype.instanceOfSchema=!0;/*!
 * ignore
 */Object.defineProperty(n.prototype,"$schemaType",{configurable:!1,enumerable:!1,writable:!0});Object.defineProperty(n.prototype,"childSchemas",{configurable:!1,enumerable:!0,writable:!0});Object.defineProperty(n.prototype,"virtuals",{configurable:!1,enumerable:!0,writable:!0});n.prototype.obj;n.prototype.paths;n.prototype.tree;n.prototype.clone=function(){const F=this._clone();return F.on("init",(A)=>this.emit("init",A)),F};/*!
 * ignore
 */n.prototype._clone=function F(A){A=A||(this.base==null?n:this.base.Schema);const B=new A({},this._userProvidedOptions);B.base=this.base,B.obj=this.obj,B.options=H2(this.options),B.callQueue=this.callQueue.map(function(D){return D}),B.methods=H2(this.methods),B.methodOptions=H2(this.methodOptions),B.statics=H2(this.statics),B.query=H2(this.query),B.plugins=Array.prototype.slice.call(this.plugins),B._indexes=H2(this._indexes),B._searchIndexes=H2(this._searchIndexes),B.s.hooks=this.s.hooks.clone(),B.tree=H2(this.tree),B.paths=Object.fromEntries(Object.entries(this.paths).map(([D,J])=>[D,J.clone()])),B.nested=H2(this.nested),B.subpaths=H2(this.subpaths);for(let D of Object.values(B.paths))if(D.$isSingleNested){const J=D.path;for(let Z of Object.keys(D.schema.paths))B.singleNestedPaths[J+"."+Z]=D.schema.paths[Z];for(let Z of Object.keys(D.schema.singleNestedPaths))B.singleNestedPaths[J+"."+Z]=D.schema.singleNestedPaths[Z];for(let Z of Object.keys(D.schema.subpaths))B.singleNestedPaths[J+"."+Z]=D.schema.subpaths[Z];for(let Z of Object.keys(D.schema.nested))B.singleNestedPaths[J+"."+Z]="nested"}if(B.childSchemas=CY1(B),B.virtuals=H2(this.virtuals),B.$globalPluginsApplied=this.$globalPluginsApplied,B.$isRootDiscriminator=this.$isRootDiscriminator,B.$implicitlyCreated=this.$implicitlyCreated,B.$id=++p_,B.$originalSchemaId=this.$id,B.mapPaths=[].concat(this.mapPaths),this.discriminatorMapping!=null)B.discriminatorMapping=Object.assign({},this.discriminatorMapping);if(this.discriminators!=null)B.discriminators=Object.assign({},this.discriminators);if(this._applyDiscriminators!=null)B._applyDiscriminators=new Map(this._applyDiscriminators);return B.aliases=Object.assign({},this.aliases),B};n.prototype.pick=function(F,A){const B=new n({},A||this.options);if(!Array.isArray(F))throw new P9('Schema#pick() only accepts an array argument, got "'+typeof F+'"');for(let D of F)if(this.nested[D])B.add({[D]:c_(this.tree,D)});else{const J=this.path(D);if(J==null)throw new P9("Path `"+D+"` is not in the schema");B.add({[D]:J})}return B};n.prototype.omit=function(F,A){const B=new n(this,A||this.options);if(!Array.isArray(F))throw new P9('Schema#omit() only accepts an array argument, got "'+typeof F+'"');B.remove(F);for(let D in B.singleNestedPaths)if(F.includes(D))delete B.singleNestedPaths[D];return B};n.prototype.defaultOptions=function(F){this._userProvidedOptions=F==null?{}:H2(F);const A=this.base&&this.base.options||{},B="strict"in A?A.strict:!0,D="strictQuery"in A?A.strictQuery:!1,J="id"in A?A.id:!0;if(F={strict:B,strictQuery:D,bufferCommands:!0,capped:!1,versionKey:"__v",optimisticConcurrency:!1,minimize:!0,autoIndex:null,discriminatorKey:"__t",shardKey:null,read:null,validateBeforeSave:!0,validateModifiedOnly:!1,_id:!0,id:J,typeKey:"type",...F},F.versionKey&&typeof F.versionKey!=="string")throw new P9("`versionKey` must be falsy or string, got `"+typeof F.versionKey+"`");if(typeof F.read==="string")F.read=XJ(F.read);else if(Array.isArray(F.read)&&typeof F.read[0]==="string")F.read={mode:XJ(F.read[0]),tags:F.read[1]};if(F.optimisticConcurrency&&!F.versionKey)throw new P9("Must set `versionKey` if using `optimisticConcurrency`");return F};n.prototype.discriminator=function(F,A,B){return this._applyDiscriminators=this._applyDiscriminators||new Map,this._applyDiscriminators.set(F,{schema:A,options:B}),this};n.prototype.add=function F(A,B){if(A instanceof n||A!=null&&A.instanceOfSchema)return DY1(this,A),this;if(A._id===!1&&B==null)this.options._id=!1;if(B=B||"",B==="__proto__."||B==="constructor."||B==="prototype.")return this;const D=Object.keys(A),J=this.options.typeKey;for(let X of D){if(a1.specialProperties.has(X))continue;const Y=B+X,$=A[X];if($==null)throw new TypeError("Invalid value for schema path `"+Y+'`, got value "'+$+'"');if(X==="_id"&&$===!1)continue;let G=!1;if(typeof $==="string"){const E=this.base!=null?this.base.Schema.Types:n.Types,W=$.charAt(0).toUpperCase()+$.substring(1);G=E[W]!=null}if(X!=="_id"&&(typeof $!=="object"&&typeof $!=="function"&&!G||$==null))throw new TypeError(`Invalid schema configuration: \`${$}\` is not a valid type at path \`${X}\`. See https://bit.ly/mongoose-schematypes for a list of valid schema types.`);if($ instanceof JC||($.constructor&&$.constructor.name||null)==="VirtualType"){this.virtual($);continue}if(Array.isArray($)&&$.length===1&&$[0]==null)throw new TypeError("Invalid value for schema Array path `"+Y+'`, got value "'+$[0]+'"');if(!(BC($)||$ instanceof m_)){if(B)this.nested[B.substring(0,B.length-1)]=!0;if(this.path(B+X,$),$[0]!=null&&!$[0].instanceOfSchema&&a1.isPOJO($[0].discriminators)){const E=this.path(B+X);for(let W in $[0].discriminators)E.discriminator(W,$[0].discriminators[W])}}else if(Object.keys($).length<1){if(B)this.nested[B.substring(0,B.length-1)]=!0;this.path(Y,$)}else if(!$[J]||J==="type"&&BC($.type)&&$.type.type)this.nested[Y]=!0,this.add($,Y+".");else{const E=$[J];if(BC(E)&&Object.keys(E).length>0){if(B)this.nested[B.substring(0,B.length-1)]=!0;const W={};if(this._userProvidedOptions.typeKey)W.typeKey=this._userProvidedOptions.typeKey;if(this._userProvidedOptions.strict!=null)W.strict=this._userProvidedOptions.strict;if(this._userProvidedOptions.toObject!=null)W.toObject=a1.omit(this._userProvidedOptions.toObject,["transform"]);if(this._userProvidedOptions.toJSON!=null)W.toJSON=a1.omit(this._userProvidedOptions.toJSON,["transform"]);const C=new n(E,W);C.$implicitlyCreated=!0;const H=Object.assign({},$,{[J]:C});this.path(B+X,H)}else{if(B)this.nested[B.substring(0,B.length-1)]=!0;if(this.path(B+X,$),$!=null&&!$.instanceOfSchema&&a1.isPOJO($.discriminators)){const W=this.path(B+X);for(let C in $.discriminators)W.discriminator(C,$.discriminators[C])}}}}const Z=Object.fromEntries(Object.entries(A).map(([X])=>[B+X,null]));return i_(this,Z),this};n.prototype.alias=function A(F,A){return i_(this,{[F]:A}),this};n.prototype.removeIndex=function F(A){if(arguments.length>1)throw new Error("removeIndex() takes only 1 argument");if(typeof A!=="object"&&typeof A!=="string")throw new Error("removeIndex() may only take either an object or a string as an argument");if(typeof A==="object"){for(let B=this._indexes.length-1;B>=0;--B)if(YY1.isDeepStrictEqual(this._indexes[B][0],A))this._indexes.splice(B,1)}else for(let B=this._indexes.length-1;B>=0;--B)if(this._indexes[B][1]!=null&&this._indexes[B][1].name===A)this._indexes.splice(B,1);return this};n.prototype.clearIndexes=function F(){return this._indexes.length=0,this};n.prototype.searchIndex=function F(A){return this._searchIndexes.push(A),this};n.reserved=Object.create(null);n.prototype.reserved=n.reserved;var l0=n.reserved;l0.prototype=l0.emit=l0.listeners=l0.removeListener=l0.collection=l0.errors=l0.get=l0.init=l0.isModified=l0.isNew=l0.populated=l0.remove=l0.save=l0.toObject=l0.validate=1;l0.collection=1;n.prototype.path=function(F,A){if(A===void 0){if(this.paths[F]!=null)return this.paths[F];const $=n_(F);let G=HY1(this,F,$);if(G!=null)return G;const E=s_(this,F);if(E!=null)return E;if(G=this.hasMixedParent($),G!=null)return G;return $Y1.test(F)?KY1(this,F,$):void 0}const B=F.split(".")[0];if(l0[B]&&!this.options.suppressReservedKeysWarning){const $=`\`${B}\` is a reserved schema pathname and may break some functionality. You are allowed to use it, but use at your own risk. To disable this warning pass \`suppressReservedKeysWarning\` as a schema option.`;a1.warn($)}if(typeof A==="object"&&a1.hasUserDefinedProperty(A,"ref"))XY1(A.ref,F);const D=F.split(/\./),J=D.pop();let Z=this.tree,X="";for(let $ of D){if(a1.specialProperties.has($))throw new Error("Cannot set special property `"+$+"` on a schema");if(X=X+=(X.length>0?".":"")+$,!Z[$])this.nested[X]=!0,Z[$]={};if(typeof Z[$]!=="object"){const G="Cannot set nested path `"+F+"`. Parent path `"+X+"` already set to type "+Z[$].name+".";throw new Error(G)}Z=Z[$]}Z[J]=H2(A),this.paths[F]=this.interpretAsType(F,A,this.options);const Y=this.paths[F];if(Y.$isSchemaMap){const $=F+".$*";this.paths[$]=Y.$__schemaType,this.mapPaths.push(this.paths[$])}if(Y.$isSingleNested){for(let $ of Object.keys(Y.schema.paths))this.singleNestedPaths[F+"."+$]=Y.schema.paths[$];for(let $ of Object.keys(Y.schema.singleNestedPaths))this.singleNestedPaths[F+"."+$]=Y.schema.singleNestedPaths[$];for(let $ of Object.keys(Y.schema.subpaths))this.singleNestedPaths[F+"."+$]=Y.schema.subpaths[$];for(let $ of Object.keys(Y.schema.nested))this.singleNestedPaths[F+"."+$]="nested";Object.defineProperty(Y.schema,"base",{configurable:!0,enumerable:!1,writable:!1,value:this.base}),Y.caster.base=this.base,this.childSchemas.push({schema:Y.schema,model:Y.caster})}else if(Y.$isMongooseDocumentArray)Object.defineProperty(Y.schema,"base",{configurable:!0,enumerable:!1,writable:!1,value:this.base}),Y.casterConstructor.base=this.base,this.childSchemas.push({schema:Y.schema,model:Y.casterConstructor});if(Y.$isMongooseArray&&Y.caster instanceof h_){let $=F,G=Y;const E=[];while(G.$isMongooseArray){if($=$+".$",G.$isMongooseDocumentArray)G.$embeddedSchemaType._arrayPath=$,G.$embeddedSchemaType._arrayParentPath=F,G=G.$embeddedSchemaType;else G.caster._arrayPath=$,G.caster._arrayParentPath=F,G=G.caster;this.subpaths[$]=G}for(let W of E)this.subpaths[W.path]=W}if(Y.$isMongooseDocumentArray){for(let $ of Object.keys(Y.schema.paths)){const G=Y.schema.paths[$];if(this.subpaths[F+"."+$]=G,typeof G==="object"&&G!=null&&G.$parentSchemaDocArray==null)G.$parentSchemaDocArray=Y}for(let $ of Object.keys(Y.schema.subpaths)){const G=Y.schema.subpaths[$];if(this.subpaths[F+"."+$]=G,typeof G==="object"&&G!=null&&G.$parentSchemaDocArray==null)G.$parentSchemaDocArray=Y}for(let $ of Object.keys(Y.schema.singleNestedPaths)){const G=Y.schema.singleNestedPaths[$];if(this.subpaths[F+"."+$]=G,typeof G==="object"&&G!=null&&G.$parentSchemaDocArray==null)G.$parentSchemaDocArray=Y}}return this};/*!
 * ignore
 *//*!
 * ignore
 *//*!
 * ignore
 *//*!
 * ignore
 */Object.defineProperty(n.prototype,"base",{configurable:!0,enumerable:!1,writable:!0,value:null});n.prototype.interpretAsType=function(F,A,B){if(A instanceof h_){if(A.path===F)return A;const $=A.clone();return $.path=F,$}const D=this.base!=null?this.base.Schema.Types:n.Types,J=this.base!=null?this.base.Types:A8();if(!a1.isPOJO(A)&&!(A instanceof m_)){if(a1.getFunctionName(A.constructor)!=="Object"){const G=A;A={},A[B.typeKey]=G}}let Z=A[B.typeKey]&&(A[B.typeKey]instanceof Function||B.typeKey!=="type"||!A.type.type)?A[B.typeKey]:{},X;if(a1.isPOJO(Z)||Z==="mixed")return new D.Mixed(F,A);if(Array.isArray(Z)||Z===Array||Z==="array"||Z===D.Array){let $=Z===Array||Z==="array"?A.cast||A.of:Z[0];if($&&$.instanceOfSchema){if(!($ instanceof n))if(this.options._isMerging)$=new n($);else throw new TypeError("Schema for array path `"+F+`\` is from a different copy of the Mongoose module. Please make sure you\'re using the same version of Mongoose everywhere with \`npm list mongoose\`. If you are still getting this error, please add \`new Schema()\` around the path: ${F}: new Schema(...)`);return new D.DocumentArray(F,$,A)}if($&&$[B.typeKey]&&$[B.typeKey].instanceOfSchema){if(!($[B.typeKey]instanceof n))if(this.options._isMerging)$[B.typeKey]=new n($[B.typeKey]);else throw new TypeError("Schema for array path `"+F+`\` is from a different copy of the Mongoose module. Please make sure you\'re using the same version of Mongoose everywhere with \`npm list mongoose\`. If you are still getting this error, please add \`new Schema()\` around the path: ${F}: new Schema(...)`);return new D.DocumentArray(F,$[B.typeKey],A,$)}if(typeof $!=="undefined"){if(Array.isArray($)||$.type===Array||$.type=="Array"){if($&&$.type=="Array")$.type=Array;return new D.Array(F,this.interpretAsType(F,$,B),A)}}const G=$!=null&&$[B.typeKey]&&(B.typeKey!=="type"||!$.type.type)?$[B.typeKey]:$;if(typeof $==="string")$=D[$.charAt(0).toUpperCase()+$.substring(1)];else if(a1.isPOJO(G))if(Object.keys(G).length){const E={minimize:B.minimize};if(B.typeKey)E.typeKey=B.typeKey;if(B.hasOwnProperty("strict"))E.strict=B.strict;if(B.hasOwnProperty("strictQuery"))E.strictQuery=B.strictQuery;if(B.hasOwnProperty("toObject"))E.toObject=a1.omit(B.toObject,["transform"]);if(B.hasOwnProperty("toJSON"))E.toJSON=a1.omit(B.toJSON,["transform"]);if(this._userProvidedOptions.hasOwnProperty("_id"))E._id=this._userProvidedOptions._id;else if(n.Types.DocumentArray.defaultOptions._id!=null)E._id=n.Types.DocumentArray.defaultOptions._id;const W=new n(G,E);return W.$implicitlyCreated=!0,new D.DocumentArray(F,W,A)}else return new D.Array(F,D.Mixed,A);if($){if(Z=$[B.typeKey]&&(B.typeKey!=="type"||!$.type.type)?$[B.typeKey]:$,Array.isArray(Z))return new D.Array(F,this.interpretAsType(F,Z,B),A);if(X=typeof Z==="string"?Z:Z.schemaName||a1.getFunctionName(Z),X==="ClockDate")X="Date";if(X===void 0)throw new TypeError(`Invalid schema configuration: Could not determine the embedded type for array \`${F}\`. See https://mongoosejs.com/docs/guide.html#definition for more info on supported schema syntaxes.`);if(!D.hasOwnProperty(X))throw new TypeError(`Invalid schema configuration: \`${X}\` is not a valid type within the array \`${F}\`.See https://bit.ly/mongoose-schematypes for a list of valid schema types.`)}return new D.Array(F,$||D.Mixed,A,B)}if(Z&&Z.instanceOfSchema)return new D.Subdocument(Z,F,A);if(Buffer.isBuffer(Z))X="Buffer";else if(typeof Z==="function"||typeof Z==="object")X=Z.schemaName||a1.getFunctionName(Z);else if(Z===J.ObjectId)X="ObjectId";else if(Z===J.Decimal128)X="Decimal128";else X=Z==null?""+Z:Z.toString();if(X)X=X.charAt(0).toUpperCase()+X.substring(1);if(X==="ObjectID")X="ObjectId";if(X==="ClockDate")X="Date";if(X===void 0)throw new TypeError(`Invalid schema configuration: \`${F}\` schematype definition is invalid. See https://mongoosejs.com/docs/guide.html#definition for more info on supported schema syntaxes.`);if(D[X]==null)throw new TypeError(`Invalid schema configuration: \`${X}\` is not a valid type at path \`${F}\`. See https://bit.ly/mongoose-schematypes for a list of valid schema types.`);const Y=new D[X](F,A);if(Y.$isSchemaMap)qY1(this,Y,F,A,B);return Y};/*!
 * ignore
 */n.prototype.eachPath=function(F){const A=Object.keys(this.paths),B=A.length;for(let D=0;D<B;++D)F(A[D],this.paths[A[D]]);return this};n.prototype.requiredPaths=function F(A){if(this._requiredpaths&&!A)return this._requiredpaths;const B=Object.keys(this.paths);let D=B.length;const J=[];while(D--){const Z=B[D];if(this.paths[Z].isRequired)J.push(Z)}return this._requiredpaths=J,this._requiredpaths};n.prototype.indexedPaths=function F(){if(this._indexedpaths)return this._indexedpaths;return this._indexedpaths=this.indexes(),this._indexedpaths};n.prototype.pathType=function(F){if(this.paths.hasOwnProperty(F))return"real";if(this.virtuals.hasOwnProperty(F))return"virtual";if(this.nested.hasOwnProperty(F))return"nested";const A=n_(F);if(this.subpaths.hasOwnProperty(A)||this.subpaths.hasOwnProperty(F))return"real";const B=this.singleNestedPaths.hasOwnProperty(A)||this.singleNestedPaths.hasOwnProperty(F);if(B)return B==="nested"?"nested":"real";if(s_(this,F)!=null)return"real";if(/\.\d+\.|\.\d+$/.test(F))return a_(this,F,A);return"adhocOrUndefined"};n.prototype.hasMixedParent=function(F){const A=F.split(/\./g);F="";for(let B=0;B<A.length;++B)if(F=B>0?F+"."+A[B]:A[B],this.paths.hasOwnProperty(F)&&this.paths[F]instanceof T4.Mixed)return this.paths[F];return null};n.prototype.setupTimestamp=function(F){return ZY1(this,F)};/*!
 * ignore
 */n.prototype.queue=function(F,A){return this.callQueue.push([F,A]),this};n.prototype.pre=function(F){if(F instanceof RegExp){const A=Array.prototype.slice.call(arguments,1);for(let B of l_)if(F.test(B))this.pre.apply(this,[B].concat(A));return this}if(Array.isArray(F)){const A=Array.prototype.slice.call(arguments,1);for(let B of F)this.pre.apply(this,[B].concat(A));return this}return this.s.hooks.pre.apply(this.s.hooks,arguments),this};n.prototype.post=function(F){if(F instanceof RegExp){const A=Array.prototype.slice.call(arguments,1);for(let B of l_)if(F.test(B))this.post.apply(this,[B].concat(A));return this}if(Array.isArray(F)){const A=Array.prototype.slice.call(arguments,1);for(let B of F)this.post.apply(this,[B].concat(A));return this}return this.s.hooks.post.apply(this.s.hooks,arguments),this};n.prototype.plugin=function(F,A){if(typeof F!=="function")throw new Error('First param to `schema.plugin()` must be a function, got "'+typeof F+'"');if(A&&A.deduplicate){for(let B of this.plugins)if(B.fn===F)return this}return this.plugins.push({fn:F,opts:A}),F(this,A),this};n.prototype.method=function(F,A,B){if(typeof F!=="string")for(let D in F)this.methods[D]=F[D],this.methodOptions[D]=H2(B);else this.methods[F]=A,this.methodOptions[F]=H2(B);return this};n.prototype.static=function(F,A){if(typeof F!=="string")for(let B in F)this.statics[B]=F[B];else this.statics[F]=A;return this};n.prototype.index=function(F,A){if(F||(F={}),A||(A={}),A.expires)a1.expires(A);for(let B in F)if(this.aliases[B])F=a1.renameObjKey(F,B,this.aliases[B]);for(let B of Object.keys(F))if(F[B]==="ascending"||F[B]==="asc")F[B]=1;else if(F[B]==="descending"||F[B]==="desc")F[B]=-1;return this._indexes.push([F,A]),this};n.prototype.set=function(F,A,B){if(arguments.length===1)return this.options[F];switch(F){case"read":if(typeof A==="string")this.options[F]={mode:XJ(A),tags:B};else if(Array.isArray(A)&&typeof A[0]==="string")this.options[F]={mode:XJ(A[0]),tags:A[1]};else this.options[F]=A;this._userProvidedOptions[F]=this.options[F];break;case"timestamps":this.setupTimestamp(A),this.options[F]=A,this._userProvidedOptions[F]=this.options[F];break;case"_id":if(this.options[F]=A,this._userProvidedOptions[F]=this.options[F],A&&!this.paths._id)d_(this);else if(!A&&this.paths._id!=null&&this.paths._id.auto)this.remove("_id");break;default:this.options[F]=A,this._userProvidedOptions[F]=this.options[F];break}if(F==="strict")UF(this,{strict:A});if(F==="strictQuery")UF(this,{strictQuery:A});if(F==="toObject")A={...A},delete A.transform,UF(this,{toObject:A});if(F==="toJSON")A={...A},delete A.transform,UF(this,{toJSON:A});return this};/*!
 * Recursively set options on implicitly created schemas
 */n.prototype.get=function(F){return this.options[F]};var zY1="2d 2dsphere hashed text".split(" ");Object.defineProperty(n,"indexTypes",{get:function(){return zY1},set:function(){throw new Error("Cannot overwrite Schema.indexTypes")}});n.prototype.indexes=function(){return AY1(this)};n.prototype.virtual=function(F,A){if(F instanceof JC||FY1(F)==="VirtualType")return this.virtual(F.path,F.options);if(A=new eX1(A),a1.hasUserDefinedProperty(A,["ref","refPath"])){if(A.localField==null)throw new Error("Reference virtuals require `localField` option");if(A.foreignField==null)throw new Error("Reference virtuals require `foreignField` option");const J=this.virtual(F);if(J.options=A,this.pre("init",function Y($,G){if(JJ.has(F,$)){const E=JJ.get(F,$);if(!this.$$populatedVirtuals)this.$$populatedVirtuals={};if(A.justOne||A.count)this.$$populatedVirtuals[F]=Array.isArray(E)?E[0]:E;else this.$$populatedVirtuals[F]=Array.isArray(E)?E:E==null?[]:[E];if(G?.hydratedPopulatedDocs&&!A.count){const W=J._getModelNamesForPopulate(this),C=this.$$populatedVirtuals[F];if(!Array.isArray(C)&&!C.$__&&W?.length===1){const H=this.db.model(W[0]);this.$$populatedVirtuals[F]=H.hydrate(C)}else if(Array.isArray(C)&&W?.length===1){const H=this.db.model(W[0]);for(let q=0;q<C.length;++q)if(!C[q].$__)C[q]=H.hydrate(C[q])}}JJ.unset(F,$)}}),J.set(function(Y){if(!this.$$populatedVirtuals)this.$$populatedVirtuals={};return JY1(this.$$populatedVirtuals,F,Y,A)}),typeof A.get==="function")J.get(A.get);const Z=F.split(".");let X=Z[0];for(let Y=0;Y<Z.length-1;++Y){if(this.paths[X]==null)continue;if(this.paths[X].$isMongooseDocumentArray||this.paths[X].$isSingleNested){const $=Z.slice(Y+1).join(".");this.paths[X].schema.virtual($,A);break}X+="."+Z[Y+1]}return J}const B=this.virtuals,D=F.split(".");if(this.pathType(F)==="real")throw new Error('Virtual path "'+F+'" conflicts with a real path in the schema');return B[F]=D.reduce(function(J,Z,X){return J[Z]||(J[Z]=X===D.length-1?new JC(A,F):{}),J[Z]},this.tree),B[F]};n.prototype.virtualpath=function(F){return this.virtuals.hasOwnProperty(F)?this.virtuals[F]:null};n.prototype.remove=function(F){if(typeof F==="string")F=[F];if(Array.isArray(F))F.forEach(function(A){if(this.path(A)==null&&!this.nested[A])return;if(this.nested[A]){const B=Object.keys(this.paths).concat(Object.keys(this.nested));for(let D of B)if(D.startsWith(A+"."))delete this.paths[D],delete this.nested[D],DC(this,D);delete this.nested[A],DC(this,A);return}delete this.paths[A],DC(this,A)},this);return this};/*!
 * ignore
 */n.prototype.removeVirtual=function(F){if(typeof F==="string")F=[F];if(Array.isArray(F)){for(let A of F)if(this.virtuals[A]==null)throw new P9(`Attempting to remove virtual "${A}" that does not exist.`);for(let A of F)if(delete this.paths[A],delete this.virtuals[A],A.indexOf(".")!==-1)JJ.unset(A,this.tree);else delete this.tree[A]}return this};n.prototype.loadClass=function(F,A){if(F===Object.prototype||F===Function.prototype||F.prototype.hasOwnProperty("$isMongooseModelPrototype")||F.prototype.hasOwnProperty("$isMongooseDocumentPrototype"))return this;if(this.loadClass(Object.getPrototypeOf(F),A),!A)Object.getOwnPropertyNames(F).forEach(function(B){if(B.match(/^(length|name|prototype|constructor|__proto__)$/))return;const D=Object.getOwnPropertyDescriptor(F,B);if(D.hasOwnProperty("value"))this.static(B,D.value)},this);return Object.getOwnPropertyNames(F.prototype).forEach(function(B){if(B.match(/^(constructor)$/))return;const D=Object.getOwnPropertyDescriptor(F.prototype,B);if(!A){if(typeof D.value==="function")this.method(B,D.value)}if(typeof D.get==="function"){if(this.virtuals[B])this.virtuals[B].getters=[];this.virtual(B).get(D.get)}if(typeof D.set==="function"){if(this.virtuals[B])this.virtuals[B].setters=[];this.virtual(B).set(D.set)}},this),this};/*!
 * ignore
 */n.prototype._getSchema=function(F){const A=this,B=A.path(F),D=[];if(B)return B.$fullPath=F,B;function J(X,Y){let $=X.length+1,G,E;while($--)if(E=X.slice(0,$).join("."),G=Y.path(E),G){if(D.push(E),G.caster){if(G.caster instanceof T4.Mixed)return G.caster.$fullPath=D.join("."),G.caster;if($!==X.length){if($+1===X.length&&G.$embeddedSchemaType&&(X[$]==="$"||ZJ(X[$])))return G.$embeddedSchemaType;if(G.schema){let W;if(X[$]==="$"||ZJ(X[$])){if($+1===X.length)return G.$embeddedSchemaType;if(W=J(X.slice($+1),G.schema),W)W.$parentSchemaDocArray=W.$parentSchemaDocArray||(G.schema.$isSingleNested?null:G);return W}if(W=J(X.slice($),G.schema),W)W.$parentSchemaDocArray=W.$parentSchemaDocArray||(G.schema.$isSingleNested?null:G);return W}}}else if(G.$isSchemaMap){if($>=X.length)return G;if($+1>=X.length)return G.$__schemaType;if(G.$__schemaType instanceof T4.Mixed)return G.$__schemaType;if(G.$__schemaType.schema!=null)return J(X.slice($+1),G.$__schemaType.schema)}return G.$fullPath=D.join("."),G}}const Z=F.split(".");for(let X=0;X<Z.length;++X){if(Z[X]==="$"||ZJ(Z[X]))Z[X]="0";if(WY1.test(Z[X]))Z[X]="$"}return J(Z,A)};/*!
 * ignore
 */n.prototype._getPathType=function(F){const A=this;if(A.path(F))return"real";function D(J,Z){let X=J.length+1,Y,$;while(X--)if($=J.slice(0,X).join("."),Y=Z.path($),Y){if(Y.caster){if(Y.caster instanceof T4.Mixed)return{schema:Y,pathType:"mixed"};if(X!==J.length&&Y.schema){if(J[X]==="$"||ZJ(J[X])){if(X===J.length-1)return{schema:Y,pathType:"nested"};return D(J.slice(X+1),Y.schema)}return D(J.slice(X),Y.schema)}return{schema:Y,pathType:Y.$isSingleNested?"nested":"array"}}return{schema:Y,pathType:"real"}}else if(X===J.length&&Z.nested[$])return{schema:Z,pathType:"nested"};return{schema:Y||Z,pathType:"undefined"}}return D(F.split("."),A)};/*!
 * ignore
 */n.prototype._preCompile=function F(){this.plugin(BY1,{deduplicate:!0})};/*!
 * Module exports.
 */r_.exports=ZC=n;n.Types=T4=XF();/*!
 * ignore
 */ZC.ObjectId=T4.ObjectId});var o_=z((Ww1,t_)=>{/*!
 * Module dependencies.
 */var UY1=H1();class XC extends UY1{constructor(F,A){super(F);this.errors=A}}Object.defineProperty(XC.prototype,"name",{value:"SyncIndexesError"});t_.exports=XC});var YC=z((Cw1,e_)=>{e_.exports=function F(A,B,D,J){if(A[J])return;if(A[J]=!0,!D||!D.skipTopLevel){let $=null;for(let G of B){const E=G[1]==null?null:G[1].tags;if(!Array.isArray(E)){A.plugin(G[0],G[1]);continue}if($=$||new Set(A.options.pluginTags||[]),!E.find((W)=>$.has(W)))continue;A.plugin(G[0],G[1])}}if(D=Object.assign({},D),delete D.skipTopLevel,D.applyPluginsToChildSchemas!==!1)for(let $ of Object.keys(A.paths)){const G=A.paths[$];if(G.schema!=null)F(G.schema,B,D,J),G.caster.prototype.$__setSchema(G.schema)}const Z=A.discriminators;if(Z==null)return;const X=D.applyPluginsToDiscriminators,Y=Object.keys(Z);for(let $ of Y){const G=Z[$];F(G,B,{skipTopLevel:!X},J)}}});var YJ=z((QY1,$C)=>{/*!
 * ignore
 */var Fg=null;QY1.get=function(){return Fg};QY1.set=function(F){Fg=F}});var Bg=z((Hw1,Ag)=>{var wY1=H1();class GC extends wY1{constructor(F,A){super(F);this.errors=A}}Object.defineProperty(GC.prototype,"name",{value:"CreateCollectionsError"});Ag.exports=GC});var Xg=z((qw1,Zg)=>{var e=function(F){if(this.base=F,this.collections={},this.models={},this.config={},this.replica=!1,this.options=null,this.otherDbs=[],this.relatedDbs={},this.states=P0,this._readyState=P0.disconnected,this._closeCalled=!1,this._hasOpened=!1,this.plugins=[],typeof F==="undefined"||!F.connections.length)this.id=0;else this.id=F.nextConnectionId;this._queue=[]};async function xY1(F,A,B){try{return B.transactionAsyncLocalStorage==null?await F(A):await new Promise((J)=>{B.transactionAsyncLocalStorage.run({session:A},()=>J(F(A)))})}catch(D){throw fY1(A),D}}var fY1=function(F){for(let A of F[QF].keys()){const B=F[QF].get(A);if(B.hasOwnProperty("isNew"))A.$isNew=B.isNew;if(B.hasOwnProperty("versionKey"))A.set(A.schema.options.versionKey,B.versionKey);if(B.modifiedPaths.length>0&&A.$__.activePaths.states.modify==null)A.$__.activePaths.states.modify={};for(let D of B.modifiedPaths){const J=A.$__.activePaths.paths[D];if(J!=null)delete A.$__.activePaths[J][D];A.$__.activePaths.paths[D]="modify",A.$__.activePaths.states.modify[D]=!0}for(let D of B.atomics.keys()){const J=A.$__getValue(D);if(J==null)continue;J[SY1]=B.atomics.get(D)}}},_Y1=function(F,A,B){if(typeof A==="function"&&B==null)throw new q2("Connection.prototype.openUri() no longer accepts a callback");else if(typeof B==="function")throw new q2("Connection.prototype.openUri() no longer accepts a callback")},Jg=function(F){if(F?.name==="MongoServerSelectionError"){const A=F;F=new NY1,F.assimilateError(A)}return F};/*!
 * Module dependencies.
 */var RY1=gG(),EC=import.meta.require("events").EventEmitter,IY1=o7(),P0=v9(),q2=W2(),NY1=tG(),PY1=o_(),MY1=YC(),TY1=J0(),jY1=YJ(),uY1=t1(),Dg=y2(),WC=D1(),OY1=Bg(),SY1=t().arrayAtomicsSymbol,QF=t().sessionNewDocuments,kY1=["MONGODB-X509"];/*!
 * Inherit from EventEmitter
 */Object.setPrototypeOf(e.prototype,EC.prototype);Object.defineProperty(e.prototype,"readyState",{get:function(){return this._readyState},set:function(F){if(!(F in P0))throw new Error("Invalid connection state: "+F);if(this._readyState!==F){this._readyState=F;for(let A of this.otherDbs)A.readyState=F;if(P0.connected===F)this._hasOpened=!0;this.emit(P0[F])}}});e.prototype.get=function(F){if(this.config.hasOwnProperty(F))return this.config[F];return uY1(this.options,F)};e.prototype.set=function(F,A){if(this.config.hasOwnProperty(F))return this.config[F]=A,A;return this.options=this.options||{},this.options[F]=A,A};e.prototype.collections;e.prototype.name;e.prototype.models;e.prototype.id;Object.defineProperty(e.prototype,"plugins",{configurable:!1,enumerable:!0,writable:!0});Object.defineProperty(e.prototype,"host",{configurable:!0,enumerable:!0,writable:!0});Object.defineProperty(e.prototype,"port",{configurable:!0,enumerable:!0,writable:!0});Object.defineProperty(e.prototype,"user",{configurable:!0,enumerable:!0,writable:!0});Object.defineProperty(e.prototype,"pass",{configurable:!0,enumerable:!0,writable:!0});e.prototype.db;e.prototype.client;e.prototype.config;e.prototype.createCollection=async function F(A,B){if(typeof B==="function"||arguments.length>=3&&typeof arguments[2]==="function")throw new q2("Connection.prototype.createCollection() no longer accepts a callback");return await this._waitForConnect(),this.db.createCollection(A,B)};e.prototype.createCollections=async function F(A={}){const B={},D={},{continueOnError:J}=A;delete A.continueOnError;for(let Z of Object.values(this.models))try{B[Z.modelName]=await Z.createCollection({})}catch(X){if(!J){D[Z.modelName]=X;break}else B[Z.modelName]=X}if(!J&&Object.keys(D).length){const Z=Object.entries(D).map(([Y,$])=>`${Y}: ${$.message}`).join(", ");throw new OY1(Z,D)}return B};e.prototype.withSession=async function F(A){if(arguments.length===0)throw new Error("Please provide an executor function");return await this.client.withSession(A)};e.prototype.startSession=async function F(A){if(arguments.length>=2&&typeof arguments[1]==="function")throw new q2("Connection.prototype.startSession() no longer accepts a callback");return await this._waitForConnect(),this.client.startSession(A)};e.prototype.transaction=function F(A,B){return this.startSession().then((D)=>{return D[QF]=new Map,D.withTransaction(()=>xY1(A,D,this.base),B).then((J)=>{return delete D[QF],J}).catch((J)=>{throw delete D[QF],J}).finally(()=>{D.endSession().catch(()=>{})})})};/*!
 * Reset document state in between transaction retries re: gh-13698
 *//*!
 * If transaction was aborted, we need to reset newly inserted documents' `isNew`.
 */e.prototype.dropCollection=async function F(A){if(arguments.length>=2&&typeof arguments[1]==="function")throw new q2("Connection.prototype.dropCollection() no longer accepts a callback");return await this._waitForConnect(),this.db.dropCollection(A)};e.prototype._waitForConnect=async function F(){if((this.readyState===P0.connecting||this.readyState===P0.disconnected)&&this._shouldBufferCommands())await new Promise((A)=>{this._queue.push({fn:A})})};e.prototype.listCollections=async function F(){return await this._waitForConnect(),await this.db.listCollections().toArray()};e.prototype.listDatabases=async function F(){throw new q2("listDatabases() not implemented by driver")};e.prototype.dropDatabase=async function F(){if(arguments.length>=1&&typeof arguments[0]==="function")throw new q2("Connection.prototype.dropDatabase() no longer accepts a callback");await this._waitForConnect();for(let A of Object.values(this.models))delete A.$init;return this.db.dropDatabase()};/*!
 * ignore
 */e.prototype._shouldBufferCommands=function F(){if(this.config.bufferCommands!=null)return this.config.bufferCommands;if(this.base.get("bufferCommands")!=null)return this.base.get("bufferCommands");return!0};e.prototype.error=function(F,A){if(A)return A(F),null;if(this.listeners("error").length>0)this.emit("error",F);return Promise.reject(F)};e.prototype.onOpen=function(){this.readyState=P0.connected;for(let F of this._queue)F.fn.apply(F.ctx,F.args);this._queue=[];for(let F in this.collections)if(WC.object.hasOwnProperty(this.collections,F))this.collections[F].onOpen();this.emit("open")};e.prototype.openUri=async function F(A,B){if(this.readyState===P0.connecting||this.readyState===P0.connected){if(this._connectionString===A)return this}this._closeCalled=!1;let D=!1;if(B&&"_fireAndForget"in B)D=B._fireAndForget,delete B._fireAndForget;try{_Y1.apply(arguments)}catch(J){if(D)throw J;throw this.$initialConnection=Promise.reject(J),J}this.$initialConnection=this.createClient(A,B).then(()=>this).catch((J)=>{if(this.readyState=P0.disconnected,this.listeners("error").length>0)Dg(()=>this.emit("error",J));throw J});for(let J of Object.values(this.models))J.init().catch(function Z(){});if(D)return this;try{await this.$initialConnection}catch(J){throw Jg(J)}return this};/*!
 * Treat `on('error')` handlers as handling the initialConnection promise
 * to avoid uncaught exceptions when using `on('error')`. See gh-14377.
 */e.prototype.on=function F(A,B){if(A==="error"&&this.$initialConnection)this.$initialConnection.catch(()=>{});return EC.prototype.on.call(this,A,B)};/*!
 * Treat `once('error')` handlers as handling the initialConnection promise
 * to avoid uncaught exceptions when using `on('error')`. See gh-14377.
 */e.prototype.once=function F(A,B){if(A==="error"&&this.$initialConnection)this.$initialConnection.catch(()=>{});return EC.prototype.once.call(this,A,B)};/*!
 * ignore
 *//*!
 * ignore
 */e.prototype.destroy=async function F(A){if(typeof A==="function"||arguments.length===2&&typeof arguments[1]==="function")throw new q2("Connection.prototype.destroy() no longer accepts a callback");if(A!=null&&typeof A==="object")this.$wasForceClosed=!!A.force;else this.$wasForceClosed=!!A;return this._close(A,!0)};e.prototype.close=async function F(A){if(typeof A==="function"||arguments.length===2&&typeof arguments[1]==="function")throw new q2("Connection.prototype.close() no longer accepts a callback");if(A!=null&&typeof A==="object")this.$wasForceClosed=!!A.force;else this.$wasForceClosed=!!A;for(let B of Object.values(this.models))delete B.$init;return this._close(A,!1)};e.prototype._close=async function F(A,B){const D=this,J=this._closeCalled;if(this._closeCalled=!0,this._destroyCalled=B,this.client!=null)this.client._closeCalled=!0,this.client._destroyCalled=B;const Z=this;switch(this.readyState){case P0.disconnected:if(B&&this.base.connections.indexOf(Z)!==-1)this.base.connections.splice(this.base.connections.indexOf(Z),1);if(!J)await this.doClose(A),this.onClose(A);break;case P0.connected:if(this.readyState=P0.disconnecting,await this.doClose(A),B&&D.base.connections.indexOf(Z)!==-1)this.base.connections.splice(this.base.connections.indexOf(Z),1);this.onClose(A);break;case P0.connecting:return new Promise((X,Y)=>{const $=()=>{if(this.removeListener("open",$),this.removeListener("error",$),B)this.destroy(A).then(X,Y);else this.close(A).then(X,Y)};this.once("open",$),this.once("error",$)});case P0.disconnecting:return new Promise((X)=>{this.once("close",()=>{if(B&&this.base.connections.indexOf(Z)!==-1)this.base.connections.splice(this.base.connections.indexOf(Z),1);X()})})}return this};e.prototype.doClose=function(){throw new Error("Connection#doClose unimplemented by driver")};e.prototype.onClose=function(F){this.readyState=P0.disconnected;for(let A in this.collections)if(WC.object.hasOwnProperty(this.collections,A))this.collections[A].onClose(F);this.emit("close",F);for(let A of this.otherDbs)this._destroyCalled?A.destroy({force:F,skipCloseClient:!0}):A.close({force:F,skipCloseClient:!0})};e.prototype.collection=function(F,A){const B={autoIndex:this.config.autoIndex!=null?this.config.autoIndex:this.base.options.autoIndex,autoCreate:this.config.autoCreate!=null?this.config.autoCreate:this.base.options.autoCreate,autoSearchIndex:this.config.autoSearchIndex!=null?this.config.autoSearchIndex:this.base.options.autoSearchIndex};A=Object.assign({},B,A?TY1(A):{}),A.$wasForceClosed=this.$wasForceClosed;const D=this.base&&this.base.__driver&&this.base.__driver.Collection||jY1.get().Collection;if(!(F in this.collections))this.collections[F]=new D(F,this,A);return this.collections[F]};e.prototype.plugin=function(F,A){return this.plugins.push([F,A]),this};e.prototype.model=function(F,A,B,D){if(!(this instanceof e))throw new q2("`connection.model()` should not be run with `new`. If you are doing `new db.model(foo)(bar)`, use `db.model(foo)(bar)` instead");let J;if(typeof F==="function")J=F,F=J.name;if(typeof A==="string")B=A,A=!1;if(WC.isObject(A)){if(!A.instanceOfSchema)A=new IY1(A);else if(!(A instanceof this.base.Schema))A=A._clone(this.base.Schema)}if(A&&!A.instanceOfSchema)throw new Error("The 2nd parameter to `mongoose.model()` should be a schema or a POJO");const Z={cache:!1,overwriteModels:this.base.options.overwriteModels},X=Object.assign(Z,D,{connection:this});if(this.models[F]&&!B&&X.overwriteModels!==!0){if(A&&A.instanceOfSchema&&A!==this.models[F].schema)throw new q2.OverwriteModelError(F);return this.models[F]}let Y;if(A&&A.instanceOfSchema){if(MY1(A,this.plugins,null,"$connectionPluginsApplied"),Y=this.base._model(J||F,A,B,X),!this.models[F])this.models[F]=Y;return Y.init().catch(function $(){}),Y}if(this.models[F]&&B)return Y=this.models[F],A=Y.prototype.schema,Y.__subclass(this,A,B);if(arguments.length===1){if(Y=this.models[F],!Y)throw new q2.MissingSchemaError(F);return Y}if(!Y)throw new q2.MissingSchemaError(F);if(this===Y.prototype.db&&(!B||B===Y.collection.name)){if(!this.models[F])this.models[F]=Y;return Y}return this.models[F]=Y.__subclass(this,A,B),this.models[F]};e.prototype.deleteModel=function(F){if(typeof F==="string"){const A=this.model(F);if(A==null)return this;const B=A.collection.name;delete this.models[F],delete this.collections[B],this.emit("deleteModel",A)}else if(F instanceof RegExp){const A=F,B=this.modelNames();for(let D of B)if(A.test(D))this.deleteModel(D)}else throw new Error('First parameter to `deleteModel()` must be a string or regexp, got "'+F+'"');return this};e.prototype.watch=function(F,A){return new RY1((J)=>{Dg(()=>{if(this.readyState===P0.connecting)this.once("open",function(){const Z=this.db.watch(F,A);J(null,Z)});else{const Z=this.db.watch(F,A);J(null,Z)}})},F,A)};e.prototype.asPromise=async function F(){try{return await this.$initialConnection,this}catch(A){throw Jg(A)}};e.prototype.modelNames=function(){return Object.keys(this.models)};e.prototype.shouldAuthenticate=function(){return this.user!=null&&(this.pass!=null||this.authMechanismDoesNotRequirePassword())};e.prototype.authMechanismDoesNotRequirePassword=function(){if(this.options&&this.options.auth)return kY1.indexOf(this.options.auth.authMechanism)>=0;return!0};e.prototype.optionsProvideAuthenticationData=function(F){return F&&F.user&&(F.pass||this.authMechanismDoesNotRequirePassword())};e.prototype.getClient=function F(){return this.client};e.prototype.setClient=function F(){throw new q2("Connection#setClient not implemented by driver")};/*!
 * Called internally by `openUri()` to create a MongoClient instance.
 */e.prototype.createClient=function F(){throw new q2("Connection#createClient not implemented by driver")};e.prototype.syncIndexes=async function F(A={}){const B={},D={},{continueOnError:J}=A;delete A.continueOnError;for(let Z of Object.values(this.models))try{B[Z.modelName]=await Z.syncIndexes(A)}catch(X){if(!J){D[Z.modelName]=X;break}else B[Z.modelName]=X}if(!J&&Object.keys(D).length){const Z=Object.entries(D).map(([Y,$])=>`${Y}: ${$.message}`).join(", ");throw new PY1(Z,D)}return B};/*!
 * Module exports.
 */e.STATES=P0;Zg.exports=e});var CC=z((Kw1,gY1)=>{gY1.exports={name:"mongoose",description:"Mongoose MongoDB ODM",version:"8.4.4",author:"Guillermo Rauch <guillermo@learnboost.com>",keywords:["mongodb","document","model","schema","database","odm","data","datastore","query","nosql","orm","db"],license:"MIT",dependencies:{bson:"^6.7.0",kareem:"2.6.3",mongodb:"6.6.2",mpath:"0.9.0",mquery:"5.0.0",ms:"2.1.3",sift:"17.1.3"},devDependencies:{"@babel/core":"7.24.6","@babel/preset-env":"7.24.6","@typescript-eslint/eslint-plugin":"^6.2.1","@typescript-eslint/parser":"^6.2.1",acquit:"1.3.0","acquit-ignore":"0.2.1","acquit-require":"0.1.1","assert-browserify":"2.0.0",axios:"1.1.3","babel-loader":"8.2.5","broken-link-checker":"^0.7.8",buffer:"^5.6.0",cheerio:"1.0.0-rc.12","crypto-browserify":"3.12.0",dotenv:"16.4.5",dox:"1.0.0",eslint:"8.57.0","eslint-plugin-markdown":"^5.0.0","eslint-plugin-mocha-no-only":"1.2.0",express:"^4.18.1","fs-extra":"~11.2.0","highlight.js":"11.8.0","lodash.isequal":"4.5.0","lodash.isequalwith":"4.4.0","markdownlint-cli2":"^0.13.0",marked:"4.3.0",mkdirp:"^3.0.1",mocha:"10.4.0",moment:"2.x","mongodb-memory-server":"9.3.0",ncp:"^2.0.0",nyc:"15.1.0",pug:"3.0.3",q:"1.5.1",sinon:"18.0.0","stream-browserify":"3.0.0",tsd:"0.31.0",typescript:"5.4.5",uuid:"9.0.1",webpack:"5.91.0"},directories:{lib:"./lib/mongoose"},scripts:{"docs:clean":"npm run docs:clean:stable","docs:clean:stable":"rimraf index.html && rimraf -rf ./docs/*.html  && rimraf -rf ./docs/api && rimraf -rf ./docs/tutorials/*.html && rimraf -rf ./docs/typescript/*.html && rimraf -rf ./docs/*.html && rimraf -rf ./docs/source/_docs && rimraf -rf ./tmp","docs:clean:5x":"rimraf index.html && rimraf -rf ./docs/5.x && rimraf -rf ./docs/source/_docs && rimraf -rf ./tmp","docs:clean:6x":"rimraf index.html && rimraf -rf ./docs/6.x && rimraf -rf ./docs/source/_docs && rimraf -rf ./tmp","docs:copy:tmp":"mkdirp ./tmp/docs/css && mkdirp ./tmp/docs/js && mkdirp ./tmp/docs/images && mkdirp ./tmp/docs/tutorials && mkdirp ./tmp/docs/typescript && mkdirp ./tmp/docs/api && ncp ./docs/css ./tmp/docs/css --filter=.css$ && ncp ./docs/js ./tmp/docs/js --filter=.js$ && ncp ./docs/images ./tmp/docs/images && ncp ./docs/tutorials ./tmp/docs/tutorials && ncp ./docs/typescript ./tmp/docs/typescript && ncp ./docs/api ./tmp/docs/api && cp index.html ./tmp && cp docs/*.html ./tmp/docs/","docs:copy:tmp:5x":"rimraf ./docs/5.x && ncp ./tmp ./docs/5.x","docs:copy:tmp:6x":"rimraf ./docs/6.x && ncp ./tmp ./docs/6.x","docs:generate":"node ./scripts/website.js","docs:generate:sponsorData":"node ./scripts/loadSponsorData.js","docs:test":"npm run docs:generate","docs:view":"node ./scripts/static.js","docs:prepare:publish:stable":"git checkout gh-pages && git merge master && npm run docs:generate","docs:prepare:publish:5x":"git checkout 5.x && git merge 5.x && npm run docs:clean:stable && npm run docs:generate && npm run docs:copy:tmp && git checkout gh-pages && npm run docs:copy:tmp:5x","docs:prepare:publish:6x":"git checkout 6.x && git merge 6.x && npm run docs:clean:stable && env DOCS_DEPLOY=true npm run docs:generate && mv ./docs/6.x ./tmp && git checkout gh-pages && npm run docs:copy:tmp:6x","docs:prepare:publish:7x":"env DOCS_DEPLOY=true npm run docs:generate && git checkout gh-pages && rimraf ./docs/7.x && mv ./tmp ./docs/7.x","docs:check-links":"blc http://127.0.0.1:8089 -ro",lint:"eslint .","lint-js":"eslint . --ext .js --ext .cjs","lint-ts":"eslint . --ext .ts","lint-md":"markdownlint-cli2 \"**/*.md\"","build-browser":"(rm ./dist/* || true) && node ./scripts/build-browser.js",prepublishOnly:"npm run build-browser",release:"git pull && git push origin master --tags && npm publish","release-5x":"git pull origin 5.x && git push origin 5.x && git push origin 5.x --tags && npm publish --tag 5x","release-6x":"git pull origin 6.x && git push origin 6.x && git push origin 6.x --tags && npm publish --tag 6x",mongo:"node ./tools/repl.js","publish-7x":"npm publish --tag 7x",test:"mocha --exit ./test/*.test.js","test-deno":"deno run --allow-env --allow-read --allow-net --allow-run --allow-sys --allow-write ./test/deno.js","test-rs":"START_REPLICA_SET=1 mocha --timeout 30000 --exit ./test/*.test.js","test-tsd":"node ./test/types/check-types-filename && tsd",tdd:"mocha ./test/*.test.js --inspect --watch --recursive --watch-files ./**/*.{js,ts}","test-coverage":"nyc --reporter=html --reporter=text npm test","ts-benchmark":"cd ./benchmarks/typescript/simple && npm install && npm run benchmark | node ../../../scripts/tsc-diagnostics-check"},main:"./index.js",types:"./types/index.d.ts",engines:{node:">=16.20.1"},bugs:{url:"https://github.com/Automattic/mongoose/issues/new"},repository:{type:"git",url:"git://github.com/Automattic/mongoose.git"},homepage:"https://mongoosejs.com",browser:"./dist/browser.umd.js",config:{mongodbMemoryServer:{disablePostinstall:!0}},funding:{type:"opencollective",url:"https://opencollective.com/mongoose"},tsd:{directory:"test/types",compilerOptions:{esModuleInterop:!1,strict:!0,allowSyntheticDefaultImports:!0,strictPropertyInitialization:!1,noImplicitAny:!1,strictNullChecks:!0,module:"commonjs",target:"ES2017"}}}});var $g=z((zw1,Yg)=>{var vY1=function(F,A){const B=A?A:{},D=B.readPreference?B.readPreference:cY1(F),J=bY1(B);return D&&D!=="primary"&&D!=="primaryPreferred"?hY1(D,J):J},hY1=function(F,A){if(mY1(A)&&dY1(F))pY1();else return lY1(A)},mY1=function(F){const A=F.config&&F.config.autoIndex,{autoCreate:B,autoIndex:D}=F;return!!(A||B||D)},dY1=function(F){return F==="secondary"||F==="secondaryPreferred"},cY1=function(F){const B=/(?:&|\?)readPreference=(\w+)(?:&|$)/.exec(F);return B?B[1]:null},lY1=function(F){return F.config={autoIndex:!1},F.autoCreate=!1,F.autoIndex=!1,F},pY1=function(){throw new yY1('MongoDB prohibits index creation on connections that read from non-primary replicas.  Connections that set "readPreference" to "secondary" or "secondaryPreferred" may not opt-in to the following connection options: autoCreate, autoIndex')},bY1=J0(),yY1=W2();Yg.exports=vY1});var Gg=z((iY1)=>{iY1.setTimeout=setTimeout});var qg=z((Qw1,Hg)=>{var l3=function(){Eg.apply(this,arguments),this._listening=!1},HC=function(F,A,B,D){const J=D!=null?A.db(D):A.db();F.db=J,F.client=A,F.host=A&&A.s&&A.s.options&&A.s.options.hosts&&A.s.options.hosts[0]&&A.s.options.hosts[0].host||void 0,F.port=A&&A.s&&A.s.options&&A.s.options.hosts&&A.s.options.hosts[0]&&A.s.options.hosts[0].port||void 0,F.name=D!=null?D:J.databaseName,F._closeCalled=A._closeCalled;const Z=()=>{if(F.readyState!==f2.connected)F.readyState=f2.connected,F.emit("reconnect"),F.emit("reconnected"),F.onOpen()},X=A&&A.topology&&A.topology.description&&A.topology.description.type||"";if(X==="Single")A.on("serverDescriptionChanged",(Y)=>{if(Y.newDescription.type==="Unknown")F.readyState=f2.disconnected;else Z()});else if(X.startsWith("ReplicaSet"))A.on("topologyDescriptionChanged",(Y)=>{const $=Y.newDescription;if(F.readyState===f2.connected&&$.type!=="ReplicaSetWithPrimary")F.readyState=f2.disconnected;else if(F.readyState===f2.disconnected&&$.type==="ReplicaSetWithPrimary")Z()});F.onOpen();for(let Y in F.collections)if(Cg.object.hasOwnProperty(F.collections,Y))F.collections[Y].onOpen()};/*!
 * Module dependencies.
 */var Eg=Xg(),M9=W2(),f2=v9(),Wg=lB(),sY1=CC(),aY1=$g(),rY1=Gg().setTimeout,Cg=D1();l3.STATES=f2;/*!
 * Inherits from Connection.
 */Object.setPrototypeOf(l3.prototype,Eg.prototype);l3.prototype.useDb=function(F,A){if(A=A||{},A.useCache&&this.relatedDbs[F])return this.relatedDbs[F];const B=new this.constructor;B.name=F,B.base=this.base,B.collections={},B.models={},B.replica=this.replica,B.config=Object.assign({},this.config,B.config),B.name=this.name,B.options=this.options,B._readyState=this._readyState,B._closeCalled=this._closeCalled,B._hasOpened=this._hasOpened,B._listening=!1,B._parent=this,B.host=this.host,B.port=this.port,B.user=this.user,B.pass=this.pass;const D=this;if(B.client=D.client,this.db&&this._readyState===f2.connected)J();else this.once("connected",J);function J(){B.client=D.client;const Z={};if(A.hasOwnProperty("noListener"))Z.noListener=A.noListener;B.db=D.client.db(F,Z),B.onOpen()}if(B.name=F,A.noListener!==!0)this.otherDbs.push(B);if(B.otherDbs.push(this),A&&A.useCache)this.relatedDbs[B.name]=B,B.relatedDbs=this.relatedDbs;return B};l3.prototype.removeDb=function F(A){const B=this.otherDbs.filter((D)=>D.name===A);if(!B.length)throw new M9(`No connections to database "${A}" found`);for(let D of B)D._closeCalled=!0,D._destroyCalled=!0,D._readyState=f2.disconnected,D.$wasForceClosed=!0;delete this.relatedDbs[A],this.otherDbs=this.otherDbs.filter((D)=>D.name!==A)};l3.prototype.doClose=async function F(A){if(this.client==null)return this;let B=!1;if(A!=null&&typeof A==="object")B=A.skipCloseClient,A=A.force;if(B)return this;return await this.client.close(A),await new Promise((D)=>rY1(D,1)),this};l3.prototype.listDatabases=async function F(){return await this._waitForConnect(),await this.db.admin().listDatabases()};/*!
 * ignore
 */l3.prototype.createClient=async function F(A,B){if(typeof A!=="string")throw new M9(`The \`uri\` parameter to \`openUri()\` must be a string, got "${typeof A}". Make sure the first parameter to \`mongoose.connect()\` or \`mongoose.createConnection()\` is a string.`);if(this._destroyCalled)throw new M9("Connection has been closed and destroyed, and cannot be used for re-opening the connection. Please create a new connection with `mongoose.createConnection()` or `mongoose.connect()`.");if(this.readyState===f2.connecting||this.readyState===f2.connected){if(this._connectionString!==A)throw new M9("Can\'t call `openUri()` on an active connection with different connection strings. Make sure you aren\'t calling `mongoose.connect()` multiple times. See: https://mongoosejs.com/docs/connections.html#multiple_connections")}if(B=aY1(A,B),B){const Z=B.config&&B.config.autoIndex!=null?B.config.autoIndex:B.autoIndex;if(Z!=null)this.config.autoIndex=Z!==!1,delete B.config,delete B.autoIndex;if("autoCreate"in B)this.config.autoCreate=!!B.autoCreate,delete B.autoCreate;if("sanitizeFilter"in B)this.config.sanitizeFilter=B.sanitizeFilter,delete B.sanitizeFilter;if("autoSearchIndex"in B)this.config.autoSearchIndex=B.autoSearchIndex,delete B.autoSearchIndex;if(B.user||B.pass)B.auth=B.auth||{},B.auth.username=B.user,B.auth.password=B.pass,this.user=B.user,this.pass=B.pass;if(delete B.user,delete B.pass,B.bufferCommands!=null)this.config.bufferCommands=B.bufferCommands,delete B.bufferCommands}else B={};this._connectionOptions=B;const D=B.dbName;if(D!=null)this.$dbName=D;if(delete B.dbName,!Cg.hasUserDefinedProperty(B,"driverInfo"))B.driverInfo={name:"Mongoose",version:sY1.version};this.readyState=f2.connecting,this._connectionString=A;let J;try{J=new Wg.MongoClient(A,B)}catch(Z){throw this.readyState=f2.disconnected,Z}this.client=J,J.setMaxListeners(0),await J.connect(),HC(this,J,B,D);for(let Z of this.otherDbs)HC(Z,J,{},Z.name);return this};/*!
 * ignore
 */l3.prototype.setClient=function F(A){if(!(A instanceof Wg.MongoClient))throw new M9("Must call `setClient()` with an instance of MongoClient");if(this.readyState!==f2.disconnected)throw new M9("Cannot call `setClient()` on a connection that is already connected.");if(A.topology==null)throw new M9("Cannot call `setClient()` with a MongoClient that you have not called `connect()` on yet.");this._connectionString=A.s.url,HC(this,A,{},A.s.options.dbName);for(let B of Object.values(this.models))B.init().catch(function D(){});return this};/*!
 * ignore
 *//*!
 * Module exports.
 */Hg.exports=l3});var Kg=z((tY1)=>{/*!
 * Module exports.
 */tY1.Collection=Ku();tY1.Connection=qg()});var Ug=z((Vw1,zg)=>{/*!
 * Valid mongoose options
 */var F$1=Object.freeze(["allowDiskUse","applyPluginsToChildSchemas","applyPluginsToDiscriminators","autoCreate","autoIndex","autoSearchIndex","bufferCommands","bufferTimeoutMS","cloneSchemas","debug","id","timestamps.createdAt.immutable","maxTimeMS","objectIdGetter","overwriteModels","returnOriginal","runValidators","sanitizeFilter","sanitizeProjection","selectPopulatedPaths","setDefaultsOnInsert","strict","strictPopulate","strictQuery","toJSON","toObject","transactionAsyncLocalStorage","translateAliases"]);zg.exports=F$1});var Lg=z((ww1,Qg)=>{/*!
 * Module dependencies.
 */var A$1=H1();class qC extends A$1{constructor(F){let A=F.map((B)=>B.message).join(", ");if(A.length>50)A=A.slice(0,50)+"...";super(`eachAsync() finished with ${F.length} errors: ${A}`);this.errors=F}}Object.defineProperty(qC.prototype,"name",{value:"EachAsyncMultiError"});/*!
 * exports
 */Qg.exports=qC});var zC=z((Rw1,wg)=>{var D$1=function(){const F=[];let A=null,B=0;return function J(Z){if(A===null&&F.length===0)return A=B++,Z(D);F.push(Z)};function D(){if(F.length!==0)A=B++,F.shift()(D);else A=null}},Vg=function(F){if(F.length===0)return null;return new B$1(F)};/*!
 * Module dependencies.
 */var B$1=Lg(),KC=y2();wg.exports=async function F(A,B,D){const J=D.parallel||1,Z=D.batchSize,X=D.signal,Y=D.continueOnError,$=[],G=D$1();let E=!1;return new Promise((H,q)=>{if(X!=null){if(X.aborted)return H(null);X.addEventListener("abort",()=>{return E=!0,H(null)},{once:!0})}if(Z!=null){if(typeof Z!=="number")throw new TypeError("batchSize must be a number");else if(!Number.isInteger(Z))throw new TypeError("batchSize must be an integer");else if(Z<1)throw new TypeError("batchSize must be at least 1")}W((K,U)=>{if(K!=null)return q(K);H(U)})});function W(H){let q=0,K=0,U=null;for(let V=0;V<J;++V)G(Q());function Q(){let V=[],L=!1;return N;function N(h){if(L||E)return h();else if(U)return h();A(function(T,P){if(U!=null)return h();if(T!=null)if(T.name==="MongoCursorExhaustedError")P=null;else if(Y)$.push(T);else return U=T,H(T),h();if(P==null){if(L=!0,q<=0){const u=Y?Vg($):U;H(u)}else if(Z&&V.length)C(V,K++,c);return h()}if(++q,KC(()=>h()),Z)V.push(P);if(Z&&V.length!==Z){KC(()=>G(N));return}const x=Z?V:P;function c(u){if(Z)q-=V.length,V=[];else--q;if(u!=null)if(Y)$.push(u);else return U=u,H(u);if((L||E)&&q<=0){const O=Y?Vg($):U;return H(O)}KC(()=>G(N))}C(x,K++,c)})}}}function C(H,q,K){let U;try{U=B(H,q)}catch(Q){return K(Q)}if(U&&typeof U.then==="function")U.then(function(){K(null)},function(Q){K(Q||new Error("`eachAsync()` promise rejected without error"))});else K(null)}}});var Og=z((Iw1,ug)=>{var _2=function(F){Pg.call(this,{autoDestroy:!0,objectMode:!0}),this.cursor=null,this.skipped=!1,this.query=F;const A=F.model;this._mongooseOptions={},this._transforms=[],this.model=A,this.options={},A.hooks.execPre("find",F,(B)=>{if(B!=null){if(B instanceof Z$1.skipWrappedFunction){const D=B.args[0];if(D!=null&&(!Array.isArray(D)||D.length)){const J=new GJ('Cannot `skipMiddlewareFunction()` with a value when using `.find().cursor()`, value must be nullish or empty array, got "'+Tg.inspect(D)+'".');this._markError(J),this.listeners("error").length>0&&this.emit("error",J);return}this.skipped=!0,this.emit("cursor",null);return}this._markError(B),this.listeners("error").length>0&&this.emit("error",B);return}if(Object.assign(this.options,F._optionsForExec()),this._transforms=this._transforms.concat(F._transforms.slice()),this.options.transform)this._transforms.push(this.options.transform);if(this.options.batchSize)this.options._populateBatchSize=Math.min(this.options.batchSize,5000);if(A.collection._shouldBufferCommands()&&A.collection.buffer)A.collection.queue.push([()=>Rg(F,this)]);else Rg(F,this)})},Rg=function(F,A){try{const B=F.model.collection.find(F._conditions,A.options);A.cursor=B,A.emit("cursor",B)}catch(B){A._markError(B),A.listeners("error").length>0&&A.emit("error",A._error)}},Ig=function(F){return F==null?{done:!0}:{value:F,done:!1}},EJ=function(F,A){let B=A;if(F._transforms.length)B=function(D,J){if(D||J===null&&!F._mongooseOptions.transformNull)return A(D,J);A(D,F._transforms.reduce(function(Z,X){return X.call(F,Z)},J))};if(F._error)return UC(function(){B(F._error)});if(F.skipped)return UC(()=>B(null,null));if(F.cursor){if(F.query._mongooseOptions.populate&&!F._pop)F._pop=Mg.preparePopulationOptionsMQ(F.query,F.query._mongooseOptions),F._pop.__noPromise=!0;if(F.query._mongooseOptions.populate&&F.options._populateBatchSize>1)if(F._batchDocs&&F._batchDocs.length)return $J(F,F._batchDocs.shift(),F._pop,B);else if(F._batchExhausted)return B(null,null);else{F._batchDocs=[],F.cursor.next().then((D)=>{E8.call({ctx:F,callback:B},null,D)},(D)=>{E8.call({ctx:F,callback:B},D)});return}else return F.cursor.next().then((D)=>{if(!D){B(null,null);return}if(!F.query._mongooseOptions.populate)return $J(F,D,null,B);F.query.model.populate(D,F._pop).then((J)=>{$J(F,J,F._pop,B)},(J)=>{B(J)})},(D)=>{B(D)})}else F.once("error",A),F.once("cursor",function(D){if(F.removeListener("error",A),D==null){if(F.skipped)return A(null,null);return}EJ(F,A)})},E8=function(F,A){if(F)return this.callback(F);if(!A)return this.ctx._batchExhausted=!0,Ng.call(this);if(this.ctx._batchDocs.push(A),this.ctx._batchDocs.length<this.ctx.options._populateBatchSize){if(this.ctx._batchDocs.length>0&&this.ctx._batchDocs.length%1000===0)return UC(()=>this.ctx.cursor.next().then((B)=>{E8.call(this,null,B)},(B)=>{E8.call(this,B)}));this.ctx.cursor.next().then((B)=>{E8.call(this,null,B)},(B)=>{E8.call(this,B)})}else Ng.call(this)},Ng=function(){if(!this.ctx._batchDocs.length)return this.callback(null,null);this.ctx.query.model.populate(this.ctx._batchDocs,this.ctx._pop).then(()=>{$J(this.ctx,this.ctx._batchDocs.shift(),this.ctx._pop,this.callback)},(F)=>{this.callback(F)})},$J=function(F,A,B,D){if(F.query._mongooseOptions.lean)return F.model.hooks.execPost("find",F.query,[[A]],($)=>{if($!=null)return D($);D(null,A)});const{model:J,_fields:Z,_userProvidedFields:X,options:Y}=F.query;Mg.createModelAndInit(J,A,Z,X,Y,B,($,G)=>{if($!=null)return D($);F.model.hooks.execPost("find",F.query,[[G]],(E)=>{if(E!=null)return D(E);D(null,G)})})},jg=function(F,A){if(F.cursor)return A();F.once("cursor",function(B){if(B==null)return;A()})};/*!
 * Module dependencies.
 */var GJ=H1(),Pg=import.meta.require("stream").Readable,J$1=zC(),Mg=s5(),Z$1=h7(),UC=y2(),Tg=import.meta.require("util");Tg.inherits(_2,Pg);/*!
 * ignore
 */_2.prototype._read=function(){EJ(this,(F,A)=>{if(F)return this.emit("error",F);if(!A){this.push(null),this.cursor.close(function(B){if(B)return this.emit("error",B)});return}this.push(A)})};Object.defineProperty(_2.prototype,"map",{value:function(F){return this._transforms.push(F),this},enumerable:!0,configurable:!0,writable:!0});_2.prototype._markError=function(F){return this._error=F,this};_2.prototype.close=async function F(){if(typeof arguments[0]==="function")throw new GJ("QueryCursor.prototype.close() no longer accepts a callback");try{await this.cursor.close(),this.emit("close")}catch(A){throw this.listeners("error").length>0&&this.emit("error",A),A}};_2.prototype.rewind=function(){return jg(this,()=>{this.cursor.rewind()}),this};_2.prototype.next=async function F(){if(typeof arguments[0]==="function")throw new GJ("QueryCursor.prototype.next() no longer accepts a callback");return new Promise((A,B)=>{EJ(this,function(D,J){if(D)return B(D);A(J)})})};_2.prototype.eachAsync=function(F,A){if(typeof arguments[2]==="function")throw new GJ("QueryCursor.prototype.eachAsync() no longer accepts a callback");if(typeof A==="function")A={};return A=A||{},J$1((B)=>EJ(this,B),F,A)};_2.prototype.options;_2.prototype.addCursorFlag=function(F,A){return jg(this,()=>{this.cursor.addCursorFlag(F,A)}),this};/*!
 * ignore
 */_2.prototype.transformNull=function(F){if(arguments.length===0)F=!0;return this._mongooseOptions.transformNull=F,this};/*!
 * ignore
 */_2.prototype._transformForAsyncIterator=function(){if(this._transforms.indexOf(Ig)===-1)this.map(Ig);return this};if(Symbol.asyncIterator!=null)_2.prototype[Symbol.asyncIterator]=function(){return this.transformNull()._transformForAsyncIterator()};/*!
 * ignore
 *//*!
 * ignore
 *//*!
 * ignore
 *//*!
 * ignore
 *//*!
 * ignore
 */ug.exports=_2});var LC=z((Nw1,kg)=>{var X$1=function(F,A,B){Sg(F,A,B,"maxTimeMS")},Y$1=function(F,A,B){Sg(F,A,B,"allowDiskUse")},Sg=function(F,A,B,D){if(QC.hasUserDefinedProperty(F,D))return;if(QC.hasUserDefinedProperty(A,D))F[D]=A[D];else if(QC.hasUserDefinedProperty(B,D))F[D]=B[D]},QC=D1();kg.exports={applyGlobalMaxTimeMS:X$1,applyGlobalDiskUse:Y$1}});var VC=z((Pw1,xg)=>{var $$1=t1();xg.exports=function F(A,B){if(B.readConcern!==void 0)return;if(B&&B.session&&B.session.transaction)return;const D=$$1(A,"options.readConcern.level",null);if(D!=null)B.readConcern={level:D}}});var wC=z((Mw1,fg)=>{var G$1=t1();fg.exports=function F(A,B){if(B.writeConcern!=null)return;if(B&&B.session&&B.session.transaction)return;const D=G$1(A,"options.writeConcern",{});if(Object.keys(D).length!=0){if(B.writeConcern={},!("w"in B)&&D.w!=null)B.writeConcern.w=D.w;if(!("j"in B)&&D.j!=null)B.writeConcern.j=D.j;if(!("wtimeout"in B)&&D.wtimeout!=null)B.writeConcern.wtimeout=D.wtimeout}else{if(!("w"in B)&&D.w!=null)B.w=D.w;if(!("j"in B)&&D.j!=null)B.j=D.j;if(!("wtimeout"in B)&&D.wtimeout!=null)B.wtimeout=D.wtimeout}}});var bg=z((Tw1,gg)=>{var _g=ZF();gg.exports=function F(A,B,D){if(!Object.keys(D).some(_g))return B.castForQuery(null,D,A);const Z=Object.keys(D);let X=Z.length;while(X--){const Y=Z[X],$=D[Y];if(Y==="$not"){if($&&B&&!B.caster){const G=Object.keys($);if(G.length&&_g(G[0]))for(let E of Object.keys($))$[E]=B.castForQuery(E,$[E],A);else D[Y]=B.castForQuery(Y,$,A);continue}}else D[Y]=B.castForQuery(Y,$,A)}return D}});var vg=z((jw1,yg)=>{var E$1=/^\d+$/;yg.exports=function F(A,B){let D=A.path(B);if(D!=null)return D;const J=B.split(".");let Z="",X=!1;for(let Y of J){if(X&&E$1.test(Y))continue;if(Z=Z.length===0?Y:Z+"."+Y,D=A.path(Z),D!=null&&D.schema){if(A=D.schema,Z="",!X&&D.$isMongooseDocumentArray)X=!0}}return D}});var RC=z((uw1,mg)=>{var hg=n7().modifiedPaths;mg.exports=function F(A){const B=Object.keys(A),D={},J={};for(let Z of B){if(Z.startsWith("$")){hg(A[Z],"",D);continue}J[Z]=A[Z]}return hg(J,"",D),D}});var IC=z((Ow1,dg)=>{var W$1=RC();dg.exports=function F(A){if(A==null)return{};const B=W$1(A);return Object.keys(B).reduce((D,J)=>{const Z=J.match(/\$\[[^\]]+\]/g);if(Z==null)return D;for(let X of Z){const Y=J.indexOf(X);if(Y!==J.lastIndexOf(X))throw new Error(`Path '${J}' contains the same array filter multiple times`);D[X.substring(2,X.length-1)]=J.substring(0,Y-1).replace(/\$\[[^\]]+\]/g,"0")}return D},{})}});var ng=z((Sw1,ig)=>{var pg=function(F,A,B,D,J){if(!Array.isArray(F))return;for(let Z of F){if(Z==null)throw new Error(`Got null array filter in ${F}`);const X=Object.keys(Z).filter((H)=>Z[H]!=null);if(X.length===0)continue;const Y=X[0];if(Y==="$and"||Y==="$or"){for(let H of X)pg(Z[H],A,B,D,J);continue}const $=Y.indexOf("."),G=$===-1?Y:Y.substring(0,$);if(D[G]==null)continue;const E=cg(D[G]),W=lg(A,E);let C=W!=null?W.schema:null;if(C!=null&&C.discriminators!=null&&Z[G+"."+C.options.discriminatorKey])C=C.discriminators[Z[G+"."+C.options.discriminatorKey]]||C;for(let H of X){if(D[H]===null)continue;if(Object.keys(D).length===0)continue;const q=H.indexOf(".");let K=q===-1?null:H.substring(q),U;if(K==null||C==null)U=W;else K=cg(K),U=lg(C,K);if(U==null){if(!B)return;const Q=K==null?E+".0":E+".0"+K;throw new Error(`Could not find path "${Q}" in schema`)}if(typeof Z[H]==="object")Z[H]=C$1(J,U,Z[H]);else Z[H]=U.castForQuery(null,Z[H])}}},C$1=bg(),cg=e5(),lg=vg(),H$1=IC();ig.exports=function F(A){const B=A.options.arrayFilters,D=A.getUpdate(),J=A.schema,Z=H$1(D);let X=J.options.strict;if(A._mongooseOptions.strict!=null)X=A._mongooseOptions.strict;if(A.model&&A.model.base.options.strictQuery!=null)X=A.model.base.options.strictQuery;if(J._userProvidedOptions.strictQuery!=null)X=J._userProvidedOptions.strictQuery;if(A._mongooseOptions.strictQuery!=null)X=A._mongooseOptions.strictQuery;pg(B,J,X,Z,A)}});var rg=z((kw1,ag)=>{var q$1=e5(),sg=t1(),K$1=c6(),z$1=IC();ag.exports=function F(A,B,D,J,Z){const X=J.split(".");let Y=null,$="adhocOrUndefined";D=D||{},B=B||{};const G=Z!=null&&Array.isArray(Z.arrayFilters)?Z.arrayFilters:[],E=z$1(B);for(let W=0;W<X.length;++W){const C=q$1(X.slice(0,W+1).join("."));if(Y=A.path(C),Y==null)continue;if($=A.pathType(C),(Y.$isSingleNested||Y.$isMongooseDocumentArrayElement)&&Y.schema.discriminators!=null){const H=sg(Y,"schema.options.discriminatorKey"),q=C+"."+H,K=q.replace(/\.\d+\./,".");let U=null;if(q in D)U=D[q];if(K in D)U=D[K];const Q=C.replace(/\.\d+$/,"");if(Y.$isMongooseDocumentArrayElement&&sg(D[Q],"$elemMatch."+H)!=null)U=D[Q].$elemMatch[H];if(q in B)U=B[q];for(let h of Object.keys(E)){const T=E[h]+"."+H,P=h+"."+H;if(T===K){const x=G.find((c)=>c.hasOwnProperty(P));if(x!=null)U=x[P]}}if(U==null)continue;const V=K$1(Y.caster.discriminators,U),L=V&&V.schema;if(L==null)continue;const N=X.slice(W+1).join(".");if(Y=L.path(N),Y!=null){$=L._getPathType(N);break}}}return{type:$,schematype:Y}}});var og=z((xw1,tg)=>{var U$1=V4();tg.exports=function F(A,B,D,J,Z,X){if(A==null||!A.options||!A.options.immutable)return!1;let Y=A.options.immutable;if(typeof Y==="function")Y=Y.call(X,X);if(!Y)return!1;if(B===!1)return!1;if(B==="throw")throw new U$1(null,`Field ${Z} is immutable and strict = 'throw'`);return delete D[J],!0}});var Ab=z((fw1,Fb)=>{var eg=function(F,A,B,D,J){const Z=F.path(B);if(Z==null)return;let X=Q$1(Z,"options.immutable",null);if(X==null)return;if(typeof X==="function")X=X.call(J,J);if(!X)return;D.$setOnInsert=D.$setOnInsert||{},D.$setOnInsert[B]=A[B],delete A[B]},Q$1=t1();Fb.exports=function F(A,B,D){if(B==null)return;const J=Object.keys(B);for(let Z of J){const X=Z.startsWith("$");if(Z==="$set"){const Y=Object.keys(B[Z]);for(let $ of Y)eg(A,B[Z],$,B,D)}else if(!X)eg(A,B,Z,B,D)}}});var PC=z((_w1,Bb)=>{var NC=v4();Bb.exports=function F(A,B,D){if(B.indexOf(".")===-1){if(NC.has(B))return;A[B]=D;return}const J=B.split("."),Z=J.pop();let X=A;for(let Y of J){if(NC.has(Y))continue;if(X[Y]==null)X[Y]={};X=X[Y]}if(!NC.has(Z))X[Z]=D}});var kC=z((gw1,Gb)=>{var P$1=function(F,A){if(F==="$unset"){if(typeof A!=="string"&&(!Array.isArray(A)||A.find((B)=>typeof B!=="string")))throw new LF("Invalid $unset in pipeline, must be  a string or an array of strings");return A}if(F==="$project"){if(A==null||typeof A!=="object")throw new LF("Invalid $project in pipeline, must be an object");return A}if(F==="$addFields"||F==="$set"){if(A==null||typeof A!=="object")throw new LF("Invalid "+F+" in pipeline, must be an object");return A}else if(F==="$replaceRoot"||F==="$replaceWith"){if(A==null||typeof A!=="object")throw new LF("Invalid "+F+" in pipeline, must be an object");return A}throw new LF('Invalid update pipeline operator: "'+F+'"')},$b=function(F,A,B,D,J,Z,X){const Y=D.strict,$=X?X+".":"",G=Object.keys(A);let E=G.length,W=!1,C,H,q,K=null;const U=Y!=null?Y:F.options.strict;while(E--){if(H=G[E],q=A[H],B==="$pull"){if(C=F._getSchema($+H),C==null){const V=TC(F,A,Z,$+H,D);if(V.schematype!=null)C=V.schematype}if(C!=null&&C.schema!=null){A[H]=V$1(C.schema,A[H],D,J),W=!0;continue}}const Q=$?$+H:H;if(F.discriminatorMapping!=null&&Q===F.options.discriminatorKey&&F.discriminatorMapping.value!==A[H]&&!D.overwriteDiscriminatorKey){if(U==="throw"){const V=new Error('Can\'t modify discriminator key "'+Q+'" on discriminator model');K=W8(V,J,Q,K);continue}else if(U){delete A[H];continue}}if(w$1(q)==="Object"){if(C=F._getSchema($+H),C==null){const V=TC(F,A,Z,$+H,D);if(V.schematype!=null)C=V.schematype}if(B!=="$setOnInsert"&&Jb(C,Y,A,H,$+H,J))continue;if(C&&C.caster&&B in OC)if("$each"in q){W=!0;try{A[H]={$each:VF(C,q.$each,B,H,J,$+H)}}catch(V){K=W8(V,J,H,K)}if(q.$slice!=null)A[H].$slice=q.$slice|0;if(q.$sort)A[H].$sort=q.$sort;if(q.$position!=null)A[H].$position=jC(q.$position)}else{if(C!=null&&C.$isSingleNested){const V=Y==null?C.schema.options.strict:Y;try{A[H]=C.castForQuery(null,q,J,{strict:V})}catch(L){K=W8(L,J,H,K)}}else try{A[H]=VF(C,q,B,H,J,$+H)}catch(V){K=W8(V,J,H,K)}if(A[H]===void 0){delete A[H];continue}W=!0}else if(B==="$currentDate"||B in OC&&C){try{A[H]=VF(C,q,B,H,J,$+H)}catch(V){K=W8(V,J,H,K)}if(A[H]===void 0){delete A[H];continue}W=!0}else{const V=$+H,L=F._getPathType(V);let N=Y;if(L&&L.schema&&N==null)N=L.schema.options.strict;if(L.pathType==="undefined"){if(N==="throw")throw new Db(V);else if(N){delete A[H];continue}}W|=$b(F,q,B,D,J,Z,$+H)||SC.isObject(q)&&Object.keys(q).length===0}}else{const V=H==="$each"||H==="$or"||H==="$and"||H==="$in"?X:$+H;if(C=F._getSchema(V),B!=="$setOnInsert"&&Jb(C,Y,A,H,$+H,J))continue;let L=F._getPathType(V);if(C==null){const T=TC(F,A,Z,V,D);if(T.schematype!=null)C=T.schematype,L=T.type}let N=Y;if(L&&L.schema&&Y==null)N=L.schema.options.strict;if(N&&!C&&!/real|nested/.test(L.pathType))if(N==="throw"&&F.virtuals[V]==null)throw new Db($+H);else delete A[H];else{if(B==="$rename"){W=!0;continue}try{if($.length===0||H.indexOf(".")===-1)A[H]=VF(C,q,B,H,J,$+H);else if(N!==!1||C!=null)I$1(A,H,VF(C,q,B,H,J,$+H)),delete A[H]}catch(T){K=W8(T,J,H,K)}if(Array.isArray(A[H])&&(B==="$addToSet"||B==="$push")&&H!=="$each"){if(C&&C.caster&&!C.caster.$isMongooseArray&&!C.caster[Yb])A[H]={$each:A[H]}}if(A[H]===void 0){delete A[H];continue}W=!0}}}if(K!=null)throw K;return W},W8=function(F,A,B,D){if(typeof A!=="object"||!A.options.multipleCastError)throw F;return D=D||new L$1,D.addError(B,F),D},VF=function(F,A,B,D,J,Z){if(!F){if(B in Zb)try{return jC(A)}catch(Y){throw new MC("number",A,Z)}return A}if(F.caster&&B in OC&&(SC.isObject(A)||Array.isArray(A))&&!Xb[B]){let Y=0,$=F;while($.$isMongooseArray)++Y,$=$.caster;let G=0,E=A;while(Array.isArray(E))++G,E=E[0];const W=Y-G;while(G<Y)A=[A],++G;let C=F.applySetters(Array.isArray(A)?A:[A],J);for(let H=0;H<W;++H)C=C[0];return C}if(B in M$1)return A;if(B in Zb){if(A==null)throw new MC("number",A,F.path);if(B==="$inc")return F.castForQuery(null,A,J);try{return jC(A)}catch(Y){throw new MC("number",A,F.path)}}if(B==="$currentDate"){if(typeof A==="object")return{$type:A.$type};return Boolean(A)}if(uC.has(D))return F.castForQuery(D,A,J);if(Xb[B]){const Y=A!=null&&F.$isMongooseArray&&F.$fullPath!=null&&!F.$fullPath.match(/\d+$/),$=F[Yb]!=null;if(Y||$)return F.applySetters(A,J);return F.castForQuery(null,A,J)}return F.castForQuery(null,A,J)},MC=E2(),LF=H1(),Db=V4(),L$1=C9(),jC=DF(),V$1=w9(),w$1=T2(),TC=rg(),Jb=og(),R$1=Ab(),Yb=q9().schemaMixedSymbol,I$1=PC(),SC=D1(),{internalToObjectOptions:N$1}=y6(),uC=new Set(["$currentDate","$inc","$min","$max","$mul","$rename","$set","$setOnInsert","$unset","$addToSet","$pop","$pull","$push","$pullAll","$bit"]);Gb.exports=function F(A,B,D,J,Z){if(B==null)return;if(D=D||{},Array.isArray(B)){const W=B.length;for(let C=0;C<W;++C){const H=Object.keys(B[C]);for(let q of H)B[C][q]=P$1(q,B[C][q])}return B}if(D.upsert)R$1(A,B,J);const X=Object.keys(B);let Y=X.length;const $={};let G,E=!1;Z=Z||{};while(Y--){const W=X[Y];if(!uC.has(W)){if(!$.$set)if(B.$set)$.$set=B.$set;else $.$set={};if($.$set[W]=B[W],X.splice(Y,1),!~X.indexOf("$set"))X.push("$set")}else if(W==="$set"){if(!$.$set)$[W]=B[W]}else $[W]=B[W]}Y=X.length;while(Y--){const W=X[Y];if(G=$[W],E=E||W.startsWith("$"),G!=null&&G.$__)G=G.toObject(N$1),$[W]=G;if(G&&typeof G==="object"&&!Buffer.isBuffer(G)&&uC.has(W))$b(A,G,W,D,J,Z);else{const C="Invalid atomic update value for "+W+". Expected an object, received "+typeof G;throw new Error(C)}if(W.startsWith("$")&&SC.isEmptyObject(G))delete $[W]}if(Object.keys($).length===0&&D.upsert&&Object.keys(Z).length>0)return{$setOnInsert:{...Z}};return $};/*!
 * ignore
 *//*!
 * ignore
 */var Zb={$pop:1,$inc:1},M$1={$unset:1},OC={$push:1,$addToSet:1,$set:1,$setOnInsert:1};/*!
 * ignore
 */var Xb={$set:1,$setOnInsert:1}});var WJ=z((bw1,Eb)=>{var T$1=s7();/*!
 * ignore
 */Eb.exports=function F(A){if(A==null)return!1;const B=Object.keys(A),D=B.length;if(D===0)return!1;for(let J=0;J<D;++J){const Z=B[J];if(Z.startsWith("+"))continue;if(T$1(A[Z])&&!!A[Z])if(A[Z]!=null&&typeof A[Z]==="object")return F(A[Z]);else return!!A[Z]}return!1}});var Cb=z((yw1,Wb)=>{Wb.exports=function F(A,B){return A===B||B.startsWith(A+".")}});var zb=z((S$1)=>{var O$1=function(F){if(arguments.length>1)throw new Error("Adding properties is not supported");function A(){}return A.prototype=F,new A};/*!
 * Module dependencies.
 */var xC=["__proto__","constructor","prototype"],CJ=S$1.clone=function F(A,B){if(A===void 0||A===null)return A;if(Array.isArray(A))return S$1.cloneArray(A,B);if(A.constructor){if(/ObjectI[dD]$/.test(A.constructor.name))return typeof A.clone=="function"?A.clone():new A.constructor(A.id);if(A.constructor.name==="ReadPreference")return new A.constructor(A.mode,F(A.tags,B));if(A._bsontype=="Binary"&&A.buffer&&A.value)return typeof A.clone=="function"?A.clone():new A.constructor(A.value(!0),A.sub_type);if(A.constructor.name==="Date"||A.constructor.name==="Function")return new A.constructor(+A);if(A.constructor.name==="RegExp")return new RegExp(A);if(A.constructor.name==="Buffer")return Buffer.from(A)}if(u$1(A))return S$1.cloneObject(A,B);if(A.valueOf)return A.valueOf()};/*!
 * ignore
 */S$1.cloneObject=function F(A,B){const D=B&&B.minimize,J={},Z=Object.keys(A),X=Z.length;let Y=!1,$,G="",E=0;for(E=0;E<X;++E){if(G=Z[E],xC.indexOf(G)!==-1)continue;if($=CJ(A[G],B),!D||typeof $!=="undefined")Y||(Y=!0),J[G]=$}return D?Y&&J:J};S$1.cloneArray=function F(A,B){const D=[],J=A.length;let Z=0;for(;Z<J;Z++)D.push(CJ(A[Z],B));return D};S$1.merge=function F(A,B){const D=Object.keys(B);for(let J of D){if(xC.indexOf(J)!==-1)continue;if(typeof A[J]==="undefined")A[J]=B[J];else if(S$1.isObject(B[J]))F(A[J],B[J]);else A[J]=B[J]}};S$1.mergeClone=function F(A,B){const D=Object.keys(B);for(let J of D){if(xC.indexOf(J)!==-1)continue;if(typeof A[J]==="undefined")A[J]=CJ(B[J]);else if(S$1.isObject(B[J]))F(A[J],B[J]);else A[J]=CJ(B[J])}};S$1.readPref=function F(A){switch(A){case"p":A="primary";break;case"pp":A="primaryPreferred";break;case"s":A="secondary";break;case"sp":A="secondaryPreferred";break;case"n":A="nearest";break}return A};S$1.readConcern=function F(A){if(typeof A==="string"){switch(A){case"l":A="local";break;case"a":A="available";break;case"m":A="majority";break;case"lz":A="linearizable";break;case"s":A="snapshot";break}A={level:A}}return A};var j$1=Object.prototype.toString;S$1.toString=function(F){return j$1.call(F)};var u$1=S$1.isObject=function(F){return S$1.toString(F)=="[object Object]"};S$1.keys=Object.keys;S$1.create=typeof Object.create=="function"?Object.create:O$1;S$1.inherits=function(F,A){F.prototype=S$1.create(A.prototype),F.prototype.constructor=F};S$1.isArgumentsObject=function(F){return Object.prototype.toString.call(F)==="[object Arguments]"}});var Qb=z((mw1,Ub)=>{var c$1=function(F){if(F=String(F),F.length>100)return;var A=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(F);if(!A)return;var B=parseFloat(A[1]),D=(A[2]||"ms").toLowerCase();switch(D){case"years":case"year":case"yrs":case"yr":case"y":return B*d$1;case"weeks":case"week":case"w":return B*m$1;case"days":case"day":case"d":return B*T9;case"hours":case"hour":case"hrs":case"hr":case"h":return B*q8;case"minutes":case"minute":case"mins":case"min":case"m":return B*H8;case"seconds":case"second":case"secs":case"sec":case"s":return B*C8;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return B;default:return}},l$1=function(F){var A=Math.abs(F);if(A>=T9)return Math.round(F/T9)+"d";if(A>=q8)return Math.round(F/q8)+"h";if(A>=H8)return Math.round(F/H8)+"m";if(A>=C8)return Math.round(F/C8)+"s";return F+"ms"},p$1=function(F){var A=Math.abs(F);if(A>=T9)return HJ(F,A,T9,"day");if(A>=q8)return HJ(F,A,q8,"hour");if(A>=H8)return HJ(F,A,H8,"minute");if(A>=C8)return HJ(F,A,C8,"second");return F+" ms"},HJ=function(F,A,B,D){var J=A>=B*1.5;return Math.round(F/B)+" "+D+(J?"s":"")},C8=1000,H8=C8*60,q8=H8*60,T9=q8*24,m$1=T9*7,d$1=T9*365.25;Ub.exports=function(F,A){A=A||{};var B=typeof F;if(B==="string"&&F.length>0)return c$1(F);else if(B==="number"&&isFinite(F))return A.long?p$1(F):l$1(F);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(F))}});var fC=z((dw1,Lb)=>{var i$1=function(F){B.debug=B,B.default=B,B.coerce=$,B.disable=Z,B.enable=J,B.enabled=X,B.humanize=Qb(),B.destroy=G,Object.keys(F).forEach((E)=>{B[E]=F[E]}),B.names=[],B.skips=[],B.formatters={};function A(E){let W=0;for(let C=0;C<E.length;C++)W=(W<<5)-W+E.charCodeAt(C),W|=0;return B.colors[Math.abs(W)%B.colors.length]}B.selectColor=A;function B(E){let W,C=null,H,q;function K(...U){if(!K.enabled)return;const Q=K,V=Number(new Date),L=V-(W||V);if(Q.diff=L,Q.prev=W,Q.curr=V,W=V,U[0]=B.coerce(U[0]),typeof U[0]!=="string")U.unshift("%O");let N=0;U[0]=U[0].replace(/%([a-zA-Z%])/g,(T,P)=>{if(T==="%%")return"%";N++;const x=B.formatters[P];if(typeof x==="function"){const c=U[N];T=x.call(Q,c),U.splice(N,1),N--}return T}),B.formatArgs.call(Q,U),(Q.log||B.log).apply(Q,U)}if(K.namespace=E,K.useColors=B.useColors(),K.color=B.selectColor(E),K.extend=D,K.destroy=B.destroy,Object.defineProperty(K,"enabled",{enumerable:!0,configurable:!1,get:()=>{if(C!==null)return C;if(H!==B.namespaces)H=B.namespaces,q=B.enabled(E);return q},set:(U)=>{C=U}}),typeof B.init==="function")B.init(K);return K}function D(E,W){const C=B(this.namespace+(typeof W==="undefined"?":":W)+E);return C.log=this.log,C}function J(E){B.save(E),B.namespaces=E,B.names=[],B.skips=[];let W;const C=(typeof E==="string"?E:"").split(/[\s,]+/),H=C.length;for(W=0;W<H;W++){if(!C[W])continue;if(E=C[W].replace(/\*/g,".*?"),E[0]==="-")B.skips.push(new RegExp("^"+E.slice(1)+"$"));else B.names.push(new RegExp("^"+E+"$"))}}function Z(){const E=[...B.names.map(Y),...B.skips.map(Y).map((W)=>"-"+W)].join(",");return B.enable(""),E}function X(E){if(E[E.length-1]==="*")return!0;let W,C;for(W=0,C=B.skips.length;W<C;W++)if(B.skips[W].test(E))return!1;for(W=0,C=B.names.length;W<C;W++)if(B.names[W].test(E))return!0;return!1}function Y(E){return E.toString().substring(2,E.toString().length-2).replace(/\.\*\?$/,"*")}function $(E){if(E instanceof Error)return E.stack||E.message;return E}function G(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return B.enable(B.load()),B};Lb.exports=i$1});var wb=z((Vb,KJ)=>{var n$1=function(){if(typeof window!=="undefined"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator!=="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return typeof document!=="undefined"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window!=="undefined"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator!=="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator!=="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},s$1=function(F){if(F[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+F[0]+(this.useColors?"%c ":" ")+"+"+Vb.humanize(this.diff),!this.useColors)return;const A="color: "+this.color;F.splice(1,0,A,"color: inherit");let B=0,D=0;F[0].replace(/%[a-zA-Z%]/g,(J)=>{if(J==="%%")return;if(B++,J==="%c")D=B}),F.splice(D,0,A)},a$1=function(F){try{if(F)Vb.storage.setItem("debug",F);else Vb.storage.removeItem("debug")}catch(A){}},r$1=function(){let F;try{F=Vb.storage.getItem("debug")}catch(A){}if(!F&&typeof process!=="undefined"&&"env"in process)F=process.env.DEBUG;return F},t$1=function(){try{return localStorage}catch(F){}};Vb.formatArgs=s$1;Vb.save=a$1;Vb.load=r$1;Vb.useColors=n$1;Vb.storage=t$1();Vb.destroy=(()=>{let F=!1;return()=>{if(!F)F=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}})();Vb.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];Vb.log=console.debug||console.log||(()=>{});KJ.exports=fC()(Vb);var{formatters:o$1}=KJ.exports;o$1.j=function(F){try{return JSON.stringify(F)}catch(A){return"[UnexpectedJSONParseError]: "+A.message}}});var Pb=z((Ib,UJ)=>{var YG1=function(){return"colors"in Ib.inspectOpts?Boolean(Ib.inspectOpts.colors):XG1.isatty(process.stderr.fd)},$G1=function(F){const{namespace:A,useColors:B}=this;if(B){const D=this.color,J="\x1B[3"+(D<8?D:"8;5;"+D),Z=`  ${J};1m${A} \x1B[0m`;F[0]=Z+F[0].split("\n").join("\n"+Z),F.push(J+"m+"+Ib.humanize(this.diff)+"\x1B[0m")}else F[0]=GG1()+A+" "+F[0]},GG1=function(){if(Ib.inspectOpts.hideDate)return"";return(new Date()).toISOString()+" "},EG1=function(...F){return process.stderr.write(zJ.format(...F)+"\n")},WG1=function(F){if(F)process.env.DEBUG=F;else delete process.env.DEBUG},CG1=function(){return process.env.DEBUG},HG1=function(F){F.inspectOpts={};const A=Object.keys(Ib.inspectOpts);for(let B=0;B<A.length;B++)F.inspectOpts[A[B]]=Ib.inspectOpts[A[B]]},XG1=import.meta.require("tty"),zJ=import.meta.require("util");Ib.init=HG1;Ib.log=EG1;Ib.formatArgs=$G1;Ib.save=WG1;Ib.load=CG1;Ib.useColors=YG1;Ib.destroy=zJ.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");Ib.colors=[6,2,3,4,5,1];try{const F=(()=>{throw new Error(`Cannot require module "supports-color"`);})();if(F&&(F.stderr||F).level>=2)Ib.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221]}catch(F){}Ib.inspectOpts=Object.keys(process.env).filter((F)=>{return/^debug_/i.test(F)}).reduce((F,A)=>{const B=A.substring(6).toLowerCase().replace(/_([a-z])/g,(J,Z)=>{return Z.toUpperCase()});let D=process.env[A];if(/^(yes|on|true|enabled)$/i.test(D))D=!0;else if(/^(no|off|false|disabled)$/i.test(D))D=!1;else if(D==="null")D=null;else D=Number(D);return F[B]=D,F},{});UJ.exports=fC()(Ib);var{formatters:Rb}=UJ.exports;Rb.o=function(F){return this.inspectOpts.colors=this.useColors,zJ.inspect(F,this.inspectOpts).split("\n").map((A)=>A.trim()).join(" ")};Rb.O=function(F){return this.inspectOpts.colors=this.useColors,zJ.inspect(F,this.inspectOpts)}});var Mb=z((pw1,_C)=>{if(typeof process==="undefined"||process.type==="renderer"||!1||process.__nwjs)_C.exports=wb();else _C.exports=Pb()});var jb=z((Tb)=>{var W0=Tb;W0.distinct=function(F){if(F._fields&&Object.keys(F._fields).length>0)return"field selection and slice";const A=Object.keys(W0.distinct);let B;return A.every(function(D){if(F.options[D])return B=D,!1;return!0}),B};W0.distinct.select=W0.distinct.slice=W0.distinct.sort=W0.distinct.limit=W0.distinct.skip=W0.distinct.batchSize=W0.distinct.hint=W0.distinct.tailable=!0;W0.findOneAndUpdate=W0.findOneAndRemove=function(F){const A=Object.keys(W0.findOneAndUpdate);let B;return A.every(function(D){if(F.options[D])return B=D,!1;return!0}),B};W0.findOneAndUpdate.limit=W0.findOneAndUpdate.skip=W0.findOneAndUpdate.batchSize=W0.findOneAndUpdate.tailable=!0;W0.count=function(F){if(F._fields&&Object.keys(F._fields).length>0)return"field selection and slice";const A=Object.keys(W0.count);let B;return A.every(function(D){if(F.options[D])return B=D,!1;return!0}),B};W0.count.slice=W0.count.batchSize=W0.count.tailable=!0});var bC=z((wG1,ub)=>{wG1.isNode=typeof process!="undefined"&&typeof ub=="object"&&typeof global=="object"&&typeof Buffer=="function"&&process.argv;wG1.isMongo=!wG1.isNode&&typeof printjson=="function"&&typeof ObjectId=="function"&&typeof rs=="function"&&typeof sh=="function";wG1.isBrowser=!wG1.isNode&&!wG1.isMongo&&typeof window!="undefined";wG1.type=wG1.isNode?"node":wG1.isMongo?"mongo":wG1.isBrowser?"browser":"unknown"});var wF=z((Sb,kb)=>{var vC=function(){},IG1=function(F){return function(){throw new Error("collection."+F+" not implemented")}},yC=["find","findOne","updateMany","updateOne","replaceOne","count","distinct","findOneAndDelete","findOneAndUpdate","aggregate","findCursor","deleteOne","deleteMany"];for(let F=0,A=yC.length;F<A;++F){const B=yC[F];vC.prototype[B]=IG1(B)}kb.exports=Sb=vC;vC.methods=yC});var gb=z((fb,_b)=>{var NG1=wF();class xb extends NG1{constructor(F){super();this.collection=F,this.collectionName=F.collectionName}async find(F,A){return this.collection.find(F,A).toArray()}async findOne(F,A){return this.collection.findOne(F,A)}async count(F,A){return this.collection.count(F,A)}async distinct(F,A,B){return this.collection.distinct(F,A,B)}async updateMany(F,A,B){return this.collection.updateMany(F,A,B)}async updateOne(F,A,B){return this.collection.updateOne(F,A,B)}async replaceOne(F,A,B){return this.collection.replaceOne(F,A,B)}async deleteOne(F,A){return this.collection.deleteOne(F,A)}async deleteMany(F,A){return this.collection.deleteMany(F,A)}async findOneAndDelete(F,A){return this.collection.findOneAndDelete(F,A)}async findOneAndUpdate(F,A,B){return this.collection.findOneAndUpdate(F,A,B)}findCursor(F,A){return this.collection.find(F,A)}}_b.exports=fb=xb});var yb=z((nw1,bb)=>{var hC=bC();if(hC.type=="unknown")throw new Error("Unknown environment");bb.exports=hC.isNode?gb():hC.isMongo?wF():wF()});var lC=z((hb,mb)=>{var y=function(F,A){if(!(this instanceof y))return new y(F,A);const B=this.constructor.prototype;if(this.op=B.op||void 0,this.options=Object.assign({},B.options),this._conditions=B._conditions?P1.clone(B._conditions):{},this._fields=B._fields?P1.clone(B._fields):void 0,this._updateDoc=B._updateDoc?P1.clone(B._updateDoc):void 0,this._path=B._path||void 0,this._distinctDoc=B._distinctDoc||void 0,this._collection=B._collection||void 0,this._traceFunction=B._traceFunction||void 0,A)this.setOptions(A);if(F)this.find(F)},vb=function(F,A,B){if(Array.isArray(F.sort))throw new TypeError("Can\'t mix sort syntaxes. Use either array or object:\n- `.sort([[\'field\', 1], [\'test\', -1]])`\n- `.sort({ field: 1, test: -1 })`");let D;if(B&&B.$meta){D=F.sort||(F.sort={}),D[A]={$meta:B.$meta};return}D=F.sort||(F.sort={});let J=String(B||1).toLowerCase();if(J=mC[J],!J)throw new TypeError("Invalid sort value: { "+A+": "+B+" }");D[A]=J},TG1=function(F,A,B){if(F.sort=F.sort||[],!Array.isArray(F.sort))throw new TypeError("Can\'t mix sort syntaxes. Use either array or object:\n- `.sort([[\'field\', 1], [\'test\', -1]])`\n- `.sort({ field: 1, test: -1 })`");let D=String(B||1).toLowerCase();if(D=mC[D],!D)throw new TypeError("Invalid sort value: [ "+A+", "+B+" ]");F.sort.push([A,D])},jG1=function(F,A){if(F.sort=F.sort||new Map,!(F.sort instanceof Map))throw new TypeError("Can\'t mix sort syntaxes. Use either array or object or map consistently");A.forEach(function(B,D){let J=String(B||1).toLowerCase();if(J=mC[J],!J)throw new TypeError("Invalid sort value: < "+D+": "+B+" >");F.sort.set(D,J)})},dC=function(F,A,B,D,J){if(F.op=A,y.canMerge(B))F.merge(B);if(D)F._mergeUpdate(D);if(P1.isObject(J))F.setOptions(J);return F};async function cC(F,A){const B=F._optionsForExec(),D=F._conditions,J=F._updateForExec();return p3("update",F._collection.collectionName,D,J,B),F._collection[A](D,J,B)}var PG1=import.meta.require("assert"),MG1=import.meta.require("util"),P1=zb(),p3=Mb()("mquery"),j9="$geoWithin";Object.defineProperty(y,"use$geoWithin",{get:function(){return j9=="$geoWithin"},set:function(F){if(F===!0)j9="$geoWithin";else j9="$within"}});y.prototype.toConstructor=function F(){function A(D,J){if(!(this instanceof A))return new A(D,J);y.call(this,D,J)}P1.inherits(A,y);const B=A.prototype;return B.options={},B.setOptions(this.options),B.op=this.op,B._conditions=P1.clone(this._conditions),B._fields=P1.clone(this._fields),B._updateDoc=P1.clone(this._updateDoc),B._path=this._path,B._distinctDoc=this._distinctDoc,B._collection=this._collection,B._traceFunction=this._traceFunction,A};y.prototype.setOptions=function(F){if(!(F&&P1.isObject(F)))return this;const A=P1.keys(F);let B;for(let D=0;D<A.length;++D)if(B=A[D],typeof this[B]=="function"){const J=Array.isArray(F[B])?F[B]:[F[B]];this[B].apply(this,J)}else this.options[B]=F[B];return this};y.prototype.collection=function F(A){return this._collection=new y.Collection(A),this};y.prototype.collation=function(F){return this.options.collation=F,this};y.prototype.$where=function(F){return this._conditions.$where=F,this};y.prototype.where=function(){if(!arguments.length)return this;if(!this.op)this.op="find";const F=typeof arguments[0];if(F=="string"){if(this._path=arguments[0],arguments.length===2)this._conditions[this._path]=arguments[1];return this}if(F=="object"&&!Array.isArray(arguments[0]))return this.merge(arguments[0]);throw new TypeError("path must be a string or object")};y.prototype.equals=function F(A){this._ensurePath("equals");const B=this._path;return this._conditions[B]=A,this};y.prototype.eq=function F(A){this._ensurePath("eq");const B=this._path;return this._conditions[B]=A,this};y.prototype.or=function F(A){const B=this._conditions.$or||(this._conditions.$or=[]);if(!Array.isArray(A))A=[A];return B.push.apply(B,A),this};y.prototype.nor=function F(A){const B=this._conditions.$nor||(this._conditions.$nor=[]);if(!Array.isArray(A))A=[A];return B.push.apply(B,A),this};y.prototype.and=function F(A){const B=this._conditions.$and||(this._conditions.$and=[]);if(!Array.isArray(A))A=[A];return B.push.apply(B,A),this};/*!
 * gt, gte, lt, lte, ne, in, nin, all, regex, size, maxDistance
 *
 *     Thing.where('type').nin(array)
 */"gt gte lt lte ne in nin all regex size maxDistance minDistance".split(" ").forEach(function(F){y.prototype[F]=function(){let A,B;if(arguments.length===1)this._ensurePath(F),B=arguments[0],A=this._path;else B=arguments[1],A=arguments[0];const D=this._conditions[A]===null||typeof this._conditions[A]==="object"?this._conditions[A]:this._conditions[A]={};return D["$"+F]=B,this}});y.prototype.mod=function(){let F,A;if(arguments.length===1)this._ensurePath("mod"),F=arguments[0],A=this._path;else if(arguments.length===2&&!Array.isArray(arguments[1]))this._ensurePath("mod"),F=[arguments[0],arguments[1]],A=this._path;else if(arguments.length===3)F=[arguments[1],arguments[2]],A=arguments[0];else F=arguments[1],A=arguments[0];const B=this._conditions[A]||(this._conditions[A]={});return B.$mod=F,this};y.prototype.exists=function(){let F,A;if(arguments.length===0)this._ensurePath("exists"),F=this._path,A=!0;else if(arguments.length===1)if(typeof arguments[0]==="boolean")this._ensurePath("exists"),F=this._path,A=arguments[0];else F=arguments[0],A=!0;else if(arguments.length===2)F=arguments[0],A=arguments[1];const B=this._conditions[F]||(this._conditions[F]={});return B.$exists=A,this};y.prototype.elemMatch=function(){if(arguments[0]==null)throw new TypeError("Invalid argument");let F,A,B;if(typeof arguments[0]==="function")this._ensurePath("elemMatch"),A=this._path,F=arguments[0];else if(P1.isObject(arguments[0]))this._ensurePath("elemMatch"),A=this._path,B=arguments[0];else if(typeof arguments[1]==="function")A=arguments[0],F=arguments[1];else if(arguments[1]&&P1.isObject(arguments[1]))A=arguments[0],B=arguments[1];else throw new TypeError("Invalid argument");if(F)B=new y,F(B),B=B._conditions;const D=this._conditions[A]||(this._conditions[A]={});return D.$elemMatch=B,this};y.prototype.within=function F(){if(this._ensurePath("within"),this._geoComparison=j9,arguments.length===0)return this;if(arguments.length===2)return this.box.apply(this,arguments);else if(2<arguments.length)return this.polygon.apply(this,arguments);const A=arguments[0];if(!A)throw new TypeError("Invalid argument");if(A.center)return this.circle(A);if(A.box)return this.box.apply(this,A.box);if(A.polygon)return this.polygon.apply(this,A.polygon);if(A.type&&A.coordinates)return this.geometry(A);throw new TypeError("Invalid argument")};y.prototype.box=function(){let F,A;if(arguments.length===3)F=arguments[0],A=[arguments[1],arguments[2]];else if(arguments.length===2)this._ensurePath("box"),F=this._path,A=[arguments[0],arguments[1]];else throw new TypeError("Invalid argument");const B=this._conditions[F]||(this._conditions[F]={});return B[this._geoComparison||j9]={$box:A},this};y.prototype.polygon=function(){let F,A;if(typeof arguments[0]=="string")F=Array.from(arguments),A=F.shift();else this._ensurePath("polygon"),A=this._path,F=Array.from(arguments);const B=this._conditions[A]||(this._conditions[A]={});return B[this._geoComparison||j9]={$polygon:F},this};y.prototype.circle=function(){let F,A;if(arguments.length===1)this._ensurePath("circle"),F=this._path,A=arguments[0];else if(arguments.length===2)F=arguments[0],A=arguments[1];else throw new TypeError("Invalid argument");if(!(("radius"in A)&&A.center))throw new Error("center and radius are required");const B=this._conditions[F]||(this._conditions[F]={}),D=A.spherical?"$centerSphere":"$center",J=this._geoComparison||j9;if(B[J]={},B[J][D]=[A.center,A.radius],"unique"in A)B[J].$uniqueDocs=!!A.unique;return this};y.prototype.near=function F(){let A,B;if(this._geoComparison="$near",arguments.length===0)return this;else if(arguments.length===1)this._ensurePath("near"),A=this._path,B=arguments[0];else if(arguments.length===2)A=arguments[0],B=arguments[1];else throw new TypeError("Invalid argument");if(!B.center)throw new Error("center is required");const D=this._conditions[A]||(this._conditions[A]={}),J=B.spherical?"$nearSphere":"$near";if(Array.isArray(B.center)){D[J]=B.center;const Z="maxDistance"in B?B.maxDistance:null;if(Z!=null)D.$maxDistance=Z;if(B.minDistance!=null)D.$minDistance=B.minDistance}else{if(B.center.type!="Point"||!Array.isArray(B.center.coordinates))throw new Error(MG1.format("Invalid GeoJSON specified for %s",J));if(D[J]={$geometry:B.center},"maxDistance"in B)D[J].$maxDistance=B.maxDistance;if("minDistance"in B)D[J].$minDistance=B.minDistance}return this};y.prototype.intersects=function F(){if(this._ensurePath("intersects"),this._geoComparison="$geoIntersects",arguments.length===0)return this;const A=arguments[0];if(A!=null&&A.type&&A.coordinates)return this.geometry(A);throw new TypeError("Invalid argument")};y.prototype.geometry=function F(){if(!(this._geoComparison=="$within"||this._geoComparison=="$geoWithin"||this._geoComparison=="$near"||this._geoComparison=="$geoIntersects"))throw new Error("geometry() must come after `within()`, `intersects()`, or `near()");let A,B;if(arguments.length===1)this._ensurePath("geometry"),B=this._path,A=arguments[0];else throw new TypeError("Invalid argument");if(!(A.type&&Array.isArray(A.coordinates)))throw new TypeError("Invalid argument");const D=this._conditions[B]||(this._conditions[B]={});return D[this._geoComparison]={$geometry:A},this};y.prototype.select=function F(){let A=arguments[0];if(!A)return this;if(arguments.length!==1)throw new Error("Invalid select: select only takes 1 argument");this._validate("select");const B=this._fields||(this._fields={}),D=typeof A;let J,Z;if((D=="string"||P1.isArgumentsObject(A))&&typeof A.length=="number"||Array.isArray(A)){if(D=="string")A=A.split(/\s+/);for(J=0,Z=A.length;J<Z;++J){let X=A[J];if(!X)continue;const Y=X[0]=="-"?0:1;if(Y===0)X=X.substring(1);B[X]=Y}return this}if(P1.isObject(A)){const X=P1.keys(A);for(J=0;J<X.length;++J)B[X[J]]=A[X[J]];return this}throw new TypeError("Invalid select() argument. Must be string or object.")};y.prototype.slice=function(){if(arguments.length===0)return this;this._validate("slice");let F,A;if(arguments.length===1){const D=arguments[0];if(typeof D==="object"&&!Array.isArray(D)){const J=Object.keys(D),Z=J.length;for(let X=0;X<Z;++X)this.slice(J[X],D[J[X]]);return this}this._ensurePath("slice"),F=this._path,A=arguments[0]}else if(arguments.length===2)if(typeof arguments[0]==="number")this._ensurePath("slice"),F=this._path,A=[arguments[0],arguments[1]];else F=arguments[0],A=arguments[1];else if(arguments.length===3)F=arguments[0],A=[arguments[1],arguments[2]];const B=this._fields||(this._fields={});return B[F]={$slice:A},this};y.prototype.sort=function(F){if(!F)return this;let A,B,D;this._validate("sort");const J=typeof F;if(Array.isArray(F)){B=F.length;for(A=0;A<F.length;++A){if(!Array.isArray(F[A]))throw new Error("Invalid sort() argument, must be array of arrays");TG1(this.options,F[A][0],F[A][1])}return this}if(arguments.length===1&&J=="string"){F=F.split(/\s+/),B=F.length;for(A=0;A<B;++A){if(D=F[A],!D)continue;const Z=D[0]=="-"?-1:1;if(Z===-1)D=D.substring(1);vb(this.options,D,Z)}return this}if(P1.isObject(F)){const Z=P1.keys(F);for(A=0;A<Z.length;++A)D=Z[A],vb(this.options,D,F[D]);return this}if(typeof Map!=="undefined"&&F instanceof Map)return jG1(this.options,F),this;throw new TypeError("Invalid sort() argument. Must be a string, object, or array.")};/*!
 * @ignore
 */var mC={1:1,"-1":-1,asc:1,ascending:1,desc:-1,descending:-1};/*!
 * limit, skip, batchSize, comment
 *
 * Sets these associated options.
 *
 *     query.comment('feed query');
 */["limit","skip","batchSize","comment"].forEach(function(F){y.prototype[F]=function(A){return this._validate(F),this.options[F]=A,this}});y.prototype.maxTime=y.prototype.maxTimeMS=function(F){return this._validate("maxTime"),this.options.maxTimeMS=F,this};y.prototype.hint=function(){if(arguments.length===0)return this;this._validate("hint");const F=arguments[0];if(P1.isObject(F)){const A=this.options.hint||(this.options.hint={});for(let B in F)A[B]=F[B];return this}if(typeof F==="string")return this.options.hint=F,this;throw new TypeError("Invalid hint. "+F)};y.prototype.j=function F(A){return this.options.j=A,this};y.prototype.slaveOk=function(F){return this.options.slaveOk=arguments.length?!!F:!0,this};y.prototype.read=y.prototype.setReadPreference=function(F){if(arguments.length>1&&!y.prototype.read.deprecationWarningIssued)console.error("Deprecation warning: \'tags\' argument is not supported anymore in Query.read() method. Please use mongodb.ReadPreference object instead."),y.prototype.read.deprecationWarningIssued=!0;return this.options.readPreference=P1.readPref(F),this};y.prototype.readConcern=y.prototype.r=function(F){return this.options.readConcern=P1.readConcern(F),this};y.prototype.tailable=function(){return this._validate("tailable"),this.options.tailable=arguments.length?!!arguments[0]:!0,this};y.prototype.writeConcern=y.prototype.w=function F(A){if(typeof A==="object"){if(typeof A.j!=="undefined")this.options.j=A.j;if(typeof A.w!=="undefined")this.options.w=A.w;if(typeof A.wtimeout!=="undefined")this.options.wtimeout=A.wtimeout}else this.options.w=A==="m"?"majority":A;return this};y.prototype.wtimeout=y.prototype.wTimeout=function F(A){return this.options.wtimeout=A,this};y.prototype.merge=function(F){if(!F)return this;if(!y.canMerge(F))throw new TypeError("Invalid argument. Expected instanceof mquery or plain object");if(F instanceof y){if(F._conditions)P1.merge(this._conditions,F._conditions);if(F._fields)this._fields||(this._fields={}),P1.merge(this._fields,F._fields);if(F.options)this.options||(this.options={}),P1.merge(this.options,F.options);if(F._updateDoc)this._updateDoc||(this._updateDoc={}),P1.mergeClone(this._updateDoc,F._updateDoc);if(F._distinctDoc)this._distinctDoc=F._distinctDoc;return this}return P1.merge(this._conditions,F),this};y.prototype.find=function(F){if(this.op="find",y.canMerge(F))this.merge(F);return this};y.prototype._find=async function F(){const A=this._conditions,B=this._optionsForExec();if(this.$useProjection)B.projection=this._fieldsForExec();else B.fields=this._fieldsForExec();return p3("_find",this._collection.collectionName,A,B),this._collection.find(A,B)};y.prototype.cursor=function F(A){if(this.op){if(this.op!=="find")throw new TypeError(".cursor only support .find method")}else this.find(A);const B=this._conditions,D=this._optionsForExec();if(this.$useProjection)D.projection=this._fieldsForExec();else D.fields=this._fieldsForExec();return p3("findCursor",this._collection.collectionName,B,D),this._collection.findCursor(B,D)};y.prototype.findOne=function(F){if(this.op="findOne",y.canMerge(F))this.merge(F);return this};y.prototype._findOne=async function F(){const A=this._conditions,B=this._optionsForExec();if(this.$useProjection)B.projection=this._fieldsForExec();else B.fields=this._fieldsForExec();return p3("findOne",this._collection.collectionName,A,B),this._collection.findOne(A,B)};y.prototype.count=function(F){if(this.op="count",this._validate(),y.canMerge(F))this.merge(F);return this};y.prototype._count=async function F(){const A=this._conditions,B=this._optionsForExec();return p3("count",this._collection.collectionName,A,B),this._collection.count(A,B)};y.prototype.distinct=function(F,A){if(this.op="distinct",this._validate(),!A&&typeof F==="string")A=F,F=void 0;if(typeof A=="string")this._distinctDoc=A;if(y.canMerge(F))this.merge(F);return this};y.prototype._distinct=async function F(){if(!this._distinctDoc)throw new Error("No value for `distinct` has been declared");const A=this._conditions,B=this._optionsForExec();return p3("distinct",this._collection.collectionName,A,B),this._collection.distinct(this._distinctDoc,A,B)};y.prototype.updateMany=function F(A,B,D){if(arguments.length===1)B=A,A=D=void 0;return dC(this,"updateMany",A,B,D)};y.prototype._updateMany=async function(){return cC(this,"updateMany")};y.prototype.updateOne=function F(A,B,D){if(arguments.length===1)B=A,A=D=void 0;return dC(this,"updateOne",A,B,D)};y.prototype._updateOne=async function(){return cC(this,"updateOne")};y.prototype.replaceOne=function F(A,B,D){if(arguments.length===1)B=A,A=D=void 0;return this.setOptions({overwrite:!0}),dC(this,"replaceOne",A,B,D)};y.prototype._replaceOne=async function(){return cC(this,"replaceOne")};/*!
 * Internal helper for updateMany, updateOne
 */y.prototype.deleteOne=function(F){if(this.op="deleteOne",y.canMerge(F))this.merge(F);return this};y.prototype._deleteOne=async function(){const F=this._optionsForExec();delete F.justOne;const A=this._conditions;return p3("deleteOne",this._collection.collectionName,A,F),this._collection.deleteOne(A,F)};y.prototype.deleteMany=function(F){if(this.op="deleteMany",y.canMerge(F))this.merge(F);return this};y.prototype._deleteMany=async function(){const F=this._optionsForExec();delete F.justOne;const A=this._conditions;return p3("deleteOne",this._collection.collectionName,A,F),this._collection.deleteMany(A,F)};y.prototype.findOneAndUpdate=function(F,A,B){if(this.op="findOneAndUpdate",this._validate(),arguments.length===1)A=F,F=B=void 0;if(y.canMerge(F))this.merge(F);if(A)this._mergeUpdate(A);return B&&this.setOptions(B),this};y.prototype._findOneAndUpdate=async function(){const F=this._conditions,A=this._updateForExec(),B=this._optionsForExec();return this._collection.findOneAndUpdate(F,A,B)};y.prototype.findOneAndRemove=y.prototype.findOneAndDelete=function(F,A){if(this.op="findOneAndRemove",this._validate(),y.canMerge(F))this.merge(F);return A&&this.setOptions(A),this};y.prototype._findOneAndRemove=async function(){const F=this._optionsForExec(),A=this._conditions;return this._collection.findOneAndDelete(A,F)};y.prototype.setTraceFunction=function(F){return this._traceFunction=F,this};y.prototype.exec=async function F(A){if(typeof A==="string")this.op=A;PG1.ok(this.op,"Missing query type: (find, etc)");const B="_"+this.op;if(typeof this[B]!=="function")throw new TypeError(`this[${B}] is not a function`);return this[B]()};y.prototype.then=async function(F,A){return this.exec().then(F,A)};y.prototype.cursor=function(){if(this.op!="find")throw new Error("cursor() is only available for find");const F=this._conditions,A=this._optionsForExec();if(this.$useProjection)A.projection=this._fieldsForExec();else A.fields=this._fieldsForExec();return p3("cursor",this._collection.collectionName,F,A),this._collection.findCursor(F,A)};y.prototype.selected=function F(){return!!(this._fields&&Object.keys(this._fields).length>0)};y.prototype.selectedInclusively=function F(){if(!this._fields)return!1;const A=Object.keys(this._fields);if(A.length===0)return!1;for(let B=0;B<A.length;++B){const D=A[B];if(this._fields[D]===0)return!1;if(this._fields[D]&&typeof this._fields[D]==="object"&&this._fields[D].$meta)return!1}return!0};y.prototype.selectedExclusively=function F(){if(!this._fields)return!1;const A=Object.keys(this._fields);if(A.length===0)return!1;for(let B=0;B<A.length;++B){const D=A[B];if(this._fields[D]===0)return!0}return!1};y.prototype._mergeUpdate=function(F){if(!this._updateDoc)this._updateDoc={};if(F instanceof y){if(F._updateDoc)P1.mergeClone(this._updateDoc,F._updateDoc)}else P1.mergeClone(this._updateDoc,F)};y.prototype._optionsForExec=function(){return P1.clone(this.options)};y.prototype._fieldsForExec=function(){return P1.clone(this._fields)};y.prototype._updateForExec=function(){const F=P1.clone(this._updateDoc),A=P1.keys(F),B={};for(let D of A){if(this.options.overwrite){B[D]=F[D];continue}if(D[0]!=="$"){if(!B.$set)if(F.$set)B.$set=F.$set;else B.$set={};if(B.$set[D]=F[D],!~A.indexOf("$set"))A.push("$set")}else if(D==="$set"){if(!B.$set)B[D]=F[D]}else B[D]=F[D]}return this._compiledUpdate=B,B};y.prototype._ensurePath=function(F){if(!this._path){const A=F+"() must be used after where() when called with these arguments";throw new Error(A)}};/*!
 * Permissions
 */y.permissions=jb();y._isPermitted=function(F,A){const B=y.permissions[A];if(!B)return!0;return B[F]!==!0};y.prototype._validate=function(F){let A,B;if(F===void 0){if(B=y.permissions[this.op],typeof B!="function")return!0;A=B(this)}else if(!y._isPermitted(F,this.op))A=F;if(A)throw new Error(A+" cannot be used with "+this.op)};y.canMerge=function(F){return F instanceof y||P1.isObject(F)};y.setGlobalTraceFunction=function(F){y.traceFunction=F};/*!
 * Exports.
 */y.utils=P1;y.env=bC();y.Collection=yb();y.BaseCollection=wF();mb.exports=hb=y});var pC=z((sw1,db)=>{db.exports=function F(A,B){if(typeof A==="string")A=A.split(/\s+/);if(!Array.isArray(A)&&Object.prototype.toString.call(A)!=="[object Arguments]")return A;const J=A.length,Z={};for(let X=0;X<J;++X){let Y=A[X];if(!Y)continue;const $=Y[0]=="-"?0:1;if(!B&&$===0)Y=Y.substring(1);Z[Y]=$}return Z}});var pb=z((aw1,lb)=>{var cb=function(F,A){const B=Object.keys(F)[0];if(B==="$and"||B==="$or"){if(!Array.isArray(F[B]))return!1;return F[B].find((Z)=>cb(Z,A))!=null}const D=B.indexOf("."),J=D===-1?B:B.slice(0,D);return A.find((Z)=>Z.includes("$["+J+"]"))!=null};lb.exports=function F(A,B){const D=Object.keys(A).map((J)=>Object.keys(A[J])).reduce((J,Z)=>J.concat(Z),[]);return B.filter((J)=>{return cb(J,D)})}});var LJ=z((rw1,ib)=>{/*!
 * ignore
 */ib.exports=function F(A){if(typeof A!=="object"||A===null)return!1;const B=Object.keys(A),D=B.length;for(let J=0;J<D;++J)if(B[J][0]==="$")return!0;return!1}});var iC=z((tw1,nb)=>{var uG1=LJ(),{trustedSymbol:OG1}=y9();nb.exports=function F(A){if(A==null||typeof A!=="object")return A;if(Array.isArray(A)){for(let D of A)F(D);return A}const B=Object.keys(A);for(let D of B){const J=A[D];if(J!=null&&J[OG1])continue;if(D==="$and"||D==="$or"){F(J);continue}if(uG1(J)){const Z=Object.keys(J);if(Z.length===1&&Z[0]==="$eq")continue;A[D]={$eq:A[D]}}}return A}});var ab=z((ow1,sb)=>{sb.exports=function F(A){if(A==null)return;const B=Object.keys(A);for(let D=0;D<B.length;++D)if(typeof A[B[D]]==="string")A[B[D]]=1}});var ob=z((ew1,tb)=>{var rb=function(F,A){const B=A.split("."),D=B.length;let J=B[0];for(let Z=1;Z<D;++Z){if(F[J]!=null||F[J+".$"]!=null)return!0;J+="."+B[Z]}return F[J]!=null||F[J+".$"]!=null},SG1=a7(),kG1=WJ();/*!
 * ignore
 */tb.exports=function F(A,B,D){if(D==null)return;const J=Object.keys(D);if(B=B||{},kG1(A))for(let Z of J){if(!rb(B,Z))A[Z]=1;else if(B[Z]===0)delete A[Z];const X=D[Z]?.refPath;if(typeof X==="string"){if(!rb(B,X))A[X]=1;else if(B[X]===0)delete A[X]}}else if(SG1(A))for(let Z of J){if(B[Z]==null)delete A[Z];const X=D[Z]?.refPath;if(typeof X==="string"&&B[X]==null)delete A[X]}};/*!
 * ignore
 */});var nC=z((FR1,Fy)=>{var fG1=function(F,A){if(F[A])return!0;const B=A.split(".");let D=B[0];for(let Z=1;Z<B.length;++Z){if(F[D])return!0;D+="."+B[Z]}const J=Object.keys(F);if(J.length){const Z=A+".";for(let X of J)if(X.slice(0,A.length+1)===Z)return!0}return!1},eb=n7().modifiedPaths,xG1=t1();Fy.exports=function(F,A,B,D){D=D||{};const J=D.setDefaultsOnInsert!=null?D.setDefaultsOnInsert:A.base.options.setDefaultsOnInsert;if(!D.upsert||J===!1)return B;const Z=Object.keys(B||{}),X={},Y={},$=Z.length,G={};let E=!1;for(let H=0;H<$;++H)if(Z[H].startsWith("$"))eb(B[Z[H]],"",G),E=!0;if(!E)eb(B,"",G);const W=Object.keys(F),C=W.length;for(let H=0;H<C;++H){const q=W[H],K=F[q];if(K&&typeof K==="object"){const U=Object.keys(K),Q=U.length;let V=!1;for(let L=0;L<Q;++L)if(U[L].startsWith("$")){V=!0;break}if(V)continue}X[q]=!0,G[q]=!0}if(D&&D.overwrite&&!E)return B;return A.eachPath(function(H,q){if(q.path==="_id"&&q.options.auto)return;const K=q.getDefault(null,!0);if(fG1(G,H))return;if(typeof K==="undefined")return;if(q.splitPath().includes("$*"))return;if(B=B||{},B.$setOnInsert=B.$setOnInsert||{},xG1(B,H)==null)B.$setOnInsert[H]=K;Y[H]=K}),B}});var Zy=z((AR1,Jy)=>{/*!
 * Module dependencies.
 */var Ay=C9(),_G1=e5(),By=n7().flatten,Dy=n7().modifiedPaths;Jy.exports=function(F,A,B,D,J){const Z=Object.keys(B||{});let X={},Y={};const $={},G={},E=Z.length;let W=!1;const C={};let H,q,K;for(K=0;K<E;++K)if(Z[K].startsWith("$")){if(W=!0,Z[K]==="$push"||Z[K]==="$addToSet"){const _=Object.keys(B[Z[K]]);for(let s=0;s<_.length;++s)if(H=B[Z[K]][_[s]],H&&H.$each)G[_[s]]=(G[_[s]]||[]).concat(H.$each);else G[_[s]]=(G[_[s]]||[]).concat([H]);continue}Dy(B[Z[K]],"",C);const u=By(B[Z[K]],null,null,A),O=Object.keys(u),j=O.length;for(let _=0;_<j;++_){const s=_G1(O[_]);if(q=Z[K],s.includes("$"))continue;if(q==="$set"||q==="$setOnInsert"||q==="$pull"||q==="$pullAll")Y[s]=u[O[_]],$[s]=q==="$pull"||q==="$pullAll";else if(q==="$unset")Y[s]=void 0;X[s]=!0}}if(!W)Dy(B,"",C),Y=By(B,null,null,A),X=Object.keys(Y);const U=Object.keys(Y),Q=U.length,V=[],L=[],N=[],h=F;function T(u,O){const j=A._getSchema(U[u]);if(j==null)return;if(j.instance==="Mixed"&&j.path!==U[u])return;if(O&&Array.isArray(O.$in))O.$in.forEach((_,s)=>{V.push(function(_1){j.doValidate(_,function(p0){if(p0)p0.path=U[s]+".$in."+s,L.push(p0);_1(null)},h,{updateValidator:!0})})});else{if($[U[u]]&&j.$isMongooseArray)return;if(j.$isMongooseDocumentArrayElement&&O!=null&&O.$__!=null)N.push(U[u]),V.push(function(_){j.doValidate(O,function(s){if(s)if(s.errors)for(let _1 of Object.keys(s.errors)){const p0=s.errors[_1];p0.path=U[u]+"."+_1,L.push(p0)}else s.path=U[u],L.push(s);return _(null)},h,{updateValidator:!0})});else V.push(function(_){for(let s of N)if(U[u].startsWith(s+"."))return _(null);j.doValidate(O,function(s){if(j.schema!=null&&j.schema.options.storeSubdocValidationError===!1&&s instanceof Ay)return _(null);if(s)s.path=U[u],L.push(s);_(null)},h,{updateValidator:!0})})}}for(K=0;K<Q;++K)T(K,Y[U[K]]);const P=Object.keys(G);for(let u of P){let O=A._getSchema(u);if(O&&O.$isMongooseDocumentArray)V.push(function(j){O.doValidate(G[u],c(u,L,j),D&&D.context==="query"?F:null)});else{O=A._getSchema(u+".0");for(let j of G[u])V.push(function(_){O.doValidate(j,c(u,L,_),D&&D.context==="query"?F:null,{updateValidator:!0})})}}if(J!=null){let u=V.length;if(u===0)return x(J);for(let O of V)O(function(){if(--u<=0)x(J)});return}return function(u){let O=V.length;if(O===0)return x(u);for(let j of V)j(function(){if(--O<=0)x(u)})};function x(u){if(L.length){const O=new Ay(null);for(let j of L)O.addError(j.path,j);return u(O)}u(null)}function c(u,O,j){return function(_){if(_)_.path=u,O.push(_);j(null)}}}});var RJ=z((BR1,Ly)=>{var v=function(F,A,B,D){if(!this._mongooseOptions)this._mongooseOptions={};A=A||{},this._transforms=[],this._hooks=new rC,this._executionStack=null;const J=Object.keys(A);for(let X of J)this._mongooseOptions[X]=A[X];if(D)this.mongooseCollection=D;if(B)this.model=B,this.schema=B.schema;if(this.model&&this.model._mapreduce)this.lean();if(r2.call(this,null,A),D)this.collection(D);if(F)this.find(F);this.options=this.options||{},this.$useProjection=!0;const Z=this&&this.schema&&this.schema.options&&this.schema.options.collation||null;if(Z!=null)this.options.collation=Z},Hy=function(F){try{mG1(F)}catch(A){F.error(A)}},aC=function(F,A){if(F===1||F==="asc"||F==="ascending")return 1;if(F===-1||F==="desc"||F==="descending")return-1;if(F?.$meta!=null)return{$meta:F.$meta};throw new TypeError("Invalid sort value: { "+A+": "+F+" }")},Gy=function(F,A,B,D,J,Z,X,Y){if(D.includeResultMetadata&&A==null)return $(null),null;MF.createModelAndInit(F,A,J,Z,D,X,$);function $(G,E){if(G)return sC(()=>Y(G));if(D.includeResultMetadata){if(A&&E){if(D.session!=null)E.$session(D.session);B.value=E}else B.value=null;return sC(()=>Y(null,B))}if(D.session!=null)E.$session(D.session);sC(()=>Y(null,E))}},TF=function(F){if(!F||!F.model||!F.model.schema)return;const A=F.model.schema;if(A&&A.discriminatorMapping&&!A.discriminatorMapping.isRoot)F._conditions[A.discriminatorMapping.key]=A.discriminatorMapping.value},qy=function(F){if("new"in F)F.returnDocument=F.new?"after":"before",delete F.new;if("returnOriginal"in F)F.returnDocument=F.returnOriginal?"before":"after",delete F.returnOriginal;if(typeof F.returnDocument==="string")F.returnOriginal=F.returnDocument==="before"},oC=function(F,A,B){const D=F._optionsForExec(F.model);if(A in D)return D[A];if(A in F.model.base.options)return F.model.base.options[A];return B},tC=function(F,A,B,D,J,Z){if(J.lean&&typeof J.lean.transform==="function"){J.lean.transform(A);for(let X=0;X<F.childSchemas.length;X++){const Y=B?B+"."+F.childSchemas[X].model.path:F.childSchemas[X].model.path,$=F.childSchemas[X].schema,G=Wy.get(Y,A);if(G==null)continue;if(Array.isArray(G))for(let E=0;E<G.length;E++)J.lean.transform(G[E]);else J.lean.transform(G);tC($,G,Y,D,J)}if(Z)return Z(null,A);else return}if(J.includeResultMetadata)return Z(null,D);return Z(null,A)},Ky=function(F,A,B,D){if(D.lean&&typeof D.lean.transform==="function"){for(let J of A)D.lean.transform(J);for(let J=0;J<F.childSchemas.length;J++){const Z=B?B+"."+F.childSchemas[J].model.path:F.childSchemas[J].model.path,X=F.childSchemas[J].schema;let Y=Wy.get(Z,A);if(Y==null)continue;Y=Y.flat();for(let $=0;$<Y.length;$++)D.lean.transform(Y[$]);Ky(X,Y,Z,D)}}return A};async function eC(F){if(this._applyTranslateAliases(),this._castConditions(),Hy(this),this.error()!=null)throw this.error();const A=this._conditions,B=this._optionsForExec(this.model);this._update=z2(this._update,B);const D=F==="replaceOne";if(D)this._update=new this.model(this._update,null,!0);else{if(this._update=this._castUpdate(this._update),this._update==null||Object.keys(this._update).length===0)return{acknowledged:!1};const Z=Object.assign({},B,{setDefaultsOnInsert:this._mongooseOptions.setDefaultsOnInsert});this._update=Cy(this._conditions,this.model.schema,this._update,Z)}if(Array.isArray(B.arrayFilters))B.arrayFilters=sG1(this._update,B.arrayFilters);if(oC(this,"runValidators",!1))await this.validate(this._update,B,D);if(this._update.toBSON)this._update=this._update.toBSON();return this.mongooseCollection[F](A,this._update,B)}var FH=function(F,A,B,D,J,Z){if(F.op=A,F._validateOp(),D=D||{},J!=null){if("strict"in J)F._mongooseOptions.strict=J.strict}if(!(B instanceof v)&&B!=null&&B.toString()!=="[object Object]")F.error(new j4(B,"filter",A));else F.merge(B);if(Y0.isObject(J))F.setOptions(J);if(F._mergeUpdate(D),Z)return F.exec(Z),F;return F},z8=function(F,A){if(typeof F==="function")F=F.call(A);if(F==null)F=new gG1(A.getQuery(),A.model.modelName);return F},BE1=function(F){return new Promise((A,B)=>{F._hooks.execPost("exec",F,[],{},(D)=>{if(D)return B(D);A()})})},zy=function(F,A,B,D){if(F._queryMiddleware==null){if(B!=null)throw B;return A}return new Promise((J,Z)=>{const X=B?{error:B}:{};F._queryMiddleware.execPost(D||F.op,F,[A],X,(Y,$)=>{if(Y)return Z(Y);J($)})})},DE1=function(F){return new Promise((A,B)=>{F._hooks.execPre("exec",F,[],(D)=>{if(D!=null)return B(D);A()})})},Uy=function(F,A){if(F._queryMiddleware==null)return;return new Promise((B,D)=>{F._queryMiddleware.execPre(A||F.op,F,[],(J)=>{if(J!=null)return D(J);B()})})},Qy=function(F,A,B){for(let D of A){if(F.push(B+D.path),!Array.isArray(D.populate))continue;Qy(F,D.populate,B+D.path+".")}};/*!
 * Module dependencies.
 */var IF=E2(),gG1=sB(),rC=h7(),K2=H1(),j4=AD(),Xy=Og(),Yy=C9(),{applyGlobalMaxTimeMS:NF,applyGlobalDiskUse:PF}=LC(),bG1=AW(),yG1=VC(),vG1=wC(),hG1=w9(),mG1=ng(),wJ=DF(),dG1=kC(),z2=J0(),Ey=c6(),MF=s5(),sC=y2(),cG1=y6().internalToObjectOptions,lG1=a7(),pG1=WJ(),iG1=YD(),$y=Cb(),Wy=h6(),r2=lC(),nG1=pC(),sG1=pb(),aG1=iC(),rG1=ab(),tG1=ob(),Cy=nC(),VJ=v4(),oG1=Zy(),RF=import.meta.require("util"),Y0=D1(),eG1=TD().queryMiddlewareFunctions,FE1=new Set(["allowDiskUse","batchSize","collation","comment","explain","hint","j","lean","limit","maxTimeMS","populate","projection","read","select","skip","slice","sort","tailable","w","writeConcern","wtimeout"]);/*!
 * inherit mquery
 */v.prototype=new r2;v.prototype.constructor=v;v.base=r2.prototype;/*!
 * Overwrite mquery's `_distinct`, because Mongoose uses that name
 * to store the field to apply distinct on.
 */Object.defineProperty(v.prototype,"_distinct",{configurable:!0,writable:!0,enumerable:!0,value:void 0});v.use$geoWithin=r2.use$geoWithin;v.prototype.toConstructor=function F(){const A=this.model,B=this.mongooseCollection,D=function(X,Y){if(!(this instanceof D))return new D(X,Y);this._mongooseOptions=z2(J._mongooseOptions),v.call(this,X,Y||null,A,B)};RF.inherits(D,A.Query);const J=D.prototype;J.options={};const Z=Object.assign({},this.options);if(Z.sort!=null)J.sort(Z.sort),delete Z.sort;return J.setOptions(Z),J.op=this.op,J._validateOp(),J._conditions=z2(this._conditions),J._fields=z2(this._fields),J._update=z2(this._update,{flattenDecimals:!1}),J._path=this._path,J._distinct=this._distinct,J._collection=this._collection,J._mongooseOptions=this._mongooseOptions,D};v.prototype.clone=function(){const F=this.model,A=this.mongooseCollection,B=new this.model.Query({},{},F,A),D=Object.assign({},this.options);if(D.sort!=null)B.sort(D.sort),delete D.sort;return B.setOptions(D),B.op=this.op,B._validateOp(),B._conditions=z2(this._conditions),B._fields=z2(this._fields),B._update=z2(this._update,{flattenDecimals:!1}),B._path=this._path,B._distinct=this._distinct,B._collection=this._collection,B._mongooseOptions=this._mongooseOptions,B};v.prototype.slice=function(){if(arguments.length===0)return this;this._validate("slice");let F,A;if(arguments.length===1){const D=arguments[0];if(typeof D==="object"&&!Array.isArray(D)){const J=Object.keys(D),Z=J.length;for(let X=0;X<Z;++X)this.slice(J[X],D[J[X]]);return this}this._ensurePath("slice"),F=this._path,A=arguments[0]}else if(arguments.length===2)if(typeof arguments[0]==="number")this._ensurePath("slice"),F=this._path,A=[arguments[0],arguments[1]];else F=arguments[0],A=arguments[1];else if(arguments.length===3)F=arguments[0],A=[arguments[1],arguments[2]];const B={};return B[F]={$slice:A},this.select(B),this};/*!
 * ignore
 */var AE1=new Set(eG1);v.prototype._validateOp=function(){if(this.op!=null&&!AE1.has(this.op))this.error(new Error('Query has invalid `op`: "'+this.op+'"'))};v.prototype.mod=function(){let F,A;if(arguments.length===1)this._ensurePath("mod"),F=arguments[0],A=this._path;else if(arguments.length===2&&!Array.isArray(arguments[1]))this._ensurePath("mod"),F=[arguments[0],arguments[1]],A=this._path;else if(arguments.length===3)F=[arguments[1],arguments[2]],A=arguments[0];else F=arguments[1],A=arguments[0];const B=this._conditions[A]||(this._conditions[A]={});return B.$mod=F,this};v.prototype.limit=function F(A){if(this._validate("limit"),typeof A==="string")try{A=wJ(A)}catch(B){throw new IF("Number",A,"limit")}return this.options.limit=A,this};v.prototype.skip=function F(A){if(this._validate("skip"),typeof A==="string")try{A=wJ(A)}catch(B){throw new IF("Number",A,"skip")}return this.options.skip=A,this};v.prototype.projection=function(F){if(arguments.length===0)return this._fields;return this._fields={},this._userProvidedFields={},this.select(F),this._fields};v.prototype.select=function F(){let A=arguments[0];if(!A)return this;if(arguments.length!==1)throw new Error("Invalid select: select only takes 1 argument");this._validate("select");const B=this._fields||(this._fields={}),D=this._userProvidedFields||(this._userProvidedFields={});let J=void 0;if(this.model!=null&&Y0.hasUserDefinedProperty(this.model.db.options,"sanitizeProjection"))J=this.model.db.options.sanitizeProjection;else if(this.model!=null&&Y0.hasUserDefinedProperty(this.model.base.options,"sanitizeProjection"))J=this.model.base.options.sanitizeProjection;else J=this._mongooseOptions.sanitizeProjection;function Z(X){return typeof X==="string"&&J?X=1:X}if(A=nG1(A,!0),Y0.isObject(A)){if(this.selectedInclusively())Object.entries(A).forEach(([X,Y])=>{if(Y){if(B["-"+X]!=null)delete B["-"+X];B[X]=D[X]=Z(Y)}else Object.keys(D).forEach(($)=>{if($y(X,$))delete B[$],delete D[$]})});else if(this.selectedExclusively())Object.entries(A).forEach(([X,Y])=>{if(!Y){if(B["+"+X]!=null)delete B["+"+X];B[X]=D[X]=Z(Y)}else Object.keys(D).forEach(($)=>{if($y(X,$))delete B[$],delete D[$]})});else{const X=Object.keys(A);for(let Y=0;Y<X.length;++Y){const $=A[X[Y]],G=X[Y];B[G]=Z($),D[G]=Z($)}}return this}throw new TypeError("Invalid select() argument. Must be string or object.")};v.prototype.read=function F(A,B){if(typeof A==="string")A=bG1(A),this.options.readPreference={mode:A,tags:B};else this.options.readPreference=A;return this};v.prototype.toString=function F(){if(this.op==="count"||this.op==="countDocuments"||this.op==="find"||this.op==="findOne"||this.op==="deleteMany"||this.op==="deleteOne"||this.op==="findOneAndDelete"||this.op==="remove")return`${this.model.modelName}.${this.op}(${RF.inspect(this._conditions)})`;if(this.op==="distinct")return`${this.model.modelName}.distinct('${this._distinct}', ${RF.inspect(this._conditions)})`;if(this.op==="findOneAndReplace"||this.op==="findOneAndUpdate"||this.op==="replaceOne"||this.op==="update"||this.op==="updateMany"||this.op==="updateOne")return`${this.model.modelName}.${this.op}(${RF.inspect(this._conditions)}, ${RF.inspect(this._update)})`;return`${this.model.modelName}.${this.op}()`};v.prototype.session=function F(A){if(A==null)delete this.options.session;return this.options.session=A,this};v.prototype.writeConcern=function F(A){if(A==null)return delete this.options.writeConcern,this;return this.options.writeConcern=A,this};v.prototype.w=function F(A){if(A==null)delete this.options.w;if(this.options.writeConcern!=null)this.options.writeConcern.w=A;else this.options.w=A;return this};v.prototype.j=function F(A){if(A==null)delete this.options.j;if(this.options.writeConcern!=null)this.options.writeConcern.j=A;else this.options.j=A;return this};v.prototype.wtimeout=function F(A){if(A==null)delete this.options.wtimeout;if(this.options.writeConcern!=null)this.options.writeConcern.wtimeout=A;else this.options.wtimeout=A;return this};v.prototype.getOptions=function(){return this.options};v.prototype.setOptions=function(F,A){if(A){if(this._mongooseOptions=F&&z2(F)||{},this.options=F||{},"populate"in F)this.populate(this._mongooseOptions);return this}if(F==null)return this;if(typeof F!=="object")throw new Error('Options must be an object, got "'+F+'"');if(F=Object.assign({},F),Array.isArray(F.populate)){const B=F.populate;delete F.populate;const D=B.length;for(let J=0;J<D;++J)this.populate(B[J])}if("setDefaultsOnInsert"in F)this._mongooseOptions.setDefaultsOnInsert=F.setDefaultsOnInsert,delete F.setDefaultsOnInsert;if("overwriteDiscriminatorKey"in F)this._mongooseOptions.overwriteDiscriminatorKey=F.overwriteDiscriminatorKey,delete F.overwriteDiscriminatorKey;if("sanitizeProjection"in F){if(F.sanitizeProjection&&!this._mongooseOptions.sanitizeProjection)rG1(this._fields);this._mongooseOptions.sanitizeProjection=F.sanitizeProjection,delete F.sanitizeProjection}if("sanitizeFilter"in F)this._mongooseOptions.sanitizeFilter=F.sanitizeFilter,delete F.sanitizeFilter;if("timestamps"in F)this._mongooseOptions.timestamps=F.timestamps,delete F.timestamps;if("defaults"in F)this._mongooseOptions.defaults=F.defaults;if("translateAliases"in F)this._mongooseOptions.translateAliases=F.translateAliases,delete F.translateAliases;if(F.lean==null&&this.schema&&"lean"in this.schema.options)this._mongooseOptions.lean=this.schema.options.lean;if(typeof F.limit==="string")try{F.limit=wJ(F.limit)}catch(B){throw new IF("Number",F.limit,"limit")}if(typeof F.skip==="string")try{F.skip=wJ(F.skip)}catch(B){throw new IF("Number",F.skip,"skip")}for(let B of Object.keys(F))if(FE1.has(B)){const D=Array.isArray(F[B])?F[B]:[F[B]];this[B].apply(this,D)}else this.options[B]=F[B];return this};v.prototype.explain=function F(A){if(arguments.length===0)this.options.explain=!0;else if(A===!1)delete this.options.explain;else this.options.explain=A;return this};v.prototype.allowDiskUse=function(F){if(arguments.length===0)this.options.allowDiskUse=!0;else if(F===!1)delete this.options.allowDiskUse;else this.options.allowDiskUse=F;return this};v.prototype.maxTimeMS=function(F){return this.options.maxTimeMS=F,this};v.prototype.getFilter=function(){return this._conditions};v.prototype.getQuery=function(){return this._conditions};v.prototype.setQuery=function(F){this._conditions=F};v.prototype.getUpdate=function(){return this._update};v.prototype.setUpdate=function(F){this._update=F};v.prototype._fieldsForExec=function(){if(this._fields==null)return null;if(Object.keys(this._fields).length===0)return null;return z2(this._fields)};v.prototype._updateForExec=function(){const F=z2(this._update,{transform:!1,depopulate:!0}),A=Object.keys(F);let B=A.length;const D={};while(B--){const J=A[B];if(J[0]!=="$"){if(!D.$set)if(F.$set)D.$set=F.$set;else D.$set={};if(D.$set[J]=F[J],A.splice(B,1),!~A.indexOf("$set"))A.push("$set")}else if(J==="$set"){if(!D.$set)D[J]=F[J]}else D[J]=F[J]}return D};v.prototype._optionsForExec=function(F){const A=z2(this.options);if(delete A.populate,F=F||this.model,!F)return A;yG1(F.schema,A),vG1(F.schema,A);const B=this.model?.db?.base.transactionAsyncLocalStorage?.getStore();if(!this.options.hasOwnProperty("session")&&B?.session!=null)A.session=B.session;const D=F&&F.schema&&F.schema.options&&F.schema.options.read;if(!("readPreference"in A)&&D)A.readPreference=D;if(A.upsert!==void 0)A.upsert=!!A.upsert;if(A.writeConcern){if(A.j)A.writeConcern.j=A.j,delete A.j;if(A.w)A.writeConcern.w=A.w,delete A.w;if(A.wtimeout)A.writeConcern.wtimeout=A.wtimeout,delete A.wtimeout}if(this._applyPaths(),this._fields!=null){this._fields=this._castFields(this._fields);const J=this._fieldsForExec();if(J!=null)A.projection=J}return A};v.prototype.lean=function(F){return this._mongooseOptions.lean=arguments.length?F:!0,this};v.prototype.set=function(F,A){if(typeof F==="object"){const B=Object.keys(F);for(let D of B)this.set(D,F[D]);return this}if(this._update=this._update||{},F in this._update)delete this._update[F];return this._update.$set=this._update.$set||{},this._update.$set[F]=A,this};v.prototype.get=function F(A){const B=this._update;if(B==null)return;const D=B.$set;if(D==null)return B[A];if(Y0.hasUserDefinedProperty(B,A))return B[A];if(Y0.hasUserDefinedProperty(D,A))return D[A];return};v.prototype.error=function F(A){if(arguments.length===0)return this._error;return this._error=A,this};v.prototype._unsetCastError=function F(){if(this._error!=null&&!(this._error instanceof IF))return;return this.error(null)};v.prototype.mongooseOptions=function(F){if(arguments.length>0)this._mongooseOptions=F;return this._mongooseOptions};v.prototype._castConditions=function(){let F=void 0;if(this.model!=null&&Y0.hasUserDefinedProperty(this.model.db.options,"sanitizeFilter"))F=this.model.db.options.sanitizeFilter;else if(this.model!=null&&Y0.hasUserDefinedProperty(this.model.base.options,"sanitizeFilter"))F=this.model.base.options.sanitizeFilter;else F=this._mongooseOptions.sanitizeFilter;if(F)aG1(this._conditions);try{this.cast(this.model),this._unsetCastError()}catch(A){this.error(A)}};/*!
 * ignore
 */v.prototype._find=async function F(){if(this._applyTranslateAliases(),this._castConditions(),this.error()!=null)throw this.error();const A=this._mongooseOptions,B=this,D=B._userProvidedFields||{};NF(this.options,this.model.db.options,this.model.base.options),PF(this.options,this.model.db.options,this.model.base.options);const J=Object.assign({},{session:this&&this.options&&this.options.session||null,lean:A.lean||null}),Z=this._optionsForExec(),X=this._conditions,Y=Z.projection,$=await this.mongooseCollection.find(X,Z);if(Z.explain)return $.explain();let G=await $.toArray();if(G.length===0)return G;if(!A.populate){const W=B.schema.options.versionKey;if(A.lean&&A.lean.versionKey===!1&&W)G.forEach((C)=>{if(W in C)delete C[W]});return A.lean?Ky(B.model.schema,G,null,J):B._completeMany(G,Y,D,J)}const E=MF.preparePopulationOptionsMQ(B,A);if(A.lean)return B.model.populate(G,E);return G=await B._completeMany(G,Y,D,J),await this.model.populate(G,E),G};v.prototype.find=function(F){if(typeof F==="function"||typeof arguments[1]==="function")throw new K2("Query.prototype.find() no longer accepts a callback");if(this.op="find",r2.canMerge(F))this.merge(F),TF(this);else if(F!=null)this.error(new j4(F,"filter","find"));return this};v.prototype.merge=function(F){if(!F)return this;const A={overwrite:!0};if(F instanceof v){if(F._conditions){if(A.omit={},this._conditions&&this._conditions.$and&&F._conditions.$and)A.omit.$and=!0,this._conditions.$and=this._conditions.$and.concat(F._conditions.$and);if(this._conditions&&this._conditions.$or&&F._conditions.$or)A.omit.$or=!0,this._conditions.$or=this._conditions.$or.concat(F._conditions.$or);Y0.merge(this._conditions,F._conditions,A)}if(F._fields)this._fields||(this._fields={}),Y0.merge(this._fields,F._fields,A);if(F.options)this.options||(this.options={}),Y0.merge(this.options,F.options,A);if(F._update)this._update||(this._update={}),Y0.mergeClone(this._update,F._update);if(F._distinct)this._distinct=F._distinct;return Y0.merge(this._mongooseOptions,F._mongooseOptions),this}else if(this.model!=null&&F instanceof this.model.base.Types.ObjectId)return Y0.merge(this._conditions,{_id:F},A),this;else if(F&&F.$__)F=F.toObject(cG1);if(A.omit={},F.$and){if(A.omit.$and=!0,!this._conditions)this._conditions={};this._conditions.$and=(this._conditions.$and||[]).concat(F.$and)}if(F.$or){if(A.omit.$or=!0,!this._conditions)this._conditions={};this._conditions.$or=(this._conditions.$or||[]).concat(F.$or)}return Y0.merge(this._conditions,F,A),this};v.prototype.collation=function(F){if(this.options==null)this.options={};return this.options.collation=F,this};v.prototype._completeOne=function(F,A,B){if(!F&&!this.options.includeResultMetadata)return B(null,null);const D=this.model,J=z2(this._fields),Z=this._userProvidedFields||{},X=this._mongooseOptions,Y=this.options;if(!Y.lean&&X.lean)Y.lean=X.lean;if(Y.explain)return B(null,F);if(!X.populate){const G=this.schema.options.versionKey;if(X.lean&&X.lean.versionKey===!1&&G){if(G in F)delete F[G]}return X.lean?tC(D.schema,F,null,A,Y,B):Gy(D,F,A,Y,J,Z,null,B)}const $=MF.preparePopulationOptionsMQ(this,this._mongooseOptions);if(X.lean)return D.populate(F,$).then((G)=>{tC(D.schema,G,null,A,Y,B)},(G)=>{B(G)});Gy(D,F,A,Y,J,Z,[],(G,E)=>{if(G!=null)return B(G);D.populate(E,$).then((W)=>{B(null,W)},(W)=>{B(W)})})};v.prototype._completeMany=async function F(A,B,D,J){const Z=this.model;return Promise.all(A.map((X)=>new Promise((Y,$)=>{const G=X;if(X=MF.createModel(Z,X,B,D),J.session!=null)X.$session(J.session);X.$init(G,J,(E)=>{if(E!=null)return $(E);Y(X)})})))};v.prototype._findOne=async function F(){if(this._applyTranslateAliases(),this._castConditions(),this.error())throw this.error();NF(this.options,this.model.db.options,this.model.base.options),PF(this.options,this.model.db.options,this.model.base.options);const A=this._optionsForExec(),B=await this.mongooseCollection.findOne(this._conditions,A);return new Promise((D,J)=>{this._completeOne(B,null,(Z,X)=>{if(Z)return J(Z);D(X)})})};v.prototype.findOne=function(F,A,B){if(typeof F==="function"||typeof A==="function"||typeof B==="function"||typeof arguments[3]==="function")throw new K2("Query.prototype.findOne() no longer accepts a callback");if(this.op="findOne",this._validateOp(),B)this.setOptions(B);if(A)this.select(A);if(r2.canMerge(F))this.merge(F),TF(this);else if(F!=null)this.error(new j4(F,"filter","findOne"));return this};v.prototype._countDocuments=async function F(){this._applyTranslateAliases();try{this.cast(this.model)}catch(D){this.error(D)}if(this.error())throw this.error();NF(this.options,this.model.db.options,this.model.base.options),PF(this.options,this.model.db.options,this.model.base.options);const A=this._optionsForExec(),B=this._conditions;return this.mongooseCollection.countDocuments(B,A)};/*!
 * If `translateAliases` option is set, call `Model.translateAliases()`
 * on the following query properties: filter, projection, update, distinct.
 */v.prototype._applyTranslateAliases=function F(){let A=!1;if("translateAliases"in this._mongooseOptions)A=this._mongooseOptions.translateAliases;else if(this.model?.schema?._userProvidedOptions?.translateAliases!=null)A=this.model.schema._userProvidedOptions.translateAliases;else if(this.model?.base?.options?.translateAliases!=null)A=this.model.base.options.translateAliases;if(!A)return;if(this.model?.schema?.aliases&&Object.keys(this.model.schema.aliases).length>0){if(this.model.translateAliases(this._conditions,!0),this.model.translateAliases(this._fields,!0),this.model.translateAliases(this._update,!0),this._distinct!=null&&this.model.schema.aliases[this._distinct]!=null)this._distinct=this.model.schema.aliases[this._distinct]}};v.prototype._estimatedDocumentCount=async function F(){if(this.error())throw this.error();const A=this._optionsForExec();return this.mongooseCollection.estimatedDocumentCount(A)};v.prototype.estimatedDocumentCount=function(F){if(typeof F==="function"||typeof arguments[1]==="function")throw new K2("Query.prototype.estimatedDocumentCount() no longer accepts a callback");if(this.op="estimatedDocumentCount",this._validateOp(),typeof F==="object"&&F!=null)this.setOptions(F);return this};v.prototype.countDocuments=function(F,A){if(typeof F==="function"||typeof A==="function"||typeof arguments[2]==="function")throw new K2("Query.prototype.countDocuments() no longer accepts a callback");if(this.op="countDocuments",this._validateOp(),r2.canMerge(F))this.merge(F);if(typeof A==="object"&&A!=null)this.setOptions(A);return this};v.prototype.__distinct=async function F(){if(this._applyTranslateAliases(),this._castConditions(),this.error())throw this.error();NF(this.options,this.model.db.options,this.model.base.options),PF(this.options,this.model.db.options,this.model.base.options);const A=this._optionsForExec();return this.mongooseCollection.distinct(this._distinct,this._conditions,A)};v.prototype.distinct=function(F,A){if(typeof F==="function"||typeof A==="function"||typeof arguments[2]==="function")throw new K2("Query.prototype.distinct() no longer accepts a callback");if(this.op="distinct",this._validateOp(),r2.canMerge(A))this.merge(A),TF(this);else if(A!=null)this.error(new j4(A,"filter","distinct"));if(F!=null)this._distinct=F;return this};v.prototype.sort=function(F,A){if(arguments.length>2)throw new Error("sort() takes at most 2 arguments");if(A!=null&&typeof A!=="object")throw new Error("sort() options argument must be an object or nullish");if(this.options.sort==null)this.options.sort={};if(A&&A.override)this.options.sort={};const B=this.options.sort;if(typeof F==="string"){const D=F.indexOf(" ")===-1?[F]:F.split(" ");for(let J of D){const Z=J[0]=="-"?-1:1;if(Z===-1)J=J.slice(1);if(VJ.has(J))continue;B[J]=Z}}else if(Array.isArray(F))for(let D of F){if(!Array.isArray(D))throw new TypeError("Invalid sort() argument, must be array of arrays");const J=""+D[0];if(VJ.has(J))continue;B[J]=aC(D[1],J)}else if(typeof F==="object"&&F!=null&&!(F instanceof Map))for(let D of Object.keys(F)){if(VJ.has(D))continue;B[D]=aC(F[D],D)}else if(F instanceof Map)for(let D of F.keys()){if(D=""+D,VJ.has(D))continue;B[D]=aC(F.get(D),D)}else if(F!=null)throw new TypeError("Invalid sort() argument. Must be a string, object, array, or map.");return this};/*!
 * Convert sort values
 */v.prototype.deleteOne=function F(A,B){if(typeof A==="function"||typeof B==="function"||typeof arguments[2]==="function")throw new K2("Query.prototype.deleteOne() no longer accepts a callback");if(this.op="deleteOne",this.setOptions(B),r2.canMerge(A))this.merge(A),TF(this);else if(A!=null)this.error(new j4(A,"filter","deleteOne"));return this};v.prototype._deleteOne=async function F(){if(this._applyTranslateAliases(),this._castConditions(),this.error()!=null)throw this.error();const A=this._optionsForExec();return this.mongooseCollection.deleteOne(this._conditions,A)};v.prototype.deleteMany=function(F,A){if(typeof F==="function"||typeof A==="function"||typeof arguments[2]==="function")throw new K2("Query.prototype.deleteMany() no longer accepts a callback");if(this.setOptions(A),this.op="deleteMany",r2.canMerge(F))this.merge(F),TF(this);else if(F!=null)this.error(new j4(F,"filter","deleteMany"));return this};v.prototype._deleteMany=async function F(){if(this._applyTranslateAliases(),this._castConditions(),this.error()!=null)throw this.error();const A=this._optionsForExec();return this.mongooseCollection.deleteMany(this._conditions,A)};v.prototype.findOneAndUpdate=function(F,A,B){if(typeof F==="function"||typeof A==="function"||typeof B==="function"||typeof arguments[3]==="function")throw new K2("Query.prototype.findOneAndUpdate() no longer accepts a callback");switch(this.op="findOneAndUpdate",this._validateOp(),this._validate(),arguments.length){case 2:B=void 0;break;case 1:A=F,F=B=void 0;break}if(r2.canMerge(F))this.merge(F);else if(F!=null)this.error(new j4(F,"filter","findOneAndUpdate"));if(A)this._mergeUpdate(A);if(B=B?z2(B):{},B.projection)this.select(B.projection),delete B.projection;if(B.fields)this.select(B.fields),delete B.fields;const D=this&&this.model&&this.model.base&&this.model.base.options&&this.model.base.options.returnOriginal;if(B.new==null&&B.returnDocument==null&&B.returnOriginal==null&&D!=null)B.returnOriginal=D;return this.setOptions(B),this};v.prototype._findOneAndUpdate=async function F(){if(this._applyTranslateAliases(),this._castConditions(),Hy(this),this.error())throw this.error();if(NF(this.options,this.model.db.options,this.model.base.options),PF(this.options,this.model.db.options,this.model.base.options),"strict"in this.options)this._mongooseOptions.strict=this.options.strict;const A=this._optionsForExec(this.model);qy(A),this._update=this._castUpdate(this._update);const B=Object.assign({},A,{setDefaultsOnInsert:this._mongooseOptions.setDefaultsOnInsert});if(this._update=Cy(this._conditions,this.model.schema,this._update,B),!this._update||Object.keys(this._update).length===0)if(A.upsert){const X=z2(this._update);delete X._id,this._update={$set:X}}else return this._executionStack=null,await this._findOne();else if(this._update instanceof Error)throw this._update;else if(this._update.$set&&Object.keys(this._update.$set).length===0)delete this._update.$set;if(oC(this,"runValidators",!1))await this.validate(this._update,A,!1);if(this._update.toBSON)this._update=this._update.toBSON();let J=await this.mongooseCollection.findOneAndUpdate(this._conditions,this._update,A);for(let X of this._transforms)J=X(J);const Z=!A.includeResultMetadata?J:J.value;return new Promise((X,Y)=>{this._completeOne(Z,J,($,G)=>{if($)return Y($);X(G)})})};v.prototype.findOneAndDelete=function(F,A){if(typeof F==="function"||typeof A==="function"||typeof arguments[2]==="function")throw new K2("Query.prototype.findOneAndDelete() no longer accepts a callback");if(this.op="findOneAndDelete",this._validateOp(),this._validate(),r2.canMerge(F))this.merge(F);return A&&this.setOptions(A),this};v.prototype._findOneAndDelete=async function F(){if(this._applyTranslateAliases(),this._castConditions(),this.error()!=null)throw this.error();const A=this.options.includeResultMetadata,B=this._conditions,D=this._optionsForExec(this.model);let J=await this.mongooseCollection.findOneAndDelete(B,D);for(let X of this._transforms)J=X(J);const Z=!A?J:J.value;return new Promise((X,Y)=>{this._completeOne(Z,J,($,G)=>{if($)return Y($);X(G)})})};v.prototype.findOneAndReplace=function(F,A,B){if(typeof F==="function"||typeof A==="function"||typeof B==="function"||typeof arguments[4]==="function")throw new K2("Query.prototype.findOneAndReplace() no longer accepts a callback");if(this.op="findOneAndReplace",this._validateOp(),this._validate(),r2.canMerge(F))this.merge(F);else if(F!=null)this.error(new j4(F,"filter","findOneAndReplace"));if(A!=null)this._mergeUpdate(A);B=B||{};const D=this&&this.model&&this.model.base&&this.model.base.options&&this.model.base.options.returnOriginal;if(B.new==null&&B.returnDocument==null&&B.returnOriginal==null&&D!=null)B.returnOriginal=D;return this.setOptions(B),this};v.prototype._findOneAndReplace=async function F(){if(this._applyTranslateAliases(),this._castConditions(),this.error()!=null)throw this.error();if("strict"in this.options)this._mongooseOptions.strict=this.options.strict,delete this.options.strict;const A=this._conditions,B=this._optionsForExec();qy(B);const D=this.options.includeResultMetadata,J={skipId:!0};if("strict"in this._mongooseOptions)J.strict=this._mongooseOptions.strict;const Z=oC(this,"runValidators",!1);try{const $=new this.model(this._update,null,J);if(Z)await $.validate();else if($.$__.validationError)throw $.$__.validationError;this._update=$.toBSON()}catch($){if($ instanceof Yy)throw $;const G=new Yy;throw G.errors[$.path]=$,G}let X=await this.mongooseCollection.findOneAndReplace(A,this._update,B);for(let $ of this._transforms)X=$(X);const Y=!D?X:X.value;return new Promise(($,G)=>{this._completeOne(Y,X,(E,W)=>{if(E)return G(E);$(W)})})};/*!
 * ignore
 *//*!
 * ignore
 */v.prototype._mergeUpdate=function(F){if(!this._update)this._update=Array.isArray(F)?[]:{};if(F==null||typeof F==="object"&&Object.keys(F).length===0)return;if(F instanceof v){if(Array.isArray(this._update))throw new Error("Cannot mix array and object updates");if(F._update)Y0.mergeClone(this._update,F._update)}else if(Array.isArray(F)){if(!Array.isArray(this._update))throw new Error("Cannot mix array and object updates");this._update=this._update.concat(F)}else{if(Array.isArray(this._update))throw new Error("Cannot mix array and object updates");Y0.mergeClone(this._update,F)}};/*!
 * ignore
 */v.prototype.validate=async function F(A,B,D){if(typeof arguments[3]==="function")throw new K2("Query.prototype.validate() no longer accepts a callback");if(await Uy(this,"validate"),D)await A.$validate();else await new Promise((J,Z)=>{oG1(this,this.model.schema,A,B,(X)=>{if(X!=null)return Z(X);J()})});await zy(this,null,null,"validate")};v.prototype._updateMany=async function F(){return eC.call(this,"updateMany")};v.prototype._updateOne=async function F(){return eC.call(this,"updateOne")};v.prototype._replaceOne=async function F(){return eC.call(this,"replaceOne")};v.prototype.updateMany=function(F,A,B,D){if(typeof B==="function")D=B,B=null;else if(typeof A==="function")D=A,A=F,F={},B=null;else if(typeof F==="function")D=F,F=void 0,A=void 0,B=void 0;else if(typeof F==="object"&&!A&&!B&&!D)A=F,F=void 0,B=void 0,D=void 0;return FH(this,"updateMany",F,A,B,D)};v.prototype.updateOne=function(F,A,B,D){if(typeof B==="function")D=B,B=null;else if(typeof A==="function")D=A,A=F,F={},B=null;else if(typeof F==="function")D=F,F=void 0,A=void 0,B=void 0;else if(typeof F==="object"&&!A&&!B&&!D)A=F,F=void 0,B=void 0,D=void 0;return FH(this,"updateOne",F,A,B,D)};v.prototype.replaceOne=function(F,A,B,D){if(typeof B==="function")D=B,B=null;else if(typeof A==="function")D=A,A=F,F={},B=null;else if(typeof F==="function")D=F,F=void 0,A=void 0,B=void 0;else if(typeof F==="object"&&!A&&!B&&!D)A=F,F=void 0,B=void 0,D=void 0;return FH(this,"replaceOne",F,A,B,D)};v.prototype.transform=function(F){return this._transforms.push(F),this};v.prototype.orFail=function(F){return this.transform((A)=>{switch(this.op){case"find":if(A.length===0)throw z8(F,this);break;case"findOne":if(A==null)throw z8(F,this);break;case"replaceOne":case"updateMany":case"updateOne":if(A&&A.matchedCount===0)throw z8(F,this);break;case"findOneAndDelete":case"findOneAndUpdate":case"findOneAndReplace":if(this.options.includeResultMetadata&&A!=null&&A.value==null)throw z8(F,this);if(!this.options.includeResultMetadata&&A==null)throw z8(F,this);break;case"deleteMany":case"deleteOne":if(A.deletedCount===0)throw z8(F,this);break;default:break}return A}),this};v.prototype.isPathSelectedInclusive=function(F){return iG1(this._fields,F)};v.prototype.exec=async function F(A){if(typeof A==="function"||arguments.length>=2&&typeof arguments[1]==="function")throw new K2("Query.prototype.exec() no longer accepts a callback");if(typeof A==="string")this.op=A;if(this.op==null)throw new K2("Query must have `op` before executing");if(this.model==null)throw new K2("Query must have an associated model before executing");if(this._validateOp(),!this.op)return;if(this.options&&this.options.sort){if(Object.keys(this.options.sort).includes(""))throw new Error('Invalid field "" passed to sort()')}let B="_"+this.op;if(this.op==="distinct")B="__distinct";if(this._executionStack!=null){let X=this.toString();if(X.length>60)X=X.slice(0,60)+"...";const Y=new K2("Query was already executed: "+X);throw Y.originalStack=this._executionStack.stack,Y}else this._executionStack=new Error;let D=null;try{await DE1(this)}catch(X){if(X instanceof rC.skipWrappedFunction)D=X;else throw X}let J,Z=null;try{await Uy(this),J=D?D.args[0]:await this[B]();for(let X of this._transforms)J=X(J)}catch(X){if(X instanceof rC.skipWrappedFunction)J=X.args[0];else Z=X}return J=await zy(this,J,Z),await BE1(this),J};/*!
 * ignore
 *//*!
 * ignore
 *//*!
 * ignore
 *//*!
 * ignore
 */v.prototype.then=function(F,A){return this.exec().then(F,A)};v.prototype.catch=function(F){return this.exec().then(null,F)};v.prototype.finally=function(F){return this.exec().finally(F)};v.prototype[Symbol.toStringTag]=function F(){return`Query { ${this.op} }`};v.prototype.pre=function(F){return this._hooks.pre("exec",F),this};v.prototype.post=function(F){return this._hooks.post("exec",F),this};v.prototype._castUpdate=function F(A){let B=this.schema;const D=B.options.discriminatorKey,J=B._baseSchema?B._baseSchema:B;if(this._mongooseOptions.overwriteDiscriminatorKey&&A[D]!=null&&J.discriminators){const Y=Object.values(J.discriminators).find(($)=>$.discriminatorMapping.value===A[D]);if(Y!=null)B=Y}let Z;if("upsert"in this.options)Z=this.options.upsert;const X=this._conditions;if(B!=null&&Y0.hasUserDefinedProperty(X,B.options.discriminatorKey)&&typeof X[B.options.discriminatorKey]!=="object"&&B.discriminators!=null){const Y=X[B.options.discriminatorKey],$=Ey(this.model.discriminators,Y);B=B.discriminators[Y]||$&&$.schema||B}return dG1(B,A,{strict:this._mongooseOptions.strict,upsert:Z,arrayFilters:this.options.arrayFilters,overwriteDiscriminatorKey:this._mongooseOptions.overwriteDiscriminatorKey},this,this._conditions)};v.prototype.populate=function(){if(!Array.from(arguments).some(Boolean))return this;const F=Y0.populate.apply(null,arguments);if(this.options!=null){const D=this.options.readConcern,J=this.options.readPreference;for(let Z of F){if(D!=null&&(Z&&Z.options&&Z.options.readConcern)==null)Z.options=Z.options||{},Z.options.readConcern=D;if(J!=null&&(Z&&Z.options&&Z.options.readPreference)==null)Z.options=Z.options||{},Z.options.readPreference=J}}const A=this._mongooseOptions;if(A.lean!=null){const D=A.lean;for(let J of F)if((J&&J.options&&J.options.lean)==null)J.options=J.options||{},J.options.lean=D}if(!Y0.isObject(A.populate))A.populate={};const B=A.populate;for(let D of F){const J=D.path;if(B[J]&&B[J].populate&&D.populate)D.populate=B[J].populate.concat(D.populate);B[D.path]=D}return this};v.prototype.getPopulatedPaths=function F(){const A=this._mongooseOptions.populate||{},B=Object.keys(A);for(let D of Object.keys(A)){const J=A[D];if(!Array.isArray(J.populate))continue;Qy(B,J.populate,D+".")}return B};/*!
 * ignore
 */v.prototype.cast=function(F,A){A||(A=this._conditions),F=F||this.model;const B=F.schema.options.discriminatorKey;if(A!=null&&A.hasOwnProperty(B))F=Ey(F.discriminators,A[B])||F;const D={upsert:this.options&&this.options.upsert};if(this.options){if("strict"in this.options)D.strict=this.options.strict;if("strictQuery"in this.options)D.strictQuery=this.options.strictQuery}try{return hG1(F.schema,A,D,this)}catch(J){if(typeof J.setModel==="function")J.setModel(F);throw J}};v.prototype._castFields=function F(A){let B,D,J,Z,X;if(A){J=Object.keys(A),D=[];for(let Y=0;Y<J.length;++Y)if(Z=J[Y],A[Z].$elemMatch)B||(B={}),B[Z]=A[Z],D.push(Z)}if(B){try{X=this.cast(this.model,B)}catch(Y){return Y}for(let Y=0;Y<D.length;++Y)Z=D[Y],A[Z]=X[Z]}return A};v.prototype._applyPaths=function F(){if(!this.model)return;this._fields=this._fields||{},MF.applyPaths(this._fields,this.model.schema);let A=!0;if("selectPopulatedPaths"in this.model.base.options)A=this.model.base.options.selectPopulatedPaths;if("selectPopulatedPaths"in this.model.schema.options)A=this.model.schema.options.selectPopulatedPaths;if(A)tG1(this._fields,this._userProvidedFields,this._mongooseOptions.populate)};v.prototype.cursor=function F(A){if(A)this.setOptions(A);try{this.cast(this.model)}catch(B){return new Xy(this)._markError(B)}return new Xy(this)};v.prototype.tailable=function(F,A){if(F!=null&&typeof F.constructor==="function"&&F.constructor.name==="Object")A=F,F=!0;if(F===void 0)F=!0;if(A&&typeof A==="object")for(let B of Object.keys(A))if(B==="awaitData"||B==="awaitdata")this.options.awaitData=!!A[B];else this.options[B]=A[B];return this.options.tailable=arguments.length?!!F:!0,this};v.prototype.near=function(){const F=[],A=this._mongooseOptions.nearSphere;if(arguments.length===1)if(Array.isArray(arguments[0]))F.push({center:arguments[0],spherical:A});else if(typeof arguments[0]==="string")F.push(arguments[0]);else if(Y0.isObject(arguments[0])){if(typeof arguments[0].spherical!=="boolean")arguments[0].spherical=A;F.push(arguments[0])}else throw new TypeError("invalid argument");else if(arguments.length===2)if(typeof arguments[0]==="number"&&typeof arguments[1]==="number")F.push({center:[arguments[0],arguments[1]],spherical:A});else if(typeof arguments[0]==="string"&&Array.isArray(arguments[1]))F.push(arguments[0]),F.push({center:arguments[1],spherical:A});else if(typeof arguments[0]==="string"&&Y0.isObject(arguments[1])){if(F.push(arguments[0]),typeof arguments[1].spherical!=="boolean")arguments[1].spherical=A;F.push(arguments[1])}else throw new TypeError("invalid argument");else if(arguments.length===3)if(typeof arguments[0]==="string"&&typeof arguments[1]==="number"&&typeof arguments[2]==="number")F.push(arguments[0]),F.push({center:[arguments[1],arguments[2]],spherical:A});else throw new TypeError("invalid argument");else throw new TypeError("invalid argument");return v.base.near.apply(this,F)};v.prototype.nearSphere=function(){return this._mongooseOptions.nearSphere=!0,this.near.apply(this,arguments),this};if(Symbol.asyncIterator!=null)v.prototype[Symbol.asyncIterator]=function(){return this.cursor().transformNull()._transformForAsyncIterator()};v.prototype.box=function(F,A){if(!Array.isArray(F)&&Y0.isObject(F))A=F.ur,F=F.ll;return v.base.box.call(this,F,A)};v.prototype.center=v.base.circle;v.prototype.centerSphere=function(){if(arguments[0]!=null&&typeof arguments[0].constructor==="function"&&arguments[0].constructor.name==="Object")arguments[0].spherical=!0;if(arguments[1]!=null&&typeof arguments[1].constructor==="function"&&arguments[1].constructor.name==="Object")arguments[1].spherical=!0;v.base.circle.apply(this,arguments)};v.prototype.selectedInclusively=function F(){return pG1(this._fields)};v.prototype.selectedExclusively=function F(){return lG1(this._fields)};v.prototype.model;/*!
 * Export
 */Ly.exports=v});var Iy=z((DR1,Ry)=>{var t2=function(F){wy.call(this,{autoDestroy:!0,objectMode:!0}),this.cursor=null,this.agg=F,this._transforms=[];const A=F._model;delete F.options.cursor.useMongooseAggCursor,this._mongooseOptions={},YE1(A,this,F)},YE1=function(F,A,B){if(!F.collection.buffer)F.hooks.execPre("aggregate",B,function(){if(typeof B.options?.cursor?.transform==="function")A._transforms.push(B.options.cursor.transform);A.cursor=F.collection.aggregate(B._pipeline,B.options||{}),A.emit("cursor",A.cursor)});else F.collection.emitter.once("queue",function(){F.hooks.execPre("aggregate",B,function(){if(typeof B.options?.cursor?.transform==="function")A._transforms.push(B.options.cursor.transform);A.cursor=F.collection.aggregate(B._pipeline,B.options||{}),A.emit("cursor",A.cursor)})})},Vy=function(F){return F==null?{done:!0}:{value:F,done:!1}},$E1=function(F,A){if(F.cursor)return A();F.once("cursor",function(){A()})},NJ=function(F,A){let B=A;if(F._transforms.length)B=function(D,J){if(D||J===null&&!F._mongooseOptions.transformNull)return A(D,J);A(D,F._transforms.reduce(function(Z,X){return X(Z)},J))};if(F._error)return ZE1(function(){B(F._error)});if(F.cursor)return F.cursor.next().then((D)=>{if(!D)return B(null,null);B(null,D)},(D)=>B(D));else F.once("cursor",function(){NJ(F,A)})};/*!
 * Module dependencies.
 */var IJ=H1(),wy=import.meta.require("stream").Readable,JE1=zC(),ZE1=y2(),XE1=import.meta.require("util");XE1.inherits(t2,wy);/*!
 * ignore
 */t2.prototype._read=function(){const F=this;NJ(this,function(A,B){if(A)return F.emit("error",A);if(!B){F.push(null),F.cursor.close(function(D){if(D)return F.emit("error",D)});return}F.push(B)})};if(Symbol.asyncIterator!=null){const F="Mongoose does not support using async iterators with an existing aggregation cursor. See https://bit.ly/mongoose-async-iterate-aggregation";t2.prototype[Symbol.asyncIterator]=function(){throw new IJ(F)}}Object.defineProperty(t2.prototype,"map",{value:function(F){return this._transforms.push(F),this},enumerable:!0,configurable:!0,writable:!0});t2.prototype._markError=function(F){return this._error=F,this};t2.prototype.close=async function F(){if(typeof arguments[0]==="function")throw new IJ("AggregationCursor.prototype.close() no longer accepts a callback");try{await this.cursor.close()}catch(A){throw this.listeners("error").length>0&&this.emit("error",A),A}this.emit("close")};t2.prototype.next=async function F(){if(typeof arguments[0]==="function")throw new IJ("AggregationCursor.prototype.next() no longer accepts a callback");return new Promise((A,B)=>{NJ(this,(D,J)=>{if(D!=null)return B(D);A(J)})})};t2.prototype.eachAsync=function(F,A){if(typeof arguments[2]==="function")throw new IJ("AggregationCursor.prototype.eachAsync() no longer accepts a callback");const B=this;if(typeof A==="function")A={};return A=A||{},JE1(function(D){return NJ(B,D)},F,A)};if(Symbol.asyncIterator!=null)t2.prototype[Symbol.asyncIterator]=function(){return this.transformNull()._transformForAsyncIterator()};/*!
 * ignore
 */t2.prototype._transformForAsyncIterator=function(){if(this._transforms.indexOf(Vy)===-1)this.map(Vy);return this};/*!
 * ignore
 */t2.prototype.transformNull=function(F){if(arguments.length===0)F=!0;return this._mongooseOptions.transformNull=F,this};/*!
 * ignore
 */t2.prototype.addCursorFlag=function(F,A){const B=this;return $E1(this,function(){B.cursor.addCursorFlag(F,A)}),this};/*!
 * ignore
 */Ry.exports=t2});var AH=z((JR1,Ny)=>{Ny.exports=function F(A,B,D){const J=B&&B.discriminatorMapping;if(D=D||"",J&&!J.isRoot){const Z=A,X=(D.length>0?D+".":D)+J.key,Y=J.value;if(Z[0]!=null&&Z[0].$match&&(Z[0].$match[X]===void 0||Z[0].$match[X]===Y))Z[0].$match[X]=Y;else if(Z[0]!=null&&Z[0].$geoNear)Z[0].$geoNear.query=Z[0].$geoNear.query||{},Z[0].$geoNear.query[X]=Y;else if(Z[0]!=null&&Z[0].$search)if(Z[1]&&Z[1].$match!=null)Z[1].$match[X]=Z[1].$match[X]||Y;else{const $={};$[X]=Y,Z.splice(1,0,{$match:$})}else{const $={};$[X]=Y,Z.unshift({$match:$})}}}});var My=z((ZR1,Py)=>{var GE1=function(F){if(F==null||F.$accumulator==null)return;for(let A of["init","accumulate","merge","finalize"])if(typeof F.$accumulator[A]==="function")F.$accumulator[A]=String(F.$accumulator[A])};Py.exports=function F(A){if(!Array.isArray(A))return;for(let B of A){if(B==null)continue;const D=B.$group||B.$bucket||B.$bucketAuto;if(D!=null)for(let Z of Object.keys(D))GE1(D[Z]);const J=Object.keys(B)[0];if(J&&typeof B[J]==="object"){const Z=B[J];for(let X of Object.keys(Z))if(Z[X]!=null&&Z[X].$function!=null&&typeof Z[X].$function.body==="function")Z[X].$function.body=Z[X].$function.body.toString()}if(B.$facet!=null)for(let Z of Object.keys(B.$facet))F(B.$facet[Z])}}});var JH=z((XR1,Sy)=>{var Q1=function(F,A){if(this._pipeline=[],this._model=A,this.options={},arguments.length===1&&Array.isArray(F))this.append.apply(this,F)},UE1=function(F){if(typeof F!=="object"||F===null)return!1;const A=Object.keys(F);return A.length===1&&A[0][0]==="$"};/*!
 * Module dependencies
 */var uy=Iy(),BH=H1(),Oy=RJ(),{applyGlobalMaxTimeMS:EE1,applyGlobalDiskUse:WE1}=LC(),CE1=J0(),HE1=T2(),DH=AH(),qE1=My(),Ty=D1(),KE1=Oy.prototype.read,zE1=Oy.prototype.readConcern,jy=new Set(["$$DESCEND","$$PRUNE","$$KEEP"]);Q1.prototype.options;Q1.prototype.model=function(F){if(arguments.length===0)return this._model;if(this._model=F,F.schema!=null){if(this.options.readPreference==null&&F.schema.options.read!=null)this.options.readPreference=F.schema.options.read;if(this.options.collation==null&&F.schema.options.collation!=null)this.options.collation=F.schema.options.collation}return F};Q1.prototype.append=function(){const F=arguments.length===1&&Array.isArray(arguments[0])?arguments[0]:[...arguments];if(!F.every(UE1))throw new Error("Arguments must be aggregate pipeline operators");return this._pipeline=this._pipeline.concat(F),this};Q1.prototype.addFields=function(F){if(typeof F!=="object"||F===null||Array.isArray(F))throw new Error("Invalid addFields() argument. Must be an object");return this.append({$addFields:Object.assign({},F)})};Q1.prototype.project=function(F){const A={};if(typeof F==="object"&&!Array.isArray(F))Object.keys(F).forEach(function(B){A[B]=F[B]});else if(arguments.length===1&&typeof F==="string")F.split(/\s+/).forEach(function(B){if(!B)return;const D=B[0]==="-"?0:1;if(D===0)B=B.substring(1);A[B]=D});else throw new Error("Invalid project() argument. Must be string or object");return this.append({$project:A})};Q1.prototype.near=function(F){const A={};return A.$geoNear=F,this.append(A)};/*!
 * define methods
 */"group match skip limit out densify fill".split(" ").forEach(function(F){Q1.prototype[F]=function(A){const B={};return B["$"+F]=A,this.append(B)}});Q1.prototype.unwind=function(){const F=[...arguments],A=[];for(let B of F)if(B&&typeof B==="object")A.push({$unwind:B});else if(typeof B==="string")A.push({$unwind:B[0]==="$"?B:"$"+B});else throw new Error('Invalid arg "'+B+'" to unwind(), must be string or object');return this.append.apply(this,A)};Q1.prototype.replaceRoot=function(F){let A;if(typeof F==="string")A=F.startsWith("$")?F:"$"+F;else A=F;return this.append({$replaceRoot:{newRoot:A}})};Q1.prototype.count=function(F){return this.append({$count:F})};Q1.prototype.sortByCount=function(F){if(F&&typeof F==="object")return this.append({$sortByCount:F});else if(typeof F==="string")return this.append({$sortByCount:F[0]==="$"?F:"$"+F});else throw new TypeError('Invalid arg "'+F+'" to sortByCount(), must be string or object')};Q1.prototype.lookup=function(F){return this.append({$lookup:F})};Q1.prototype.graphLookup=function(F){const A={};if(F){if(!Ty.isObject(F))throw new TypeError("Invalid graphLookup() argument. Must be an object.");Ty.mergeClone(A,F);const B=A.startWith;if(B&&typeof B==="string")A.startWith=A.startWith.startsWith("$")?A.startWith:"$"+A.startWith}return this.append({$graphLookup:A})};Q1.prototype.sample=function(F){return this.append({$sample:{size:F}})};Q1.prototype.sort=function(F){const A={};if(HE1(F)==="Object"){const B=["desc","descending",-1];Object.keys(F).forEach(function(D){if(F[D]instanceof Object&&F[D].$meta){A[D]=F[D];return}A[D]=B.indexOf(F[D])===-1?1:-1})}else if(arguments.length===1&&typeof F==="string")F.split(/\s+/).forEach(function(B){if(!B)return;const D=B[0]==="-"?-1:1;if(D===-1)B=B.substring(1);A[B]=D});else throw new TypeError("Invalid sort() argument. Must be a string or object.");return this.append({$sort:A})};Q1.prototype.unionWith=function(F){return this.append({$unionWith:F})};Q1.prototype.read=function(F,A){return KE1.call(this,F,A),this};Q1.prototype.readConcern=function(F){return zE1.call(this,F),this};Q1.prototype.redact=function(F,A,B){if(arguments.length===3){if(typeof A==="string"&&!jy.has(A)||typeof B==="string"&&!jy.has(B))throw new Error("If thenExpr or elseExpr is string, it must be either $$DESCEND, $$PRUNE or $$KEEP");F={$cond:{if:F,then:A,else:B}}}else if(arguments.length!==1)throw new TypeError("Invalid arguments");return this.append({$redact:F})};Q1.prototype.explain=async function F(A){if(typeof A==="function"||typeof arguments[1]==="function")throw new BH("Aggregate.prototype.explain() no longer accepts a callback");const B=this._model;if(!this._pipeline.length)throw new Error("Aggregate has empty pipeline");DH(this._pipeline,this._model.schema),await new Promise((X,Y)=>{B.hooks.execPre("aggregate",this,($)=>{if($){const G={error:$};return B.hooks.execPost("aggregate",this,[null],G,(E)=>{Y(E)})}else X()})});const D=B.collection.aggregate(this._pipeline,this.options);if(A==null)A=!0;let J=null;try{J=await D.explain(A)}catch(X){await new Promise((Y,$)=>{const G={error:X};B.hooks.execPost("aggregate",this,[null],G,(E)=>{if(E)return $(E);return Y()})})}const Z={error:null};return await new Promise((X,Y)=>{B.hooks.execPost("aggregate",this,[J],Z,($)=>{if($)return Y($);return X()})}),J};Q1.prototype.allowDiskUse=function(F){return this.options.allowDiskUse=F,this};Q1.prototype.hint=function(F){return this.options.hint=F,this};Q1.prototype.session=function(F){if(F==null)delete this.options.session;else this.options.session=F;return this};Q1.prototype.option=function(F){for(let A in F)this.options[A]=F[A];return this};Q1.prototype.cursor=function(F){return this.options.cursor=F||{},new uy(this)};Q1.prototype.collation=function(F){return this.options.collation=F,this};Q1.prototype.facet=function(F){return this.append({$facet:F})};Q1.prototype.search=function(F){return this.append({$search:F})};Q1.prototype.pipeline=function(){return this._pipeline};Q1.prototype.exec=async function F(){if(!this._model)throw new Error("Aggregate not bound to any Model");if(typeof arguments[0]==="function")throw new BH("Aggregate.prototype.exec() no longer accepts a callback");const A=this._model,B=this._model.collection;EE1(this.options,A.db.options,A.base.options),WE1(this.options,A.db.options,A.base.options);const D=this.model()?.db?.base.transactionAsyncLocalStorage?.getStore();if(!this.options.hasOwnProperty("session")&&D?.session!=null)this.options.session=D.session;if(this.options&&this.options.cursor)return new uy(this);if(DH(this._pipeline,this._model.schema),qE1(this._pipeline),await new Promise((Y,$)=>{A.hooks.execPre("aggregate",this,(G)=>{if(G){const E={error:G};return A.hooks.execPost("aggregate",this,[null],E,(W)=>{$(W)})}else Y()})}),!this._pipeline.length)throw new BH("Aggregate has empty pipeline");const J=CE1(this.options||{});let Z;try{Z=await(await B.aggregate(this._pipeline,J)).toArray()}catch(Y){await new Promise(($,G)=>{const E={error:Y};A.hooks.execPost("aggregate",this,[null],E,(W)=>{if(W)return G(W);$()})})}const X={error:null};return await new Promise((Y,$)=>{A.hooks.execPost("aggregate",this,[Z],X,(G)=>{if(G)return $(G);return Y()})}),Z};Q1.prototype.then=function(F,A){return this.exec().then(F,A)};Q1.prototype.catch=function(F){return this.exec().then(null,F)};Q1.prototype.finally=function(F){return this.exec().finally(F)};if(Symbol.asyncIterator!=null)Q1.prototype[Symbol.asyncIterator]=function(){return this.cursor({useMongooseAggCursor:!0}).transformNull()._transformForAsyncIterator()};/*!
 * Helpers
 */Q1._prepareDiscriminatorPipeline=DH;/*!
 * Exports
 */Sy.exports=Q1});var fy=z((YR1,xy)=>{var QE1=J0();class ky{constructor(F){if(F==null)return;Object.assign(this,QE1(F))}}xy.exports=ky});var gy=z(($R1,_y)=>{_y.exports=function F(A,B){const D=Object.keys(B.paths),J=D.length;for(let Z=0;Z<J;++Z){let X="";const Y=D[Z],$=B.paths[Y],G=$.splitPath(),E=G.length;let W=A;for(let C=0;C<E;++C){if(W==null)break;const H=G[C];if(X+=(!X.length?"":".")+H,C===E-1){if(typeof W[H]!=="undefined"){if($.$isSingleNested)F(W[H],$.caster.schema);else if($.$isMongooseDocumentArray&&Array.isArray(W[H]))W[H].forEach((K)=>F(K,$.schema));break}const q=$.getDefault(A,!1,{skipCast:!0});if(typeof q!=="undefined"){if(W[H]=q,$.$isSingleNested)F(q,$.caster.schema);else if($.$isMongooseDocumentArray&&Array.isArray(q))q.forEach((K)=>F(K,$.schema))}}else{if(W[H]==null)W[H]={};W=W[H]}}}}});var XH=z((GR1,by)=>{var ZH=function(F,A=new WeakSet,B=!1){if(A.has(F))return;A.add(F);for(let D of Object.keys(F.paths)){const J=F.paths[D];if(!J.schema)continue;if(ZH(J.schema,A),!J.schema._applyDiscriminators)continue;if(J._appliedDiscriminators&&!B)continue;for(let Z of J.schema._applyDiscriminators.keys()){const{schema:X,options:Y}=J.schema._applyDiscriminators.get(Z);ZH(X,A),J.discriminator(Z,X,B?{...Y,overwriteExisting:!0}:Y)}J._appliedDiscriminators=!0}};by.exports=ZH});var vy=z((ER1,yy)=>{var LE1=t1(),VE1=D1();yy.exports=function F(A,B){const D=YH();function J(Z,X){Object.defineProperty(A.prototype,Z,{get:function(){const Y={};for(let $ in X.methods[Z])Y[$]=X.methods[Z][$].bind(this);return Y},configurable:!0})}for(let Z of Object.keys(B.methods)){const X=B.methods[Z];if(B.tree.hasOwnProperty(Z))throw new Error('You have a method and a property in your schema both named "'+Z+'"');if(typeof X==="function"&&D.prototype[Z]===X){delete B.methods[Z];continue}if(B.reserved[Z]&&!LE1(B,`methodOptions.${Z}.suppressWarning`,!1))VE1.warn(`mongoose: the method name "${Z}" is used by mongoose internally, overwriting it may cause bugs. If you\'re sure you know what you\'re doing, you can suppress this error by using \`schema.method('${Z}', fn, { suppressWarning: true })\`.`);if(typeof X==="function")A.prototype[Z]=X;else J(Z,B)}A.$appliedMethods=!0;for(let Z of Object.keys(B.paths)){const X=B.paths[Z];if(X.$isSingleNested&&!X.caster.$appliedMethods)F(X.caster,X.schema);if(X.$isMongooseDocumentArray&&!X.Constructor.$appliedMethods)F(X.Constructor,X.schema)}}});var dy=z((WR1,my)=>{var PJ=function(F,A,B,D,J){if(F==null||typeof F!=="object")return F;if(Array.isArray(F))return F.map((X)=>PJ(X,A,B,D,J));const Z={...F};D=J?D||{}:A;for(let X of Object.keys(Z)){const Y=J?J+"."+X:X;if(A.hasOwnProperty(Y)||D.hasOwnProperty(X))if(TJ(A[Y])||TJ(D[X]))Z[X]=PJ(Z[X],A,B,D[X],Y);else delete Z[X];else if(B[Y])Z[X]=PJ(Z[X],A,B,D[X],Y)}return Z},MJ=function(F,A,B,D,J){if(F==null||typeof F!=="object")return F;if(Array.isArray(F))return F.map((X)=>MJ(X,A,B,D,J));const Z={...F};D=J?D||{}:A;for(let X of Object.keys(Z)){const Y=J?J+"."+X:X;if(A.hasOwnProperty(Y)||D.hasOwnProperty(X)){if(TJ(A[Y])||TJ(D[X]))Z[X]=MJ(Z[X],A,B,D[X],Y);continue}else if(B[Y])Z[X]=MJ(Z[X],A,B,D[X],Y);else delete Z[X]}return Z},hy=GE(),wE1=a7(),RE1=WJ(),TJ=D1().isPOJO;my.exports=function F(A,B,D){if(B==null)return A;if(A==null)return A;let J=null;if(RE1(B))J=!1;else if(wE1(B))J=!0;if(J==null)return A;else if(J)return D=D||hy(B),PJ(A,B,D);else return D=D||hy(B),MJ(A,B,D)}});var ly=z((CR1,cy)=>{cy.exports=function F(A){let B=!1;for(let D of Object.keys(A))if(A[D]==="text")B=!0;return B}});var iy=z((HR1,py)=>{var IE1=ly();py.exports=function F(A,B,D){if(IE1(A))return;if(D.hasOwnProperty("collation")&&!B.hasOwnProperty("collation"))B.collation=D.collation}});var sy=z((qR1,ny)=>{var NE1=TD().queryMiddlewareFunctions,PE1=oB();ny.exports=function F(A,B,D){const J={useErrorHandlers:!0,numCallbackParams:1};B=B.filter((Z)=>{if(NE1.indexOf(Z.name)!==-1)return!!Z.model;return Z.model!==!1}),A.$__insertMany=B.createWrapper("insertMany",A.$__insertMany,A,J);for(let Z of Object.keys(D))if(B.hasHooks(Z)){const X=A[Z];A[Z]=function(){const Y=arguments.length,$=Y>0?arguments[Y-1]:null,G=typeof $==="function"?$:null,E=Array.prototype.slice.call(arguments,0,G==null?Y:Y-1);return PE1(G,(W)=>{B.execPre(Z,A,E,function(C){if(C!=null)return W(C);let H=0;const q=X.apply(A,E.concat(K));if(q!=null&&typeof q.then==="function")q.then((U)=>K(null,U),(U)=>K(U));function K(U,Q){if(H++>0)return;if(U!=null)return W(U);B.execPost(Z,A,[Q],function(V){if(V!=null)return W(V);W(null,Q)})}})},A.events)}}}});var ry=z((KR1,ay)=>{ay.exports=function F(A,B){for(let D in B.statics)A[D]=B.statics[D]}});var jJ=z((zR1,ty)=>{ty.exports=function F(A){if(!(this instanceof F))return new F(A);return this.val=A,this}});var jF=z((UR1,oy)=>{/*!
 * ignore
 */oy.exports=new WeakMap});var Bv=z((QR1,Av)=>{var Fv=function(F,A,B,D,J){const Z=[],X=D.isVirtual&&D.justOne&&F.length>1?!1:D.sort&&F.length>1,Y=D.$nullIfNotFound;let $,G,E;if(jE1.isMongooseArray(F))F=F.__array;let W=0;const C=F.length;if(X&&J&&D[uJ]===void 0){D[uJ]=!1;for(let H in B)if(Array.isArray(B[H])){D[uJ]=!0;break}}for(W=0;W<C;++W){if(E=F[W],Array.isArray(E)){Fv(E,A,B,D,!0),Z.push(E);continue}if(E===null&&X===!1){Z.push(E);continue}if(G=String(E),$=A[G],D.clone&&$!=null)if(D.lean){const H=ey.get($);$=ME1($),ey.set($,H)}else $=$.constructor.hydrate($._doc);if(J)if($)if(X){const H=B[G];if(D[uJ])Z.push($);else Z[H]=$}else Z.push($);else if(E!=null&&E[TE1]!=null)Z.push(E);else Z.push(D.retainNullValues||Y?null:E);else Z[W]=$||null}if(F.length=0,Z.length)Z.forEach(function(H,q){F[q]=H})},ME1=J0(),ey=jF(),TE1=t().modelSymbol,jE1=D1();Av.exports=Fv;var uJ=Symbol("mongoose#assignRawDocsToIdStructure#hasArray")});var GH=z((LR1,Dv)=>{var $H=function(F,A){if(F.virtuals[A])return{virtual:F.virtuals[A],path:void 0};const B=A.split(".");let D="",J="";for(let Z=0;Z<B.length;++Z){if(D+=(D.length>0?".":"")+B[Z],F.virtuals[D]){if(Z===B.length-1)return{virtual:F.virtuals[D],path:J};continue}if(F.nested[D])continue;if(F.paths[D]&&F.paths[D].schema){F=F.paths[D].schema;const X=B.slice(Z+1).join(".");if(F.virtuals[X]){if(Z===B.length-2)return{virtual:F.virtuals[X],nestedSchemaPath:[J,D].filter((Y)=>!!Y).join(".")};continue}if(Z+1<B.length&&F.discriminators)for(let Y of Object.keys(F.discriminators)){const $=$H(F.discriminators[Y],X);if($!=null){const G=[J,D,$.nestedSchemaPath].filter((E)=>!!E).join(".");return{virtual:$.virtual,nestedSchemaPath:G}}}J+=(J.length>0?".":"")+D,D="";continue}if(F.discriminators)for(let X of Object.keys(F.discriminators)){const Y=$H(F.discriminators[X],A);if(Y)return Y}return null}};Dv.exports=$H;/*!
 * ignore
 */});var Zv=z((OJ,Jv)=>{(function(F,A){typeof OJ==="object"&&typeof Jv!=="undefined"?A(OJ):typeof define==="function"&&define.amd?define(["exports"],A):(F=typeof globalThis!=="undefined"?globalThis:F||self,A(F.sift={}))})(OJ,function(F){var A=function(w,R){return A=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(M,S){M.__proto__=S}||function(M,S){for(var l in S)if(Object.prototype.hasOwnProperty.call(S,l))M[l]=S[l]},A(w,R)};function B(w,R){if(typeof R!=="function"&&R!==null)throw new TypeError("Class extends value "+String(R)+" is not a constructor or null");A(w,R);function M(){this.constructor=w}w.prototype=R===null?Object.create(R):(M.prototype=R.prototype,new M)}typeof SuppressedError==="function"&&SuppressedError;var D=function(w){var R="[object "+w+"]";return function(M){return J(M)===R}},J=function(w){return Object.prototype.toString.call(w)},Z=function(w){if(w instanceof Date)return w.getTime();else if(Y(w))return w.map(Z);else if(w&&typeof w.toJSON==="function")return w.toJSON();return w},X=function(w){return w==null?null:w},Y=D("Array"),$=D("Object"),G=D("Function"),E=function(w,R){return w.hasOwnProperty(R)&&!G(w[R])},W=function(w){return w&&(w.constructor===Object||w.constructor===Array||w.constructor.toString()==="function Object() { [native code] }"||w.constructor.toString()==="function Array() { [native code] }")&&!w.toJSON},C=function(w,R){if(w==null&&w==R)return!0;if(w===R)return!0;if(Object.prototype.toString.call(w)!==Object.prototype.toString.call(R))return!1;if(Y(w)){if(w.length!==R.length)return!1;for(var M=0,S=w.length;M<S;M++)if(!C(w[M],R[M]))return!1;return!0}else if($(w)){if(Object.keys(w).length!==Object.keys(R).length)return!1;for(var l in w)if(!C(w[l],R[l]))return!1;return!0}return!1},H=function(w,R,M,S,l,o){var J1=R[S];if(Y(w)&&isNaN(Number(J1))&&!E(w,J1)){for(var K1=0,n0=w.length;K1<n0;K1++)if(!H(w[K1],R,M,S,K1,w))return!1}if(S===R.length||w==null)return M(w,l,o,S===0,S===R.length);return H(w[J1],R,M,S+1,J1,w)},q=function(){function w(R,M,S,l){this.params=R,this.owneryQuery=M,this.options=S,this.name=l,this.init()}return w.prototype.init=function(){},w.prototype.reset=function(){this.done=!1,this.keep=!1},w}(),K=function(w){B(R,w);function R(M,S,l,o){var J1=w.call(this,M,S,l)||this;return J1.children=o,J1}return R.prototype.reset=function(){this.keep=!1,this.done=!1;for(var M=0,S=this.children.length;M<S;M++)this.children[M].reset()},R.prototype.childrenNext=function(M,S,l,o,J1){var K1=!0,n0=!0;for(var g2=0,p6=this.children.length;g2<p6;g2++){var k4=this.children[g2];if(!k4.done)k4.next(M,S,l,o,J1);if(!k4.keep)n0=!1;if(k4.done){if(!k4.keep)break}else K1=!1}this.done=K1,this.keep=n0},R}(q),U=function(w){B(R,w);function R(M,S,l,o,J1){var K1=w.call(this,M,S,l,o)||this;return K1.name=J1,K1}return R}(K),Q=function(w){B(R,w);function R(){var M=w!==null&&w.apply(this,arguments)||this;return M.propop=!0,M}return R.prototype.next=function(M,S,l,o){this.childrenNext(M,S,l,o)},R}(K),V=function(w){B(R,w);function R(M,S,l,o,J1){var K1=w.call(this,S,l,o,J1)||this;return K1.keyPath=M,K1.propop=!0,K1._nextNestedValue=function(n0,g2,p6,k4,Cm){return K1.childrenNext(n0,g2,p6,k4,Cm),!K1.done},K1}return R.prototype.next=function(M,S,l){H(M,this.keyPath,this._nextNestedValue,0,S,l)},R}(K),L=function(w,R){if(w instanceof Function)return w;if(w instanceof RegExp)return function(S){var l=typeof S==="string"&&w.test(S);return w.lastIndex=0,l};var M=Z(w);return function(S){return R(M,Z(S))}},N=function(w){B(R,w);function R(){var M=w!==null&&w.apply(this,arguments)||this;return M.propop=!0,M}return R.prototype.init=function(){this._test=L(this.params,this.options.compare)},R.prototype.next=function(M,S,l){if(!Array.isArray(l)||l.hasOwnProperty(S)){if(this._test(M,S,l))this.done=!0,this.keep=!0}},R}(q),h=function(w,R,M){return new N(w,R,M)},T=function(w){return function(R,M,S,l){return w(R,M,S,l)}},P=function(w){return T(function(R,M,S,l){var o=typeof Z(R),J1=w(R);return new N(function(K1){var n0=X(K1);return typeof Z(n0)===o&&J1(n0)},M,S,l)})},x=function(w,R,M,S){var l=S.operations[w];if(!l)c(w);return l(R,M,S,w)},c=function(w){throw new Error("Unsupported operation: ".concat(w))},u=function(w,R){for(var M in w)if(R.operations.hasOwnProperty(M)||M.charAt(0)==="$")return!0;return!1},O=function(w,R,M,S,l){if(u(R,l)){var o=_(R,M,l),J1=o[0],K1=o[1];if(K1.length)throw new Error("Property queries must contain only operations, or exact objects.");return new V(w,R,S,l,J1)}return new V(w,R,S,l,[new N(R,S,l)])},j=function(w,R,M){if(R===void 0)R=null;var S=M===void 0?{}:M,l=S.compare,o=S.operations,J1={compare:l||C,operations:Object.assign({},o||{})},K1=_(w,null,J1),n0=K1[0],g2=K1[1],p6=[];if(n0.length)p6.push(new V([],w,R,J1,n0));if(p6.push.apply(p6,g2),p6.length===1)return p6[0];return new Q(w,R,J1,p6)},_=function(w,R,M){var S=[],l=[];if(!W(w))return S.push(new N(w,w,M)),[S,l];for(var o in w)if(M.operations.hasOwnProperty(o)){var J1=x(o,w[o],w,M);if(J1){if(!J1.propop&&R&&!M.operations[R])throw new Error("Malformed query. ".concat(o," cannot be matched against property."))}if(J1!=null)S.push(J1)}else if(o.charAt(0)==="$")c(o);else l.push(O(o.split("."),w[o],o,w,M));return[S,l]},s=function(w){return function(R,M,S){return w.reset(),w.next(R,M,S),w.keep}},_1=function(w,R){if(R===void 0)R={};return s(j(w,null,R))},p0=function(w){B(R,w);function R(){var M=w!==null&&w.apply(this,arguments)||this;return M.propop=!0,M}return R.prototype.init=function(){this._test=L(this.params,this.options.compare)},R.prototype.reset=function(){w.prototype.reset.call(this),this.keep=!0},R.prototype.next=function(M){if(this._test(M))this.done=!0,this.keep=!1},R}(q),o1=function(w){B(R,w);function R(){var M=w!==null&&w.apply(this,arguments)||this;return M.propop=!0,M}return R.prototype.init=function(){if(!this.params||typeof this.params!=="object")throw new Error("Malformed query. $elemMatch must by an object.");this._queryOperation=j(this.params,this.owneryQuery,this.options)},R.prototype.reset=function(){w.prototype.reset.call(this),this._queryOperation.reset()},R.prototype.next=function(M){if(Y(M)){for(var S=0,l=M.length;S<l;S++){this._queryOperation.reset();var o=M[S];this._queryOperation.next(o,S,M,!1),this.keep=this.keep||this._queryOperation.keep}this.done=!0}else this.done=!1,this.keep=!1},R}(q),S0=function(w){B(R,w);function R(){var M=w!==null&&w.apply(this,arguments)||this;return M.propop=!0,M}return R.prototype.init=function(){this._queryOperation=j(this.params,this.owneryQuery,this.options)},R.prototype.reset=function(){w.prototype.reset.call(this),this._queryOperation.reset()},R.prototype.next=function(M,S,l,o){this._queryOperation.next(M,S,l,o),this.done=this._queryOperation.done,this.keep=!this._queryOperation.keep},R}(q),A2=function(w){B(R,w);function R(){var M=w!==null&&w.apply(this,arguments)||this;return M.propop=!0,M}return R.prototype.init=function(){},R.prototype.next=function(M){if(Y(M)&&M.length===this.params)this.done=!0,this.keep=!0},R}(q),i0=function(w){if(w.length===0)throw new Error("$and/$or/$nor must be a nonempty array")},G3=function(w){B(R,w);function R(){var M=w!==null&&w.apply(this,arguments)||this;return M.propop=!1,M}return R.prototype.init=function(){var M=this;i0(this.params),this._ops=this.params.map(function(S){return j(S,null,M.options)})},R.prototype.reset=function(){this.done=!1,this.keep=!1;for(var M=0,S=this._ops.length;M<S;M++)this._ops[M].reset()},R.prototype.next=function(M,S,l){var o=!1,J1=!1;for(var K1=0,n0=this._ops.length;K1<n0;K1++){var g2=this._ops[K1];if(g2.next(M,S,l),g2.keep){o=!0,J1=g2.keep;break}}this.keep=J1,this.done=o},R}(q),Zm=function(w){B(R,w);function R(){var M=w!==null&&w.apply(this,arguments)||this;return M.propop=!1,M}return R.prototype.next=function(M,S,l){w.prototype.next.call(this,M,S,l),this.keep=!this.keep},R}(G3),gH=function(w){B(R,w);function R(){var M=w!==null&&w.apply(this,arguments)||this;return M.propop=!0,M}return R.prototype.init=function(){var M=this,S=Array.isArray(this.params)?this.params:[this.params];this._testers=S.map(function(l){if(u(l,M.options))throw new Error("cannot nest $ under ".concat(M.name.toLowerCase()));return L(l,M.options.compare)})},R.prototype.next=function(M,S,l){var o=!1,J1=!1;for(var K1=0,n0=this._testers.length;K1<n0;K1++){var g2=this._testers[K1];if(g2(M)){o=!0,J1=!0;break}}this.keep=J1,this.done=o},R}(q),Xm=function(w){B(R,w);function R(M,S,l,o){var J1=w.call(this,M,S,l,o)||this;return J1.propop=!0,J1._in=new gH(M,S,l,o),J1}return R.prototype.next=function(M,S,l,o){if(this._in.next(M,S,l),Y(l)&&!o){if(this._in.keep)this.keep=!1,this.done=!0;else if(S==l.length-1)this.keep=!0,this.done=!0}else this.keep=!this._in.keep,this.done=!0},R.prototype.reset=function(){w.prototype.reset.call(this),this._in.reset()},R}(q),Ym=function(w){B(R,w);function R(){var M=w!==null&&w.apply(this,arguments)||this;return M.propop=!0,M}return R.prototype.next=function(M,S,l,o,J1){if(!J1)this.done=!0,this.keep=!this.params;else if(l.hasOwnProperty(S)===this.params)this.done=!0,this.keep=!0},R}(q),$m=function(w){B(R,w);function R(M,S,l,o){var J1=w.call(this,M,S,l,M.map(function(K1){return j(K1,S,l)}),o)||this;return J1.propop=!1,i0(M),J1}return R.prototype.next=function(M,S,l,o){this.childrenNext(M,S,l,o)},R}(U),Gm=function(w){B(R,w);function R(M,S,l,o){var J1=w.call(this,M,S,l,M.map(function(K1){return j(K1,S,l)}),o)||this;return J1.propop=!0,J1}return R.prototype.next=function(M,S,l,o){this.childrenNext(M,S,l,o)},R}(U),bH=function(w,R,M){return new N(w,R,M)},yH=function(w,R,M,S){return new p0(w,R,M,S)},vH=function(w,R,M,S){return new G3(w,R,M,S)},hH=function(w,R,M,S){return new Zm(w,R,M,S)},mH=function(w,R,M,S){return new o1(w,R,M,S)},dH=function(w,R,M,S){return new Xm(w,R,M,S)},cH=function(w,R,M,S){return new gH(w,R,M,S)},lH=P(function(w){return function(R){return R!=null&&R<w}}),pH=P(function(w){return function(R){return R===w||R<=w}}),iH=P(function(w){return function(R){return R!=null&&R>w}}),nH=P(function(w){return function(R){return R===w||R>=w}}),sH=function(w,R,M){var S=w[0],l=w[1];return new N(function(o){return Z(o)%S===l},R,M)},aH=function(w,R,M,S){return new Ym(w,R,M,S)},rH=function(w,R,M){return new N(new RegExp(w,R.$options),R,M)},tH=function(w,R,M,S){return new S0(w,R,M,S)},oH={number:function(w){return typeof w==="number"},string:function(w){return typeof w==="string"},bool:function(w){return typeof w==="boolean"},array:function(w){return Array.isArray(w)},null:function(w){return w===null},timestamp:function(w){return w instanceof Date}},eH=function(w,R,M){return new N(function(S){if(typeof w==="string"){if(!oH[w])throw new Error("Type alias does not exist");return oH[w](S)}return S!=null?S instanceof w||S.constructor===w:!1},R,M)},Fq=function(w,R,M,S){return new $m(w,R,M,S)},Aq=function(w,R,M,S){return new Gm(w,R,M,S)},Bq=function(w,R,M){return new A2(w,R,M,"$size")},Dq=function(){return null},Jq=function(w,R,M){var S;if(G(w))S=w;else if(!process.env.CSP_ENABLED)S=new Function("obj","return "+w);else throw new Error("In CSP mode, sift does not support strings in \"$where\" condition");return new N(function(l){return S.bind(l)(l)},R,M)},Em=Object.freeze({__proto__:null,$Size:A2,$all:Aq,$and:Fq,$elemMatch:mH,$eq:bH,$exists:aH,$gt:iH,$gte:nH,$in:cH,$lt:lH,$lte:pH,$mod:sH,$ne:yH,$nin:dH,$nor:hH,$not:tH,$options:Dq,$or:vH,$regex:rH,$size:Bq,$type:eH,$where:Jq}),Zq=function(w,R,M){var S=M===void 0?{}:M,l=S.compare,o=S.operations;return j(w,R,{compare:l,operations:Object.assign({},Em,o||{})})},Wm=function(w,R){if(R===void 0)R={};var M=Zq(w,null,R);return s(M)};F.$Size=A2,F.$all=Aq,F.$and=Fq,F.$elemMatch=mH,F.$eq=bH,F.$exists=aH,F.$gt=iH,F.$gte=nH,F.$in=cH,F.$lt=lH,F.$lte=pH,F.$mod=sH,F.$ne=yH,F.$nin=dH,F.$nor=hH,F.$not=tH,F.$options=Dq,F.$or=vH,F.$regex=rH,F.$size=Bq,F.$type=eH,F.$where=Jq,F.EqualsOperation=N,F.createDefaultQueryOperation=Zq,F.createEqualsOperation=h,F.createOperationTester=s,F.createQueryOperation=j,F.createQueryTester=_1,F.default=Wm,Object.defineProperty(F,"__esModule",{value:!0})})});var Yv=z((VR1,EH)=>{var Xv=Zv();EH.exports=Xv.default;Object.assign(EH.exports,Xv)});var Hv=z((wR1,Cv)=>{var _E1=function(F){if(Array.isArray(F)){if(F.some((A)=>Array.isArray(A)||A===null))return F.map((A)=>{if(A==null)return 0;if(Array.isArray(A))return A.filter((B)=>B!=null).length;return 1});return F.filter((A)=>A!=null).length}return F==null?0:1},uF=function(F,A,B,D){const J=typeof B.transform==="function",Z=J?B.transform:gE1;if(Array.isArray(F)){const X=[],Y=F.length;for(let E=0;E<Y;++E){let W=F[E];const C=Array.isArray(D)?D[E]:D;if(!CH(W)&&(!B.retainNullValues||W!=null)&&!J)continue;else if(!B.retainNullValues&&W==null)continue;else if(J)W=Z(CH(W)?W:null,C);if(Ev(W,A),X.push(W),A.originalLimit&&X.length>=A.originalLimit)break}const $=X.length;while(F.length>$)Array.prototype.pop.apply(F,[]);let G=0;if(kJ.isMongooseArray(F))for(G=0;G<$;++G)F.set(G,X[G],!0);else for(G=0;G<$;++G)F[G]=X[G];return F}if(CH(F)||kJ.isPOJO(F))return Ev(F,A),Z(F,D);if(F instanceof Map)return F;if(B.justOne===!1)return[];return F==null?Z(F,D):Z(null,D)},Ev=function(F,A){if(F!=null&&A.excludeId)if(typeof F.$__setValue==="function")delete F._doc._id;else delete F._id},CH=function(F){if(F==null)return!1;return Array.isArray(F)||F.$isMongooseMap||F.$__!=null||Wv.has(F)},gE1=function(F){return F},uE1=uD(),OE1=jJ(),SE1=Bv(),SJ=t1(),kE1=GH(),Wv=jF(),$v=MD(),xE1=qE(),WH=h6(),Gv=Yv().default,kJ=D1(),{populateModelSymbol:fE1}=t();Cv.exports=function F(A){const B=Object.assign({},SJ(A,"allOptions.options.options"),SJ(A,"allOptions.options")),D=Object.assign({},A.options,B,{justOne:A.justOne,isVirtual:A.isVirtual});D.$nullIfNotFound=A.isVirtual;const J=A.populatedModel,Z=[].concat(A.rawIds);A.allIds=[].concat(A.allIds),SE1(A.rawIds,A.rawDocs,A.rawOrder,D);const{docs:X,rawIds:Y,options:$}=A,G=A.count&&A.isVirtual;let E,W=0;function C(H){if(++W,G)return H;if(H instanceof OE1)return H.val;if(H===void 0)return H;const q=A.allIds[E];if(A.path.endsWith(".$*"))return uF(H,$,D,q);if(A.justOne===!0&&Array.isArray(H)){const K=[];for(let U of H){const Q=Wv.get(U);if(Q==null||Q===J)K.push(U)}while(H.length>K.length)Array.prototype.pop.apply(H,[]);for(let U=0;U<K.length;++U)H[U]=K[U];return uF(H[0],$,D,q)}else if(A.justOne===!1&&!Array.isArray(H))return uF([H],$,D,q);else if(A.justOne===!0&&!Array.isArray(H)&&Array.isArray(q))return uF(H,$,D,H==null?H:q[W-1]);return uF(H,$,D,q)}for(E=0;E<X.length;++E){W=0;const H=A.path.endsWith(".$*")?A.path.slice(0,-3):A.path,q=WH.get(H,X[E],$v);if(q==null&&!kE1(A.originalModel.schema,H))continue;let K;if(G)K=_E1(Y[E]);else if(Array.isArray(A.match))K=Array.isArray(Y[E])?Y[E].filter((h)=>h==null||Gv(A.match[E])(h)):[Y[E]].filter((h)=>h==null||Gv(A.match[E])(h))[0];else K=Y[E];const U=A.originalModel.schema,Q=SJ(X[E],"$__",null)!=null;let V=Q?q instanceof Map:kJ.isPOJO(q);if(V=V&&SJ(U._getSchema(H),"$isSchemaMap"),!A.isVirtual&&V){const h=q instanceof Map?Array.from(q.keys()):Object.keys(q);K=K.reduce((T,P,x)=>{return T.set(h[x],P),T},new Map)}if(Q&&Array.isArray(K)){for(let h of K)if(h!=null&&h.$__!=null)h.$__.parent=X[E]}else if(Q&&K!=null&&K.$__!=null)K.$__.parent=X[E];if(A.isVirtual&&Q){if(X[E].$populated(H,A.justOne?Z[0]:Z,A.allOptions),Array.isArray(K))K=K.map((h)=>h==null?void 0:h);WH.set(H,K,X[E],void 0,C,!1);continue}const L=H.split(".");let N=X[E];for(let h=0;h<L.length-1;++h){if(Array.isArray(N)&&!kJ.isArrayIndex(L[h]))break;if(L[h]==="$*")break;if(N[L[h]]==null){const T=L.slice(0,h+1).join("."),P=U._getSchema(T);if(K==null&&P!=null&&P.$isMongooseArray)break;N[L[h]]={}}if(N=N[L[h]],typeof N!=="object")break}if(X[E].$__){if(A.allOptions.options[fE1]=A.allOptions.model,X[E].$populated(H,A.unpopulatedValues[E],A.allOptions.options),K!=null&&K.$__!=null)K.$__.wasPopulated={value:A.unpopulatedValues[E]};if(K instanceof Map&&!K.$isMongooseMap)K=new uE1(K,H,X[E],X[E].schema.path(H).$__schemaType)}if(WH.set(H,K,X[E],$v,C,!1),X[E].$__)xE1(X[E],[A.allOptions.options])}}});var HH=z((RR1,qv)=>{var bE1=RC();qv.exports=function F(A,B,D){if(!D||!(B&&B.upsert))return;if(!bE1(A)[D])if(B.overwrite)A[D]=0;else{if(!A.$setOnInsert)A.$setOnInsert={};A.$setOnInsert[D]=0}}});var wv=z((IR1,Vv)=>{var SF=function(F,A){if(F==null)return;if(F.discriminatorMapping&&!F.discriminatorMapping.isRoot)A[F.discriminatorMapping.key]=F.discriminatorMapping.value},U8=function(F,A){const B=F.schema.options.discriminatorKey;if(A!=null&&A.hasOwnProperty(B))F=vE1(F.discriminators,A[B])||F;return F},xJ=function(F,A){const B=F.timestamps,D=A.timestamps;if(B!=null)return B;else if(D!=null)return D;return!0},yE1=H1(),vE1=c6(),Kv=JW(),zv=ZW(),OF=w9(),Uv=kC(),hE1=J0(),Qv=HH(),{inspect:mE1}=import.meta.require("util"),Lv=nC();Vv.exports=function F(A,B,D){const J=A.base.now(),Z=A.base.options.setDefaultsOnInsert;if(B.insertOne)return(X)=>{const Y=U8(A,B.insertOne.document),$=new Y(B.insertOne.document);if(Y.schema.options.timestamps&&xJ(B.insertOne,D))$.initializeTimestamps();if(D.session!=null)$.$session(D.session);const G=Y?.schema?.options?.versionKey;if(G&&$[G]==null)$[G]=0;if(B.insertOne.document=$,D.skipValidation||B.insertOne.skipValidation){X(null);return}B.insertOne.document.$validate().then(()=>{X(null)},(E)=>{X(E,null)})};else if(B.updateOne)return(X)=>{try{if(!B.updateOne.filter)throw new Error("Must provide a filter object.");if(!B.updateOne.update)throw new Error("Must provide an update object.");const Y=U8(A,B.updateOne.filter),$=Y.schema,G=D.strict!=null?D.strict:Y.schema.options.strict,E=hE1(B.updateOne.update);SF($,B.updateOne.filter);const W=xJ(B.updateOne,D);if(Y.schema.$timestamps!=null&&W){const H=Y.schema.$timestamps.createdAt,q=Y.schema.$timestamps.updatedAt;zv(J,H,q,E,{})}if(W)Kv(J,E,Y.schema);if((B.updateOne.setDefaultsOnInsert==null?Z:B.updateOne.setDefaultsOnInsert)!==!1)Lv(B.updateOne.filter,Y.schema,E,{setDefaultsOnInsert:!0,upsert:B.updateOne.upsert});Qv(E,B.updateOne,Y.schema.options.versionKey),B.updateOne.filter=OF(Y.schema,B.updateOne.filter,{strict:G,upsert:B.updateOne.upsert}),B.updateOne.update=Uv(Y.schema,E,{strict:G,upsert:B.updateOne.upsert},Y,B.updateOne.filter)}catch(Y){return X(Y,null)}X(null)};else if(B.updateMany)return(X)=>{try{if(!B.updateMany.filter)throw new Error("Must provide a filter object.");if(!B.updateMany.update)throw new Error("Must provide an update object.");const Y=U8(A,B.updateMany.filter),$=Y.schema,G=D.strict!=null?D.strict:Y.schema.options.strict;if((B.updateMany.setDefaultsOnInsert==null?Z:B.updateMany.setDefaultsOnInsert)!==!1)Lv(B.updateMany.filter,Y.schema,B.updateMany.update,{setDefaultsOnInsert:!0,upsert:B.updateMany.upsert});const W=xJ(B.updateMany,D);if(Y.schema.$timestamps!=null&&W){const C=Y.schema.$timestamps.createdAt,H=Y.schema.$timestamps.updatedAt;zv(J,C,H,B.updateMany.update,{})}if(W)Kv(J,B.updateMany.update,Y.schema);SF($,B.updateMany.filter),Qv(B.updateMany.update,B.updateMany,Y.schema.options.versionKey),B.updateMany.filter=OF(Y.schema,B.updateMany.filter,{strict:G,upsert:B.updateMany.upsert}),B.updateMany.update=Uv(Y.schema,B.updateMany.update,{strict:G,upsert:B.updateMany.upsert},Y,B.updateMany.filter)}catch(Y){return X(Y,null)}X(null)};else if(B.replaceOne)return(X)=>{const Y=U8(A,B.replaceOne.filter),$=Y.schema,G=D.strict!=null?D.strict:Y.schema.options.strict;SF($,B.replaceOne.filter);try{B.replaceOne.filter=OF(Y.schema,B.replaceOne.filter,{strict:G,upsert:B.replaceOne.upsert})}catch(C){return X(C,null)}const E=new Y(B.replaceOne.replacement,G,!0);if(Y.schema.options.timestamps&&xJ(B.replaceOne,D))E.initializeTimestamps();if(D.session!=null)E.$session(D.session);const W=Y?.schema?.options?.versionKey;if(W&&E[W]==null)E[W]=0;if(B.replaceOne.replacement=E,D.skipValidation||B.replaceOne.skipValidation){B.replaceOne.replacement=B.replaceOne.replacement.toBSON(),X(null);return}B.replaceOne.replacement.$validate().then(()=>{B.replaceOne.replacement=B.replaceOne.replacement.toBSON(),X(null)},(C)=>{X(C,null)})};else if(B.deleteOne)return(X)=>{const Y=U8(A,B.deleteOne.filter),$=Y.schema;SF($,B.deleteOne.filter);try{B.deleteOne.filter=OF(Y.schema,B.deleteOne.filter)}catch(G){return X(G,null)}X(null)};else if(B.deleteMany)return(X)=>{const Y=U8(A,B.deleteMany.filter),$=Y.schema;SF($,B.deleteMany.filter);try{B.deleteMany.filter=OF(Y.schema,B.deleteMany.filter)}catch(G){return X(G,null)}X(null)};else return(X)=>{const Y=new yE1(`Invalid op passed to \`bulkWrite()\`: ${mE1(B)}`);X(Y,null)}}});var Pv=z((NR1,Nv)=>{var Iv=function(F,A,B){if(F=F.filter((D)=>!(D instanceof dE1)),!B)return F;return F.filter((D)=>{try{return A.cast(D),!0}catch(J){return!1}})},lE1=function(F){if(Array.isArray(F)){if(F.length>1)return{$or:[].concat(F.map((A)=>Object.assign({},A)))};return Object.assign({},F[0])}return Object.assign({},F)},dE1=jJ(),cE1=$D(),{trusted:fJ}=y9(),Rv=LJ();Nv.exports=function F(A,B,D,J,Z){const X=lE1(B);if(D.size===1){const Y=Array.from(D)[0],$=J.schema.path(Y);if(Y!=="_id"||!X._id)A=Iv(A,$,Z),X[Y]=fJ({$in:A});else if(Y==="_id"&&X._id){const E=Rv(X[Y])?X[Y]:{$eq:X[Y]};X[Y]={...fJ({$in:A}),...E}}const G=cE1(Y);for(let E=0;E<G.length-1;++E){const W=G[E];if(X[W]!=null&&X[W].$elemMatch!=null){X[W].$elemMatch[Y.slice(W.length+1)]=fJ({$in:A}),delete X[Y];break}}}else{const Y=[];if(Array.isArray(X.$or))X.$and=[{$or:X.$or},{$or:Y}],delete X.$or;else X.$or=Y;for(let $ of D)if($!=="_id"||!X._id){const G=J.schema.path($);A=Iv(A,G,Z),Y.push({[$]:{$in:A}})}else if($==="_id"&&X._id){const G=Rv(X[$])?X[$]:{$eq:X[$]};X[$]={...fJ({$in:A}),...G}}}return X}});var Tv=z((PR1,Mv)=>{var pE1=function(){return{result:{ok:1,writeErrors:[],writeConcernErrors:[],insertedIds:[],nInserted:0,nUpserted:0,nMatched:0,nModified:0,nRemoved:0,upserted:[]},insertedCount:0,matchedCount:0,modifiedCount:0,deletedCount:0,upsertedCount:0,upsertedIds:{},insertedIds:{},n:0}};Mv.exports=pE1});var uv=z((MR1,jv)=>{jv.exports=function F(A){if(A==null)return null;return Object.keys(A)[0]}});var xv=z((TR1,kv)=>{/*!
 * ignore
 */var Ov=K9(),iE1=t1(),nE1=c6(),Sv=jF(),Q8=h6(),sE1=t().populateModelSymbol;kv.exports=function F(A,B,D,J){const Z=B.path(J),X=D;if(Z)return Z;const Y=B.discriminatorMapping&&B.discriminatorMapping.key;if(Y&&A!=null){if(D!=null&&D[Y]!=null){const E=nE1(A.discriminators,D[Y]);B=E?E.schema:B}else if(A.discriminators!=null)return Object.keys(A.discriminators).reduce((E,W)=>{const C=A.discriminators[W];return E.concat(F(C,C.schema,null,J))},[])}function $(E,W,C,H){let q=E.length+1,K,U;while(q--){if(U=E.slice(0,q).join("."),K=W.path(U),K==null)continue;if(K.caster){if(K.caster instanceof Ov)return K.caster;let L=null;if(K.schema!=null&&K.schema.discriminators!=null){const N=K.schema.discriminators,h=U+"."+K.schema.options.discriminatorKey,T=C?Q8.get(h,C)||[]:[];L=Object.keys(N).reduce(function(P,x){const c=N[x].discriminatorMapping.value;if(D==null||T.indexOf(x)!==-1||T.indexOf(c)!==-1)P.push(N[x]);return P},[])}if(q!==E.length&&K.schema){let N;if(E[q]==="$"){if(q+1===E.length)return K;if(N=$(E.slice(q+1),W,C?Q8.get(U,C):null,H.concat(E.slice(0,q))),N)N.$parentSchemaDocArray=N.$parentSchemaDocArray||(K.schema.$isSingleNested?null:K);return N}if(L!=null&&L.length>0){N=[];for(let h of L){const T=$(E.slice(q),h,C?Q8.get(U,C):null,H.concat(E.slice(0,q)));if(T!=null){if(T.$parentSchemaDocArray=T.$parentSchemaDocArray||(K.schema.$isSingleNested?null:K),T.$parentSchemaDocArray)N.$parentSchemaDocArray=T.$parentSchemaDocArray;N.push(T)}}return N}else{if(N=$(E.slice(q),K.schema,C?Q8.get(U,C):null,H.concat(E.slice(0,q))),N)N.$parentSchemaDocArray=N.$parentSchemaDocArray||(K.schema.$isSingleNested?null:K);return N}}else if(q!==E.length&&K.$isMongooseArray&&K.casterConstructor.$isMongooseArray){let N=K;while(N.$isMongooseArray&&!N.$isMongooseDocumentArray)N=N.casterConstructor;const h=$(E.slice(q),N.schema,null,H.concat(E.slice(0,q)));if(h!=null)return h;if(N.schema.discriminators){const T=[];for(let P of Object.keys(N.schema.discriminators)){const x=N.schema.discriminators[P]||N.schema,c=$(E.slice(q),x,null,H.concat(E.slice(0,q)));if(c!=null)T.push(c)}if(T.length>0)return T}}}else if(K.$isSchemaMap&&K.$__schemaType instanceof Ov)return K.$__schemaType;const Q=H.concat([U]).join(".");if(X!=null&&X.$__&&X.$populated(Q)&&q<E.length){const L=D.$__.populated[Q].options[sE1];if(L!=null)return $(E.slice(q),L.schema,C?Q8.get(U,C):null,H.concat(E.slice(0,q)))}const V=iE1(X,U);if(V!=null){const L=Array.isArray(V)&&V.length>0?Sv.get(V[0]):Sv.get(V),N=L!=null?L.schema:null;if(N!=null){const h=$(E.slice(q),N,C?Q8.get(U,C):null,H.concat(E.slice(0,q)));if(h!=null)return h.$parentSchemaDocArray=h.$parentSchemaDocArray||(N.$isSingleNested?null:N),h}}return K}}const G=J.split(".");for(let E=0;E<G.length;++E)if(G[E]==="$")G[E]="0";return $(G,B,D,[])}});var vv=z((jR1,yv)=>{var AW1=function(F,A,B,D){const J=[],Z={},X=D.virtual;for(let Y of A){let $=null;const G={};let E;const W=D.nestedSchemaPath?D.nestedSchemaPath+".":"";if(typeof B.localField==="string")E=B.localField;else if(typeof X.options.localField==="function")E=W+X.options.localField.call(Y,Y);else if(Array.isArray(X.options.localField))E=X.options.localField.map((V)=>W+V);else E=W+X.options.localField;if(G.count=X.options.count,X.options.skip!=null&&!B.hasOwnProperty("skip"))B.skip=X.options.skip;if(X.options.limit!=null&&!B.hasOwnProperty("limit"))B.limit=X.options.limit;if(X.options.perDocumentLimit!=null&&!B.hasOwnProperty("perDocumentLimit"))B.perDocumentLimit=X.options.perDocumentLimit;let C=X.options.foreignField;if(!E||!C)return new _v(`Cannot populate virtual \`${B.path}\` on model \`${F.modelName}\`, because options \`localField\` and / or \`foreignField\` are missing`);if(typeof E==="function")E=E.call(Y,Y);if(typeof C==="function")C=C.call(Y,Y);G.isRefPath=!1;let H=null;if("justOne"in B&&B.justOne!==void 0)H=B.justOne;if($=X._getModelNamesForPopulate(Y),X.options.refPath)H=!!X.options.justOne,G.isRefPath=!0;else if(X.options.ref)H=!!X.options.justOne;G.isVirtual=!0,G.virtual=X,G.justOne=H;const q=U6(G,"virtual.options.match",null)||U6(G,"virtual.options.options.match",null);let K=U6(B,"match",null)||q,U=typeof K==="function";if(U)K=K.call(Y,Y,G.virtual);if(Array.isArray(E)&&Array.isArray(C)&&E.length===C.length){K=Object.assign({},K);for(let V=1;V<E.length;++V)K[C[V]]=bv(u9.get(E[V],Y,kF),F.schema),U=!0;E=E[0],C=C[0]}G.localField=E,G.foreignField=C,G.match=K,G.hasMatchFunction=U;const Q=gv(Y,E,F,B,X);try{QH(F,J,Z,$,B,G,Q,Y)}catch(V){return V}}return J},QH=function(F,A,B,D,J,Z,X,Y,$,G){const E=J.connection!=null?J.connection:F.db;if(G=G===void 0?X:G,Array.isArray(G))G=U2.cloneArrays(G);if(D==null)return;let W=D.length;while(W--){let C=D[W];if(C==null)continue;let H;if(J.model&&J.model[zH])H=J.model;else if(C[zH])H=C,C=H.modelName;else try{H=LH(E,C)}catch(V){if(X!==void 0)throw V;H=null}let q=X;const K=Array.isArray(X)?U2.array.flatten(X):[],U=Z.modelNamesInOrder?Z.modelNamesInOrder:D;if(Z.isRefPath&&Array.isArray(X)&&K.length===U.length)q=K.filter((V,L)=>U[L]===C);const Q=J.perDocumentLimit==null?U6(J,"options.perDocumentLimit",null):J.perDocumentLimit;if(!B[C]||Q!=null){const V={model:H};if(Z.isVirtual&&U6(Z.virtual,"options.options"))V.options=rE1(Z.virtual.options.options);else if($!=null)V.options=Object.assign({},$);U2.merge(V,J),J[qH]=H,V[qH]=H,B[C]={model:H,options:V,match:Z.hasMatchFunction?[Z.match]:Z.match,docs:[Y],ids:[q],allIds:[X],unpopulatedValues:[G],localField:new Set([Z.localField]),foreignField:new Set([Z.foreignField]),justOne:Z.justOne,isVirtual:Z.isVirtual,virtual:Z.virtual,count:Z.count,[qH]:H},A.push(B[C])}else if(B[C].localField.add(Z.localField),B[C].foreignField.add(Z.foreignField),B[C].docs.push(Y),B[C].ids.push(q),B[C].allIds.push(X),B[C].unpopulatedValues.push(G),Z.hasMatchFunction)B[C].match.push(Z.match)}},LH=function(F,A){if(F.models[A]==null&&F._parent!=null)return LH(F._parent,A);return F.model(A)},KH=function(F,A){if(typeof F==="function"&&!F[zH])return F.call(A,A);return F},gv=function(F,A,B,D,J,Z){const X=B.schema._getPathType(A),Y=X==="real"?B.schema.path(A):X.schema,$=Y&&Y.getters?Y.getters:[];A=Y!=null&&Y.instance==="Embedded"?A+"._id":A;const G=U6(D,"options",{}),E="getters"in G?G.getters:U6(J,"options.getters",!1);if($.length!==0&&E){const W=F.$__!=null?F:B.hydrate(F),C=U2.getValue(A,F);if(Array.isArray(C)){const H=U2.getValue(A.split(".").slice(0,-1),W);return C.map((q,K)=>Y.applyGetters(q,H[K]))}else return Y.applyGetters(C,W)}else return bv(u9.get(A,F,kF),Z)},bv=function(F,A){if(F!=null&&F.$__!=null)return F._id;if(F!=null&&F._id!=null&&(A==null||!A.$isSchemaMap))return F._id;if(Array.isArray(F)){const B=F.__array!=null?F.__array:F;for(let D=0;D<B.length;++D)if(B[D]!=null&&B[D].$__!=null)B[D]=B[D]._id;if(U2.isMongooseArray(F)&&F.$schema())return F.$schema()._castForPopulate(F,F.$parent());return[].concat(F)}if(oE1(F)==="Object"&&(A==null||A[UH]==null)){const B=[];for(let D of Object.keys(F))B.push(F[D]);return B}if(F instanceof Map)return Array.from(F.values());return F},BW1=function(F,A,B,D,J,Z){if(!B.isRefPath||J==null)return;const X=J.split(".");let Y="",$=void 0;for(let G=0;G<X.length;++G){const E=X[G];Y=Y+(Y.length===0?"":".")+E;const W=A.path(Y);if(W!=null&&W.$isMongooseArray&&W.caster.discriminators!=null&&Object.keys(W.caster.discriminators).length!==0){const C=U2.getValue(Y,F),H=D.path.substring(Y.length+1),q=W.caster.schema.options.discriminatorKey;$=[];for(let K of C){const U=U2.getValue(q,K),Q=W.caster.discriminators[U],V=Q&&Q.schema;if(V==null)continue;const L=V.path(H);if(L==null||L.options.refPath==null){const h=U2.getValue(B.localField.substring(Y.length+1),K);Z.forEach((T,P)=>{if(T===h)Z[P]=aE1(T)});continue}const N=U2.getValue(X.slice(G+1).join("."),K);$.push(N)}}}return $},_v=W2(),aE1=jJ(),rE1=J0(),U6=t1(),tE1=c6(),oE1=T2(),fv=xv(),eE1=GH(),kF=MD(),u9=h6(),_J=rE(),U2=D1(),zH=t().modelSymbol,qH=t().populateModelSymbol,UH=q9().schemaMixedSymbol,FW1=BE();yv.exports=function F(A,B,D){let J;const Z=B.length,X=[],Y=D.model&&D.model.modelName||D.model;let $,G,E;const W={},C=A.schema;if(D._localModel!=null&&D._localModel.schema.nested[D.path])return[];const H=eE1(A.schema,D.path);if((H==null?null:H.virtual)!=null)return AW1(A,B,D,H);let K=fv(A,C,null,D.path);if(K=Array.isArray(K)?K:[K].filter((V)=>V!=null),!(D.strictPopulate===!1||D.options?.strictPopulate===!1)&&K.length===0&&D._localModel!=null)return new FW1(D._fullPath||D.path);for(let V=0;V<Z;V++){J=B[V];let L=null;const N=J!=null&&J.$__!=null?J.$__schema:C;if($=fv(A,N,J,D.path),$!=null&&$.$isMongooseDocumentArray&&$.options.ref==null&&$.options.refPath==null)continue;if($&&$.$parentSchemaDocArray&&U6(D,"options.sort")!=null)return new _v("Cannot populate with `sort` on path "+D.path+" because it is a subproperty of a document array");E=null;let T=!1,P=null,x=null,c=null;if($!=null&&$.instance==="Embedded"){if($.options.ref){const o1={localField:D.path+"._id",foreignField:"_id",justOne:!0},S0=Q(J,$,Y,A),A2=u9.get(D.path,J),i0=u9.get("_id",A2);QH(A,X,W,S0.modelNames,D,o1,i0,J,x,A2)}continue}if(Array.isArray($)){const o1=$;for(let S0 of o1){let A2,i0;try{i0=Q(J,S0,Y,A),A2=i0.modelNames,T=T||i0.isRefPath,P=P||i0.refPath,L=i0.justOne}catch(G3){return G3}if(T&&!i0.isRefPath)continue;if(!A2)continue;E=E||[];for(let G3 of A2)if(E.indexOf(G3)===-1)E.push(G3)}}else{try{const o1=Q(J,$,Y,A);if(E=o1.modelNames,T=o1.isRefPath,P=P||o1.refPath,L=o1.justOne,x=U6($,"options.populate",null),T)c=E,E=Array.from(new Set(E))}catch(o1){return o1}if(!E)continue}const u={},O=D.path,j="_id";if("justOne"in D&&D.justOne!==void 0)L=D.justOne;else if($&&!$[UH]){if(D.path.endsWith("."+$.path)||D.path===$.path)L=Array.isArray($)?$.every((o1)=>!o1.$isMongooseArray):!$.$isMongooseArray}if(!E)continue;u.isVirtual=!1,u.justOne=L,u.localField=O,u.foreignField=j;const _=gv(J,O,A,D,null,$),s=String(U2.getValue(j,J));D._docs[s]=Array.isArray(_)?_.slice():_;let _1=U6(D,"match",null);const p0=typeof _1==="function";if(p0)_1=_1.call(J,J);if(u.match=_1,u.hasMatchFunction=p0,u.isRefPath=T,u.modelNamesInOrder=c,T)E=BW1(J,C,u,D,P,_)||E;try{QH(A,X,W,E,D,u,_,J,x)}catch(o1){return o1}}return X;function Q(V,L,N,h){let T,P=!1,x=null;const c=L;if(L&&L.instance==="Array")L=L.caster;if(L&&L.$isSchemaMap)L=L.$__schemaType;const u=L&&L.options&&L.options.ref;if(G=L&&L.options&&L.options.refPath,L!=null&&L[UH]&&!u&&!G&&!N)return{modelNames:null};if(N)T=[N];else if(G!=null){if(typeof G==="function"){const O=D.path.slice(0,D.path.length-L.path.length-1),j=u9.get(O,V,kF),_=Array.isArray(j)?U2.array.flatten(j):j?[j]:[];T=new Set;for(let s of _)G=G.call(s,s,D.path),_J(G,V,D.path,C,D._queryProjection).forEach((_1)=>T.add(_1));T=Array.from(T)}else T=_J(G,V,D.path,C,D._queryProjection);P=!0}else{let O,j,_,s,_1=h;const p0=h.schema.options.discriminatorKey;if(!L&&p0&&(s=U2.getValue(p0,V))){const o1=tE1(h.discriminators,s)||h;if(o1!=null)_1=o1;else try{_1=LH(h.db,s)}catch(S0){return S0}if(_=_1.schema._getSchema(D.path),_&&_.caster)_=_.caster}else _=L;if(c&&c.path.endsWith(".$*"))x=!c.$isMongooseArray&&!c._arrayPath;else if(_!=null)x=!_.$isMongooseArray&&!_._arrayPath;if((O=U6(_,"options.ref"))!=null)if(_!=null&&typeof O==="function"&&D.path.endsWith("."+_.path)){T=new Set;const o1=D.path.slice(0,D.path.length-_.path.length-1),S0=u9.get(o1,V,kF),A2=Array.isArray(S0)?U2.array.flatten(S0):S0?[S0]:[];for(let i0 of A2)T.add(KH(O,i0));if(A2.length===0)T=[KH(O,V)];else T=Array.from(T)}else O=KH(O,V),T=[O];else if((_=U6(L,"options.refPath"))!=null)if(P=!0,typeof j==="function"){const o1=D.path.slice(0,D.path.length-_.path.length-1),S0=u9.get(o1,V,kF),A2=Array.isArray(S0)?U2.array.flatten(S0):S0?[S0]:[];T=new Set;for(let i0 of A2)j=j.call(i0,i0,D.path),_J(j,V,D.path,C,D._queryProjection).forEach((G3)=>T.add(G3));T=Array.from(T)}else T=_J(j,V,D.path,C,D._queryProjection)}if(!T)if(D._localModel==null)T=[h.modelName];else return{modelNames:T,justOne:x,isRefPath:P,refPath:G};if(!Array.isArray(T))T=[T];return{modelNames:T,justOne:x,isRefPath:P,refPath:G}}};/*!
 * ignore
 *//*!
 * ignore
 *//*!
 * ignore
 *//*!
 * ignore
 *//*!
 * ignore
 */});var mv=z((uR1,hv)=>{var DW1=t1();hv.exports=function F(A){if(Array.isArray(A)){const D=Object.keys(A[0]);return D.length===1&&D[0]==="_id"&&A[0]._id!=="hashed"}if(typeof A!=="object")return!1;const B=DW1(A,"key",{});return Object.keys(B).length===1&&B.hasOwnProperty("_id")}});var lv=z((OR1,cv)=>{var gJ=t1(),dv=D1();cv.exports=function F(A,B,D){if(D.textIndexVersion!=null){delete D.key._fts,delete D.key._ftsx;const Y={...D.weights,...D.key};if(Object.keys(Y).length!==Object.keys(A).length)return!1;for(let $ of Object.keys(Y)){if(!($ in A))return!1;const G=Y[$];if(G!==gJ(B,"weights."+$)&&!(G===1&&gJ(B,"weights."+$)==null))return!1}if(B.default_language!==D.default_language)return D.default_language==="english"&&B.default_language==null;return!0}const J=["unique","partialFilterExpression","sparse","expireAfterSeconds","collation"];for(let Y of J){if(!(Y in B)&&!(Y in D))continue;if(Y==="collation"){if(B[Y]==null||D[Y]==null)return B[Y]==null&&D[Y]==null;const $=Object.keys(B.collation),G=B.collation,E=D.collation;for(let W of $)if(gJ(G,W)!==gJ(E,W))return!1}else if(!dv.deepEqual(B[Y],D[Y]))return!1}const Z=Object.keys(A),X=Object.keys(D.key);if(Z.length!==X.length)return!1;for(let Y=0;Y<Z.length;++Y){if(Z[Y]!==X[Y])return!1;if(!dv.deepEqual(A[Z[Y]],D.key[X[Y]]))return!1}return!0}});var sv=z((SR1,nv)=>{var ZW1=function(F,A){return iv({baseModelName:F.baseModelName,discriminatorMapping:F.schema.discriminatorMapping,indexes:A,indexesType:"schema"})},XW1=function(F,A){return iv({baseModelName:F.baseModelName,discriminatorMapping:F.schema.discriminatorMapping,indexes:A,indexesType:"db"})},iv=function({baseModelName:F,discriminatorMapping:A,indexes:B,indexesType:D}){const J=A&&A.key,Z=A&&A.value;if(!J)return B;if(Boolean(F))return B.filter((Y)=>{const $=pv(Y,D);return $&&$[J]===Z});return B.filter((Y)=>{const $=pv(Y,D);return!$||!$[J]||JW1($[J])&&!("$eq"in $[J])})},pv=function(F,A){if(A==="schema"){const B=F[1];return B&&B.partialFilterExpression}return F.partialFilterExpression},JW1=LJ();nv.exports={getRelatedSchemaIndexes:ZW1,getRelatedDBIndexes:XW1}});var rv=z((kR1,av)=>{var YW1=function(F,A,B){let D=0,J=0,Z=null;if(A<=0)throw new Error("Limit must be positive");if(F.length===0)return B(null,[]);for(let G=0;G<F.length&&G<A;++G)X();function X(){F[J+D]($(J+D)),++D}const Y=[];function $(G){return(E,W)=>{if(--D,++J,Z!=null)return;if(E!=null)return Z=E,B(Z);if(Y[G]=W,J===F.length)return B(null,Y);else if(J+D<F.length)X()}}};av.exports=YW1;/*!
 * ignore
 */});var ov=z((xR1,tv)=>{tv.exports=function F(A,B,D){if(B==null)return;for(let J=0;J<B.length;++J)if(Array.isArray(B[J]))F(A,B[J],D+"."+J);else A.push(D+"."+J)}});var Dh=z((fR1,Bh)=>{var ev=t1(),Fh=h6(),Ah=pC();/*!
 * ignore
 */Bh.exports=function F(A,B,D){const J=Ah(ev(B,"select",null),!0)||Ah(ev(B,"options.select",null),!0);if(J==null)return;for(let Z of A){if(!J.hasOwnProperty("-"+Z))continue;for(let X of D)if(X.$__!=null)Fh.unset(Z,X._doc);else Fh.unset(Z,X)}}});var Zh=z((_R1,Jh)=>{/*!
 * Module dependencies.
 */var $W1=W2();class VH extends $W1{constructor(F,A,B,D){let J=F.map((Z)=>Z.message).join(", ");if(J.length>200)J=J.slice(0,200)+"...";super(`${D} failed with ${F.length} Mongoose validation errors: ${J}`);this.validationErrors=F,this.results=A,this.rawResult=B,this.operation=D}}Object.defineProperty(VH.prototype,"name",{value:"MongooseBulkWriteError"});/*!
 * exports
 */Jh.exports=VH});var YH=z((Ih,Nh)=>{var m=function(F,A,B){if(A instanceof RH)throw new TypeError("2nd argument to `Model` constructor must be a POJO or string, **not** a schema. Make sure you\'re calling `mongoose.model()`, not `mongoose.Model()`.");if(typeof F==="string")throw new TypeError("First argument to `Model` constructor must be an object, **not** a string. Make sure you\'re calling `mongoose.model()`, not `mongoose.Model()`.");O9.call(this,F,A,B)},Rh=function(F,A){if(F.$where==null)return;for(let B of Object.keys(F.$where))A[B]=F.$where[B]},cW1=function(F,A){const B=F.$__schema.options.versionKey;if(!B)return null;const D=F.$__getValue(B)||0;return new Hh(F,D,A)},lW1=function(F,A){const B=F.$__schema.options.skipVersioning;if(!B)return!1;return A=A.replace(/\.\d+\./,"."),B[A]},u4=function(F,A,B,D,J,Z){if(Z||(Z="$set"),!B[Z])B[Z]={};if(B[Z][D.path]=J,F.$__schema.options.versionKey===!1)return;if(lW1(F,D.path))return;if((3&F.$__.version)===3)return;if(F.$__schema.options.optimisticConcurrency)return;switch(Z){case"$set":case"$unset":case"$pop":case"$pull":case"$pullAll":case"$push":case"$addToSet":case"$inc":break;default:return}if(Z==="$push"||Z==="$addToSet"||Z==="$pullAll"||Z==="$pull")if(/\.\d+\.|\.\d+$/.test(D.path))vJ.call(F);else F.$__.version=2;else if(/^\$p/.test(Z))vJ.call(F);else if(Array.isArray(J))vJ.call(F);else if(/\.\d+\.|\.\d+$/.test(D.path))F.$__.version=1},pW1=function(F,A,B,D,J){if(B.$set&&B.$set[D.path])return;if(typeof J.$__getAtomics==="function"){J.$__getAtomics().forEach(function(W){const C=W[0],H=W[1];u4(F,A,B,D,H,C)});return}const Z=J[jH],X=Object.keys(Z);let Y=X.length,$,G;if(Y===0){if(j1.isMongooseObject(J))J=J.toObject({depopulate:1,_isNested:!0});else if(J.valueOf)J=J.valueOf();return u4(F,A,B,D,J)}function E(W){return j1.isMongooseObject(W)?W.toObject({depopulate:1,_isNested:!0}):W}while(Y--){if(G=X[Y],$=Z[G],j1.isMongooseObject($))$=$.toObject({depopulate:!0,transform:!1,_isNested:!0});else if(Array.isArray($))$=$.map(E);else if($.valueOf)$=$.valueOf();if(G==="$addToSet")$={$each:$};u4(F,A,B,D,$,G)}},iW1=function(F,A,B){const D=F.$populated(A,!0);if(!D&&F.$__.selected){const Z=A.split(".")[0];if(F.$__.selected[Z+".$"])return Z}if(!(D&&j1.isMongooseArray(B)))return;if(D.options.match||D.options.options&&j1.object.hasOwnProperty(D.options.options,"limit")||D.options.options&&D.options.options.skip||D.options.select&&(D.options.select._id===0||/\s?-_id\s?/.test(D.options.select))){const Z=B[jH];if(Object.keys(Z).length===0||Z.$set||Z.$pop)return A}},vJ=function(){return this.$__.version=3,this},E1=function(F,A){if(F==null||F===global)throw new $1("`Model."+A+"()` cannot run without a model as `this`. Make sure you are calling `MyModel."+A+"()` where `MyModel` is a Mongoose model.");else if(F[wh]==null)throw new $1("`Model."+A+"()` cannot run without a model as `this`. Make sure you are not calling `new Model."+A+"()`")},nW1=function(F,A,B,D){const J=[];for(let[Z,X]of A){let Y=!1;const $=TH(F,$3(X));for(let G of B){if(MH(G))continue;if(Lh(Z,$,G)&&!D.includes(G.name)){Y=!0;break}}if(!Y)J.push(Z)}return J},sW1=function(F,A,B){const D=[];for(let J of B){let Z=!1;if(MH(J))continue;for(let[X,Y]of A){const $=TH(F,$3(Y));if(Kh(X,$,F.options),Lh(X,$,J)){Z=!0;break}}if(!Z)D.push(J.name)}return D};async function Wh(F,A){if(F.length===0)return[];return await Promise.all(F.map((B)=>A.dropIndex(B))),F}var aW1=function(F,A,B){const D=F.schema.indexes();let J;A=A||{};const Z=function(W){if(W&&!F.$caught)F.emit("error",W);F.emit("index",W||J),B&&B(W||J)};for(let W of D)if(MH(W))j1.warn('mongoose: Cannot specify a custom index on `_id` for model name "'+F.modelName+'", MongoDB does not allow overwriting the default `_id` index. See https://bit.ly/mongodb-id-index');if(!D.length){V8(function(){Z()});return}const X=function(W,C,H,q){F.emit("index-single-done",W,C,H,q)},Y=function(W,C){F.emit("index-single-start",W,C)},$=F.schema._baseSchema,G=$?$.indexes():[];V8(function(){if(A._automatic&&!F.collection.collection)F.collection.addQueue(E,[]);else E()});function E(){if(A._automatic){if(F.schema.options.autoIndex===!1||F.schema.options.autoIndex==null&&F.db.config.autoIndex===!1)return Z()}const W=D.shift();if(!W)return Z();if(A._automatic&&W[1]._autoIndex===!1)return E();if(G.find((q)=>j1.deepEqual(q,W)))return E();const C=$3(W[0]),H=$3(W[1]);if(delete H._autoIndex,TH(F.schema,H),Uh(F.schema,H),Kh(C,H,F.schema.options),Y(C,A),"background"in A)H.background=A.background;if("toCreate"in A){if(A.toCreate.length===0)return Z()}F.collection.createIndex(C,H).then((q)=>{X(null,C,H,q),E()},(q)=>{if(!J)J=q;if(!F.$caught)F.emit("error",q);X(q,C,H),E()})}},L8=function(F,A){F.$isNew=A,F.$emit("isNew",A),F.constructor.emit("isNew",A);const B=F.$getAllSubdocs();for(let D of B)D.$isNew=A,D.$emit("isNew",A)},rW1=function(F){return new Promise((A,B)=>{F.schema.s.hooks.execPre("save",F,(D)=>{if(D){B(D);return}A()})})},tW1=function(F){return new Promise((A,B)=>{if(F.$isNew)L8(F,!1);F.$__reset(),F.schema.s.hooks.execPost("save",F,[F],{},(D)=>{if(D){B(D);return}A()})})},uH=function(F,A,B,D,J){const Z=new F.Query({},{},F,F.collection);if(B instanceof O9)B=B.toObject();else B=$3(B);J=typeof J==="function"?J:$3(J);const X=F&&F.schema&&F.schema.options&&F.schema.options.versionKey||null;return Qh(D,J,X),Z[A](B,D,J)},oW1=function(F,A,B,D,J){let Z=B.length;if(B.length===0)return J(null,A);for(let Y of B)AC1(F,A,Y,X);function X(Y){if(Y)return J(Y,null);if(--Z)return;J(null,A)}},AC1=function(F,A,B,D){const J=B;if(B.strictPopulate==null){if(B._localModel!=null&&B._localModel.schema._userProvidedOptions.strictPopulate!=null)J.strictPopulate=B._localModel.schema._userProvidedOptions.strictPopulate;else if(B._localModel!=null&&F.base.options.strictPopulate!=null)J.strictPopulate=F.base.options.strictPopulate;else if(F.base.options.strictPopulate!=null)J.strictPopulate=F.base.options.strictPopulate}if(!Array.isArray(A))A=[A];if(A.length===0||A.every(j1.isNullOrUndefined))return D();const Z=SW1(F,A,J);if(Z instanceof $1)return V8(function(){D(Z)});const X=Z.length;let Y=[];function $(q){return q!==void 0}let G=X,E=!1;const W=[];for(let q=0;q<X;++q){const K=Z[q];let U=K.options.select,Q=j1.array.flatten(K.ids,$);Q=j1.array.unique(Q);const V={};if(V.sort=K&&K.options&&K.options.options&&K.options.options.sort||void 0,V.excludeId=eW1.test(U)||U&&U._id===0,K.options&&K.options.options&&K.options.options.lean&&K.options.options.lean.transform)K.options.options._leanTransform=K.options.options.lean.transform,K.options.options.lean=!0;if(Q.length===0||Q.every(j1.isNullOrUndefined)){--G,Ch(F,[],K,V);continue}if(E=!0,typeof J.foreignField==="string")K.foreignField.clear(),K.foreignField.add(J.foreignField);const L=MW1(Q,K.match,K.foreignField,K.model,K.options.skipInvalidIds);if(V.excludeId)if(typeof U==="string")U=U.replace(FC1," ");else if(Array.isArray(U))U=U.filter((N)=>N!=="-_id");else U={...U},delete U._id;if(K.options.options&&K.options.options.limit!=null)V.originalLimit=K.options.options.limit;else if(K.options.limit!=null)V.originalLimit=K.options.limit;W.push([K,L,U,V,C])}if(!E){if(Z.length!==0)return D();if(J.populate!=null){const q=j1.populate(J.populate).map((K)=>Object.assign({},K,{path:J.path+"."+K.path}));F.populate(A,q).then((K)=>{D(null,K)},(K)=>{D(K)});return}return D()}for(let q of W)BC1.apply(null,q);function C(q,K){if(q!=null)return D(q,null);if(Y=Y.concat(K),--G===0)H()}function H(){for(let q of W){const K=q[0],U=q[3];for(let Q of Y)K.options._childDocs.push(Q);try{Ch(F,Y,K,U)}catch(Q){return D(Q)}}for(let q of W)vW1(q[0].foreignField,q[0].options,Y);for(let q of W){const K=q[0];if(K.options&&K.options.options&&K.options.options._leanTransform)for(let U of Y)K.options.options._leanTransform(U)}D()}},BC1=function(F,A,B,D,J){let Z=$3(F.options.populate);const X=Object.assign({skip:F.options.skip,limit:F.options.limit,perDocumentLimit:F.options.perDocumentLimit},F.options.options);if(F.count)delete X.skip;if(X.perDocumentLimit!=null)X.limit=X.perDocumentLimit,delete X.perDocumentLimit;else if(X.limit!=null)X.limit=X.limit*F.ids.length;const Y=F.model.find(A,B,X);for(let $ of F.foreignField)if($!=="_id"&&Y.selectedInclusively()&&!fW1(Y._fields,$))Y.select($);if(F.count)for(let $ of F.foreignField)Y.select($);if(Z){if(F.model.baseModelName!=null)if(Array.isArray(Z))Z.forEach((G)=>{G.strictPopulate=!1});else if(typeof Z==="string")Z={path:Z,strictPopulate:!1};else Z.strictPopulate=!1;const $=F.options._fullPath||F.options.path;if(Array.isArray(Z))for(let G of Z)G._fullPath=$+"."+G.path;else if(typeof Z==="object")Z._fullPath=$+"."+Z.path;Y.populate(Z)}Y.exec().then(($)=>{for(let G of $)_W1.set(G,F.model);J(null,$)},($)=>{J($)})},Ch=function(F,A,B,D){const{options:J,isVirtual:Z,justOne:X}=B;let Y;const $=J&&J.options&&J.options.lean||!1,G=A.length,E={},W={};let C,H;const q=$3(B.allIds);for(let K=0;K<G;K++){if(H=A[K],H==null)continue;for(let U of B.foreignField){if(Y=j1.getValue(U,H),Array.isArray(Y)){Y=j1.array.unique(j1.array.flatten(Y));for(let Q of Y){if(Q instanceof O9)Q=Q._id;if(C=String(Q),W[C])if(Array.isArray(W[C]))W[C].push(H),E[C].push(K);else W[C]=[W[C],H],E[C]=[E[C],K];else if(Z&&!X)W[C]=[H],E[C]=[K];else W[C]=H,E[C]=K}}else{if(Y instanceof O9)Y=Y._id;if(C=String(Y),W[C]){if(Array.isArray(W[C]))W[C].push(H),E[C].push(K);else if(Z||W[C].constructor!==H.constructor||String(W[C]._id)!==String(H._id))W[C]=[W[C],H],E[C]=[E[C],K]}else W[C]=H,E[C]=K}if(!$)H.$__.wasPopulated=H.$__.wasPopulated||{value:Y}}}NW1({originalModel:F,rawIds:B.isVirtual?q:B.allIds,allIds:q,unpopulatedValues:B.unpopulatedValues,foreignField:B.foreignField,rawDocs:W,rawOrder:E,docs:B.docs,path:J.path,options:D,justOne:B.justOne,isVirtual:B.isVirtual,allOptions:B,populatedModel:B.model,lean:$,virtual:B.virtual,count:B.count,match:B.match})},DC1=function(F,A){for(let B in A)F.Query.prototype[B]=A[B]},JC1=function(F){const A={};if(F.hasOwnProperty("query"))A.query=F.query;if(F.hasOwnProperty("document"))A.document=F.document;return A};/*!
 * Module dependencies.
 */var GW1=JH(),EW1=gG(),O9=u2(),WW1=sB(),CW1=eG(),wH=import.meta.require("events").EventEmitter,PH=h7(),HW1=AF(),$1=W2(),qW1=AD(),KW1=sG(),bJ=RJ(),zW1=fy(),RH=o7(),IH=C9(),Hh=lG(),Xh=iG(),UW1=BD(),QW1=gy(),LW1=XH(),VW1=jD(),qh=vy(),wW1=dy(),RW1=VC(),Kh=iy(),IW1=sy(),zh=ry(),Uh=wC(),NW1=Hv(),PW1=wv(),$3=J0(),MW1=Pv(),Qh=HH(),Yh=Tv(),TW1=ZD(),jW1=aD(),uW1=uv(),NH=SW(),fF=t1(),OW1=T2(),yJ=c6(),SW1=vv(),V8=y2(),hJ=y6().internalToObjectOptions,MH=mv(),Lh=lv(),{getRelatedDBIndexes:kW1,getRelatedSchemaIndexes:xW1}=sv(),$h=aE(),TH=eE(),fW1=YD(),_W1=jF(),gW1=rv(),bW1=$D(),yW1=AH(),Vh=ov(),vW1=Dh(),hW1=PC(),Gh=v9(),Eh=import.meta.require("util"),j1=D1(),mJ=Zh(),mW1=KE(),jH=t().arrayAtomicsSymbol,_F=Symbol("mongoose#Model#collection"),gF=Symbol("mongoose#Model#db"),wh=t().modelSymbol,xF=Symbol("mongoose#Model#subclassed"),dW1=Object.assign({},hJ,{bson:!0,flattenObjectIds:!1});Object.setPrototypeOf(m.prototype,O9.prototype);m.prototype.$isMongooseModelPrototype=!0;m.prototype.db;m.prototype.collection;m.prototype.$__collection;m.prototype.modelName;m.prototype.$where;m.prototype.baseModelName;m.events;m._middleware;/*!
 * ignore
 *//*!
 * ignore
 */m.prototype.$__handleSave=function(F,A){const B={};if(Uh(this.$__schema,F),typeof F.writeConcern!=="undefined"){if(B.writeConcern={},"w"in F.writeConcern)B.writeConcern.w=F.writeConcern.w;if("j"in F.writeConcern)B.writeConcern.j=F.writeConcern.j;if("wtimeout"in F.writeConcern)B.writeConcern.wtimeout=F.writeConcern.wtimeout}else{if("w"in F)B.w=F.w;if("j"in F)B.j=F.j;if("wtimeout"in F)B.wtimeout=F.wtimeout}if("checkKeys"in F)B.checkKeys=F.checkKeys;const D=this.$session(),J=this[gF].base.transactionAsyncLocalStorage?.getStore();if(!B.hasOwnProperty("session")&&D!=null)B.session=D;else if(J?.session!=null)B.session=J.session;if(this.$isNew){const Y=this.toObject(dW1);if((Y||{})._id===void 0){V8(function(){A(new $1("document must have an _id before saving"))});return}this.$__version(!0,Y),this[_F].insertOne(Y,B).then(($)=>A(null,$),($)=>{L8(this,!0),A($,null)}),this.$__reset(),L8(this,!1),this.$__.inserting=!0;return}this.$__.inserting=!1;const Z=this.$__delta();if(F.pathsToSave)for(let Y in Z[1].$set)if(F.pathsToSave.includes(Y))continue;else if(F.pathsToSave.some(($)=>Y.slice(0,$.length)===$&&Y.charAt($.length)==="."))continue;else delete Z[1].$set[Y];if(Z){if(Z instanceof $1){A(Z);return}const Y=this.$__where(Z[0]);if(Y instanceof $1){A(Y);return}Rh(this,Y);const $=Z[1];if(this.$__schema.options.minimize)for(let G of Object.values($)){if(G==null)continue;for(let E of Object.keys(G)){if(G[E]==null||typeof G[E]!=="object")continue;if(!j1.isPOJO(G[E]))continue;if(mW1(G[E]),Object.keys(G[E]).length===0)delete G[E],$.$unset=$.$unset||{},$.$unset[E]=1}}this[_F].updateOne(Y,$,B).then((G)=>{G.$where=Y,A(null,G)},(G)=>{this.$__undoReset(),A(G)})}else{X.call(this);return}this.$__.modifiedPaths=this.modifiedPaths(),this.$__reset(),L8(this,!1);function X(){const Y=Object.assign({},F,B),$=this.$__where(),G=this.$__schema.options.optimisticConcurrency;if(G&&!Array.isArray(G)){const E=this.$__schema.options.versionKey,W=this.$__getValue(E);if(W!=null)$[E]=W}RW1(this.$__schema,Y),this.constructor.collection.findOne($,Y).then((E)=>{A(null,{$where:$,matchedCount:!E?0:1})}).catch(A)}};/*!
 * ignore
 */m.prototype.$__save=function(F,A){this.$__handleSave(F,(B,D)=>{if(B)return this.$__schema.s.hooks.execPost("save:error",this,[this],{error:B},(Y)=>{A(Y,this)});let J=0;if((F!=null?F.writeConcern!=null?F.writeConcern.w:F.w:0)!==0){if(D!=null)if(Array.isArray(D))J=D.length;else if(D.matchedCount!=null)J=D.matchedCount;else J=D;if(this.$__.version&&!this.$__.inserting){const Y=(2&this.$__.version)===2;this.$__.version=void 0;const $=this.$__schema.options.versionKey,G=this.$__getValue($)||0;if(J<=0){this.$__undoReset();const E=this.$__.$versionError||new Hh(this,G,this.$__.modifiedPaths);return A(E)}if(Y)this.$__setValue($,G+1)}if(D!=null&&J<=0)return this.$__undoReset(),B=new WW1(D.$where,this.constructor.modelName,J,D),this.$__schema.s.hooks.execPost("save:error",this,[this],{error:B},($)=>{A($,this)})}this.$__.saving=void 0,this.$__.savedState={},this.$emit("save",this,J),this.constructor.emit("save",this,J),A(null,this)})};/*!
 * ignore
 */m.prototype.save=async function F(A){if(typeof A==="function"||typeof arguments[1]==="function")throw new $1("Model.prototype.save() no longer accepts a callback");let B;if(this.$op="save",this.$__.saving)B=new Xh(this);else this.$__.saving=new Xh(this);if(A=new zW1(A),A.hasOwnProperty("session"))this.$session(A.session);if(this.$__.timestamps!=null)A.timestamps=this.$__.timestamps;if(this.$__.$versionError=cW1(this,this.modifiedPaths()),B)throw this.$__handleReject(B),B;return this.$__.saveOptions=A,await new Promise((D,J)=>{this.$__save(A,(Z)=>{if(this.$__.saving=null,this.$__.saveOptions=null,this.$__.$versionError=null,this.$op=null,Z!=null)return this.$__handleReject(Z),J(Z);D()})}),this};m.prototype.$save=m.prototype.save;m.prototype.$__delta=function(){const F=this.$__dirty(),A=this.$__schema.options.optimisticConcurrency;if(A)if(Array.isArray(A)){const Y=new Set(A);if(this.modifiedPaths().find((G)=>Y.has(G)))this.$__.version=F.length?3:1}else this.$__.version=F.length?3:1;if(!F.length&&this.$__.version!==3)return;const B={},D={},J=F.length,Z=[];let X=0;if(B._id=this._doc._id,(B&&B._id&&B._id.$__||null)!=null)B._id=B._id.toObject({transform:!1,depopulate:!0});for(;X<J;++X){const Y=F[X];let $=Y.value;const G=iW1(this,Y.path,$);if(G){Z.push(G);continue}if(!this.$populated(Y.path,!0)&&this.$__.selected){const W=Y.path.split("."),C=W[0];if(this.$__.selected[C]&&this.$__.selected[C].$elemMatch)if(W.length>1&&W[1]==0&&typeof B[C]==="undefined")B[C]=this.$__.selected[C],W[1]="$",Y.path=W.join(".");else{Z.push(Y.path);continue}}if(this.$isDefault(Y.path)&&this.$__.selected){if(Y.path.indexOf(".")===-1&&$h(this.$__.selected,Y.path))continue;if(bW1(Y.path).find((C)=>$h(this.$__.isSelected,C)))continue}if(Z.length)continue;if($===void 0)u4(this,B,D,Y,1,"$unset");else if($===null)u4(this,B,D,Y,null);else if(j1.isMongooseArray($)&&$.$path()&&$[jH])pW1(this,B,D,Y,$);else if($[HW1.pathSymbol]&&Buffer.isBuffer($))$=$.toObject(),u4(this,B,D,Y,$);else if(this.$__.primitiveAtomics&&this.$__.primitiveAtomics[Y.path]!=null){const W=this.$__.primitiveAtomics[Y.path],C=uW1(W);u4(this,B,D,Y,W[C],C)}else $=$3($,{depopulate:!0,transform:!1,virtuals:!1,getters:!1,omitUndefined:!0,_isNested:!0}),u4(this,B,D,Y,$)}if(Z.length)return new CW1(Z);if(this.$__.version)this.$__version(B,D);if(Object.keys(D).length===0)return[B,null];return[B,D]};m.prototype.$__version=function(F,A){const B=this.$__schema.options.versionKey;if(F===!0){if(B)hW1(A,B,0),this.$__setValue(B,0);return}if(B===!1)return;if(!this.$__isSelected(B))return;if((1&this.$__.version)===1){const D=this.$__getValue(B);if(D!=null)F[B]=D}if((2&this.$__.version)===2)if(fF(A.$set,B,null)!=null)++A.$set[B];else A.$inc=A.$inc||{},A.$inc[B]=1};/*!
 * ignore
 */m.prototype.increment=vJ;m.prototype.$__where=function F(A){if(A||(A={}),!A._id)A._id=this._doc._id;if(this._doc._id===void 0)return new $1("No _id found on document!");return A};m.prototype.deleteOne=function F(A){if(typeof A==="function"||typeof arguments[1]==="function")throw new $1("Model.prototype.deleteOne() no longer accepts a callback");if(!A)A={};if(A.hasOwnProperty("session"))this.$session(A.session);const B=this,D=this.$__where();if(D instanceof Error)throw D;const J=B.constructor.deleteOne(D,A);if(this.$session()!=null){if(!("session"in J.options))J.options.session=this.$session()}return J.pre(function Z(X){B.constructor._middleware.execPre("deleteOne",B,[B],X)}),J.pre(function Z(X){NH(B.$getAllSubdocs(),(Y,$)=>{Y.constructor._middleware.execPre("deleteOne",Y,[Y],$)},X)}),J.pre(function Z(X){if(B.$__.isDeleted)return X(PH.skipWrappedFunction());return X()}),J.post(function Z(X){NH(B.$getAllSubdocs(),(Y,$)=>{Y.constructor._middleware.execPost("deleteOne",Y,[Y],{},$)},X)}),J.post(function Z(X){B.constructor._middleware.execPost("deleteOne",B,[B],{},X)}),J};m.prototype.$model=function F(A){if(arguments.length===0)return this.constructor;return this[gF].model(A)};m.prototype.model=m.prototype.$model;m.exists=function F(A,B){if(E1(this,"exists"),typeof arguments[2]==="function")throw new $1("Model.exists() no longer accepts a callback");return this.findOne(A).select({_id:1}).lean().setOptions(B)};m.discriminator=function(F,A,B){let D;if(typeof F==="function"){if(D=F,F=j1.getFunctionName(D),!(D.prototype instanceof m))throw new $1("The provided class "+F+" must extend Model")}B=B||{};const J=j1.isPOJO(B)?B.value:B,Z=typeof B.clone==="boolean"?B.clone:!0,X=typeof B.mergePlugins==="boolean"?B.mergePlugins:!0,Y=typeof B.overwriteModels==="boolean"?B.overwriteModels:!1;if(E1(this,"discriminator"),j1.isObject(A)&&!A.instanceOfSchema)A=new RH(A);if(A instanceof RH&&Z)A=A.clone();if(A=jW1(this,F,A,J,X,B.mergeHooks,Y),this.db.models[F]&&!A.options.overwriteModels&&!Y)throw new KW1(F);A.$isRootDiscriminator=!0,A.$globalPluginsApplied=!0,D=this.db.model(D||F,A,this.$__collection.name),this.discriminators[F]=D;const $=this.discriminators[F];if(Object.setPrototypeOf($.prototype,this.prototype),Object.defineProperty($,"baseModelName",{value:this.modelName,configurable:!0,writable:!1}),qh($,A),zh($,A),this[xF]!=null)for(let G of this[xF])G.discriminators=G.discriminators||{},G.discriminators[F]=D.__subclass(D.db,A,G.collection.name);return $};/*!
 * Give the constructor the ability to emit events.
 */for(let F in wH.prototype)m[F]=wH.prototype[F];m.init=function F(){if(E1(this,"init"),typeof arguments[0]==="function")throw new $1("Model.init() no longer accepts a callback");if(this.schema.emit("init",this),this.$init!=null)return this.$init;const A=this.db,B=async()=>{if(!j1.getOption("autoIndex",this.schema.options,A.config,A.base.options))return;return await this.ensureIndexes({_automatic:!0})},D=async()=>{if(!j1.getOption("autoSearchIndex",this.schema.options,A.config,A.base.options))return;const $=[];for(let G of this.schema._searchIndexes)$.push(await this.createSearchIndex(G));return $},J=async()=>{if((A.readyState===Gh.connecting||A.readyState===Gh.disconnected)&&A._shouldBufferCommands())await new Promise(($)=>{A._queue.push({fn:$})});if(!j1.getOption("autoCreate",this.schema.options,A.config,A.base.options))return;return await this.createCollection()};this.$init=J().then(()=>B()).then(()=>D());const Z=this.$init.catch,X=this;return this.$init.catch=function(){return X.$caught=!0,Z.apply(X.$init,arguments)},this.$init};m.createCollection=async function F(A){if(E1(this,"createCollection"),typeof arguments[0]==="function"||typeof arguments[1]==="function")throw new $1("Model.createCollection() no longer accepts a callback");const B=await new Promise(($,G)=>{this.hooks.execPre("createCollection",this,[A],(E)=>{if(E!=null){if(E instanceof PH.skipWrappedFunction)return $(!0);return G(E)}$()})}),D=this&&this.schema&&this.schema.options&&this.schema.options.collectionOptions;if(D!=null)A=Object.assign({},D,A);const J=this&&this.schema&&this.schema.options&&this.schema.options.collation;if(J!=null)A=Object.assign({collation:J},A);const Z=this&&this.schema&&this.schema.options&&this.schema.options.capped;if(Z!=null){if(typeof Z==="number")A=Object.assign({capped:!0,size:Z},A);else if(typeof Z==="object")A=Object.assign({capped:!0},Z,A)}const X=this&&this.schema&&this.schema.options&&this.schema.options.timeseries;if(X!=null){if(A=Object.assign({timeseries:X},A),A.expireAfterSeconds!=null);else if(A.expires!=null)j1.expires(A);else if(this.schema.options.expireAfterSeconds!=null)A.expireAfterSeconds=this.schema.options.expireAfterSeconds;else if(this.schema.options.expires!=null)A.expires=this.schema.options.expires,j1.expires(A)}const Y=this&&this.schema&&this.schema.options&&this.schema.options.clusteredIndex;if(Y!=null)A=Object.assign({clusteredIndex:{...Y,unique:!0}},A);try{if(!B)await this.db.createCollection(this.$__collection.collectionName,A)}catch($){if($!=null&&($.name!=="MongoServerError"||$.code!==48))await new Promise((G,E)=>{const W={error:$};this.hooks.execPost("createCollection",this,[null],W,(C)=>{if(C!=null)return E(C);G()})})}return await new Promise(($,G)=>{this.hooks.execPost("createCollection",this,[this.$__collection],(E)=>{if(E!=null)return G(E);$()})}),this.$__collection};m.syncIndexes=async function F(A){if(E1(this,"syncIndexes"),typeof arguments[0]==="function"||typeof arguments[1]==="function")throw new $1("Model.syncIndexes() no longer accepts a callback");const B=this;try{await B.createCollection()}catch(Z){if(Z!=null&&(Z.name!=="MongoServerError"||Z.code!==48))throw Z}const D=await B.diffIndexes(),J=await B.cleanIndexes({...A,toDrop:D.toDrop});return await B.createIndexes({...A,toCreate:D.toCreate}),J};m.createSearchIndex=async function F(A){return E1(this,"createSearchIndex"),await this.$__collection.createSearchIndex(A)};m.updateSearchIndex=async function F(A,B){return E1(this,"updateSearchIndex"),await this.$__collection.updateSearchIndex(A,B)};m.dropSearchIndex=async function F(A){return E1(this,"dropSearchIndex"),await this.$__collection.dropSearchIndex(A)};m.listSearchIndexes=async function F(A){return E1(this,"listSearchIndexes"),await(await this.$__collection.listSearchIndexes(A)).toArray()};m.diffIndexes=async function F(){if(typeof arguments[0]==="function"||typeof arguments[1]==="function")throw new $1("Model.syncIndexes() no longer accepts a callback");const A=this;let B=await A.listIndexes().catch((Y)=>{if(Y.codeName=="NamespaceNotFound")return;throw Y});if(B===void 0)B=[];B=kW1(A,B);const D=A.schema,J=xW1(A,D.indexes()),Z=sW1(D,J,B),X=nW1(D,J,B,Z);return{toDrop:Z,toCreate:X}};m.cleanIndexes=async function F(A){if(E1(this,"cleanIndexes"),typeof arguments[0]==="function"||typeof arguments[1]==="function")throw new $1("Model.cleanIndexes() no longer accepts a callback");const B=this,D=B.$__collection;if(Array.isArray(A&&A.toDrop))return await Wh(A.toDrop,D);const J=await B.diffIndexes();return await Wh(J.toDrop,D)};m.listIndexes=async function F(){if(E1(this,"listIndexes"),typeof arguments[0]==="function")throw new $1("Model.listIndexes() no longer accepts a callback");if(this.$__collection.buffer)await new Promise((A)=>{this.$__collection.addQueue(A)});return this.$__collection.listIndexes().toArray()};m.ensureIndexes=async function F(A){if(E1(this,"ensureIndexes"),typeof arguments[0]==="function"||typeof arguments[1]==="function")throw new $1("Model.ensureIndexes() no longer accepts a callback");await new Promise((B,D)=>{aW1(this,A,(J)=>{if(J!=null)return D(J);B()})})};m.createIndexes=async function F(A){if(E1(this,"createIndexes"),typeof arguments[0]==="function"||typeof arguments[1]==="function")throw new $1("Model.createIndexes() no longer accepts a callback");return this.ensureIndexes(A)};/*!
 * ignore
 */m.schema;m.db;m.collection;m.$__collection;m.base;m.discriminators;m.translateAliases=function F(A,B){E1(this,"translateAliases");const D=(J,Z)=>{let X;const Y=[],$=J.split(".");let G=this.schema;for(let W in $){const C=$[W];if(G&&G.aliases[C]){if(X=G.aliases[C],B&&X in A)throw new $1(`Provided object has both field "${C}" and its alias "${X}"`);Y.push(X)}else X=C,Y.push(C);if(G&&G.paths[X])G=G.paths[X].schema;else G=null}const E=Y.join(".");if(A instanceof Map)A.set(E,Z);else A[E]=Z;if(E!==J)if(A instanceof Map)A.delete(J);else delete A[J];return A};if(typeof A==="object"){if(A instanceof Map)for(let J of new Map(A))A=D(J[0],J[1]);else for(let J of Object.keys(A))if(A=D(J,A[J]),J[0]==="$")if(Array.isArray(A[J]))for(let Z in A[J])A[J][Z]=this.translateAliases(A[J][Z]);else this.translateAliases(A[J]);return A}else return A};m.deleteOne=function F(A,B){if(E1(this,"deleteOne"),typeof arguments[0]==="function"||typeof arguments[1]==="function"||typeof arguments[2]==="function")throw new $1("Model.prototype.deleteOne() no longer accepts a callback");const D=new this.Query({},{},this,this.$__collection);return D.setOptions(B),D.deleteOne(A)};m.deleteMany=function F(A,B){if(E1(this,"deleteMany"),typeof arguments[0]==="function"||typeof arguments[1]==="function"||typeof arguments[2]==="function")throw new $1("Model.deleteMany() no longer accepts a callback");const D=new this.Query({},{},this,this.$__collection);return D.setOptions(B),D.deleteMany(A)};m.find=function F(A,B,D){if(E1(this,"find"),typeof arguments[0]==="function"||typeof arguments[1]==="function"||typeof arguments[2]==="function"||typeof arguments[3]==="function")throw new $1("Model.find() no longer accepts a callback");const J=new this.Query({},{},this,this.$__collection);return J.select(B),J.setOptions(D),J.find(A)};m.findById=function F(A,B,D){if(E1(this,"findById"),typeof arguments[0]==="function"||typeof arguments[1]==="function"||typeof arguments[2]==="function")throw new $1("Model.findById() no longer accepts a callback");if(typeof A==="undefined")A=null;return this.findOne({_id:A},B,D)};m.findOne=function F(A,B,D){if(E1(this,"findOne"),typeof arguments[0]==="function"||typeof arguments[1]==="function"||typeof arguments[2]==="function")throw new $1("Model.findOne() no longer accepts a callback");const J=new this.Query({},{},this,this.$__collection);return J.select(B),J.setOptions(D),J.findOne(A)};m.estimatedDocumentCount=function F(A){return E1(this,"estimatedDocumentCount"),new this.Query({},{},this,this.$__collection).estimatedDocumentCount(A)};m.countDocuments=function F(A,B){if(E1(this,"countDocuments"),typeof arguments[0]==="function"||typeof arguments[1]==="function"||typeof arguments[2]==="function")throw new $1("Model.countDocuments() no longer accepts a callback");const D=new this.Query({},{},this,this.$__collection);if(B!=null)D.setOptions(B);return D.countDocuments(A)};m.distinct=function F(A,B){if(E1(this,"distinct"),typeof arguments[0]==="function"||typeof arguments[1]==="function")throw new $1("Model.distinct() no longer accepts a callback");return new this.Query({},{},this,this.$__collection).distinct(A,B)};m.where=function F(A,B){E1(this,"where");const D=new this.Query({},{},this,this.$__collection).find({});return D.where.apply(D,arguments)};m.$where=function F(){E1(this,"$where");const A=new this.Query({},{},this,this.$__collection).find({});return A.$where.apply(A,arguments)};m.findOneAndUpdate=function(F,A,B){if(E1(this,"findOneAndUpdate"),typeof arguments[0]==="function"||typeof arguments[1]==="function"||typeof arguments[2]==="function"||typeof arguments[3]==="function")throw new $1("Model.findOneAndUpdate() no longer accepts a callback");if(arguments.length===1)A=F,F=null,B=null;let D;if(B)D=B.fields||B.projection;A=$3(A,{depopulate:!0,_isNested:!0}),Qh(A,B,this.schema.options.versionKey);const J=new this.Query({},{},this,this.$__collection);return J.select(D),J.findOneAndUpdate(F,A,B)};m.findByIdAndUpdate=function(F,A,B){if(E1(this,"findByIdAndUpdate"),typeof arguments[0]==="function"||typeof arguments[1]==="function"||typeof arguments[2]==="function"||typeof arguments[3]==="function")throw new $1("Model.findByIdAndUpdate() no longer accepts a callback");if(F instanceof O9)F=F._id;return this.findOneAndUpdate.call(this,{_id:F},A,B)};m.findOneAndDelete=function(F,A){if(E1(this,"findOneAndDelete"),typeof arguments[0]==="function"||typeof arguments[1]==="function"||typeof arguments[2]==="function")throw new $1("Model.findOneAndDelete() no longer accepts a callback");let B;if(A)B=A.select,A.select=void 0;const D=new this.Query({},{},this,this.$__collection);return D.select(B),D.findOneAndDelete(F,A)};m.findByIdAndDelete=function(F,A){if(E1(this,"findByIdAndDelete"),typeof arguments[0]==="function"||typeof arguments[1]==="function"||typeof arguments[2]==="function")throw new $1("Model.findByIdAndDelete() no longer accepts a callback");return this.findOneAndDelete({_id:F},A)};m.findOneAndReplace=function(F,A,B){if(E1(this,"findOneAndReplace"),typeof arguments[0]==="function"||typeof arguments[1]==="function"||typeof arguments[2]==="function"||typeof arguments[3]==="function")throw new $1("Model.findOneAndReplace() no longer accepts a callback");let D;if(B)D=B.select,B.select=void 0;const J=new this.Query({},{},this,this.$__collection);return J.select(D),J.findOneAndReplace(F,A,B)};m.create=async function F(A,B){if(typeof B==="function"||typeof arguments[2]==="function")throw new $1("Model.create() no longer accepts a callback");E1(this,"create");let D;const J=this.schema.options.discriminatorKey;if(Array.isArray(A))D=A,B=B!=null&&typeof B==="object"?B:{};else{const Y=arguments[arguments.length-1];if(B={},typeof Y==="function"||typeof B==="function"||typeof arguments[2]==="function")throw new $1("Model.create() no longer accepts a callback");else if(D=[...arguments],D.length>1&&!Y)D.pop();if(D.length===2&&D[0]!=null&&D[1]!=null&&D[0].session==null&&Y&&OW1(Y.session)==="ClientSession"&&!this.schema.path("session"))j1.warn("WARNING: to pass a `session` to `Model.create()` in Mongoose, you **must** pass an array as the first argument. See: https://mongoosejs.com/docs/api/model.html#Model.create()")}if(D.length===0)return Array.isArray(A)?[]:null;let Z=[];const X=typeof B.aggregateErrors==="boolean"?!B.aggregateErrors:!0;if(delete B.aggregateErrors,B.ordered){for(let Y=0;Y<D.length;Y++)try{const $=D[Y],G=this.discriminators&&$[J]!=null?this.discriminators[$[J]]||yJ(this.discriminators,$[J]):this;if(G==null)throw new $1(`Discriminator "${$[J]}" not found for model "${this.modelName}"`);let E=$;if(!(E instanceof G))E=new G(E);await E.$save(B),Z.push(E)}catch($){if(!X)Z.push($);else throw $}return Z}else if(!X)Z=await Promise.allSettled(D.map(async(Y)=>{const $=this.discriminators&&Y[J]!=null?this.discriminators[Y[J]]||yJ(this.discriminators,Y[J]):this;if($==null)throw new $1(`Discriminator "${Y[J]}" not found for model "${this.modelName}"`);let G=Y;if(!(G instanceof $))G=new $(G);return await G.$save(B),G})),Z=Z.map((Y)=>Y.status==="fulfilled"?Y.value:Y.reason);else{let Y=null;if(Z=await Promise.all(D.map(async($)=>{const G=this.discriminators&&$[J]!=null?this.discriminators[$[J]]||yJ(this.discriminators,$[J]):this;if(G==null)throw new $1(`Discriminator "${$[J]}" not found for model "${this.modelName}"`);try{let E=$;if(!(E instanceof G))E=new G(E);return await E.$save(B),E}catch(E){if(!Y)Y=E}})),Y)throw Y}if(!Array.isArray(A)&&D.length===1)return Z[0];return Z};m.watch=function(F,A){E1(this,"watch");const B=(D)=>{if(F=F||[],yW1(F,this.schema,"fullDocument"),this.$__collection.buffer)this.$__collection.addQueue(()=>{if(this.closed)return;const J=this.$__collection.watch(F,A);D(null,J)});else{const J=this.$__collection.watch(F,A);D(null,J)}};return A=A||{},A.model=this,new EW1(B,F,A)};m.startSession=function(){return E1(this,"startSession"),this.db.startSession.apply(this.db,arguments)};m.insertMany=async function F(A,B){if(E1(this,"insertMany"),typeof B==="function"||typeof arguments[2]==="function")throw new $1("Model.insertMany() no longer accepts a callback");return new Promise((D,J)=>{this.$__insertMany(A,B,(Z,X)=>{if(Z!=null)return J(Z);D(X)})})};m.$__insertMany=function(F,A,B){const D=this;if(typeof A==="function")B=A,A=null;B=B||j1.noop,A=A||{};const J=A.limit||1000,Z=!!A.rawResult,X=typeof A.ordered==="boolean"?A.ordered:!0,Y=typeof A.throwOnValidationError==="boolean"?A.throwOnValidationError:!1,$=!!A.lean;if(!Array.isArray(F))F=[F];const G=[],E=new Map,W=X?null:new Array(F.length),C=F.map((H,q)=>(K)=>{if($)return V8(()=>K(null,H));if(!(H instanceof D)){if(H!=null&&typeof H!=="object")return K(new qW1(H,"arr."+q,"insertMany"));try{H=new D(H)}catch(U){return K(U)}}if(A.session!=null)H.$session(A.session);if($)return V8(()=>K(null,H));H.$validate().then(()=>{K(null,H)},(U)=>{if(X===!1)return G.push(U),E.set(U,q),W[q]=U,K(null,null);K(U)})});gW1(C,J,function(H,q){if(H){B(H,null);return}const K=new Map,U=new Map;for(let L=0;L<q.length;++L)K.set(q[L],L);const Q=q.filter(function(L){return L!=null});for(let L=0;L<Q.length;++L)U.set(L,K.get(Q[L]));if(G.length>0)G.sort((L,N)=>{return E.get(L)-E.get(N)});if(Q.length===0){if(Y)return B(new mJ(G,W,null,"insertMany"));if(Z)return B(null,{acknowledged:!0,insertedCount:0,insertedIds:{},mongoose:{validationErrors:G}});B(null,[]);return}const V=$?Q:Q.map(function(L){if(L.$__schema.options.versionKey)L[L.$__schema.options.versionKey]=0;if((!A||A.timestamps!==!1)&&L.initializeTimestamps&&(!L.$__||L.$__.timestamps!==!1))return L.initializeTimestamps().toObject(hJ);return L.toObject(hJ)});D.$__collection.insertMany(V,A).then((L)=>{if(!$)for(let N of Q)N.$__reset(),L8(N,!1);if(X===!1&&Y&&G.length>0){for(let N=0;N<W.length;++N)if(W[N]===void 0)W[N]=q[N];return B(new mJ(G,W,L,"insertMany"))}if(Z){if(X===!1){for(let N=0;N<W.length;++N)if(W[N]===void 0)W[N]=q[N];L.mongoose={validationErrors:G,results:W}}return B(null,L)}if(A.populate!=null)return D.populate(Q,A.populate).then((N)=>{B(null,N)},(N)=>{if(N!=null)N.insertedDocs=Q;throw N});B(null,Q)},(L)=>{if(L.writeErrors==null&&(L.result&&L.result.result&&L.result.result.writeErrors)!=null)L.writeErrors=L.result.result.writeErrors;const N=L&&L.writeErrors,h=new Set((L&&L.writeErrors||[]).map((P)=>P.index));if(L.writeErrors!=null)for(let P=0;P<L.writeErrors.length;++P){const x=U.get(L.writeErrors[P].index);if(L.writeErrors[P]={...L.writeErrors[P],index:x},!X)W[x]=L.writeErrors[P]}if(!X){for(let P=0;P<W.length;++P)if(W[P]===void 0)W[P]=q[P];L.results=W}let T=-1;if(L.insertedDocs=Q.filter((P,x)=>{const c=!N||h.has(x);if(X){if(T>-1)return x<T;if(c)T=x}return!c}).map(function P(x){if($)return x;return x.$__reset(),L8(x,!1),x}),Z&&X===!1)L.mongoose={validationErrors:G,results:W};B(L,null)})})};/*!
 * ignore
 */m.bulkWrite=async function F(A,B){if(E1(this,"bulkWrite"),typeof B==="function"||typeof arguments[2]==="function")throw new $1("Model.bulkWrite() no longer accepts a callback");B=B||{};const D=await new Promise(($,G)=>{this.hooks.execPre("bulkWrite",this,[A,B],(E)=>{if(E!=null){if(E instanceof PH.skipWrappedFunction)return $(E);return G(E)}$()})});if(D)return D.args[0];const J=B.ordered==null?!0:B.ordered;if(A.length===0)return Yh();const Z=A.map(($)=>PW1(this,$,B)),X=this.db.base.transactionAsyncLocalStorage?.getStore();if((!B||!B.hasOwnProperty("session"))&&X?.session!=null)B={...B,session:X.session};let Y=null;if(J){await new Promise(($,G)=>{NH(Z,(E,W)=>E(W),(E)=>{if(E)return G(E);$()})});try{Y=await this.$__collection.bulkWrite(A,B)}catch($){await new Promise((G,E)=>{const W={error:$};this.hooks.execPost("bulkWrite",this,[null],W,(C)=>{if(C!=null)return E(C);G()})})}}else{let $=Z.length,G=[],E=[];const W=[];await new Promise((q)=>{for(let K=0;K<Z.length;++K)Z[K]((U)=>{if(U==null)G.push(K);else E.push({index:K,error:U}),W[K]=U;if(--$<=0)q()})}),E=E.sort((q,K)=>q.index-K.index).map((q)=>q.error);const C=G;if(G=G.sort().map((q)=>A[q]),G.length===0){if(B.throwOnValidationError&&E.length)throw new mJ(E,W,Y,"bulkWrite");return Yh()}let H;if([Y,H]=await this.$__collection.bulkWrite(G,B).then((q)=>[q,null]).catch((q)=>[null,q]),H){if(E.length>0)H.mongoose=H.mongoose||{},H.mongoose.validationErrors=E;await new Promise((q,K)=>{const U={error:H};this.hooks.execPost("bulkWrite",this,[null],U,(Q)=>{if(Q!=null)return K(Q);q()})})}for(let q=0;q<C.length;++q)W[C[q]]=null;if(E.length>0)if(B.throwOnValidationError)throw new mJ(E,W,Y,"bulkWrite");else Y.mongoose=Y.mongoose||{},Y.mongoose.validationErrors=E,Y.mongoose.results=W}return await new Promise(($,G)=>{this.hooks.execPost("bulkWrite",this,[Y],(E)=>{if(E!=null)return G(E);$()})}),Y};m.bulkSave=async function F(A,B){if(B=B||{},B.timestamps!=null)for(let X of A)X.$__.saveOptions=X.$__.saveOptions||{},X.$__.saveOptions.timestamps=B.timestamps;else for(let X of A)if(X.$__.timestamps!=null)X.$__.saveOptions=X.$__.saveOptions||{},X.$__.saveOptions.timestamps=X.$__.timestamps;await Promise.all(A.map(rW1));const D=this.buildBulkWriteOperations(A,{skipValidation:!0,timestamps:B.timestamps}),{bulkWriteResult:J,bulkWriteError:Z}=await this.bulkWrite(D,B).then((X)=>({bulkWriteResult:X,bulkWriteError:null}),(X)=>({bulkWriteResult:null,bulkWriteError:X}));if(await Promise.all(A.map(async(X)=>{if((Z&&Z.writeErrors.find(($)=>{return($.err.op._id||$.err.op.q._id).toString()===X._id.toString()}))==null)await tW1(X)})),Z&&Z.writeErrors&&Z.writeErrors.length)throw Z;return J};m.applyDefaults=function F(A){if(A.$__!=null){UW1(A,A.$__.fields,A.$__.exclude);for(let B of A.$getAllSubdocs())F(B,B.$__.fields,B.$__.exclude);return A}return QW1(A,this.schema),A};m.castObject=function F(A,B){B=B||{};const D={},J=this.schema,Z=Object.keys(J.paths);for(let Y of Z){const $=J.path(Y);if(!$||!$.$isMongooseArray)continue;const G=fF(A,Y);Vh(Z,G,Y)}let X=null;for(let Y of Z){const $=J.path(Y);if($==null)continue;let G=fF(A,Y,void 0);if(G==null)continue;const E=Y.indexOf(".")===-1?[Y]:Y.split(".");let W=D;for(let C=0;C<E.length-1;++C){if(W[E[C]]==null)W[E[C]]=isNaN(E[C+1])?{}:[];W=W[E[C]]}if($.$isMongooseDocumentArray)continue;if($.$isSingleNested||$.$isMongooseDocumentArrayElement){try{G=m.castObject.call($.caster,G)}catch(C){if(!B.ignoreCastErrors)X=X||new IH,X.addError(Y,C);continue}W[E[E.length-1]]=G;continue}try{G=$.cast(G),W[E[E.length-1]]=G}catch(C){if(!B.ignoreCastErrors)X=X||new IH,X.addError(Y,C);continue}}if(X!=null)throw X;return D};m.buildBulkWriteOperations=function F(A,B){if(!Array.isArray(A))throw new Error(`bulkSave expects an array of documents to be passed, received \`${A}\` instead`);Z();const D=this.schema.options.discriminatorKey;return A.reduce((X,Y,$)=>{if(!B.skipValidation){if(!(Y instanceof O9))throw new Error(`documents.${$} was not a mongoose document, documents must be an array of mongoose documents (instanceof mongoose.Document).`);const C=Y.validateSync();if(C)throw C}if(Y.isNew){const C={insertOne:{document:Y}};return j1.injectTimestampsOption(C.insertOne,B.timestamps),X.push(C),X}const E=Y.$__delta();if(E!=null&&!j1.isEmptyObject(E[0])){const C=Y.$__where(E[0]),H=E[1];Rh(Y,C);const q=this.schema.options.shardKey;if(q){const U=Object.keys(q),Q=U.length;for(let V=0;V<Q;++V)C[U[V]]=q[U[V]]}if(Y[D]!=null&&!(D in C))C[D]=Y[D];Y.$__version(C,E);const K={updateOne:{filter:C,update:H}};return j1.injectTimestampsOption(K.updateOne,B.timestamps),X.push(K),X}return X},[]);function Z(){if(B=B||{},B.skipValidation==null)B.skipValidation=!1}};m.hydrate=function(F,A,B){if(E1(this,"hydrate"),A!=null){if(F!=null&&F.$__!=null)F=F.toObject(hJ);F=wW1(F,A)}const D=s5().createModel(this,F,A);return D.$init(F,B),D};m.updateMany=function F(A,B,D){return E1(this,"updateMany"),uH(this,"updateMany",A,B,D)};m.updateOne=function F(A,B,D){return E1(this,"updateOne"),uH(this,"updateOne",A,B,D)};m.replaceOne=function F(A,B,D){E1(this,"replaceOne");const J=this&&this.schema&&this.schema.options&&this.schema.options.versionKey||null;if(J&&!B[J])B[J]=0;return uH(this,"replaceOne",A,B,D)};m.aggregate=function F(A,B){if(E1(this,"aggregate"),typeof B==="function"||typeof arguments[2]==="function")throw new $1("Model.aggregate() no longer accepts a callback");const D=new GW1(A||[]);if(D.model(this),B!=null)D.option(B);if(typeof callback==="undefined")return D;return D};m.validate=async function F(A,B,D){if(arguments.length<3||arguments.length===3&&typeof arguments[2]==="function")D=A;if(typeof D==="function"||typeof arguments[3]==="function")throw new $1("Model.validate() no longer accepts a callback");let J=this.schema;const Z=J.options.discriminatorKey;if(J.discriminators!=null&&A!=null&&A[Z]!=null)J=TW1(J,A[Z])||J;let X=Object.keys(J.paths);if(B!=null){const G=typeof B==="string"?new Set(B.split(" ")):Array.isArray(B)?new Set(B):new Set(X);X=X.filter((E)=>{if(B.pathsToSkip){if(Array.isArray(B.pathsToSkip)){if(B.pathsToSkip.find((H)=>H==E))return!1}else if(typeof B.pathsToSkip=="string"){if(B.pathsToSkip.includes(E))return!1}}const W=E.split(".");let C=W[0];for(let H of W){if(G.has(C))return!0;C+="."+H}return G.has(E)})}for(let G of X){const E=J.path(G);if(!E||!E.$isMongooseArray||E.$isMongooseDocumentArray)continue;const W=fF(A,G);Vh(X,W,G)}let Y=null;X=new Set(X);try{A=this.castObject(A)}catch(G){Y=G;for(let E of Object.keys(Y.errors||{}))X.delete(E)}let $=X.size;return new Promise((G,E)=>{for(let C of X){const H=J.path(C);if(H==null){W();continue}const q=C.indexOf(".")===-1?[C]:C.split(".");let K=A;for(let Q=0;Q<q.length-1;++Q)K=K[q[Q]];const U=fF(A,C,void 0);H.doValidate(U,(Q)=>{if(Q)Y=Y||new IH,Y.addError(C,Q);W()},D,{path:C})}function W(){if(--$<=0)if(Y)E(Y);else G(A)}})};m.populate=async function F(A,B){if(E1(this,"populate"),typeof B==="function"||typeof arguments[2]==="function")throw new $1("Model.populate() no longer accepts a callback");const D=this;B=j1.populate(B);const J={};return new Promise((Z,X)=>{oW1(D,A,B,J,(Y,$)=>{if(Y)return X(Y);Z($)})})};/*!
 * Populates `docs`
 */var eW1=/\s?-_id\s?/,FC1=/\s?-_id\s?/g;/*!
 * ignore
 *//*!
 * ignore
 */m.compile=function F(A,B,D,J,Z){if(B.options.versionKey!==!1&&!B.paths[B.options.versionKey]){const W={};W[B.options.versionKey]=Number,B.add(W)}let Y;if(typeof A==="function"&&A.prototype instanceof m)Y=A,A=Y.name,B.loadClass(Y,!1),Y.prototype.$isMongooseModelPrototype=!0;else Y=function W(C,H,q){if(W.hooks.execPreSync("createModel",C),!(this instanceof W))return new W(C,H,q);const K=W.schema.options.discriminatorKey;if(W.discriminators==null||C==null||C[K]==null){m.call(this,C,H,q);return}const U=W.discriminators[C[K]]||yJ(W.discriminators,C[K]);if(U!=null)return new U(C,H,q);m.call(this,C,H,q)};if(Y.hooks=B.s.hooks.clone(),Y.base=Z,Y.modelName=A,!(Y.prototype instanceof m))Object.setPrototypeOf(Y,m),Object.setPrototypeOf(Y.prototype,m.prototype);Y.model=function W(C){return this.db.model(C)},Y.db=J,Y.prototype.db=J,Y.prototype[gF]=J,Y.discriminators=Y.prototype.discriminators=void 0,Y[wh]=!0,Y.events=new wH,B._preCompile();const G={schemaUserProvidedOptions:B._userProvidedOptions||{},capped:B.options.capped,Promise:Y.base.Promise,modelName:A};if(B.options.autoCreate!==void 0)G.autoCreate=B.options.autoCreate;const E=J.collection(D,G);return Y.prototype.collection=E,Y.prototype.$collection=E,Y.prototype[_F]=E,Y.prototype.$__setSchema(B),qh(Y,B),zh(Y,B),VW1(Y,B),IW1(Y,B.s.hooks,B.statics),Y.schema=Y.prototype.$__schema,Y.collection=E,Y.$__collection=E,Y.Query=function(){bJ.apply(this,arguments)},Object.setPrototypeOf(Y.Query.prototype,bJ.prototype),Y.Query.base=bJ.base,Y.Query.prototype.constructor=bJ,Y._applyQueryMiddleware(),DC1(Y,B.query),Y};m.$__updateConnection=function F(A){this.db=A,this.prototype.db=A,this.prototype[gF]=A;const B=A.collection(this.collection.collectionName,this.collection.opts);this.prototype.collection=B,this.prototype.$collection=B,this.prototype[_F]=B,this.collection=B,this.$__collection=B};m.__subclass=function F(A,B,D){const J=this,Z=function E(W,C,H){if(!(this instanceof E))return new E(W,C,H);J.call(this,W,C,H)};if(Object.setPrototypeOf(Z,J),Object.setPrototypeOf(Z.prototype,J.prototype),Z.db=A,Z.prototype.db=A,Z.prototype[gF]=A,J[xF]=J[xF]||[],J[xF].push(Z),J.discriminators!=null){Z.discriminators={};for(let E of Object.keys(J.discriminators))Z.discriminators[E]=J.discriminators[E].__subclass(J.db,J.discriminators[E].schema,D)}const X=B&&typeof B!=="string"?B:J.prototype.$__schema,Y=X.options||{},$=X._userProvidedOptions||{};if(!D)D=J.prototype.$__schema.get("collection")||j1.toCollectionName(J.modelName,this.base.pluralize());const G={schemaUserProvidedOptions:$,capped:X&&Y.capped};return Z.prototype.collection=A.collection(D,G),Z.prototype.$collection=Z.prototype.collection,Z.prototype[_F]=Z.prototype.collection,Z.collection=Z.prototype.collection,Z.$__collection=Z.collection,Z.init().catch(()=>{}),Z};m.recompileSchema=function F(){if(this.prototype.$__setSchema(this.schema),this.schema._applyDiscriminators!=null)for(let A of this.schema._applyDiscriminators.keys())this.discriminator(A,this.schema._applyDiscriminators.get(A));LW1(this.schema,new WeakSet,!0)};m.inspect=function(){return`Model { ${this.modelName} }`};if(Eh.inspect.custom)m[Eh.inspect.custom]=m.inspect;/*!
 * Applies query middleware from this model's schema to this model's
 * Query constructor.
 */m._applyQueryMiddleware=function F(){const A=this.Query,B=this.schema.s.hooks.filter((D)=>{const J=JC1(D);if(D.name==="validate")return!!J.query;if(D.name==="deleteOne"||D.name==="updateOne")return!!J.query||Object.keys(J).length===0;if(D.query!=null||D.document!=null)return!!D.query;return!0});A.prototype._queryMiddleware=B};/*!
 * Module exports.
 */Nh.exports=Ih=m});var Mh=z((bF,Ph)=>{var YC1=function(F){let A;if(F=F.toLowerCase(),!~XC1.indexOf(F)){if(A=ZC1.filter(function(B){return F.match(B[0])}),A[0])return F.replace(A[0][0],A[0][1])}return F};Ph.exports=YC1;bF.pluralization=[[/human$/gi,"humans"],[/(m)an$/gi,"$1en"],[/(pe)rson$/gi,"$1ople"],[/(child)$/gi,"$1ren"],[/^(ox)$/gi,"$1en"],[/(ax|test)is$/gi,"$1es"],[/(octop|vir)us$/gi,"$1i"],[/(alias|status)$/gi,"$1es"],[/(bu)s$/gi,"$1ses"],[/(buffal|tomat|potat)o$/gi,"$1oes"],[/([ti])um$/gi,"$1a"],[/sis$/gi,"ses"],[/(?:([^f])fe|([lr])f)$/gi,"$1$2ves"],[/(hive)$/gi,"$1s"],[/([^aeiouy]|qu)y$/gi,"$1ies"],[/(x|ch|ss|sh)$/gi,"$1es"],[/(matr|vert|ind)ix|ex$/gi,"$1ices"],[/([m|l])ouse$/gi,"$1ice"],[/(kn|w|l)ife$/gi,"$1ives"],[/(quiz)$/gi,"$1zes"],[/^goose$/i,"geese"],[/s$/gi,"s"],[/([^a-z])$/,"$1"],[/$/gi,"s"]];var ZC1=bF.pluralization;bF.uncountables=["advice","energy","excretion","digestion","cooperation","health","justice","labour","machinery","equipment","information","pollution","sewage","paper","money","species","series","rain","rice","fish","sheep","moose","deer","news","expertise","status","media"];var XC1=bF.uncountables});var kh=z((gR1,Sh)=>{/*!
 * Module requirements
 */var uh=H1(),Th=import.meta.require("util"),jh=mG();class O4 extends uh{constructor(){super("");this.errors={}}toString(){return jh(this)}inspect(){return Object.assign(new Error(this.message),this)}addError(F,A){if(A instanceof O4){const{errors:B}=A;for(let D of Object.keys(B))this.addError(D,B[D]);return}this.errors[F]=A,this.message=jh(this)}}if(Th.inspect.custom)O4.prototype[Th.inspect.custom]=O4.prototype.inspect;Object.defineProperty(O4.prototype,"toJSON",{enumerable:!1,writable:!1,configurable:!0,value:function(){return Object.assign({},this,{name:this.name,message:this.message})}});Object.defineProperty(O4.prototype,"name",{value:"SetOptionError"});class Oh extends uh{constructor(F){super(`"${F}" is not a valid option to set`)}}O4.SetOptionInnerError=Oh;/*!
 * Module exports
 */Sh.exports=O4});var fh=z(()=>{var xh=D1();if(typeof jest!=="undefined"&&!process.env.SUPPRESS_JEST_WARNINGS){if(typeof window!=="undefined")xh.warn("Mongoose: looks like you\'re trying to test a Mongoose app with Jest\'s default jsdom test environment. Please make sure you read Mongoose\'s docs on configuring Jest to test Node.js apps: https://mongoosejs.com/docs/jest.html. Set the SUPPRESS_JEST_WARNINGS to true to hide this warning.");if(setTimeout.clock!=null&&typeof setTimeout.clock.Date==="function")xh.warn("Mongoose: looks like you\'re trying to test a Mongoose app with Jest\'s mock timers enabled. Please make sure you read Mongoose\'s docs on configuring Jest to test Node.js apps: https://mongoosejs.com/docs/jest.html. Set the SUPPRESS_JEST_WARNINGS to true to hide this warning.")}});var hh=z((yh,vh)=>{var Q6=function(F,A,B,D,J){if(!(this instanceof Q6))return new Q6(F,A,B,D,J);if(CC1(A)&&!A.instanceOfSchema)A=new $C1(A);if(A=this.schema||A,!this.schema&&A.options._id){if(F=F||{},F._id===void 0)F._id=new GC1}if(!A)throw new bh.MissingSchemaError;this.$__setSchema(A),_h.call(this,F,B,D,J),WC1(this,A,{decorateDoc:!0});for(let Z in A.methods)this[Z]=A.methods[Z];for(let Z in A.statics)this[Z]=A.statics[Z]};/*!
 * Module dependencies.
 */var _h=u2(),gh=import.meta.require("events").EventEmitter,bh=W2(),$C1=o7(),GC1=H3(),EC1=bh.ValidationError,WC1=jD(),CC1=r3();/*!
 * Inherit from the NodeJS document
 */Q6.prototype=Object.create(_h.prototype);Q6.prototype.constructor=Q6;/*!
 * ignore
 */Q6.events=new gh;/*!
 * Browser doc exposes the event emitter API
 */Q6.$emitter=new gh;["on","once","emit","listeners","removeListener","setMaxListeners","removeAllListeners","addListener"].forEach(function(F){Q6[F]=function(){return Q6.$emitter[F].apply(Q6.$emitter,arguments)}});/*!
 * Module exports.
 */Q6.ValidationError=EC1;vh.exports=yh=Q6});var dh=z((vR1,OH)=>{/*!
 * Module dependencies.
 */var HC1=u2(),qC1=hh(),mh=!1;OH.exports=function F(){if(mh)return qC1;return HC1};/*!
 * ignore
 */OH.exports.setBrowser=function(F){mh=F}});var oh=z((rh,th)=>{var i=function(F){if(this.connections=[],this.nextConnectionId=0,this.models={},this.events=new zC1,this.__driver=ih.get(),this.options=Object.assign({pluralization:!0,autoIndex:!0,autoCreate:!0,autoSearchIndex:!1},F),(kH.getOption("createInitialConnection",this.options)??!0)&&this.__driver!=null){const B=this.createConnection();B.models=this.models}if(this.options.pluralization)this._pluralize=IC1;if(!F||!F[nh]){const B=this;this.Schema=function(){return this.base=B,i3.apply(this,arguments)},this.Schema.prototype=Object.create(i3.prototype),Object.assign(this.Schema,i3),this.Schema.base=this,this.Schema.Types=Object.assign({},i3.Types)}else for(let B of["Schema","model"])this[B]=i.prototype[B];if(this.Schema.prototype.base=this,F?.transactionAsyncLocalStorage)this.transactionAsyncLocalStorage=new ah;Object.defineProperty(this,"plugins",{configurable:!1,enumerable:!0,writable:!1,value:Object.values(RC1).map((B)=>[B,{deduplicate:!0}])})};/*!
 * Module dependencies.
 */var KC1=u2(),zC1=import.meta.require("events").EventEmitter,lh=h7(),i3=o7(),UC1=O0(),yF=XF(),QC1=tE(),SH=v9(),ch=Ug(),LC1=A8(),VC1=RJ(),ph=YH(),wC1=YC(),RC1=fW(),ih=YJ(),IC1=Mh(),kH=D1(),NC1=CC(),PC1=w9(),MC1=JH(),TC1=y9().trusted,jC1=iC(),uC1=L2(),cJ=H1(),dJ=kh(),OC1=XH(),nh=Symbol.for("mongoose:default");fh();var SC1=/^[0-9A-Fa-f]{24}$/,{AsyncLocalStorage:ah}=import.meta.require("async_hooks");i.prototype.cast=PC1;i.prototype.STATES=SH;i.prototype.ConnectionStates=SH;i.prototype.driver=ih;i.prototype.setDriver=function F(A){const B=this instanceof i?this:Q2;if(B.__driver===A)return B;if(B.connections&&B.connections.find((X)=>X.readyState!==SH.disconnected))throw new cJ("Cannot modify Mongoose driver if a connection is already open. Call `mongoose.disconnect()` before modifying the driver");B.__driver=A;const J=A.Connection,Z=B.connections[0];if(B.connections=[new J(B)],B.connections[0].models=B.models,Z==null)return B;for(let X of Object.values(B.models)){if(X.db!==Z)continue;X.$__updateConnection(B.connections[0])}return B};i.prototype.set=function(F,A){const B=this instanceof i?this:Q2;if(arguments.length===1&&typeof F!=="object"){if(ch.indexOf(F)===-1){const Z=new dJ;throw Z.addError(F,new dJ.SetOptionInnerError(F)),Z}return B.options[F]}let D={};if(arguments.length===2)D={[F]:A};if(arguments.length===1&&typeof F==="object")D=F;let J=void 0;for(let[Z,X]of Object.entries(D)){if(ch.indexOf(Z)===-1){if(!J)J=new dJ;J.addError(Z,new dJ.SetOptionInnerError(Z));continue}if(B.options[Z]=X,Z==="objectIdGetter")if(X)Object.defineProperty(B.Types.ObjectId.prototype,"_id",{enumerable:!1,configurable:!0,get:function(){return this}});else delete B.Types.ObjectId.prototype._id;else if(Z==="transactionAsyncLocalStorage"){if(X&&!B.transactionAsyncLocalStorage)B.transactionAsyncLocalStorage=new ah;else if(!X&&B.transactionAsyncLocalStorage)delete B.transactionAsyncLocalStorage}}if(J)throw J;return B};i.prototype.get=i.prototype.set;i.prototype.createConnection=function(F,A){const B=this instanceof i?this:Q2,J=new B.__driver.Connection(B);if(B.connections.push(J),B.nextConnectionId++,B.events.emit("createConnection",J),arguments.length>0)J.openUri(F,{...A,_fireAndForget:!0});return J};i.prototype.connect=async function F(A,B){if(typeof B==="function"||arguments.length>=3&&typeof arguments[2]==="function")throw new cJ("Mongoose.prototype.connect() no longer accepts a callback");const D=this instanceof i?this:Q2;return D.connection.openUri(A,B).then(()=>D)};i.prototype.disconnect=async function F(){if(arguments.length>=1&&typeof arguments[0]==="function")throw new cJ("Mongoose.prototype.disconnect() no longer accepts a callback");const A=this instanceof i?this:Q2;if(A.connections.length<=0)return;await Promise.all(A.connections.map((D)=>D.close()))};i.prototype.startSession=function(){const F=this instanceof i?this:Q2;return F.connection.startSession.apply(F.connection,arguments)};i.prototype.pluralize=function(F){const A=this instanceof i?this:Q2;if(arguments.length>0)A._pluralize=F;return A._pluralize};i.prototype.model=function(F,A,B,D){const J=this instanceof i?this:Q2;if(typeof A==="string")B=A,A=!1;if(arguments.length===1){const $=J.models[F];if(!$)throw new cJ.MissingSchemaError(F);return $}if(kH.isObject(A)&&!(A instanceof i3))A=new i3(A);if(A&&!(A instanceof i3))throw new Error("The 2nd parameter to `mongoose.model()` should be a schema or a POJO");D=D||{};const Z=A;if(A){if(J.get("cloneSchemas"))A=A.clone();J._applyPlugins(A)}const X=J.options.hasOwnProperty("overwriteModels")?J.options.overwriteModels:D.overwriteModels;if(J.models.hasOwnProperty(F)&&D.cache!==!1&&X!==!0){if(Z&&Z.instanceOfSchema&&Z!==J.models[F].schema)throw new J.Error.OverwriteModelError(F);if(B&&B!==J.models[F].collection.name){const $=J.models[F];return A=$.prototype.schema,$.__subclass(J.connection,A,B)}return J.models[F]}if(A==null)throw new J.Error.MissingSchemaError(F);const Y=J._model(F,A,B,D);return J.connection.models[F]=Y,J.models[F]=Y,Y};/*!
 * ignore
 */i.prototype._model=function(F,A,B,D){const J=this instanceof i?this:Q2;let Z;if(typeof F==="function"){if(Z=F,F=Z.name,!(Z.prototype instanceof ph))throw new J.Error("The provided class "+F+" must extend Model")}if(A){if(J.get("cloneSchemas"))A=A.clone();J._applyPlugins(A)}if(A==null||!("pluralization"in A.options))A.options.pluralization=J.options.pluralization;if(!B)B=A.get("collection")||kH.toCollectionName(F,J.pluralize());const X=D.connection||J.connection;if(Z=J.Model.compile(Z||F,A,B,X,J),Z.init().catch(function Y(){}),X.emit("model",Z),A._applyDiscriminators!=null)for(let Y of A._applyDiscriminators.keys()){const{schema:$,options:G}=A._applyDiscriminators.get(Y);Z.discriminator(Y,$,G)}return OC1(A),Z};i.prototype.deleteModel=function(F){const A=this instanceof i?this:Q2;return A.connection.deleteModel(F),delete A.models[F],A};i.prototype.modelNames=function(){const F=this instanceof i?this:Q2;return Object.keys(F.models)};i.prototype._applyPlugins=function(F,A){const B=this instanceof i?this:Q2;A=A||{},A.applyPluginsToDiscriminators=B.options&&B.options.applyPluginsToDiscriminators||!1,A.applyPluginsToChildSchemas=typeof(B.options&&B.options.applyPluginsToChildSchemas)==="boolean"?B.options.applyPluginsToChildSchemas:!0,wC1(F,B.plugins,A,"$globalPluginsApplied")};i.prototype.plugin=function(F,A){const B=this instanceof i?this:Q2;return B.plugins.push([F,A]),B};i.prototype.__defineGetter__("connection",function(){return this.connections[0]});i.prototype.__defineSetter__("connection",function(F){if(F instanceof this.__driver.Connection)this.connections[0]=F,this.models=F.models});i.prototype.connections;i.prototype.nextConnectionId;i.prototype.Aggregate=MC1;Object.defineProperty(i.prototype,"Collection",{get:function(){return this.__driver.Collection},set:function(F){this.__driver.Collection=F}});Object.defineProperty(i.prototype,"Connection",{get:function(){return this.__driver.Connection},set:function(F){if(F===this.__driver.Connection)return;this.__driver.Connection=F}});i.prototype.version=NC1.version;i.prototype.Mongoose=i;i.prototype.Schema=i3;i.prototype.SchemaType=UC1;i.prototype.SchemaTypes=i3.Types;i.prototype.VirtualType=QC1;i.prototype.Types=LC1;i.prototype.Query=VC1;i.prototype.Model=ph;i.prototype.Document=KC1;i.prototype.DocumentProvider=dh();i.prototype.ObjectId=yF.ObjectId;i.prototype.isValidObjectId=function(F){return(this instanceof i?this:Q2).Types.ObjectId.isValid(F)};i.prototype.isObjectIdOrHexString=function(F){return uC1(F,"ObjectId")||typeof F==="string"&&SC1.test(F)};i.prototype.syncIndexes=function(F){return(this instanceof i?this:Q2).connection.syncIndexes(F)};i.prototype.Decimal128=yF.Decimal128;i.prototype.Mixed=yF.Mixed;i.prototype.Date=yF.Date;i.prototype.Number=yF.Number;i.prototype.Error=W2();i.prototype.MongooseError=H1();i.prototype.now=function F(){return new Date};i.prototype.CastError=E2();i.prototype.SchemaTypeOptions=s2();i.prototype.mquery=lC();i.prototype.sanitizeFilter=jC1;i.prototype.trusted=TC1;i.prototype.skipMiddlewareFunction=lh.skipWrappedFunction;i.prototype.overwriteMiddlewareResult=lh.overwriteResult;i.prototype.omitUndefined=EW();var Q2=th.exports=rh=new i({[nh]:!0})});var Am=z((hR1,Fm)=>{/*!
 * Module dependencies.
 */var eh=Kg();YJ().set(eh);var xH=oh();xH.setDriver(eh);xH.Mongoose.prototype.mongo=lB();Fm.exports=xH});var vF=z((mR1,A1)=>{var B1=Am();A1.exports=B1;A1.exports.default=B1;A1.exports.mongoose=B1;A1.exports.cast=B1.cast;A1.exports.STATES=B1.STATES;A1.exports.setDriver=B1.setDriver;A1.exports.set=B1.set;A1.exports.get=B1.get;A1.exports.createConnection=B1.createConnection;A1.exports.connect=B1.connect;A1.exports.disconnect=B1.disconnect;A1.exports.startSession=B1.startSession;A1.exports.pluralize=B1.pluralize;A1.exports.model=B1.model;A1.exports.deleteModel=B1.deleteModel;A1.exports.modelNames=B1.modelNames;A1.exports.plugin=B1.plugin;A1.exports.connections=B1.connections;A1.exports.version=B1.version;A1.exports.Mongoose=B1.Mongoose;A1.exports.Schema=B1.Schema;A1.exports.SchemaType=B1.SchemaType;A1.exports.SchemaTypes=B1.SchemaTypes;A1.exports.VirtualType=B1.VirtualType;A1.exports.Types=B1.Types;A1.exports.Query=B1.Query;A1.exports.Model=B1.Model;A1.exports.Document=B1.Document;A1.exports.ObjectId=B1.ObjectId;A1.exports.isValidObjectId=B1.isValidObjectId;A1.exports.isObjectIdOrHexString=B1.isObjectIdOrHexString;A1.exports.syncIndexes=B1.syncIndexes;A1.exports.Decimal128=B1.Decimal128;A1.exports.Mixed=B1.Mixed;A1.exports.Date=B1.Date;A1.exports.Number=B1.Number;A1.exports.Error=B1.Error;A1.exports.MongooseError=B1.MongooseError;A1.exports.now=B1.now;A1.exports.CastError=B1.CastError;A1.exports.SchemaTypeOptions=B1.SchemaTypeOptions;A1.exports.mongo=B1.mongo;A1.exports.mquery=B1.mquery;A1.exports.sanitizeFilter=B1.sanitizeFilter;A1.exports.trusted=B1.trusted;A1.exports.skipMiddlewareFunction=B1.skipMiddlewareFunction;A1.exports.overwriteMiddlewareResult=B1.overwriteMiddlewareResult});var lJ=dF(vF(),1);class Bm{async connect(F){if(!F)throw new Error("DB URI is not valid.");console.log("Connecting to database..."),await lJ.default.connect(F).catch((A)=>console.error("Unable to connect to the database:",A)),lJ.default.connection.on("open",()=>{console.log("Database connection is ready.")}),lJ.default.connection.on("error",(A)=>{console.error("Database connection error:",A)})}}var w8=dF(vF(),1),Dm=new w8.Schema({owner:{type:w8.Schema.Types.ObjectId,ref:"user",required:!0,index:!0},parent:{type:w8.Schema.Types.ObjectId,ref:"category",index:!0},nickname:{type:String,required:!0,trim:!0},type:{type:Number,required:!0,index:!0},email:{type:String,required:!0,unique:!0,lowercase:!0},deviceAuth:{required:!0,type:{accountId:{type:String,required:!0,unique:!0,lowercase:!0,trim:!0},deviceId:{type:String,required:!0,lowercase:!0,trim:!0},secret:{type:String,required:!0,trim:!0}}}});Dm.set("toJSON",{transform:(F,A)=>{A.id=A._id,delete A._id,delete A.__v}});var kC1=w8.model("bot",Dm);var xC1;((F)=>{F[F.Public=0]="Public",F[F.Private=1]="Private"})(xC1||={});var fC1;((F)=>{F[F.Offline=0]="Offline",F[F.Booting=1]="Booting",F[F.Available=2]="Available",F[F.Busy=3]="Busy",F[F.Disconnected=4]="Disconnected"})(fC1||={});var fH;((F)=>{F.Win="WIN",F.Mac="MAC",F.Psn="PSN",F.Xbl="XBL",F.Swt="SWT",F.Ios="IOS",F.And="AND",F.Ps5="PS5",F.Xsx="XSX"})(fH||={});var _H;((F)=>{F[F.Public=0]="Public",F[F.Private=1]="Private"})(_H||={});var hF;((F)=>{F[F.Equals=0]="Equals",F[F.Includes=1]="Includes",F[F.StartsWith=2]="StartsWith",F[F.EndsWith=3]="EndsWith"})(hF||={});var S4;((F)=>{F[F.ChatBan=0]="ChatBan",F[F.Kick=1]="Kick",F[F.Block=2]="Block",F[F.RemoveFriend=3]="RemoveFriend",F[F.AddFriend=4]="AddFriend",F[F.Promote=5]="Promote",F[F.Copy=6]="Copy",F[F.Mimic=7]="Mimic",F[F.Hide=8]="Hide",F[F.Show=9]="Show",F[F.Blacklist=10]="Blacklist",F[F.Whitelist=11]="Whitelist"})(S4||={});var pJ;((F)=>{F.Default="en",F.De="de",F.Es="es",F.Fr="fr",F.It="it",F.Pl="pl",F.Pt="pt",F.Tr="tr"})(pJ||={});var mF=dF(vF(),1),Jm=new mF.Schema({owner:{type:mF.Schema.Types.ObjectId,ref:"user",required:!0,index:!0},name:{type:String,required:!0,trim:!0},config:{replyLangs:{type:[String],enum:Object.values(pJ)},searchLangs:{type:[String],enum:Object.values(pJ)},platform:{type:[String],enum:Object.values(fH)},privacy:{type:String,enum:Object.values(_H)},prefixes:{type:[String]},extraOwners:{type:[String]},admins:{type:[String]},whitelistUsers:{type:[String]},blacklistUsers:{type:[String]},excludedAutoAddFriends:{type:[String]},otherBots:{type:[String]},statusText:{type:[String]},statusInterval:{type:[Number]},level:{type:[Number]},bpLevel:{type:[Number]},disableMatchmakingChecks:{type:[Boolean]},disableJoinMessages:{type:[Boolean]},inviteTimeout:{type:Number},maxBotsPerLobby:{type:Number},maxBotsPerLobbyWithOwner:{type:Number},maxBotsPerLobbyWithAdmin:{type:Number},maxBotsPerLobbyWithWhitelistUser:{type:Number},allowMatchmaking:{type:Boolean},acceptFriendRequests:{type:Boolean},sendFriendRequestOnJoinParty:{type:Boolean},sendFriendRequestOnMemberJoinParty:{type:Boolean},runCommandsWithoutPrefix:{type:Boolean},setCosmeticsWithoutCommands:{type:Boolean},usernameTriggers:{type:[{triggers:{type:[String]},detectionMethods:{type:[Number],enum:Object.values(hF)},actions:{type:[Number],enum:Object.values(S4)},messages:{type:[String]}}]},messageContentTriggers:{type:[{triggers:{type:[String]},detectionMethods:{type:[Number],enum:Object.values(hF)},actions:{type:[Number],enum:Object.values(S4)},messages:{type:[String]}}]},cosmeticTriggers:{type:[{triggers:{type:[String]},detectionMethods:{type:[Number],enum:Object.values(hF)},actions:{type:[Number],enum:Object.values(S4)},messages:{type:[String]}}]},addFriendTrigger:{type:[{actions:{type:[Number],enum:Object.values(S4)},messages:{type:[String]}}]},memberJoinTrigger:{type:[{actions:{type:[Number],enum:Object.values(S4)},messages:{type:[String]}}]},changeCosmeticTrigger:{type:[{actions:{type:[Number],enum:Object.values(S4)},messages:{type:[String]}}]},onlyOwnerCommands:{type:[String]},onlyAdminCommands:{type:[String]},onlyWhitelistUsersCommands:{type:[String]},onlyFriendsCommands:{type:[String]},onlyPartyMembersCommands:{type:[String]},onlyWhisperCommands:{type:[String]},startOutfit:{type:[String]},startOutfitVariants:{type:[[[Number]]]},startBackpack:{type:[String]},startBackpackVariants:{type:[[[Number]]]},startPickaxe:{type:[String]},startPickaxeVariants:{type:[[[Number]]]},startBanner:{type:[String]},joinOutfit:{type:[String]},joinOutfitVariants:{type:[[[Number]]]},joinBackpack:{type:[String]},joinBackpackVariants:{type:[[[Number]]]},joinPickaxe:{type:[String]},joinPickaxeVariants:{type:[[[Number]]]},joinEmote:{type:[String]},joinEmoji:{type:[String]},joinBanner:{type:[String]},memberJoinOutfit:{type:[String]},memberJoinOutfitVariants:{type:[[[Number]]]},memberJoinBackpack:{type:[String]},memberJoinBackpackVariants:{type:[[[Number]]]},memberJoinPickaxe:{type:[String]},memberJoinPickaxeVariants:{type:[[[Number]]]},memberJoinEmote:{type:[String]},memberJoinEmoji:{type:[String]},memberJoinBanner:{type:[String]}}});Jm.set("toJSON",{transform:(F,A)=>{A.id=A._id,delete A._id,delete A.__v}});var _C1=mF.model("category",Jm);var iJ=dF(vF(),1),nJ=new iJ.Schema({token:{type:String,required:!0,unique:!0},username:{type:String,required:!0,trim:!0},email:{type:String,index:!0,required:!0,unique:!0,lowercase:!0,trim:!0},password:{type:String,required:!0},apiToken:{type:String,required:!0,unique:!0,trim:!0},connections:{discord:{id:{type:String,index:!0,unique:!0,sparse:!0},username:{type:String}},epic:{id:{type:String,index:!0,unique:!0,sparse:!0},username:{type:String}}}});nJ.pre("save",async function(F){const A=this;if(!this.isModified("password"))return F();try{return A.password=await Bun.password.hash(A.password,{algorithm:"argon2id",timeCost:parseInt(process.env.HASH_ROUNDS??"3")}),F()}catch(B){return F(B)}});nJ.method("comparePassword",async function(F){return Bun.password.verify(F,this.password)});nJ.set("toJSON",{transform:(F,A)=>{A.id=A._id,delete A._id,delete A.__v}});var gC1=iJ.model("user",nJ);export{gC1 as UserModel,Bm as DatabaseClient,_C1 as CategoryModel,kC1 as BotModel};
